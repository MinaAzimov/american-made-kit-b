!function(e,t){"function"==typeof define&&define.amd?define(["ScrollMagic"],t):t("object"==typeof exports?require("scrollmagic"):e.ScrollMagic||e.jQuery&&e.jQuery.ScrollMagic)}(this,function(e){"use strict";var t="debug.addIndicators",i=window.console||{},o=Function.prototype.bind.call(i.error||i.log||function(){},i);e||o("("+t+") -> ERROR: The ScrollMagic main module could not be found. Please make sure it's loaded before this plugin or use an asynchronous loader like requirejs.");var n=e._util,r=0;e.Scene.extend(function(){var e,t=this;t.addIndicators=function(i){if(!e){var o={name:"",indent:0,parent:void 0,colorStart:"green",colorEnd:"red",colorTrigger:"blue"};i=n.extend({},o,i),r++,e=new s(t,i),t.on("add.plugin_addIndicators",e.add),t.on("remove.plugin_addIndicators",e.remove),t.on("destroy.plugin_addIndicators",t.removeIndicators),t.controller()&&e.add()}return t},t.removeIndicators=function(){return e&&(e.remove(),this.off("*.plugin_addIndicators"),e=void 0),t}}),e.Controller.addOption("addIndicators",!1),e.Controller.extend(function(){var i=this,o=i.info(),r=o.container,s=o.isDocument,a=o.vertical,l={groups:[]};i._indicators&&function(){i._log&&(Array.prototype.splice.call(arguments,1,0,"("+t+")","->"),i._log.apply(this,arguments))}(2,"WARNING: Scene already has a property '_indicators', which will be overwritten by plugin."),this._indicators=l;var d=function(){l.updateBoundsPositions()},c=function(){l.updateTriggerGroupPositions()};return r.addEventListener("resize",c),s||(window.addEventListener("resize",c),window.addEventListener("scroll",c)),r.addEventListener("resize",d),r.addEventListener("scroll",d),this._indicators.updateBoundsPositions=function(e){for(var t,i,o,s=e?[n.extend({},e.triggerGroup,{members:[e]})]:l.groups,d=s.length,c={},p=a?"left":"top",u=a?"width":"height",h=a?n.get.scrollLeft(r)+n.get.width(r)-15:n.get.scrollTop(r)+n.get.height(r)-15;d--;)for(t=(o=s[d]).members.length,i=n.get[u](o.element.firstChild);t--;)c[p]=h-i,n.css(o.members[t].bounds,c)},this._indicators.updateTriggerGroupPositions=function(e){for(var t,o,d,c,p=e?[e]:l.groups,u=p.length,h=s?document.body:r,g=s?{top:0,left:0}:n.get.offset(h,!0),f=a?n.get.width(r)-15:n.get.height(r)-15,m=a?"width":"height",v=a?"Y":"X";u--;)o=(t=p[u]).element,c=(d=t.triggerHook*i.info("size"))>n.get[m](o.firstChild.firstChild)?"translate"+v+"(-100%)":"",n.css(o,{top:g.top+(a?d:f-t.members[0].options.indent),left:g.left+(a?f-t.members[0].options.indent:d)}),n.css(o.firstChild.firstChild,{"-ms-transform":c,"-webkit-transform":c,transform:c})},this._indicators.updateTriggerGroupLabel=function(e){var t="trigger"+(e.members.length>1?"":" "+e.members[0].options.name),i=e.element.firstChild.firstChild;i.textContent!==t&&(i.textContent=t,a&&l.updateBoundsPositions())},this.addScene=function(t){this._options.addIndicators&&t instanceof e.Scene&&t.controller()===i&&t.addIndicators(),this.$super.addScene.apply(this,arguments)},this.destroy=function(){r.removeEventListener("resize",c),s||(window.removeEventListener("resize",c),window.removeEventListener("scroll",c)),r.removeEventListener("resize",d),r.removeEventListener("scroll",d),this.$super.destroy.apply(this,arguments)},i});var s=function(e,i){var o,s,l=this,d=a.bounds(),c=a.start(i.colorStart),p=a.end(i.colorEnd),u=i.parent&&n.get.elements(i.parent)[0],h=function(){e._log&&(Array.prototype.splice.call(arguments,1,0,"("+t+")","->"),e._log.apply(this,arguments))};i.name=i.name||r,c.firstChild.textContent+=" "+i.name,p.textContent+=" "+i.name,d.appendChild(c),d.appendChild(p),l.options=i,l.bounds=d,l.triggerGroup=void 0,this.add=function(){s=e.controller(),o=s.info("vertical");var t=s.info("isDocument");u||(u=t?document.body:s.info("container")),t||"static"!==n.css(u,"position")||n.css(u,{position:"relative"}),e.on("change.plugin_addIndicators",f),e.on("shift.plugin_addIndicators",g),T(),b(),setTimeout(function(){s._indicators.updateBoundsPositions(l)},0),h(3,"added indicators")},this.remove=function(){if(l.triggerGroup){if(e.off("change.plugin_addIndicators",f),e.off("shift.plugin_addIndicators",g),l.triggerGroup.members.length>1){var t=l.triggerGroup;t.members.splice(t.members.indexOf(l),1),s._indicators.updateTriggerGroupLabel(t),s._indicators.updateTriggerGroupPositions(t),l.triggerGroup=void 0}else y();v(),h(3,"removed indicators")}};var g=function(){b()},f=function(e){"triggerHook"===e.what&&T()},m=function(){var e=s.info("vertical");n.css(c.firstChild,{"border-bottom-width":e?1:0,"border-right-width":e?0:1,bottom:e?-1:i.indent,right:e?i.indent:-1,padding:e?"0 8px":"2px 4px"}),n.css(p,{"border-top-width":e?1:0,"border-left-width":e?0:1,top:e?"100%":"",right:e?i.indent:"",bottom:e?"":i.indent,left:e?"":"100%",padding:e?"0 8px":"2px 4px"}),u.appendChild(d)},v=function(){d.parentNode.removeChild(d)},b=function(){d.parentNode!==u&&m();var t={};t[o?"top":"left"]=e.triggerPosition(),t[o?"height":"width"]=e.duration(),n.css(d,t),n.css(p,{display:e.duration()>0?"":"none"})},w=function(){var t=a.trigger(i.colorTrigger),r={};r[o?"right":"bottom"]=0,r[o?"border-top-width":"border-left-width"]=1,n.css(t.firstChild,r),n.css(t.firstChild.firstChild,{padding:o?"0 8px 3px 8px":"3px 4px"}),document.body.appendChild(t);var d={triggerHook:e.triggerHook(),element:t,members:[l]};s._indicators.groups.push(d),l.triggerGroup=d,s._indicators.updateTriggerGroupLabel(d),s._indicators.updateTriggerGroupPositions(d)},y=function(){s._indicators.groups.splice(s._indicators.groups.indexOf(l.triggerGroup),1),l.triggerGroup.element.parentNode.removeChild(l.triggerGroup.element),l.triggerGroup=void 0},T=function(){var t=e.triggerHook();if(!l.triggerGroup||Math.abs(l.triggerGroup.triggerHook-t)>=1e-4){for(var i,o=s._indicators.groups,n=o.length;n--;)if(i=o[n],Math.abs(i.triggerHook-t)<1e-4)return l.triggerGroup&&(1===l.triggerGroup.members.length?y():(l.triggerGroup.members.splice(l.triggerGroup.members.indexOf(l),1),s._indicators.updateTriggerGroupLabel(l.triggerGroup),s._indicators.updateTriggerGroupPositions(l.triggerGroup))),i.members.push(l),l.triggerGroup=i,void s._indicators.updateTriggerGroupLabel(i);if(l.triggerGroup){if(1===l.triggerGroup.members.length)return l.triggerGroup.triggerHook=t,void s._indicators.updateTriggerGroupPositions(l.triggerGroup);l.triggerGroup.members.splice(l.triggerGroup.members.indexOf(l),1),s._indicators.updateTriggerGroupLabel(l.triggerGroup),s._indicators.updateTriggerGroupPositions(l.triggerGroup),l.triggerGroup=void 0}w()}}},a={start:function(e){var t=document.createElement("div");t.textContent="start",n.css(t,{position:"absolute",overflow:"visible","border-width":0,"border-style":"solid",color:e,"border-color":e});var i=document.createElement("div");return n.css(i,{position:"absolute",overflow:"visible",width:0,height:0}),i.appendChild(t),i},end:function(e){var t=document.createElement("div");return t.textContent="end",n.css(t,{position:"absolute",overflow:"visible","border-width":0,"border-style":"solid",color:e,"border-color":e}),t},bounds:function(){var e=document.createElement("div");return n.css(e,{position:"absolute",overflow:"visible","white-space":"nowrap","pointer-events":"none","font-size":"0.85em"}),e.style.zIndex="9999",e},trigger:function(e){var t=document.createElement("div");t.textContent="trigger",n.css(t,{position:"relative"});var i=document.createElement("div");n.css(i,{position:"absolute",overflow:"visible","border-width":0,"border-style":"solid",color:e,"border-color":e}),i.appendChild(t);var o=document.createElement("div");return n.css(o,{position:"fixed",overflow:"visible","white-space":"nowrap","pointer-events":"none","font-size":"0.85em"}),o.style.zIndex="9999",o.appendChild(i),o}}});