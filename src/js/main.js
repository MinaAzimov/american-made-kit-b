var app={dispatcher:new Dispatcher,sections:["home_sec","story_sec","castncrew_sec","gallery_sec","videos_sec","tickets_sec"],sectionNames:["home","story","castncrew","gallery","videos","tickets"],device:Detectizr.device.type,browser:Detectizr.browser.name,version:parseInt(Detectizr.browser.version),curDate:new Date,fridayDate:new Date("2016-08-08 00:00:00".replace(/-/g,"/")),eveDate:new Date("2016-08-11 00:00:00".replace(/-/g,"/")),liveDate:new Date("2016-08-12 00:00:00".replace(/-/g,"/")),init:function(){app.scrollView=new scrollView(app.dispatcher),app.scrollView.init(),app.homeView=new homeView(document.body,app.dispatcher),app.homeView.init(),app.footerView=new footerView(app.dispatcher),app.footerView.init(),app.storyView=new storyView(app.dispatcher),app.storyView.init(),app.castncrewView=new castncrewView(app.dispatcher),app.castncrewView.init(),app.galleryView=new galleryView(app.dispatcher),app.galleryView.init(),app.videosView=new videosView(app.dispatcher),app.videosView.init(),app.ticketsView=new ticketsView(app.dispatcher),app.ticketsView.init(),app.browserMute(),app.dateCheck(),app.bindEvents(),app.resize(),window.innerWidth,"mobile"!==app.device&&app.hashCheck(),window.onbeforeunload=function(){}},loadHome:function(){$("#safari-page").load("external.html"),window.onresize=function(){window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},$(window).resize(function(){var e=$(window).width();$(window).height();e<767&&"mobile"!==app.device&&($("#safari-page").hide(),$("#safari-page").css("display","none"),$("#splash").show()),e>767&&"mobile"!==app.device&&($("#safari-page").show(),$("#splash").hide(),$("#splash").css("display","none"))})},browserCheckFireFox:function(){switch(app.browser){case"firefox":"mobile"!==app.device&&$("#s1_fg_video").attr("src","img/videos_mobile_bg.jpg"),$("#s1_fg_video").attr("type","img/jpg"),$("#s1_fg").css("display","block"),$("#safari-page").hide(),$("#main").show();break;case"opera":case"opera mini":"mobile"!==app.device&&$("#main").show(),$("#splash").hide(),$("#safari-page").hide();break;case"opera mini":case"opera mobi":"mobile"==app.device&&$("#splash").show(),$("#main").hide(),$("#safari-page").hide();break;case"chrome":"mobile"!==app.device&&$("#safari-page").hide(),$("#main").show();break;case"safari":"mobile"!==app.device&&app.loadHome();break;case"ie":"mobile"!==app.device&&$("#safari-page").hide(),$("#main").show();break;default:$("#upgrade").css("display","none")}},onAnalyticsEvent:function(e,i){ga("send",i)},resize:function(e){var a=["#home_text1","#home_text2","#home_text3","#home_text4"];for(i=0;i<a.length;i++)$(a[i]).css({left:.5*window.innerWidth-.5*$(a[i]).width()+"px"});"mobile"!=Detectizr.device.type&&$("#home_fg").css("left",.5*window.innerWidth-.5*$("#home_fg").width()+"px"),$("#videos_fg").css("left",.5*window.innerWidth-.5*$("#videos_fg").width()+"px")},browserMute:function(){},browserCheck:function(){switch(app.browser){case"chrome":app.version<=49&&$("#upgrade").css("display","block");break;case"firefox":app.version<=44&&$("#upgrade").css("display","block");break;case"safari":"mobile"!==app.device&&$("#safari-page").show(),$("#main").hide();break;case"opera":"mobile"!==app.device&&$("#main").show(),$("#splash").hide(),$("#safari-page").hide();break;case"ie":"mobile"!==app.device&&$("#upgrade-safari").css("display","block");break;default:$("#upgrade").css("display","none")}},dateCheck:function(){app.curDate>app.liveDate?$(".datechange").html(data.info.live_date):app.curDate>app.eveDate?$(".datechange").html(data.info.eve_date):app.curDate>app.fridayDate?$(".datechange").html(data.info.friday_date):$(".datechange").html(data.info.default_date)},onScroll:function(e){e.preventDefault(),e.stopPropagation()},preventDefault:function(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.returnValue=!1},doOnOrientationChange:function(){switch(window.orientation){case-90:case 90:app.resize();break;case 0:app.resize()}},bindEvents:function(){app.dispatcher.addEventlistener("ANALYTICS",app.onAnalyticsEvent),"desktop"==app.device&&$(window).resize(app.resize),app.dispatcher.addEventlistener("TOGGLE_SCROLL",app.toggleScroll),window.addEventListener("orientationchange",this.doOnOrientationChange)},toggleScroll:function(e,i){window.ontouchmove=i?app.preventDefault:null},hashCheck:function(){for(var e=window.location.hash.substring(1),i=0,a=0;a<app.sections.length;a++)app.sections[a]===e&&(i=a);app.dispatcher.dispatch("HASH_EVENT",i)}};window.onload=app.init,Function.prototype.bind=function(e){var i=this;return function(){return i.apply(e,arguments)}};var vis=function(){var e,i,a={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(e in a)if(e in document){i=a[e];break}return function(a){return a&&document.addEventListener(i,a),!document[e]}}();