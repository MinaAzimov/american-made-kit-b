/*! KineticJS v5.1.0 2014-03-27 http://www.kineticjs.com by Eric Rowell @ericdrowell - MIT License https://github.com/ericdrowell/KineticJS/wiki/License*/
var Kinetic={};!function(a){var b=Math.PI/180;Kinetic={version:"5.1.0",stages:[],idCounter:0,ids:{},names:{},shapes:{},listenClickTap:!1,inDblClickWindow:!1,enableTrace:!1,traceArrMax:100,dblClickWindow:400,pixelRatio:void 0,dragDistance:0,angleDeg:!0,UA:function(){var b=a.navigator&&a.navigator.userAgent||"",c=b.toLowerCase(),d=/(chrome)[ \/]([\w.]+)/.exec(c)||/(webkit)[ \/]([\w.]+)/.exec(c)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(c)||/(msie) ([\w.]+)/.exec(c)||c.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(c)||[],e=!!b.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i);return{browser:d[1]||"",version:d[2]||"0",mobile:e}}(),Filters:{},Node:function(a){this._init(a)},Shape:function(a){this.__init(a)},Container:function(a){this.__init(a)},Stage:function(a){this.___init(a)},BaseLayer:function(a){this.___init(a)},Layer:function(a){this.____init(a)},FastLayer:function(a){this.____init(a)},Group:function(a){this.___init(a)},isDragging:function(){var a=Kinetic.DD;return a?a.isDragging:!1},isDragReady:function(){var a=Kinetic.DD;return a?!!a.node:!1},_addId:function(a,b){void 0!==b&&(this.ids[b]=a)},_removeId:function(a){void 0!==a&&delete this.ids[a]},_addName:function(a,b){void 0!==b&&(void 0===this.names[b]&&(this.names[b]=[]),this.names[b].push(a))},_removeName:function(a,b){if(void 0!==a){var c=this.names[a];if(void 0!==c){for(var d=0;d<c.length;d++){var e=c[d];e._id===b&&c.splice(d,1)}0===c.length&&delete this.names[a]}}},getAngle:function(a){return this.angleDeg?a*b:a}}}(this),function(a,b){if("object"==typeof exports){var c=require("canvas"),d=require("jsdom").jsdom,e=d("<!DOCTYPE html><html><head></head><body></body></html>"),f=b();return Kinetic.document=e,Kinetic.window=Kinetic.document.createWindow(),Kinetic.window.Image=c.Image,Kinetic.root=a,Kinetic._nodeCanvas=c,void(module.exports=f)}"function"==typeof define&&define.amd&&define(b),Kinetic.document=document,Kinetic.window=window,Kinetic.root=a}((1,eval)("this"),function(){return Kinetic}),function(){Kinetic.Collection=function(){var a=[].slice.call(arguments),b=a.length,c=0;for(this.length=b;b>c;c++)this[c]=a[c];return this},Kinetic.Collection.prototype=[],Kinetic.Collection.prototype.each=function(a){for(var b=0;b<this.length;b++)a(this[b],b)},Kinetic.Collection.prototype.toArray=function(){var a,b=[],c=this.length;for(a=0;c>a;a++)b.push(this[a]);return b},Kinetic.Collection.toCollection=function(a){var b,c=new Kinetic.Collection,d=a.length;for(b=0;d>b;b++)c.push(a[b]);return c},Kinetic.Collection._mapMethod=function(a){Kinetic.Collection.prototype[a]=function(){var b,c=this.length,d=[].slice.call(arguments);for(b=0;c>b;b++)this[b][a].apply(this[b],d);return this}},Kinetic.Collection.mapMethods=function(a){var b=a.prototype;for(var c in b)Kinetic.Collection._mapMethod(c)},Kinetic.Transform=function(a){this.m=a&&a.slice()||[1,0,0,1,0,0]},Kinetic.Transform.prototype={copy:function(){return new Kinetic.Transform(this.m)},point:function(a){var b=this.m;return{x:b[0]*a.x+b[2]*a.y+b[4],y:b[1]*a.x+b[3]*a.y+b[5]}},translate:function(a,b){return this.m[4]+=this.m[0]*a+this.m[2]*b,this.m[5]+=this.m[1]*a+this.m[3]*b,this},scale:function(a,b){return this.m[0]*=a,this.m[1]*=a,this.m[2]*=b,this.m[3]*=b,this},rotate:function(a){var b=Math.cos(a),c=Math.sin(a),d=this.m[0]*b+this.m[2]*c,e=this.m[1]*b+this.m[3]*c,f=this.m[0]*-c+this.m[2]*b,g=this.m[1]*-c+this.m[3]*b;return this.m[0]=d,this.m[1]=e,this.m[2]=f,this.m[3]=g,this},getTranslation:function(){return{x:this.m[4],y:this.m[5]}},skew:function(a,b){var c=this.m[0]+this.m[2]*b,d=this.m[1]+this.m[3]*b,e=this.m[2]+this.m[0]*a,f=this.m[3]+this.m[1]*a;return this.m[0]=c,this.m[1]=d,this.m[2]=e,this.m[3]=f,this},multiply:function(a){var b=this.m[0]*a.m[0]+this.m[2]*a.m[1],c=this.m[1]*a.m[0]+this.m[3]*a.m[1],d=this.m[0]*a.m[2]+this.m[2]*a.m[3],e=this.m[1]*a.m[2]+this.m[3]*a.m[3],f=this.m[0]*a.m[4]+this.m[2]*a.m[5]+this.m[4],g=this.m[1]*a.m[4]+this.m[3]*a.m[5]+this.m[5];return this.m[0]=b,this.m[1]=c,this.m[2]=d,this.m[3]=e,this.m[4]=f,this.m[5]=g,this},invert:function(){var a=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),b=this.m[3]*a,c=-this.m[1]*a,d=-this.m[2]*a,e=this.m[0]*a,f=a*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),g=a*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=b,this.m[1]=c,this.m[2]=d,this.m[3]=e,this.m[4]=f,this.m[5]=g,this},getMatrix:function(){return this.m},setAbsolutePosition:function(a,b){var c=this.m[0],d=this.m[1],e=this.m[2],f=this.m[3],g=this.m[4],h=this.m[5],i=(c*(b-h)-d*(a-g))/(c*f-d*e),j=(a-g-e*i)/c;return this.translate(j,i)}};var a="2d",b="[object Array]",c="[object Number]",d="[object String]",e=Math.PI/180,f=180/Math.PI,g="#",h="",i="0",j="Kinetic warning: ",k="Kinetic error: ",l="rgb(",m={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},n=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;Kinetic.Util={_isElement:function(a){return!(!a||1!=a.nodeType)},_isFunction:function(a){return!!(a&&a.constructor&&a.call&&a.apply)},_isObject:function(a){return!!a&&a.constructor==Object},_isArray:function(a){return Object.prototype.toString.call(a)==b},_isNumber:function(a){return Object.prototype.toString.call(a)==c},_isString:function(a){return Object.prototype.toString.call(a)==d},_throttle:function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:(new Date).getTime(),g=null,f=a.apply(d,e),d=e=null};return function(){var j=(new Date).getTime();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),d=e=null):g||c.trailing===!1||(g=setTimeout(i,k)),f}},_hasMethods:function(a){var b,c=[];for(b in a)this._isFunction(a[b])&&c.push(b);return c.length>0},createCanvasElement:function(){var a=Kinetic.document.createElement("canvas");return a.style=a.style||{},a},isBrowser:function(){return"object"!=typeof exports},_isInDocument:function(a){for(;a=a.parentNode;)if(a==Kinetic.document)return!0;return!1},_simplifyArray:function(a){var b,c,d=[],e=a.length,f=Kinetic.Util;for(b=0;e>b;b++)c=a[b],f._isNumber(c)?c=Math.round(1e3*c)/1e3:f._isString(c)||(c=c.toString()),d.push(c);return d},_getImage:function(b,c){var d,e;if(b)if(this._isElement(b))c(b);else if(this._isString(b))d=new Kinetic.window.Image,d.onload=function(){c(d)},d.src=b;else if(b.data){e=Kinetic.Util.createCanvasElement(),e.width=b.width,e.height=b.height;var f=e.getContext(a);f.putImageData(b,0,0),this._getImage(e.toDataURL(),c)}else c(null);else c(null)},_getRGBAString:function(a){var b=a.red||0,c=a.green||0,d=a.blue||0,e=a.alpha||1;return["rgba(",b,",",c,",",d,",",e,")"].join(h)},_rgbToHex:function(a,b,c){return((1<<24)+(a<<16)+(b<<8)+c).toString(16).slice(1)},_hexToRgb:function(a){a=a.replace(g,h);var b=parseInt(a,16);return{r:b>>16&255,g:b>>8&255,b:255&b}},getRandomColor:function(){for(var a=(16777215*Math.random()<<0).toString(16);a.length<6;)a=i+a;return g+a},get:function(a,b){return void 0===a?b:a},getRGB:function(a){var b;return a in m?(b=m[a],{r:b[0],g:b[1],b:b[2]}):a[0]===g?this._hexToRgb(a.substring(1)):a.substr(0,4)===l?(b=n.exec(a.replace(/ /g,"")),{r:parseInt(b[1],10),g:parseInt(b[2],10),b:parseInt(b[3],10)}):{r:0,g:0,b:0}},_merge:function(a,b){var c=this._clone(b);for(var d in a)c[d]=this._isObject(a[d])?this._merge(a[d],c[d]):a[d];return c},cloneObject:function(a){var b={};for(var c in a)b[c]=this._isObject(a[c])?this.cloneObject(a[c]):this._isArray(a[c])?this.cloneArray(a[c]):a[c];return b},cloneArray:function(a){return a.slice(0)},_degToRad:function(a){return a*e},_radToDeg:function(a){return a*f},_capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},error:function(a){throw new Error(k+a)},warn:function(a){Kinetic.root.console&&console.warn&&console.warn(j+a)},extend:function(a,b){for(var c in b.prototype)c in a.prototype||(a.prototype[c]=b.prototype[c])},addMethods:function(a,b){var c;for(c in b)a.prototype[c]=b[c]},_getControlPoints:function(a,b,c,d,e,f,g){var h=Math.sqrt(Math.pow(c-a,2)+Math.pow(d-b,2)),i=Math.sqrt(Math.pow(e-c,2)+Math.pow(f-d,2)),j=g*h/(h+i),k=g*i/(h+i),l=c-j*(e-a),m=d-j*(f-b),n=c+k*(e-a),o=d+k*(f-b);return[l,m,n,o]},_expandPoints:function(a,b){var c,d,e=a.length,f=[];for(c=2;e-2>c;c+=2)d=Kinetic.Util._getControlPoints(a[c-2],a[c-1],a[c],a[c+1],a[c+2],a[c+3],b),f.push(d[0]),f.push(d[1]),f.push(a[c]),f.push(a[c+1]),f.push(d[2]),f.push(d[3]);return f},_removeLastLetter:function(a){return a.substring(0,a.length-1)}}}(),function(){var a=Kinetic.Util.createCanvasElement(),b=a.getContext("2d"),c=Kinetic.UA.mobile?function(){var a=window.devicePixelRatio||1,c=b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1;return a/c}():1;Kinetic.Canvas=function(a){this.init(a)},Kinetic.Canvas.prototype={init:function(a){a=a||{};var b=a.pixelRatio||Kinetic.pixelRatio||c;this.pixelRatio=b,this._canvas=Kinetic.Util.createCanvasElement(),this._canvas.style.padding=0,this._canvas.style.margin=0,this._canvas.style.border=0,this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top=0,this._canvas.style.left=0},getContext:function(){return this.context},getPixelRatio:function(){return this.pixelRatio},setPixelRatio:function(a){this.pixelRatio=a,this.setSize(this.getWidth(),this.getHeight())},setWidth:function(a){this.width=this._canvas.width=a*this.pixelRatio,this._canvas.style.width=a+"px"},setHeight:function(a){this.height=this._canvas.height=a*this.pixelRatio,this._canvas.style.height=a+"px"},getWidth:function(){return this.width},getHeight:function(){return this.height},setSize:function(a,b){this.setWidth(a),this.setHeight(b)},toDataURL:function(a,b){try{return this._canvas.toDataURL(a,b)}catch(c){try{return this._canvas.toDataURL()}catch(d){return Kinetic.Util.warn("Unable to get data URL. "+d.message),""}}}},Kinetic.SceneCanvas=function(a){a=a||{};var b=a.width||0,c=a.height||0;Kinetic.Canvas.call(this,a),this.context=new Kinetic.SceneContext(this),this.setSize(b,c)},Kinetic.SceneCanvas.prototype={setWidth:function(a){var b=this.pixelRatio,c=this.getContext()._context;Kinetic.Canvas.prototype.setWidth.call(this,a),c.scale(b,b)},setHeight:function(a){var b=this.pixelRatio,c=this.getContext()._context;Kinetic.Canvas.prototype.setHeight.call(this,a),c.scale(b,b)}},Kinetic.Util.extend(Kinetic.SceneCanvas,Kinetic.Canvas),Kinetic.HitCanvas=function(a){a=a||{};var b=a.width||0,c=a.height||0;Kinetic.Canvas.call(this,a),this.context=new Kinetic.HitContext(this),this.setSize(b,c)},Kinetic.Util.extend(Kinetic.HitCanvas,Kinetic.Canvas)}(),function(){var a=",",b="(",c=")",d="([",e="])",f=";",g="()",h="=",i=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];Kinetic.Context=function(a){this.init(a)},Kinetic.Context.prototype={init:function(a){this.canvas=a,this._context=a._canvas.getContext("2d"),Kinetic.enableTrace&&(this.traceArr=[],this._enableTrace())},fillShape:function(a){a.getFillEnabled()&&this._fill(a)},strokeShape:function(a){a.getStrokeEnabled()&&this._stroke(a)},fillStrokeShape:function(a){var b=a.getFillEnabled();b&&this._fill(a),a.getStrokeEnabled()&&this._stroke(a)},getTrace:function(i){var j,k,l,m,n=this.traceArr,o=n.length,p="";for(j=0;o>j;j++)k=n[j],l=k.method,l?(m=k.args,p+=l,p+=i?g:Kinetic.Util._isArray(m[0])?d+m.join(a)+e:b+m.join(a)+c):(p+=k.property,i||(p+=h+k.val)),p+=f;return p},clearTrace:function(){this.traceArr=[]},_trace:function(a){var b,c=this.traceArr;c.push(a),b=c.length,b>=Kinetic.traceArrMax&&c.shift()},reset:function(){var a=this.getCanvas().getPixelRatio();this.setTransform(1*a,0,0,1*a,0,0)},getCanvas:function(){return this.canvas},clear:function(a){var b=this.getCanvas();a?this.clearRect(a.x||0,a.y||0,a.width||0,a.height||0):this.clearRect(0,0,b.getWidth(),b.getHeight())},_applyLineCap:function(a){var b=a.getLineCap();b&&this.setAttr("lineCap",b)},_applyOpacity:function(a){var b=a.getAbsoluteOpacity();1!==b&&this.setAttr("globalAlpha",b)},_applyLineJoin:function(a){var b=a.getLineJoin();b&&this.setAttr("lineJoin",b)},setAttr:function(a,b){this._context[a]=b},arc:function(){var a=arguments;this._context.arc(a[0],a[1],a[2],a[3],a[4],a[5])},beginPath:function(){this._context.beginPath()},bezierCurveTo:function(){var a=arguments;this._context.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])},clearRect:function(){var a=arguments;this._context.clearRect(a[0],a[1],a[2],a[3])},clip:function(){this._context.clip()},closePath:function(){this._context.closePath()},createImageData:function(){var a=arguments;return 2===a.length?this._context.createImageData(a[0],a[1]):1===a.length?this._context.createImageData(a[0]):void 0},createLinearGradient:function(){var a=arguments;return this._context.createLinearGradient(a[0],a[1],a[2],a[3])},createPattern:function(){var a=arguments;return this._context.createPattern(a[0],a[1])},createRadialGradient:function(){var a=arguments;return this._context.createRadialGradient(a[0],a[1],a[2],a[3],a[4],a[5])},drawImage:function(){var a=arguments,b=this._context;3===a.length?b.drawImage(a[0],a[1],a[2]):5===a.length?b.drawImage(a[0],a[1],a[2],a[3],a[4]):9===a.length&&b.drawImage(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])},fill:function(){this._context.fill()},fillText:function(){var a=arguments;this._context.fillText(a[0],a[1],a[2])},getImageData:function(){var a=arguments;return this._context.getImageData(a[0],a[1],a[2],a[3])},lineTo:function(){var a=arguments;this._context.lineTo(a[0],a[1])},moveTo:function(){var a=arguments;this._context.moveTo(a[0],a[1])},rect:function(){var a=arguments;this._context.rect(a[0],a[1],a[2],a[3])},putImageData:function(){var a=arguments;this._context.putImageData(a[0],a[1],a[2])},quadraticCurveTo:function(){var a=arguments;this._context.quadraticCurveTo(a[0],a[1],a[2],a[3])},restore:function(){this._context.restore()},rotate:function(){var a=arguments;this._context.rotate(a[0])},save:function(){this._context.save()},scale:function(){var a=arguments;this._context.scale(a[0],a[1])},setLineDash:function(){var a=arguments,b=this._context;this._context.setLineDash?b.setLineDash(a[0]):"mozDash"in b?b.mozDash=a[0]:"webkitLineDash"in b&&(b.webkitLineDash=a[0])},setTransform:function(){var a=arguments;this._context.setTransform(a[0],a[1],a[2],a[3],a[4],a[5])},stroke:function(){this._context.stroke()},strokeText:function(){var a=arguments;this._context.strokeText(a[0],a[1],a[2])},transform:function(){var a=arguments;this._context.transform(a[0],a[1],a[2],a[3],a[4],a[5])},translate:function(){var a=arguments;this._context.translate(a[0],a[1])},_enableTrace:function(){var a,b,c=this,d=i.length,e=Kinetic.Util._simplifyArray,f=this.setAttr,g=function(a){var d,f=c[a];c[a]=function(){return b=e(Array.prototype.slice.call(arguments,0)),d=f.apply(c,arguments),c._trace({method:a,args:b}),d}};for(a=0;d>a;a++)g(i[a]);c.setAttr=function(){f.apply(c,arguments),c._trace({property:arguments[0],val:arguments[1]})}}},Kinetic.SceneContext=function(a){Kinetic.Context.call(this,a)},Kinetic.SceneContext.prototype={_fillColor:function(a){var b=a.fill()||Kinetic.Util._getRGBAString({red:a.fillRed(),green:a.fillGreen(),blue:a.fillBlue(),alpha:a.fillAlpha()});this.setAttr("fillStyle",b),a._fillFunc(this)},_fillPattern:function(a){var b=a.getFillPatternImage(),c=a.getFillPatternX(),d=a.getFillPatternY(),e=a.getFillPatternScale(),f=Kinetic.getAngle(a.getFillPatternRotation()),g=a.getFillPatternOffset(),h=a.getFillPatternRepeat();(c||d)&&this.translate(c||0,d||0),f&&this.rotate(f),e&&this.scale(e.x,e.y),g&&this.translate(-1*g.x,-1*g.y),this.setAttr("fillStyle",this.createPattern(b,h||"repeat")),this.fill()},_fillLinearGradient:function(a){var b=a.getFillLinearGradientStartPoint(),c=a.getFillLinearGradientEndPoint(),d=a.getFillLinearGradientColorStops(),e=this.createLinearGradient(b.x,b.y,c.x,c.y);if(d){for(var f=0;f<d.length;f+=2)e.addColorStop(d[f],d[f+1]);this.setAttr("fillStyle",e),this.fill()}},_fillRadialGradient:function(a){for(var b=a.getFillRadialGradientStartPoint(),c=a.getFillRadialGradientEndPoint(),d=a.getFillRadialGradientStartRadius(),e=a.getFillRadialGradientEndRadius(),f=a.getFillRadialGradientColorStops(),g=this.createRadialGradient(b.x,b.y,d,c.x,c.y,e),h=0;h<f.length;h+=2)g.addColorStop(f[h],f[h+1]);this.setAttr("fillStyle",g),this.fill()},_fill:function(a){var b=a.fill()||a.fillRed()||a.fillGreen()||a.fillBlue(),c=a.getFillPatternImage(),d=a.getFillLinearGradientColorStops(),e=a.getFillRadialGradientColorStops(),f=a.getFillPriority();b&&"color"===f?this._fillColor(a):c&&"pattern"===f?this._fillPattern(a):d&&"linear-gradient"===f?this._fillLinearGradient(a):e&&"radial-gradient"===f?this._fillRadialGradient(a):b?this._fillColor(a):c?this._fillPattern(a):d?this._fillLinearGradient(a):e&&this._fillRadialGradient(a)},_stroke:function(a){var b=a.dash(),c=a.getStrokeScaleEnabled();a.hasStroke()&&(c||(this.save(),this.setTransform(1,0,0,1,0,0)),this._applyLineCap(a),b&&a.dashEnabled()&&this.setLineDash(b),this.setAttr("lineWidth",a.strokeWidth()),this.setAttr("strokeStyle",a.stroke()||Kinetic.Util._getRGBAString({red:a.strokeRed(),green:a.strokeGreen(),blue:a.strokeBlue(),alpha:a.strokeAlpha()})),a._strokeFunc(this),c||this.restore())},_applyShadow:function(a){var b=Kinetic.Util,c=a.getAbsoluteOpacity(),d=b.get(a.getShadowColor(),"black"),e=b.get(a.getShadowBlur(),5),f=b.get(a.getShadowOpacity(),1),g=b.get(a.getShadowOffset(),{x:0,y:0});f&&this.setAttr("globalAlpha",f*c),this.setAttr("shadowColor",d),this.setAttr("shadowBlur",e),this.setAttr("shadowOffsetX",g.x),this.setAttr("shadowOffsetY",g.y)}},Kinetic.Util.extend(Kinetic.SceneContext,Kinetic.Context),Kinetic.HitContext=function(a){Kinetic.Context.call(this,a)},Kinetic.HitContext.prototype={_fill:function(a){this.save(),this.setAttr("fillStyle",a.colorKey),a._fillFuncHit(this),this.restore()},_stroke:function(a){a.hasStroke()&&(this._applyLineCap(a),this.setAttr("lineWidth",a.strokeWidth()),this.setAttr("strokeStyle",a.colorKey),a._strokeFuncHit(this))}},Kinetic.Util.extend(Kinetic.HitContext,Kinetic.Context)}(),function(){var a="get",b="set";Kinetic.Factory={addGetterSetter:function(a,b,c,d,e){this.addGetter(a,b,c),this.addSetter(a,b,d,e),this.addOverloadedGetterSetter(a,b)},addGetter:function(b,c,d){var e=a+Kinetic.Util._capitalize(c);b.prototype[e]=function(){var a=this.attrs[c];return void 0===a?d:a}},addSetter:function(a,c,d,e){var f=b+Kinetic.Util._capitalize(c);a.prototype[f]=function(a){return d&&(a=d.call(this,a)),this._setAttr(c,a),e&&e.call(this),this}},addComponentsGetterSetter:function(c,d,e,f,g){var h,i,j=e.length,k=Kinetic.Util._capitalize,l=a+k(d),m=b+k(d);c.prototype[l]=function(){var a={};for(h=0;j>h;h++)i=e[h],a[i]=this.getAttr(d+k(i));return a},c.prototype[m]=function(a){var b,c=this.attrs[d];f&&(a=f.call(this,a));for(b in a)this._setAttr(d+k(b),a[b]);return this._fireChangeEvent(d,c,a),g&&g.call(this),this},this.addOverloadedGetterSetter(c,d)},addOverloadedGetterSetter:function(c,d){var e=Kinetic.Util._capitalize(d),f=b+e,g=a+e;c.prototype[d]=function(){return arguments.length?(this[f](arguments[0]),this):this[g]()}},backCompat:function(a,b){var c;for(c in b)a.prototype[c]=a.prototype[b[c]]},afterSetFilter:function(){this._filterUpToDate=!1}},Kinetic.Validators={RGBComponent:function(a){return a>255?255:0>a?0:Math.round(a)},alphaComponent:function(a){return a>1?1:1e-4>a?1e-4:a}}}(),function(){var a="absoluteOpacity",b="absoluteTransform",c="Change",d="children",e=".",f="",g="get",h="id",i="kinetic",j="listening",k="mouseenter",l="mouseleave",m="name",n="set",o="Shape",p=" ",q="stage",r="transform",s="Stage",t="visible",u=["id"],v=["xChange.kinetic","yChange.kinetic","scaleXChange.kinetic","scaleYChange.kinetic","skewXChange.kinetic","skewYChange.kinetic","rotationChange.kinetic","offsetXChange.kinetic","offsetYChange.kinetic","transformsEnabledChange.kinetic"].join(p);Kinetic.Util.addMethods(Kinetic.Node,{_init:function(c){var d=this;this._id=Kinetic.idCounter++,this.eventListeners={},this.attrs={},this._cache={},this._filterUpToDate=!1,this.setAttrs(c),this.on(v,function(){this._clearCache(r),d._clearSelfAndDescendantCache(b)}),this.on("visibleChange.kinetic",function(){d._clearSelfAndDescendantCache(t)}),this.on("listeningChange.kinetic",function(){d._clearSelfAndDescendantCache(j)}),this.on("opacityChange.kinetic",function(){d._clearSelfAndDescendantCache(a)})},_clearCache:function(a){a?delete this._cache[a]:this._cache={}},_getCache:function(a,b){var c=this._cache[a];return void 0===c&&(this._cache[a]=b.call(this)),this._cache[a]},_clearSelfAndDescendantCache:function(a){this._clearCache(a),this.children&&this.getChildren().each(function(b){b._clearSelfAndDescendantCache(a)})},clearCache:function(){return delete this._cache.canvas,this._filterUpToDate=!1,this},cache:function(a){{var b=a||{},c=b.x||0,d=b.y||0,e=b.width||this.width(),f=b.height||this.height(),g=b.drawBorder||!1;this.getLayer()}if(0===e||0===f)return void Kinetic.Util.warn("Width or height of caching configuration equals 0. Cache is ignored.");var h=new Kinetic.SceneCanvas({pixelRatio:1,width:e,height:f}),i=new Kinetic.SceneCanvas({pixelRatio:1,width:e,height:f}),j=new Kinetic.HitCanvas({width:e,height:f}),k=(this.transformsEnabled(),this.x(),this.y(),h.getContext()),l=j.getContext();return this.clearCache(),k.save(),l.save(),g&&(k.save(),k.beginPath(),k.rect(0,0,e,f),k.closePath(),k.setAttr("strokeStyle","red"),k.setAttr("lineWidth",5),k.stroke(),k.restore()),k.translate(-1*c,-1*d),l.translate(-1*c,-1*d),"Shape"===this.nodeType&&(k.translate(-1*this.x(),-1*this.y()),l.translate(-1*this.x(),-1*this.y())),this.drawScene(h,this),this.drawHit(j,this),k.restore(),l.restore(),this._cache.canvas={scene:h,filter:i,hit:j},this},_drawCachedSceneCanvas:function(a){a.save(),this.getLayer()._applyTransform(this,a),a.drawImage(this._getCachedSceneCanvas()._canvas,0,0),a.restore()},_getCachedSceneCanvas:function(){var a,b,c,d,e=this.filters(),f=this._cache.canvas,g=f.scene,h=f.filter,i=h.getContext();if(e){if(!this._filterUpToDate){try{for(a=e.length,i.clear(),i.drawImage(g._canvas,0,0),b=i.getImageData(0,0,h.getWidth(),h.getHeight()),c=0;a>c;c++)d=e[c],d.call(this,b),i.putImageData(b,0,0)}catch(j){Kinetic.Util.warn("Unable to apply filter. "+j.message)}this._filterUpToDate=!0}return h}return g},_drawCachedHitCanvas:function(a){var b=this._cache.canvas,c=b.hit;a.save(),this.getLayer()._applyTransform(this,a),a.drawImage(c._canvas,0,0),a.restore()},on:function(a,b){var c,d,g,h,i,j=a.split(p),k=j.length;for(c=0;k>c;c++)d=j[c],g=d.split(e),h=g[0],i=g[1]||f,this.eventListeners[h]||(this.eventListeners[h]=[]),this.eventListeners[h].push({name:i,handler:b});return this},off:function(a){var b,c,d,f,g,h,i=a.split(p),j=i.length;for(b=0;j>b;b++)if(d=i[b],f=d.split(e),g=f[0],h=f[1],g)this.eventListeners[g]&&this._off(g,h);else for(c in this.eventListeners)this._off(c,h);return this},dispatchEvent:function(a){var b={target:this,type:a.type,evt:a};this.fire(a.type,b)},addEventListener:function(a,b){this.on(a,function(a){b.call(this,a.evt)})},remove:function(){var c=this.getParent();return c&&c.children&&(c.children.splice(this.index,1),c._setChildrenIndices(),delete this.parent),this._clearSelfAndDescendantCache(q),this._clearSelfAndDescendantCache(b),this._clearSelfAndDescendantCache(t),this._clearSelfAndDescendantCache(j),this._clearSelfAndDescendantCache(a),this},destroy:function(){Kinetic._removeId(this.getId()),Kinetic._removeName(this.getName(),this._id),this.remove()},getAttr:function(a){var b=g+Kinetic.Util._capitalize(a);return Kinetic.Util._isFunction(this[b])?this[b]():this.attrs[a]},getAncestors:function(){for(var a=this.getParent(),b=new Kinetic.Collection;a;)b.push(a),a=a.getParent();return b},getAttrs:function(){return this.attrs||{}},setAttrs:function(a){var b,c;if(a)for(b in a)b===d||(c=n+Kinetic.Util._capitalize(b),Kinetic.Util._isFunction(this[c])?this[c](a[b]):this._setAttr(b,a[b]));return this},isListening:function(){return this._getCache(j,this._isListening)},_isListening:function(){var a=this.getListening(),b=this.getParent();return"inherit"===a?b?b.isListening():!0:a},isVisible:function(){return this._getCache(t,this._isVisible)},_isVisible:function(){var a=this.getVisible(),b=this.getParent();return"inherit"===a?b?b.isVisible():!0:a},shouldDrawHit:function(){var a=this.getLayer();return a&&a.hitGraphEnabled()&&this.isListening()&&this.isVisible()&&!Kinetic.isDragging()},show:function(){return this.setVisible(!0),this},hide:function(){return this.setVisible(!1),this},getZIndex:function(){return this.index||0},getAbsoluteZIndex:function(){function a(i){for(b=[],c=i.length,d=0;c>d;d++)e=i[d],h++,e.nodeType!==o&&(b=b.concat(e.getChildren().toArray())),e._id===g._id&&(d=c);b.length>0&&b[0].getDepth()<=f&&a(b)}var b,c,d,e,f=this.getDepth(),g=this,h=0;return g.nodeType!==s&&a(g.getStage().getChildren()),h},getDepth:function(){for(var a=0,b=this.parent;b;)a++,b=b.parent;return a},setPosition:function(a){return this.setX(a.x),this.setY(a.y),this},getPosition:function(){return{x:this.getX(),y:this.getY()}},getAbsolutePosition:function(){var a=this.getAbsoluteTransform().getMatrix(),b=new Kinetic.Transform,c=this.offset();return b.m=a.slice(),b.translate(c.x,c.y),b.getTranslation()},setAbsolutePosition:function(a){var b,c=this._clearTransform();return this.attrs.x=c.x,this.attrs.y=c.y,delete c.x,delete c.y,b=this.getAbsoluteTransform(),b.invert(),b.translate(a.x,a.y),a={x:this.attrs.x+b.getTranslation().x,y:this.attrs.y+b.getTranslation().y},this.setPosition({x:a.x,y:a.y}),this._setTransform(c),this},_setTransform:function(a){var c;for(c in a)this.attrs[c]=a[c];this._clearCache(r),this._clearSelfAndDescendantCache(b)},_clearTransform:function(){var a={x:this.getX(),y:this.getY(),rotation:this.getRotation(),scaleX:this.getScaleX(),scaleY:this.getScaleY(),offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),skewX:this.getSkewX(),skewY:this.getSkewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache(r),this._clearSelfAndDescendantCache(b),a},move:function(a){var b=a.x,c=a.y,d=this.getX(),e=this.getY();return void 0!==b&&(d+=b),void 0!==c&&(e+=c),this.setPosition({x:d,y:e}),this},_eachAncestorReverse:function(a,b){var c,d,e=[],f=this.getParent();if(b&&b._id===this._id)return a(this),!0;for(e.unshift(this);f&&(!b||f._id!==b._id);)e.unshift(f),f=f.parent;for(c=e.length,d=0;c>d;d++)a(e[d])},rotate:function(a){return this.setRotation(this.getRotation()+a),this},moveToTop:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveToTop function is ignored.");var a=this.index;return this.parent.children.splice(a,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},moveUp:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveUp function is ignored.");var a=this.index,b=this.parent.getChildren().length;return b-1>a?(this.parent.children.splice(a,1),this.parent.children.splice(a+1,0,this),this.parent._setChildrenIndices(),!0):!1},moveDown:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveDown function is ignored.");var a=this.index;return a>0?(this.parent.children.splice(a,1),this.parent.children.splice(a-1,0,this),this.parent._setChildrenIndices(),!0):!1},moveToBottom:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveToBottom function is ignored.");var a=this.index;return a>0?(this.parent.children.splice(a,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1},setZIndex:function(a){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. zIndex parameter is ignored.");var b=this.index;return this.parent.children.splice(b,1),this.parent.children.splice(a,0,this),this.parent._setChildrenIndices(),this},getAbsoluteOpacity:function(){return this._getCache(a,this._getAbsoluteOpacity)},_getAbsoluteOpacity:function(){var a=this.getOpacity();return this.getParent()&&(a*=this.getParent().getAbsoluteOpacity()),a},moveTo:function(a){return Kinetic.Node.prototype.remove.call(this),a.add(this),this},toObject:function(){var a,b,c,d,e=Kinetic.Util,f={},g=this.getAttrs();f.attrs={};for(a in g)b=g[a],e._isFunction(b)||e._isElement(b)||e._isObject(b)&&e._hasMethods(b)||(c=this[a],delete g[a],d=c?c.call(this):null,g[a]=b,d!==b&&(f.attrs[a]=b));return f.className=this.getClassName(),f},toJSON:function(){return JSON.stringify(this.toObject())},getParent:function(){return this.parent},getLayer:function(){var a=this.getParent();return a?a.getLayer():null},getStage:function(){return this._getCache(q,this._getStage)},_getStage:function(){var a=this.getParent();return a?a.getStage():void 0},fire:function(a,b,c){return c?this._fireAndBubble(a,b||{}):this._fire(a,b||{}),this},getAbsoluteTransform:function(a){return a?this._getAbsoluteTransform(a):this._getCache(b,this._getAbsoluteTransform)},_getAbsoluteTransform:function(a){var b,c,d=new Kinetic.Transform;return this._eachAncestorReverse(function(a){b=a.transformsEnabled(),c=a.getTransform(),"all"===b?d.multiply(c):"position"===b&&d.translate(a.x(),a.y())},a),d},getTransform:function(){return this._getCache(r,this._getTransform)},_getTransform:function(){var a=new Kinetic.Transform,b=this.getX(),c=this.getY(),d=Kinetic.getAngle(this.getRotation()),e=this.getScaleX(),f=this.getScaleY(),g=this.getSkewX(),h=this.getSkewY(),i=this.getOffsetX(),j=this.getOffsetY();return(0!==b||0!==c)&&a.translate(b,c),0!==d&&a.rotate(d),(0!==g||0!==h)&&a.skew(g,h),(1!==e||1!==f)&&a.scale(e,f),(0!==i||0!==j)&&a.translate(-1*i,-1*j),a},clone:function(a){var b,c,d,e,f,g=this.getClassName(),h=Kinetic.Util.cloneObject(this.attrs);for(var j in u){var k=u[j];delete h[k]}for(b in a)h[b]=a[b];var l=new Kinetic[g](h);for(b in this.eventListeners)for(c=this.eventListeners[b],d=c.length,e=0;d>e;e++)f=c[e],f.name.indexOf(i)<0&&(l.eventListeners[b]||(l.eventListeners[b]=[]),l.eventListeners[b].push(f));return l},toDataURL:function(a){a=a||{};var b=a.mimeType||null,c=a.quality||null,d=this.getStage(),e=a.x||0,f=a.y||0,g=new Kinetic.SceneCanvas({width:a.width||this.getWidth()||(d?d.getWidth():0),height:a.height||this.getHeight()||(d?d.getHeight():0),pixelRatio:1}),h=g.getContext();return h.save(),(e||f)&&h.translate(-1*e,-1*f),this.drawScene(g),h.restore(),g.toDataURL(b,c)},toImage:function(a){Kinetic.Util._getImage(this.toDataURL(a),function(b){a.callback(b)})},setSize:function(a){return this.setWidth(a.width),this.setHeight(a.height),this},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return this.attrs.width||0},getHeight:function(){return this.attrs.height||0},getClassName:function(){return this.className||this.nodeType},getType:function(){return this.nodeType},getDragDistance:function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Kinetic.dragDistance},_get:function(a){return this.nodeType===a?[this]:[]},_off:function(a,b){var c,d,e=this.eventListeners[a];for(c=0;c<e.length;c++)if(d=e[c].name,!("kinetic"===d&&"kinetic"!==b||b&&d!==b)){if(e.splice(c,1),0===e.length){delete this.eventListeners[a];break}c--}},_fireChangeEvent:function(a,b,d){this._fire(a+c,{oldVal:b,newVal:d})},setId:function(a){var b=this.getId();return Kinetic._removeId(b),Kinetic._addId(this,a),this._setAttr(h,a),this
},setName:function(a){var b=this.getName();return Kinetic._removeName(b,this._id),Kinetic._addName(this,a),this._setAttr(m,a),this},setAttr:function(){var a=Array.prototype.slice.call(arguments),b=a[0],c=a[1],d=n+Kinetic.Util._capitalize(b),e=this[d];return Kinetic.Util._isFunction(e)?e.call(this,c):this._setAttr(b,c),this},_setAttr:function(a,b){var c;void 0!==b&&(c=this.attrs[a],this.attrs[a]=b,this._fireChangeEvent(a,c,b))},_setComponentAttr:function(a,b,c){var d;void 0!==c&&(d=this.attrs[a],d||(this.attrs[a]=this.getAttr(a)),this.attrs[a][b]=c,this._fireChangeEvent(a,d,c))},_fireAndBubble:function(a,b,c){var d=!0;b&&this.nodeType===o&&(b.target=this),a===k&&c&&this._id===c._id?d=!1:a===l&&c&&this._id===c._id&&(d=!1),d&&(this._fire(a,b),b&&!b.cancelBubble&&this.parent&&(c&&c.parent?this._fireAndBubble.call(this.parent,a,b,c.parent):this._fireAndBubble.call(this.parent,a,b)))},_fire:function(a,b){var c,d=this.eventListeners[a];if(b.type=a,d)for(c=0;c<d.length;c++)d[c].handler.call(this,b)},draw:function(){return this.drawScene(),this.drawHit(),this}}),Kinetic.Node.create=function(a,b){return this._createNode(JSON.parse(a),b)},Kinetic.Node._createNode=function(a,b){var c,d,e,f=Kinetic.Node.prototype.getClassName.call(a),g=a.children;if(b&&(a.attrs.container=b),c=new Kinetic[f](a.attrs),g)for(d=g.length,e=0;d>e;e++)c.add(this._createNode(g[e]));return c},Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"position"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"x",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"y",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"opacity",1),Kinetic.Factory.addGetter(Kinetic.Node,"name"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"name"),Kinetic.Factory.addGetter(Kinetic.Node,"id"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"id"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"rotation",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"scale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"skew",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"offset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetY",0),Kinetic.Factory.addSetter(Kinetic.Node,"dragDistance"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"dragDistance"),Kinetic.Factory.addSetter(Kinetic.Node,"width",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"width"),Kinetic.Factory.addSetter(Kinetic.Node,"height",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"height"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"listening","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"filters",void 0,function(a){return this._filterUpToDate=!1,a}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"visible","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"transformsEnabled","all"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"size"),Kinetic.Factory.backCompat(Kinetic.Node,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Kinetic.Collection.mapMethods(Kinetic.Node)}(),function(){Kinetic.Filters.Grayscale=function(a){var b,c,d=a.data,e=d.length;for(b=0;e>b;b+=4)c=.34*d[b]+.5*d[b+1]+.16*d[b+2],d[b]=c,d[b+1]=c,d[b+2]=c}}(),function(){Kinetic.Filters.Brighten=function(a){var b,c=255*this.brightness(),d=a.data,e=d.length;for(b=0;e>b;b+=4)d[b]+=c,d[b+1]+=c,d[b+2]+=c},Kinetic.Factory.addGetterSetter(Kinetic.Node,"brightness",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Invert=function(a){var b,c=a.data,d=c.length;for(b=0;d>b;b+=4)c[b]=255-c[b],c[b+1]=255-c[b+1],c[b+2]=255-c[b+2]}}(),function(){function a(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function b(b,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=b.data,E=b.width,F=b.height,G=e+e+1,H=E-1,I=F-1,J=e+1,K=J*(J+1)/2,L=new a,M=null,N=L,O=null,P=null,Q=c[e],R=d[e];for(h=1;G>h;h++)N=N.next=new a,h==J&&(M=N);for(N.next=L,l=k=0,g=0;F>g;g++){for(u=v=w=x=m=n=o=p=0,q=J*(y=D[k]),r=J*(z=D[k+1]),s=J*(A=D[k+2]),t=J*(B=D[k+3]),m+=K*y,n+=K*z,o+=K*A,p+=K*B,N=L,h=0;J>h;h++)N.r=y,N.g=z,N.b=A,N.a=B,N=N.next;for(h=1;J>h;h++)i=k+((h>H?H:h)<<2),m+=(N.r=y=D[i])*(C=J-h),n+=(N.g=z=D[i+1])*C,o+=(N.b=A=D[i+2])*C,p+=(N.a=B=D[i+3])*C,u+=y,v+=z,w+=A,x+=B,N=N.next;for(O=L,P=M,f=0;E>f;f++)D[k+3]=B=p*Q>>R,0!==B?(B=255/B,D[k]=(m*Q>>R)*B,D[k+1]=(n*Q>>R)*B,D[k+2]=(o*Q>>R)*B):D[k]=D[k+1]=D[k+2]=0,m-=q,n-=r,o-=s,p-=t,q-=O.r,r-=O.g,s-=O.b,t-=O.a,i=l+((i=f+e+1)<H?i:H)<<2,u+=O.r=D[i],v+=O.g=D[i+1],w+=O.b=D[i+2],x+=O.a=D[i+3],m+=u,n+=v,o+=w,p+=x,O=O.next,q+=y=P.r,r+=z=P.g,s+=A=P.b,t+=B=P.a,u-=y,v-=z,w-=A,x-=B,P=P.next,k+=4;l+=E}for(f=0;E>f;f++){for(v=w=x=u=n=o=p=m=0,k=f<<2,q=J*(y=D[k]),r=J*(z=D[k+1]),s=J*(A=D[k+2]),t=J*(B=D[k+3]),m+=K*y,n+=K*z,o+=K*A,p+=K*B,N=L,h=0;J>h;h++)N.r=y,N.g=z,N.b=A,N.a=B,N=N.next;for(j=E,h=1;e>=h;h++)k=j+f<<2,m+=(N.r=y=D[k])*(C=J-h),n+=(N.g=z=D[k+1])*C,o+=(N.b=A=D[k+2])*C,p+=(N.a=B=D[k+3])*C,u+=y,v+=z,w+=A,x+=B,N=N.next,I>h&&(j+=E);for(k=f,O=L,P=M,g=0;F>g;g++)i=k<<2,D[i+3]=B=p*Q>>R,B>0?(B=255/B,D[i]=(m*Q>>R)*B,D[i+1]=(n*Q>>R)*B,D[i+2]=(o*Q>>R)*B):D[i]=D[i+1]=D[i+2]=0,m-=q,n-=r,o-=s,p-=t,q-=O.r,r-=O.g,s-=O.b,t-=O.a,i=f+((i=g+J)<I?i:I)*E<<2,m+=u+=O.r=D[i],n+=v+=O.g=D[i+1],o+=w+=O.b=D[i+2],p+=x+=O.a=D[i+3],O=O.next,q+=y=P.r,r+=z=P.g,s+=A=P.b,t+=B=P.a,u-=y,v-=z,w-=A,x-=B,P=P.next,k+=E}}var c=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],d=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];Kinetic.Filters.Blur=function(a){var c=Math.round(this.blurRadius());c>0&&b(a,c)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"blurRadius",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function a(a,b,c){var d=4*(c*a.width+b),e=[];return e.push(a.data[d++],a.data[d++],a.data[d++],a.data[d++]),e}function b(a,b){return Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2)+Math.pow(a[2]-b[2],2))}function c(a){for(var b=[0,0,0],c=0;c<a.length;c++)b[0]+=a[c][0],b[1]+=a[c][1],b[2]+=a[c][2];return b[0]/=a.length,b[1]/=a.length,b[2]/=a.length,b}function d(d,e){var f=a(d,0,0),g=a(d,d.width-1,0),h=a(d,0,d.height-1),i=a(d,d.width-1,d.height-1),j=e||10;if(b(f,g)<j&&b(g,i)<j&&b(i,h)<j&&b(h,f)<j){for(var k=c([g,f,i,h]),l=[],m=0;m<d.width*d.height;m++){var n=b(k,[d.data[4*m],d.data[4*m+1],d.data[4*m+2]]);l[m]=j>n?0:255}return l}}function e(a,b){for(var c=0;c<a.width*a.height;c++)a.data[4*c+3]=b[c]}function f(a,b,c){for(var d=[1,1,1,1,0,1,1,1,1],e=Math.round(Math.sqrt(d.length)),f=Math.floor(e/2),g=[],h=0;c>h;h++)for(var i=0;b>i;i++){for(var j=h*b+i,k=0,l=0;e>l;l++)for(var m=0;e>m;m++){var n=h+l-f,o=i+m-f;if(n>=0&&c>n&&o>=0&&b>o){var p=n*b+o,q=d[l*e+m];k+=a[p]*q}}g[j]=2040===k?255:0}return g}function g(a,b,c){for(var d=[1,1,1,1,1,1,1,1,1],e=Math.round(Math.sqrt(d.length)),f=Math.floor(e/2),g=[],h=0;c>h;h++)for(var i=0;b>i;i++){for(var j=h*b+i,k=0,l=0;e>l;l++)for(var m=0;e>m;m++){var n=h+l-f,o=i+m-f;if(n>=0&&c>n&&o>=0&&b>o){var p=n*b+o,q=d[l*e+m];k+=a[p]*q}}g[j]=k>=1020?255:0}return g}function h(a,b,c){for(var d=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],e=Math.round(Math.sqrt(d.length)),f=Math.floor(e/2),g=[],h=0;c>h;h++)for(var i=0;b>i;i++){for(var j=h*b+i,k=0,l=0;e>l;l++)for(var m=0;e>m;m++){var n=h+l-f,o=i+m-f;if(n>=0&&c>n&&o>=0&&b>o){var p=n*b+o,q=d[l*e+m];k+=a[p]*q}}g[j]=k}return g}Kinetic.Filters.Mask=function(a){var b=this.threshold(),c=d(a,b);return c&&(c=f(c,a.width,a.height),c=g(c,a.width,a.height),c=h(c,a.width,a.height),e(a,c)),a},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.RGB=function(a){var b,c,d=a.data,e=d.length,f=this.red(),g=this.green(),h=this.blue();for(b=0;e>b;b+=4)c=(.34*d[b]+.5*d[b+1]+.16*d[b+2])/255,d[b]=c*f,d[b+1]=c*g,d[b+2]=c*h,d[b+3]=d[b+3]},Kinetic.Factory.addGetterSetter(Kinetic.Node,"red",0,function(a){return this._filterUpToDate=!1,a>255?255:0>a?0:Math.round(a)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"green",0,function(a){return this._filterUpToDate=!1,a>255?255:0>a?0:Math.round(a)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"blue",0,Kinetic.Validators.RGBComponent,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.HSV=function(a){var b,c,d,e,f,g=a.data,h=g.length,i=Math.pow(2,this.value()),j=Math.pow(2,this.saturation()),k=Math.abs(this.hue()+360)%360,l=i*j*Math.cos(k*Math.PI/180),m=i*j*Math.sin(k*Math.PI/180),n=.299*i+.701*l+.167*m,o=.587*i-.587*l+.33*m,p=.114*i-.114*l-.497*m,q=.299*i-.299*l-.328*m,r=.587*i+.413*l+.035*m,s=.114*i-.114*l+.293*m,t=.299*i-.3*l+1.25*m,u=.587*i-.586*l-1.05*m,v=.114*i+.886*l-.2*m;for(b=0;h>b;b+=4)c=g[b+0],d=g[b+1],e=g[b+2],f=g[b+3],g[b+0]=n*c+o*d+p*e,g[b+1]=q*c+r*d+s*e,g[b+2]=t*c+u*d+v*e,g[b+3]=f},Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"value",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"luminance",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Filters.HSL=function(a){var b,c,d,e,f,g=a.data,h=g.length,i=1,j=Math.pow(2,this.saturation()),k=Math.abs(this.hue()+360)%360,l=127*this.luminance(),m=i*j*Math.cos(k*Math.PI/180),n=i*j*Math.sin(k*Math.PI/180),o=.299*i+.701*m+.167*n,p=.587*i-.587*m+.33*n,q=.114*i-.114*m-.497*n,r=.299*i-.299*m-.328*n,s=.587*i+.413*m+.035*n,t=.114*i-.114*m+.293*n,u=.299*i-.3*m+1.25*n,v=.587*i-.586*m-1.05*n,w=.114*i+.886*m-.2*n;for(b=0;h>b;b+=4)c=g[b+0],d=g[b+1],e=g[b+2],f=g[b+3],g[b+0]=o*c+p*d+q*e+l,g[b+1]=r*c+s*d+t*e+l,g[b+2]=u*c+v*d+w*e+l,g[b+3]=f}}(),function(){Kinetic.Filters.Emboss=function(a){var b=10*this.embossStrength(),c=255*this.embossWhiteLevel(),d=this.embossDirection(),e=this.embossBlend(),f=0,g=0,h=a.data,i=a.width,j=a.height,k=4*i,l=j;switch(d){case"top-left":f=-1,g=-1;break;case"top":f=-1,g=0;break;case"top-right":f=-1,g=1;break;case"right":f=0,g=1;break;case"bottom-right":f=1,g=1;break;case"bottom":f=1,g=0;break;case"bottom-left":f=1,g=-1;break;case"left":f=0,g=-1}do{var m=(l-1)*k,n=f;1>l+n&&(n=0),l+n>j&&(n=0);var o=(l-1+n)*i*4,p=i;do{var q=m+4*(p-1),r=g;1>p+r&&(r=0),p+r>i&&(r=0);var s=o+4*(p-1+r),t=h[q]-h[s],u=h[q+1]-h[s+1],v=h[q+2]-h[s+2],w=t,x=w>0?w:-w,y=u>0?u:-u,z=v>0?v:-v;if(y>x&&(w=u),z>x&&(w=v),w*=b,e){var A=h[q]+w,B=h[q+1]+w,C=h[q+2]+w;h[q]=A>255?255:0>A?0:A,h[q+1]=B>255?255:0>B?0:B,h[q+2]=C>255?255:0>C?0:C}else{var D=c-w;0>D?D=0:D>255&&(D=255),h[q]=h[q+1]=h[q+2]=D}}while(--p)}while(--l)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossStrength",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossWhiteLevel",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossDirection","top-left",null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossBlend",!1,null,Kinetic.Factory.afterSetFilter)}(),function(){function a(a,b,c,d,e){var f,g=c-b,h=e-d;return 0===g?d+h/2:0===h?d:(f=(a-b)/g,f=h*f+d)}Kinetic.Filters.Enhance=function(b){var c,d,e,f,g=b.data,h=g.length,i=g[0],j=i,k=g[1],l=k,m=g[2],n=m,o=g[3],p=o,q=this.enhance();if(0!==q){for(f=0;h>f;f+=4)c=g[f+0],i>c?i=c:c>j&&(j=c),d=g[f+1],k>d?k=d:d>l&&(l=d),e=g[f+2],m>e?m=e:e>n&&(n=e);j===i&&(j=255,i=0),l===k&&(l=255,k=0),n===m&&(n=255,m=0),p===o&&(p=255,o=0);var r,s,t,u,v,w,x,y,z,A,B,C;for(q>0?(s=j+q*(255-j),t=i-q*(i-0),v=l+q*(255-l),w=k-q*(k-0),y=n+q*(255-n),C=m-q*(m-0),B=p+q*(255-p),z=o-q*(o-0)):(r=.5*(j+i),s=j+q*(j-r),t=i+q*(i-r),u=.5*(l+k),v=l+q*(l-u),w=k+q*(k-u),x=.5*(n+m),y=n+q*(n-x),C=m+q*(m-x),A=.5*(p+o),B=p+q*(p-A),z=o+q*(o-A)),f=0;h>f;f+=4)g[f+0]=a(g[f+0],i,j,t,s),g[f+1]=a(g[f+1],k,l,w,v),g[f+2]=a(g[f+2],m,n,C,y)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"enhance",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Posterize=function(a){var b,c=Math.round(254*this.levels())+1,d=a.data,e=d.length,f=255/c;for(b=0;e>b;b+=1)d[b]=Math.floor(d[b]/f)*f},Kinetic.Factory.addGetterSetter(Kinetic.Node,"levels",.5,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Noise=function(a){var b,c=255*this.noise(),d=a.data,e=d.length,f=c/2;for(b=0;e>b;b+=4)d[b+0]+=f-2*f*Math.random(),d[b+1]+=f-2*f*Math.random(),d[b+2]+=f-2*f*Math.random()},Kinetic.Factory.addGetterSetter(Kinetic.Node,"noise",.2,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Pixelate=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p=Math.ceil(this.pixelSize()),q=a.width,r=a.height,s=Math.ceil(q/p),t=Math.ceil(r/p);for(a=a.data,m=0;s>m;m+=1)for(n=0;t>n;n+=1){for(e=0,f=0,g=0,h=0,i=m*p,j=i+p,k=n*p,l=k+p,o=0,b=i;j>b;b+=1)if(!(b>=q))for(c=k;l>c;c+=1)c>=r||(d=4*(q*c+b),e+=a[d+0],f+=a[d+1],g+=a[d+2],h+=a[d+3],o+=1);for(e/=o,f/=o,g/=o,b=i;j>b;b+=1)if(!(b>=q))for(c=k;l>c;c+=1)c>=r||(d=4*(q*c+b),a[d+0]=e,a[d+1]=f,a[d+2]=g,a[d+3]=h)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"pixelSize",8,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Threshold=function(a){var b,c=255*this.threshold(),d=a.data,e=d.length;for(b=0;e>b;b+=1)d[b]=d[b]<c?0:255},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",.5,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Sepia=function(a){var b,c,d,e,f,g,h,i,j,k=a.data,l=a.width,m=a.height,n=4*l;do{b=(m-1)*n,c=l;do d=b+4*(c-1),e=k[d],f=k[d+1],g=k[d+2],h=.393*e+.769*f+.189*g,i=.349*e+.686*f+.168*g,j=.272*e+.534*f+.131*g,k[d]=h>255?255:h,k[d+1]=i>255?255:i,k[d+2]=j>255?255:j,k[d+3]=k[d+3];while(--c)}while(--m)}}(),function(){Kinetic.Filters.Solarize=function(a){var b=a.data,c=a.width,d=a.height,e=4*c,f=d;do{var g=(f-1)*e,h=c;do{var i=g+4*(h-1),j=b[i],k=b[i+1],l=b[i+2];j>127&&(j=255-j),k>127&&(k=255-k),l>127&&(l=255-l),b[i]=j,b[i+1]=k,b[i+2]=l}while(--h)}while(--f)}}(),function(){var a=function(a,b,c){var d,e,f,g,h=a.data,i=b.data,j=a.width,k=a.height,l=c.polarCenterX||j/2,m=c.polarCenterY||k/2,n=0,o=0,p=0,q=0,r=Math.sqrt(l*l+m*m);e=j-l,f=k-m,g=Math.sqrt(e*e+f*f),r=g>r?g:r;var s,t,u,v,w=k,x=j,y=360/x*Math.PI/180;for(t=0;x>t;t+=1)for(u=Math.sin(t*y),v=Math.cos(t*y),s=0;w>s;s+=1)e=Math.floor(l+r*s/w*v),f=Math.floor(m+r*s/w*u),d=4*(f*j+e),n=h[d+0],o=h[d+1],p=h[d+2],q=h[d+3],d=4*(t+s*j),i[d+0]=n,i[d+1]=o,i[d+2]=p,i[d+3]=q},b=function(a,b,c){var d,e,f,g,h,i,j=a.data,k=b.data,l=a.width,m=a.height,n=c.polarCenterX||l/2,o=c.polarCenterY||m/2,p=0,q=0,r=0,s=0,t=Math.sqrt(n*n+o*o);e=l-n,f=m-o,i=Math.sqrt(e*e+f*f),t=i>t?i:t;var u,v,w,x,y=m,z=l,A=c.polarRotation||0;for(e=0;l>e;e+=1)for(f=0;m>f;f+=1)g=e-n,h=f-o,u=Math.sqrt(g*g+h*h)*y/t,v=(180*Math.atan2(h,g)/Math.PI+360+A)%360,v=v*z/360,w=Math.floor(v),x=Math.floor(u),d=4*(x*l+w),p=j[d+0],q=j[d+1],r=j[d+2],s=j[d+3],d=4*(f*l+e),k[d+0]=p,k[d+1]=q,k[d+2]=r,k[d+3]=s},c=Kinetic.Util.createCanvasElement();Kinetic.Filters.Kaleidoscope=function(d){var e,f,g,h,i,j,k,l,m,n,o=d.width,p=d.height,q=Math.round(this.kaleidoscopePower()),r=Math.round(this.kaleidoscopeAngle()),s=Math.floor(o*(r%360)/360);if(!(1>q)){c.width=o,c.height=p;var t=c.getContext("2d").getImageData(0,0,o,p);a(d,t,{polarCenterX:o/2,polarCenterY:p/2});for(var u=o/Math.pow(2,q);8>=u;)u=2*u,q-=1;u=Math.ceil(u);var v=u,w=0,x=v,y=1;for(s+u>o&&(w=v,x=0,y=-1),f=0;p>f;f+=1)for(e=w;e!==x;e+=y)g=Math.round(e+s)%o,m=4*(o*f+g),i=t.data[m+0],j=t.data[m+1],k=t.data[m+2],l=t.data[m+3],n=4*(o*f+e),t.data[n+0]=i,t.data[n+1]=j,t.data[n+2]=k,t.data[n+3]=l;for(f=0;p>f;f+=1)for(v=Math.floor(u),h=0;q>h;h+=1){for(e=0;v+1>e;e+=1)m=4*(o*f+e),i=t.data[m+0],j=t.data[m+1],k=t.data[m+2],l=t.data[m+3],n=4*(o*f+2*v-e-1),t.data[n+0]=i,t.data[n+1]=j,t.data[n+2]=k,t.data[n+3]=l;v*=2}b(t,d,{polarRotation:0})}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopePower",2,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopeAngle",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function a(a){Kinetic.root.setTimeout(a,1e3/60)}function b(){return e.apply(Kinetic.root,arguments)}var c=500,d=function(){return Kinetic.root.performance&&Kinetic.root.performance.now?function(){return Kinetic.root.performance.now()}:function(){return(new Date).getTime()}}(),e=function(){return Kinetic.root.requestAnimationFrame||Kinetic.root.webkitRequestAnimationFrame||Kinetic.root.mozRequestAnimationFrame||Kinetic.root.oRequestAnimationFrame||Kinetic.root.msRequestAnimationFrame||a}();Kinetic.Animation=function(a,b){var c=Kinetic.Animation;this.func=a,this.setLayers(b),this.id=c.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:d()}},Kinetic.Animation.prototype={setLayers:function(a){var b=[];b=a?a.length>0?a:[a]:[],this.layers=b},getLayers:function(){return this.layers},addLayer:function(a){var b,c,d=this.layers;if(d){for(b=d.length,c=0;b>c;c++)if(d[c]._id===a._id)return!1}else this.layers=[];return this.layers.push(a),!0},isRunning:function(){var a,b=Kinetic.Animation,c=b.animations,d=c.length;for(a=0;d>a;a++)if(c[a].id===this.id)return!0;return!1},start:function(){var a=Kinetic.Animation;this.stop(),this.frame.timeDiff=0,this.frame.lastTime=d(),a._addAnimation(this)},stop:function(){Kinetic.Animation._removeAnimation(this)},_updateFrameObject:function(a){this.frame.timeDiff=a-this.frame.lastTime,this.frame.lastTime=a,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}},Kinetic.Animation.animations=[],Kinetic.Animation.animIdCounter=0,Kinetic.Animation.animRunning=!1,Kinetic.Animation._addAnimation=function(a){this.animations.push(a),this._handleAnimation()},Kinetic.Animation._removeAnimation=function(a){var b,c=a.id,d=this.animations,e=d.length;for(b=0;e>b;b++)if(d[b].id===c){this.animations.splice(b,1);break}},Kinetic.Animation._runFrames=function(){var a,b,c,e,f,g,h,i,j={},k=this.animations;for(e=0;e<k.length;e++){for(a=k[e],b=a.layers,c=a.func,a._updateFrameObject(d()),g=b.length,f=0;g>f;f++)h=b[f],void 0!==h._id&&(j[h._id]=h);c&&c.call(a,a.frame)}for(i in j)j[i].draw()},Kinetic.Animation._animationLoop=function(){var a=Kinetic.Animation;a.animations.length?(b(a._animationLoop),a._runFrames()):a.animRunning=!1},Kinetic.Animation._handleAnimation=function(){var a=this;this.animRunning||(this.animRunning=!0,a._animationLoop())};var f=Kinetic.Node.prototype.moveTo;Kinetic.Node.prototype.moveTo=function(a){f.call(this,a)},Kinetic.Layer.prototype.batchDraw=function(){var a=this,b=Kinetic.Animation;this.batchAnim||(this.batchAnim=new b(function(){a.lastBatchDrawTime&&d()-a.lastBatchDrawTime>c&&a.batchAnim.stop()},this)),this.lastBatchDrawTime=d(),this.batchAnim.isRunning()||(this.draw(),this.batchAnim.start())},Kinetic.Stage.prototype.batchDraw=function(){this.getChildren().each(function(a){a.batchDraw()})}}((1,eval)("this")),function(){var a={node:1,duration:1,easing:1,onFinish:1,yoyo:1},b=1,c=2,d=3,e=0;Kinetic.Tween=function(b){var c,d=this,g=b.node,h=g._id,i=b.duration||1,j=b.easing||Kinetic.Easings.Linear,k=!!b.yoyo;this.node=g,this._id=e++,this.anim=new Kinetic.Animation(function(){d.tween.onEnterFrame()},g.getLayer()),this.tween=new f(c,function(a){d._tweenFunc(a)},j,0,1,1e3*i,k),this._addListeners(),Kinetic.Tween.attrs[h]||(Kinetic.Tween.attrs[h]={}),Kinetic.Tween.attrs[h][this._id]||(Kinetic.Tween.attrs[h][this._id]={}),Kinetic.Tween.tweens[h]||(Kinetic.Tween.tweens[h]={});for(c in b)void 0===a[c]&&this._addAttr(c,b[c]);this.reset(),this.onFinish=b.onFinish,this.onReset=b.onReset},Kinetic.Tween.attrs={},Kinetic.Tween.tweens={},Kinetic.Tween.prototype={_addAttr:function(a,b){var c,d,e,f,g,h=this.node,i=h._id;if(e=Kinetic.Tween.tweens[i][a],e&&delete Kinetic.Tween.attrs[i][e][a],c=h.getAttr(a),Kinetic.Util._isArray(b))for(d=[],g=b.length,f=0;g>f;f++)d.push(b[f]-c[f]);else d=b-c;Kinetic.Tween.attrs[i][this._id][a]={start:c,diff:d},Kinetic.Tween.tweens[i][a]=this._id},_tweenFunc:function(a){var b,c,d,e,f,g,h,i=this.node,j=Kinetic.Tween.attrs[i._id][this._id];for(b in j){if(c=j[b],d=c.start,e=c.diff,Kinetic.Util._isArray(d))for(f=[],h=d.length,g=0;h>g;g++)f.push(d[g]+e[g]*a);else f=d+e*a;i.setAttr(b,f)}},_addListeners:function(){var a=this;this.tween.onPlay=function(){a.anim.start()},this.tween.onReverse=function(){a.anim.start()},this.tween.onPause=function(){a.anim.stop()},this.tween.onFinish=function(){a.onFinish&&a.onFinish()},this.tween.onReset=function(){a.onReset&&a.onReset()}},play:function(){return this.tween.play(),this},reverse:function(){return this.tween.reverse(),this},reset:function(){this.node;return this.tween.reset(),this},seek:function(a){this.node;return this.tween.seek(1e3*a),this},pause:function(){return this.tween.pause(),this},finish:function(){this.node;return this.tween.finish(),this},destroy:function(){var a,b=this.node._id,c=this._id,d=Kinetic.Tween.tweens[b];this.pause();for(a in d)delete Kinetic.Tween.tweens[b][a];delete Kinetic.Tween.attrs[b][c]}};var f=function(a,b,c,d,e,f,g){this.prop=a,this.propFunc=b,this.begin=d,this._pos=d,this.duration=f,this._change=0,this.prevPos=0,this.yoyo=g,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=c,this._change=e-this.begin,this.pause()};f.prototype={fire:function(a){var b=this[a];b&&b()},setTime:function(a){a>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():0>a?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=a,this.update())},getTime:function(){return this._time},setPosition:function(a){this.prevPos=this._pos,this.propFunc(a),this._pos=a},getPosition:function(a){return void 0===a&&(a=this._time),this.func(a,this.begin,this._change,this.duration)},play:function(){this.state=c,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},reverse:function(){this.state=d,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},seek:function(a){this.pause(),this._time=a,this.update(),this.fire("onSeek")},reset:function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},finish:function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},update:function(){this.setPosition(this.getPosition(this._time))},onEnterFrame:function(){var a=this.getTimer()-this._startTime;this.state===c?this.setTime(a):this.state===d&&this.setTime(this.duration-a)},pause:function(){this.state=b,this.fire("onPause")},getTimer:function(){return(new Date).getTime()}},Kinetic.Easings={BackEaseIn:function(a,b,c,d){var e=1.70158;return c*(a/=d)*a*((e+1)*a-e)+b},BackEaseOut:function(a,b,c,d){var e=1.70158;return c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},BackEaseInOut:function(a,b,c,d){var e=1.70158;return(a/=d/2)<1?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b},ElasticEaseIn:function(a,b,c,d,e,f){var g=0;return 0===a?b:1==(a/=d)?b+c:(f||(f=.3*d),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/(2*Math.PI)*Math.asin(c/e),-(e*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/f))+b)},ElasticEaseOut:function(a,b,c,d,e,f){var g=0;return 0===a?b:1==(a/=d)?b+c:(f||(f=.3*d),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/(2*Math.PI)*Math.asin(c/e),e*Math.pow(2,-10*a)*Math.sin(2*(a*d-g)*Math.PI/f)+c+b)},ElasticEaseInOut:function(a,b,c,d,e,f){var g=0;return 0===a?b:2==(a/=d/2)?b+c:(f||(f=.3*d*1.5),!e||e<Math.abs(c)?(e=c,g=f/4):g=f/(2*Math.PI)*Math.asin(c/e),1>a?-.5*e*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/f)+b:e*Math.pow(2,-10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/f)*.5+c+b)},BounceEaseOut:function(a,b,c,d){return(a/=d)<1/2.75?7.5625*c*a*a+b:2/2.75>a?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:2.5/2.75>a?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},BounceEaseIn:function(a,b,c,d){return c-Kinetic.Easings.BounceEaseOut(d-a,0,c,d)+b},BounceEaseInOut:function(a,b,c,d){return d/2>a?.5*Kinetic.Easings.BounceEaseIn(2*a,0,c,d)+b:.5*Kinetic.Easings.BounceEaseOut(2*a-d,0,c,d)+.5*c+b},EaseIn:function(a,b,c,d){return c*(a/=d)*a+b},EaseOut:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},EaseInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},StrongEaseIn:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},StrongEaseOut:function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},StrongEaseInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b},Linear:function(a,b,c,d){return c*a/d+b}}}(),function(){Kinetic.DD={anim:new Kinetic.Animation,isDragging:!1,offset:{x:0,y:0},node:null,_drag:function(a){var b=Kinetic.DD,c=b.node;if(c){if(!b.isDragging){var d=c.getStage().getPointerPosition(),e=c.dragDistance(),f=Math.max(Math.abs(d.x-b.startPointerPos.x),Math.abs(d.y-b.startPointerPos.y));if(e>f)return}c._setDragPosition(a),b.isDragging||(b.isDragging=!0,c.fire("dragstart",{type:"dragstart",target:c,evt:a},!0)),c.fire("dragmove",{type:"dragmove",target:c,evt:a},!0)}},_endDragBefore:function(a){var b,c,d=Kinetic.DD,e=d.node;e&&(b=e.nodeType,c=e.getLayer(),d.anim.stop(),d.isDragging&&(d.isDragging=!1,Kinetic.listenClickTap=!1,a&&(a.dragEndNode=e)),delete d.node,(c||e).draw())},_endDragAfter:function(a){a=a||{};var b=a.dragEndNode;a&&b&&b.fire("dragend",{type:"dragend",target:b,evt:a},!0)}},Kinetic.Node.prototype.startDrag=function(){var a=Kinetic.DD,b=this.getStage(),c=this.getLayer(),d=b.getPointerPosition(),e=this.getAbsolutePosition();d&&(a.node&&a.node.stopDrag(),a.node=this,a.startPointerPos=d,a.offset.x=d.x-e.x,a.offset.y=d.y-e.y,a.anim.setLayers(c||this.getLayers()),a.anim.start(),this._setDragPosition())},Kinetic.Node.prototype._setDragPosition=function(a){var b=Kinetic.DD,c=this.getStage().getPointerPosition(),d=this.getDragBoundFunc();if(c){var e={x:c.x-b.offset.x,y:c.y-b.offset.y};void 0!==d&&(e=d.call(this,e,a)),this.setAbsolutePosition(e)}},Kinetic.Node.prototype.stopDrag=function(){var a=Kinetic.DD,b={};a._endDragBefore(b),a._endDragAfter(b)},Kinetic.Node.prototype.setDraggable=function(a){this._setAttr("draggable",a),this._dragChange()};var a=Kinetic.Node.prototype.destroy;Kinetic.Node.prototype.destroy=function(){var b=Kinetic.DD;b.node&&b.node._id===this._id&&this.stopDrag(),a.call(this)},Kinetic.Node.prototype.isDragging=function(){var a=Kinetic.DD;return a.node&&a.node._id===this._id&&a.isDragging},Kinetic.Node.prototype._listenDrag=function(){var a=this;this._dragCleanup(),"Stage"===this.getClassName()?this.on("contentMousedown.kinetic contentTouchstart.kinetic",function(b){Kinetic.DD.node||a.startDrag(b)}):this.on("mousedown.kinetic touchstart.kinetic",function(b){Kinetic.DD.node||a.startDrag(b)})},Kinetic.Node.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var a=this.getStage(),b=Kinetic.DD;a&&b.node&&b.node._id===this._id&&b.node.stopDrag()}},Kinetic.Node.prototype._dragCleanup=function(){"Stage"===this.getClassName()?(this.off("contentMousedown.kinetic"),this.off("contentTouchstart.kinetic")):(this.off("mousedown.kinetic"),this.off("touchstart.kinetic"))},Kinetic.Factory.addGetterSetter(Kinetic.Node,"dragBoundFunc"),Kinetic.Factory.addGetter(Kinetic.Node,"draggable",!1),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"draggable");var b=Kinetic.document.documentElement;b.addEventListener("mouseup",Kinetic.DD._endDragBefore,!0),b.addEventListener("touchend",Kinetic.DD._endDragBefore,!0),b.addEventListener("mouseup",Kinetic.DD._endDragAfter,!1),b.addEventListener("touchend",Kinetic.DD._endDragAfter,!1)}(),function(){Kinetic.Util.addMethods(Kinetic.Container,{__init:function(a){this.children=new Kinetic.Collection,Kinetic.Node.call(this,a)},getChildren:function(a){if(a){var b=new Kinetic.Collection;return this.children.each(function(c){a(c)&&b.push(c)}),b}return this.children},hasChildren:function(){return this.getChildren().length>0},removeChildren:function(){for(var a,b=Kinetic.Collection.toCollection(this.children),c=0;c<b.length;c++)a=b[c],delete a.parent,a.index=0,a.hasChildren()&&a.removeChildren(),a.remove();return b=null,this.children=new Kinetic.Collection,this},destroyChildren:function(){for(var a,b=Kinetic.Collection.toCollection(this.children),c=0;c<b.length;c++)a=b[c],delete a.parent,a.index=0,a.destroy();return b=null,this.children=new Kinetic.Collection,this},add:function(a){if(!(arguments.length>1)){if(a.getParent())return void a.moveTo(this);var b=this.children;return this._validateAdd(a),a.index=b.length,a.parent=this,b.push(a),this._fire("add",{child:a}),this}for(var c=0;c<arguments.length;c++)this.add(arguments[c])},destroy:function(){this.hasChildren()&&this.destroyChildren(),Kinetic.Node.prototype.destroy.call(this)},find:function(a){var b,c,d,e,f,g,h,i=[],j=a.replace(/ /g,"").split(","),k=j.length;for(b=0;k>b;b++)if(d=j[b],"#"===d.charAt(0))f=this._getNodeById(d.slice(1)),f&&i.push(f);else if("."===d.charAt(0))e=this._getNodesByName(d.slice(1)),i=i.concat(e);else for(g=this.getChildren(),h=g.length,c=0;h>c;c++)i=i.concat(g[c]._get(d));return Kinetic.Collection.toCollection(i)},_getNodeById:function(a){var b=Kinetic.ids[a];return void 0!==b&&this.isAncestorOf(b)?b:null},_getNodesByName:function(a){var b=Kinetic.names[a]||[];return this._getDescendants(b)},_get:function(a){for(var b=Kinetic.Node.prototype._get.call(this,a),c=this.getChildren(),d=c.length,e=0;d>e;e++)b=b.concat(c[e]._get(a));return b},toObject:function(){var a=Kinetic.Node.prototype.toObject.call(this);a.children=[];for(var b=this.getChildren(),c=b.length,d=0;c>d;d++){var e=b[d];a.children.push(e.toObject())}return a},_getDescendants:function(a){for(var b=[],c=a.length,d=0;c>d;d++){var e=a[d];this.isAncestorOf(e)&&b.push(e)}return b},isAncestorOf:function(a){for(var b=a.getParent();b;){if(b._id===this._id)return!0;b=b.getParent()}return!1},clone:function(a){var b=Kinetic.Node.prototype.clone.call(this,a);return this.getChildren().each(function(a){b.add(a.clone())}),b},getAllIntersections:function(a){var b=[];return this.find("Shape").each(function(c){c.isVisible()&&c.intersects(a)&&b.push(c)}),b},_setChildrenIndices:function(){this.children.each(function(a,b){a.index=b})},drawScene:function(a,b){var c=this.getLayer(),d=a||c&&c.getCanvas(),e=d&&d.getContext(),f=this._cache.canvas,g=f&&f.scene;return this.isVisible()&&(g?this._drawCachedSceneCanvas(e):this._drawChildren(d,"drawScene",b)),this
},drawHit:function(a,b){var c=this.getLayer(),d=a||c&&c.hitCanvas,e=d&&d.getContext(),f=this._cache.canvas,g=f&&f.hit;return this.shouldDrawHit()&&(g?this._drawCachedHitCanvas(e):this._drawChildren(d,"drawHit",b)),this},_drawChildren:function(a,b,c){var d,e,f=this.getLayer(),g=a&&a.getContext(),h=this.getClipWidth(),i=this.getClipHeight(),j=h&&i;j&&f&&(d=this.getClipX(),e=this.getClipY(),g.save(),f._applyTransform(this,g),g.beginPath(),g.rect(d,e,h,i),g.clip(),g.reset()),this.children.each(function(d){d[b](a,c)}),j&&g.restore()}}),Kinetic.Util.extend(Kinetic.Container,Kinetic.Node),Kinetic.Container.prototype.get=Kinetic.Container.prototype.find,Kinetic.Factory.addComponentsGetterSetter(Kinetic.Container,"clip",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipX"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipY"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipWidth"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipHeight"),Kinetic.Collection.mapMethods(Kinetic.Container)}(),function(){function a(a){a.fill()}function b(a){a.stroke()}function c(a){a.fill()}function d(a){a.stroke()}function e(){this._clearCache(f)}var f="hasShadow";Kinetic.Util.addMethods(Kinetic.Shape,{__init:function(f){this.nodeType="Shape",this._fillFunc=a,this._strokeFunc=b,this._fillFuncHit=c,this._strokeFuncHit=d;for(var g,h=Kinetic.shapes;;)if(g=Kinetic.Util.getRandomColor(),g&&!(g in h))break;this.colorKey=g,h[g]=this,Kinetic.Node.call(this,f),this.on("shadowColorChange.kinetic shadowBlurChange.kinetic shadowOffsetChange.kinetic shadowOpacityChange.kinetic shadowEnabledChange.kinetic",e)},hasChildren:function(){return!1},getChildren:function(){return[]},getContext:function(){return this.getLayer().getContext()},getCanvas:function(){return this.getLayer().getCanvas()},hasShadow:function(){return this._getCache(f,this._hasShadow)},_hasShadow:function(){return this.getShadowEnabled()&&0!==this.getShadowOpacity()&&!!(this.getShadowColor()||this.getShadowBlur()||this.getShadowOffsetX()||this.getShadowOffsetY())},hasFill:function(){return!!(this.getFill()||this.getFillPatternImage()||this.getFillLinearGradientColorStops()||this.getFillRadialGradientColorStops())},hasStroke:function(){return!!(this.stroke()||this.strokeRed()||this.strokeGreen()||this.strokeBlue())},_get:function(a){return this.className===a||this.nodeType===a?[this]:[]},intersects:function(a){var b,c=this.getStage(),d=c.bufferHitCanvas;return d.getContext().clear(),this.drawScene(d),b=d.context.getImageData(Math.round(a.x),Math.round(a.y),1,1).data,b[3]>0},destroy:function(){Kinetic.Node.prototype.destroy.call(this),delete Kinetic.shapes[this.colorKey]},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasFill()&&this.hasStroke()&&this.getStage()},drawScene:function(a,b){var c,d,e,f=this.getLayer(),g=a||f.getCanvas(),h=g.getContext(),i=this._cache.canvas,j=this.sceneFunc(),k=this.hasShadow();return this.isVisible()&&(i?this._drawCachedSceneCanvas(h):j&&(h.save(),this._useBufferCanvas()?(c=this.getStage(),d=c.bufferCanvas,e=d.getContext(),e.clear(),e.save(),e._applyLineJoin(this),f._applyTransform(this,e,b),j.call(this,e),e.restore(),k&&(h.save(),h._applyShadow(this),h.drawImage(d._canvas,0,0),h.restore()),h._applyOpacity(this),h.drawImage(d._canvas,0,0)):(h._applyLineJoin(this),f._applyTransform(this,h,b),k&&(h.save(),h._applyShadow(this),j.call(this,h),h.restore()),h._applyOpacity(this),j.call(this,h)),h.restore())),this},drawHit:function(a,b){var c=this.getLayer(),d=a||c.hitCanvas,e=d.getContext(),f=this.hitFunc()||this.sceneFunc(),g=this._cache.canvas,h=g&&g.hit;return this.shouldDrawHit()&&(h?this._drawCachedHitCanvas(e):f&&(e.save(),e._applyLineJoin(this),c._applyTransform(this,e,b),f.call(this,e),e.restore())),this},drawHitFromCache:function(a){var b,c,d,e,f,g,h,i,j=a||0,k=this._cache.canvas,l=this._getCachedSceneCanvas(),m=l.getContext(),n=k.hit,o=n.getContext(),p=l.getWidth(),q=l.getHeight();o.clear();try{for(b=m.getImageData(0,0,p,q),c=b.data,d=o.getImageData(0,0,p,q),e=d.data,f=c.length,g=Kinetic.Util._hexToRgb(this.colorKey),h=0;f>h;h+=4)i=c[h+3],i>j&&(e[h]=g.r,e[h+1]=g.g,e[h+2]=g.b,e[h+3]=255);o.putImageData(d,0,0)}catch(r){Kinetic.Util.warn("Unable to draw hit graph from cached scene canvas. "+r.message)}return this}}),Kinetic.Util.extend(Kinetic.Shape,Kinetic.Node),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"stroke"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeWidth",2),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineJoin"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineCap"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"sceneFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"hitFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dash"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowColor"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlur"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOpacity"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"shadowOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternImage"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fill"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRepeat","repeat"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dashEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeScaleEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPriority","color"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternScale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRotation",0),Kinetic.Factory.backCompat(Kinetic.Shape,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),Kinetic.Collection.mapMethods(Kinetic.Shape)}(),function(){function a(a,b){a.content.addEventListener(b,function(c){a[I+b](c)},!1)}var b="Stage",c="string",d="px",e="mouseout",f="mouseleave",g="mouseover",h="mouseenter",i="mousemove",j="mousedown",k="mouseup",l="click",m="dblclick",n="touchstart",o="touchend",p="tap",q="dbltap",r="touchmove",s="contentMouseout",t="contentMouseover",u="contentMousemove",v="contentMousedown",w="contentMouseup",x="contentClick",y="contentDblclick",z="contentTouchstart",A="contentTouchend",B="contentDbltap",C="contentTouchmove",D="div",E="relative",F="inline-block",G="kineticjs-content",H=" ",I="_",J="container",K="",L=[j,i,k,e,n,r,o,g],M=L.length;Kinetic.Util.addMethods(Kinetic.Stage,{___init:function(a){this.nodeType=b,Kinetic.Container.call(this,a),this._id=Kinetic.idCounter++,this._buildDOM(),this._bindContentEvents(),this._enableNestedTransforms=!1,Kinetic.stages.push(this)},_validateAdd:function(a){"Layer"!==a.getType()&&Kinetic.Util.error("You may only add layers to the stage.")},setContainer:function(a){if(typeof a===c){var b=a;if(a=Kinetic.document.getElementById(a),!a)throw"Can not find container in document with id "+b}return this._setAttr(J,a),this},shouldDrawHit:function(){return!0},draw:function(){return Kinetic.Node.prototype.draw.call(this),this},setHeight:function(a){return Kinetic.Node.prototype.setHeight.call(this,a),this._resizeDOM(),this},setWidth:function(a){return Kinetic.Node.prototype.setWidth.call(this,a),this._resizeDOM(),this},clear:function(){var a,b=this.children,c=b.length;for(a=0;c>a;a++)b[a].clear();return this},clone:function(a){return a||(a={}),a.container=Kinetic.document.createElement(D),Kinetic.Container.prototype.clone.call(this,a)},destroy:function(){var a=this.content;Kinetic.Container.prototype.destroy.call(this),a&&Kinetic.Util._isInDocument(a)&&this.getContainer().removeChild(a);var b=Kinetic.stages.indexOf(this);b>-1&&Kinetic.stages.splice(b,1)},getPointerPosition:function(){return this.pointerPos},getStage:function(){return this},getContent:function(){return this.content},toDataURL:function(a){function b(e){var f=i[e],j=f.toDataURL(),k=new Kinetic.window.Image;k.onload=function(){h.drawImage(k,0,0),e<i.length-1?b(e+1):a.callback(g.toDataURL(c,d))},k.src=j}a=a||{};var c=a.mimeType||null,d=a.quality||null,e=a.x||0,f=a.y||0,g=new Kinetic.SceneCanvas({width:a.width||this.getWidth(),height:a.height||this.getHeight(),pixelRatio:1}),h=g.getContext()._context,i=this.children;(e||f)&&h.translate(-1*e,-1*f),b(0)},toImage:function(a){var b=a.callback;a.callback=function(a){Kinetic.Util._getImage(a,function(a){b(a)})},this.toDataURL(a)},getIntersection:function(a){var b,c,d=this.getChildren(),e=d.length,f=e-1;for(b=f;b>=0;b--)if(c=d[b].getIntersection(a))return c;return null},_resizeDOM:function(){if(this.content){var a,b,c=this.getWidth(),e=this.getHeight(),f=this.getChildren(),g=f.length;for(this.content.style.width=c+d,this.content.style.height=e+d,this.bufferCanvas.setSize(c,e),this.bufferHitCanvas.setSize(c,e),a=0;g>a;a++)b=f[a],b.getCanvas().setSize(c,e),b.hitCanvas.setSize(c,e),b.draw()}},add:function(a){if(!(arguments.length>1))return Kinetic.Container.prototype.add.call(this,a),a._setCanvasSize(this.width(),this.height()),a.draw(),this.content.appendChild(a.canvas._canvas),this;for(var b=0;b<arguments.length;b++)this.add(arguments[b])},getParent:function(){return null},getLayer:function(){return null},getLayers:function(){return this.getChildren()},_bindContentEvents:function(){for(var b=0;M>b;b++)a(this,L[b])},_mouseover:function(a){Kinetic.UA.mobile||(this._setPointerPosition(a),this._fire(t,{evt:a}))},_mouseout:function(a){if(!Kinetic.UA.mobile){this._setPointerPosition(a);var b=this.targetShape;b&&!Kinetic.isDragging()&&(b._fireAndBubble(e,{evt:a}),b._fireAndBubble(f,{evt:a}),this.targetShape=null),this.pointerPos=void 0,this._fire(s,{evt:a})}},_mousemove:function(a){if(!Kinetic.UA.mobile){this._setPointerPosition(a);var b=Kinetic.DD,c=this.getIntersection(this.getPointerPosition());c&&c.isListening()?Kinetic.isDragging()||this.targetShape&&this.targetShape._id===c._id?c._fireAndBubble(i,{evt:a}):(this.targetShape&&(this.targetShape._fireAndBubble(e,{evt:a},c),this.targetShape._fireAndBubble(f,{evt:a},c)),c._fireAndBubble(g,{evt:a},this.targetShape),c._fireAndBubble(h,{evt:a},this.targetShape),this.targetShape=c):this.targetShape&&!Kinetic.isDragging()&&(this.targetShape._fireAndBubble(e,{evt:a}),this.targetShape._fireAndBubble(f,{evt:a}),this.targetShape=null),this._fire(u,{evt:a}),b&&b._drag(a)}a.preventDefault&&a.preventDefault()},_mousedown:function(a){if(!Kinetic.UA.mobile){this._setPointerPosition(a);var b=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,b&&b.isListening()&&(this.clickStartShape=b,b._fireAndBubble(j,{evt:a})),this._fire(v,{evt:a})}a.preventDefault&&a.preventDefault()},_mouseup:function(a){if(!Kinetic.UA.mobile){this._setPointerPosition(a);var b=this.getIntersection(this.getPointerPosition()),c=this.clickStartShape,d=!1;Kinetic.inDblClickWindow?(d=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),b&&b.isListening()&&(b._fireAndBubble(k,{evt:a}),Kinetic.listenClickTap&&c&&c._id===b._id&&(b._fireAndBubble(l,{evt:a}),d&&b._fireAndBubble(m,{evt:a}))),this._fire(w,{evt:a}),Kinetic.listenClickTap&&(this._fire(x,{evt:a}),d&&this._fire(y,{evt:a})),Kinetic.listenClickTap=!1}a.preventDefault&&a.preventDefault()},_touchstart:function(a){this._setPointerPosition(a);var b=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,b&&b.isListening()&&(this.tapStartShape=b,b._fireAndBubble(n,{evt:a}),b.isListening()&&a.preventDefault&&a.preventDefault()),this._fire(z,{evt:a})},_touchend:function(a){this._setPointerPosition(a);var b=this.getIntersection(this.getPointerPosition()),c=!1;Kinetic.inDblClickWindow?(c=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),b&&b.isListening()&&(b._fireAndBubble(o,{evt:a}),Kinetic.listenClickTap&&b._id===this.tapStartShape._id&&(b._fireAndBubble(p,{evt:a}),c&&b._fireAndBubble(q,{evt:a})),b.isListening()&&a.preventDefault&&a.preventDefault()),Kinetic.listenClickTap&&(this._fire(A,{evt:a}),c&&this._fire(B,{evt:a})),Kinetic.listenClickTap=!1},_touchmove:function(a){this._setPointerPosition(a);var b=Kinetic.DD,c=this.getIntersection(this.getPointerPosition());c&&c.isListening()&&(c._fireAndBubble(r,{evt:a}),c.isListening()&&a.preventDefault&&a.preventDefault()),this._fire(C,{evt:a}),b&&b._drag(a)},_setPointerPosition:function(a){var b,c=this._getContentPosition(),d=a.offsetX,e=a.clientX,f=null,g=null;a=a?a:window.event,void 0!==a.touches?a.touches.length>0&&(b=a.touches[0],f=b.clientX-c.left,g=b.clientY-c.top):void 0!==d?(f=d,g=a.offsetY):"mozilla"===Kinetic.UA.browser?(f=a.layerX,g=a.layerY):void 0!==e&&c&&(f=e-c.left,g=a.clientY-c.top),null!==f&&null!==g&&(this.pointerPos={x:f,y:g})},_getContentPosition:function(){var a=this.content.getBoundingClientRect?this.content.getBoundingClientRect():{top:0,left:0};return{top:a.top,left:a.left}},_buildDOM:function(){var a=this.getContainer();if(!a){if(Kinetic.Util.isBrowser())throw"Stage has not container. But container is required";a=Kinetic.document.createElement(D)}a.innerHTML=K,this.content=Kinetic.document.createElement(D),this.content.style.position=E,this.content.style.display=F,this.content.className=G,this.content.setAttribute("role","presentation"),a.appendChild(this.content),this.bufferCanvas=new Kinetic.SceneCanvas({pixelRatio:1}),this.bufferHitCanvas=new Kinetic.HitCanvas,this._resizeDOM()},_onContent:function(a,b){var c,d,e=a.split(H),f=e.length;for(c=0;f>c;c++)d=e[c],this.content.addEventListener(d,b,!1)},cache:function(){Kinetic.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.")},clearCache:function(){}}),Kinetic.Util.extend(Kinetic.Stage,Kinetic.Container),Kinetic.Factory.addGetter(Kinetic.Stage,"container"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Stage,"container")}(),function(){Kinetic.Util.addMethods(Kinetic.BaseLayer,{___init:function(a){this.nodeType="Layer",Kinetic.Container.call(this,a)},createPNGStream:function(){return this.canvas._canvas.createPNGStream()},getCanvas:function(){return this.canvas},getHitCanvas:function(){return this.hitCanvas},getContext:function(){return this.getCanvas().getContext()},clear:function(a){return this.getContext().clear(a),this.getHitCanvas().getContext().clear(a),this},setZIndex:function(a){Kinetic.Node.prototype.setZIndex.call(this,a);var b=this.getStage();return b&&(b.content.removeChild(this.getCanvas()._canvas),a<b.getChildren().length-1?b.content.insertBefore(this.getCanvas()._canvas,b.getChildren()[a+1].getCanvas()._canvas):b.content.appendChild(this.getCanvas()._canvas)),this},moveToTop:function(){Kinetic.Node.prototype.moveToTop.call(this);var a=this.getStage();a&&(a.content.removeChild(this.getCanvas()._canvas),a.content.appendChild(this.getCanvas()._canvas))},moveUp:function(){if(Kinetic.Node.prototype.moveUp.call(this)){var a=this.getStage();a&&(a.content.removeChild(this.getCanvas()._canvas),this.index<a.getChildren().length-1?a.content.insertBefore(this.getCanvas()._canvas,a.getChildren()[this.index+1].getCanvas()._canvas):a.content.appendChild(this.getCanvas()._canvas))}},moveDown:function(){if(Kinetic.Node.prototype.moveDown.call(this)){var a=this.getStage();if(a){var b=a.getChildren();a.content.removeChild(this.getCanvas()._canvas),a.content.insertBefore(this.getCanvas()._canvas,b[this.index+1].getCanvas()._canvas)}}},moveToBottom:function(){if(Kinetic.Node.prototype.moveToBottom.call(this)){var a=this.getStage();if(a){var b=a.getChildren();a.content.removeChild(this.getCanvas()._canvas),a.content.insertBefore(this.getCanvas()._canvas,b[1].getCanvas()._canvas)}}},getLayer:function(){return this},remove:function(){var a=this.getCanvas()._canvas;return Kinetic.Node.prototype.remove.call(this),a&&a.parentNode&&Kinetic.Util._isInDocument(a)&&a.parentNode.removeChild(a),this},getStage:function(){return this.parent}}),Kinetic.Util.extend(Kinetic.BaseLayer,Kinetic.Container),Kinetic.Factory.addGetterSetter(Kinetic.BaseLayer,"clearBeforeDraw",!0),Kinetic.Collection.mapMethods(Kinetic.BaseLayer)}(),function(){var a="#",b="beforeDraw",c="draw",d=[{x:0,y:0},{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1}],e=d.length;Kinetic.Util.addMethods(Kinetic.Layer,{____init:function(a){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,this.hitCanvas=new Kinetic.HitCanvas,Kinetic.BaseLayer.call(this,a)},_setCanvasSize:function(a,b){this.canvas.setSize(a,b),this.hitCanvas.setSize(a,b)},_validateAdd:function(a){var b=a.getType();"Group"!==b&&"Shape"!==b&&Kinetic.Util.error("You may only add groups and shapes to a layer.")},getIntersection:function(a){var b,c,f,g;if(!this.hitGraphEnabled()||!this.isVisible())return null;for(c=0;e>c;c++){if(f=d[c],b=this._getIntersection({x:a.x+f.x,y:a.y+f.y}),g=b.shape)return g;if(!b.antialiased)return null}},_getIntersection:function(b){var c,d,e=this.hitCanvas.context._context.getImageData(b.x,b.y,1,1).data,f=e[3];return 255===f?(c=Kinetic.Util._rgbToHex(e[0],e[1],e[2]),d=Kinetic.shapes[a+c],{shape:d}):f>0?{antialiased:!0}:{}},drawScene:function(a,d){var e=this.getLayer(),f=a||e&&e.getCanvas();return this._fire(b,{node:this}),this.getClearBeforeDraw()&&f.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,f,d),this._fire(c,{node:this}),this},_applyTransform:function(a,b,c){var d=a.getAbsoluteTransform(c).getMatrix();b.transform(d[0],d[1],d[2],d[3],d[4],d[5])},drawHit:function(a,b){var c=this.getLayer(),d=a||c&&c.hitCanvas;return c&&c.getClearBeforeDraw()&&c.getHitCanvas().getContext().clear(),Kinetic.Container.prototype.drawHit.call(this,d,b),this},clear:function(a){return this.getContext().clear(a),this.getHitCanvas().getContext().clear(a),this},setVisible:function(a){return Kinetic.Node.prototype.setVisible.call(this,a),a?(this.getCanvas()._canvas.style.display="block",this.hitCanvas._canvas.style.display="block"):(this.getCanvas()._canvas.style.display="none",this.hitCanvas._canvas.style.display="none"),this},enableHitGraph:function(){return this.setHitGraphEnabled(!0),this},disableHitGraph:function(){return this.setHitGraphEnabled(!1),this}}),Kinetic.Util.extend(Kinetic.Layer,Kinetic.BaseLayer),Kinetic.Factory.addGetterSetter(Kinetic.Layer,"hitGraphEnabled",!0),Kinetic.Collection.mapMethods(Kinetic.Layer)}(),function(){Kinetic.Util.addMethods(Kinetic.FastLayer,{____init:function(a){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,Kinetic.BaseLayer.call(this,a)},_validateAdd:function(a){var b=a.getType();"Shape"!==b&&Kinetic.Util.error("You may only add shapes to a fast layer.")},_setCanvasSize:function(a,b){this.canvas.setSize(a,b)},hitGraphEnabled:function(){return!1},getIntersection:function(){return null},drawScene:function(a){var b=this.getLayer(),c=a||b&&b.getCanvas();return this.getClearBeforeDraw()&&c.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,c),this},_applyTransform:function(a,b,c){if(!c||c._id!==this._id){var d=a.getTransform().getMatrix();b.transform(d[0],d[1],d[2],d[3],d[4],d[5])}},draw:function(){return this.drawScene(),this},clear:function(a){return this.getContext().clear(a),this},setVisible:function(a){return Kinetic.Node.prototype.setVisible.call(this,a),this.getCanvas()._canvas.style.display=a?"block":"none",this}}),Kinetic.Util.extend(Kinetic.FastLayer,Kinetic.BaseLayer),Kinetic.Collection.mapMethods(Kinetic.FastLayer)}(),function(){Kinetic.Util.addMethods(Kinetic.Group,{___init:function(a){this.nodeType="Group",Kinetic.Container.call(this,a)},_validateAdd:function(a){var b=a.getType();"Group"!==b&&"Shape"!==b&&Kinetic.Util.error("You may only add groups and shapes to groups.")}}),Kinetic.Util.extend(Kinetic.Group,Kinetic.Container),Kinetic.Collection.mapMethods(Kinetic.Group)}(),function(){Kinetic.Rect=function(a){this.___init(a)},Kinetic.Rect.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Rect",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b=this.getCornerRadius(),c=this.getWidth(),d=this.getHeight();a.beginPath(),b?(a.moveTo(b,0),a.lineTo(c-b,0),a.arc(c-b,b,b,3*Math.PI/2,0,!1),a.lineTo(c,d-b),a.arc(c-b,d-b,b,0,Math.PI/2,!1),a.lineTo(b,d),a.arc(b,d-b,b,Math.PI/2,Math.PI,!1),a.lineTo(0,b),a.arc(b,b,b,Math.PI,3*Math.PI/2,!1)):a.rect(0,0,c,d),a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Rect,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Rect,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Rect)}(),function(){var a=2*Math.PI-1e-4,b="Circle";Kinetic.Circle=function(a){this.___init(a)},Kinetic.Circle.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className=b,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(b){b.beginPath(),b.arc(0,0,this.getRadius(),0,a,!1),b.closePath(),b.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius()},getHeight:function(){return 2*this.getRadius()},setWidth:function(a){Kinetic.Node.prototype.setWidth.call(this,a),this.setRadius(a/2)},setHeight:function(a){Kinetic.Node.prototype.setHeight.call(this,a),this.setRadius(a/2)}},Kinetic.Util.extend(Kinetic.Circle,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Circle,"radius",0),Kinetic.Collection.mapMethods(Kinetic.Circle)}(),function(){var a=2*Math.PI-1e-4,b="Ellipse";Kinetic.Ellipse=function(a){this.___init(a)},Kinetic.Ellipse.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className=b,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(b){var c=this.getRadius(),d=c.x,e=c.y;b.beginPath(),b.save(),d!==e&&b.scale(1,e/d),b.arc(0,0,d,0,a,!1),b.restore(),b.closePath(),b.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius().x},getHeight:function(){return 2*this.getRadius().y},setWidth:function(a){Kinetic.Node.prototype.setWidth.call(this,a),this.setRadius({x:a/2})},setHeight:function(a){Kinetic.Node.prototype.setHeight.call(this,a),this.setRadius({y:a/2})}},Kinetic.Util.extend(Kinetic.Ellipse,Kinetic.Shape),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Ellipse,"radius",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusX",0),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusY",0),Kinetic.Collection.mapMethods(Kinetic.Ellipse)}(),function(){var a=2*Math.PI-1e-4;Kinetic.Ring=function(a){this.___init(a)},Kinetic.Ring.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Ring",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(b){b.beginPath(),b.arc(0,0,this.getInnerRadius(),0,a,!1),b.moveTo(this.getOuterRadius(),0),b.arc(0,0,this.getOuterRadius(),a,0,!0),b.closePath(),b.fillStrokeShape(this)},getWidth:function(){return 2*this.getOuterRadius()},getHeight:function(){return 2*this.getOuterRadius()},setWidth:function(a){Kinetic.Node.prototype.setWidth.call(this,a),this.setOuterRadius(a/2)},setHeight:function(a){Kinetic.Node.prototype.setHeight.call(this,a),this.setOuterRadius(a/2)}},Kinetic.Util.extend(Kinetic.Ring,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Ring)}(),function(){Kinetic.Wedge=function(a){this.___init(a)},Kinetic.Wedge.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Wedge",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){a.beginPath(),a.arc(0,0,this.getRadius(),0,Kinetic.getAngle(this.getAngle()),this.getClockwise()),a.lineTo(0,0),a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Wedge,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"clockwise",!1),Kinetic.Factory.backCompat(Kinetic.Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Kinetic.Collection.mapMethods(Kinetic.Wedge)}(),function(){Math.PI/180;Kinetic.Arc=function(a){this.___init(a)},Kinetic.Arc.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Arc",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b=Kinetic.getAngle(this.angle()),c=this.clockwise();a.beginPath(),a.arc(0,0,this.getOuterRadius(),0,b,c),a.arc(0,0,this.getInnerRadius(),b,0,!c),a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Arc,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"outerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"clockwise",!1),Kinetic.Collection.mapMethods(Kinetic.Arc)}(),function(){var a="Image";Kinetic.Image=function(a){this.___init(a)},Kinetic.Image.prototype={___init:function(b){Kinetic.Shape.call(this,b),this.className=a,this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},_sceneFunc:function(a){var b,c,d,e,f=this.getWidth(),g=this.getHeight(),h=this.getImage();h&&(b=this.getCrop(),c=b.width,d=b.height,e=c&&d?[h,b.x,b.y,c,d,0,0,f,g]:[h,0,0,f,g]),a.beginPath(),a.rect(0,0,f,g),a.closePath(),a.fillStrokeShape(this),h&&a.drawImage.apply(a,e)},_hitFunc:function(a){var b=this.getWidth(),c=this.getHeight();a.beginPath(),a.rect(0,0,b,c),a.closePath(),a.fillStrokeShape(this)},getWidth:function(){var a=this.getImage();return this.attrs.width||(a?a.width:0)},getHeight:function(){var a=this.getImage();return this.attrs.height||(a?a.height:0)}},Kinetic.Util.extend(Kinetic.Image,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Image,"image"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Image,"crop",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropX",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropY",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropHeight",0),Kinetic.Collection.mapMethods(Kinetic.Image)}(),function(){function a(a){a.fillText(this.partialText,0,0)}function b(a){a.strokeText(this.partialText,0,0)}var c="auto",d="center",e="Change.kinetic",f="2d",g="-",h="",i="left",j="text",k="Text",l="middle",m="normal",n="px ",o=" ",p="right",q="word",r="char",s="none",t=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","lineHeight","text","width","height","wrap"],u=t.length,v=Kinetic.Util.createCanvasElement().getContext(f);Kinetic.Text=function(a){this.___init(a)},Kinetic.Text.prototype={___init:function(d){var f=this;void 0===d.width&&(d.width=c),void 0===d.height&&(d.height=c),Kinetic.Shape.call(this,d),this._fillFunc=a,this._strokeFunc=b,this.className=k;for(var g=0;u>g;g++)this.on(t[g]+e,f._setTextData);this._setTextData(),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(a){var b,c=this.getPadding(),e=this.getTextHeight(),f=this.getLineHeight()*e,g=this.textArr,h=g.length,j=this.getWidth();for(a.setAttr("font",this._getContextFont()),a.setAttr("textBaseline",l),a.setAttr("textAlign",i),a.save(),a.translate(c,0),a.translate(0,c+e/2),b=0;h>b;b++){var k=g[b],m=k.text,n=k.width;a.save(),this.getAlign()===p?a.translate(j-n-2*c,0):this.getAlign()===d&&a.translate((j-n-2*c)/2,0),this.partialText=m,a.fillStrokeShape(this),a.restore(),a.translate(0,f)}a.restore()},_hitFunc:function(a){var b=this.getWidth(),c=this.getHeight();a.beginPath(),a.rect(0,0,b,c),a.closePath(),a.fillStrokeShape(this)},setText:function(a){var b=Kinetic.Util._isString(a)?a:a.toString();return this._setAttr(j,b),this},getWidth:function(){return this.attrs.width===c?this.getTextWidth()+2*this.getPadding():this.attrs.width},getHeight:function(){return this.attrs.height===c?this.getTextHeight()*this.textArr.length*this.getLineHeight()+2*this.getPadding():this.attrs.height},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},_getTextSize:function(a){var b,c=v,d=this.getFontSize();return c.save(),c.font=this._getContextFont(),b=c.measureText(a),c.restore(),{width:b.width,height:parseInt(d,10)}},_getContextFont:function(){return this.getFontStyle()+o+this.getFontVariant()+o+this.getFontSize()+n+this.getFontFamily()},_addTextLine:function(a,b){return this.textArr.push({text:a,width:b})},_getTextWidth:function(a){return v.measureText(a).width},_setTextData:function(){var a=this.getText().split("\n"),b=+this.getFontSize(),d=0,e=this.getLineHeight()*b,f=this.attrs.width,h=this.attrs.height,i=f!==c,j=h!==c,k=this.getPadding(),l=f-2*k,m=h-2*k,n=0,p=this.getWrap(),q=p!==s,t=p!==r&&q;this.textArr=[],v.save(),v.font=this._getContextFont();
for(var u=0,w=a.length;w>u;++u){var x=a[u],y=this._getTextWidth(x);if(i&&y>l)for(;x.length>0;){for(var z=0,A=x.length,B="",C=0;A>z;){var D=z+A>>>1,E=x.slice(0,D+1),F=this._getTextWidth(E);l>=F?(z=D+1,B=E,C=F):A=D}if(!B)break;if(t){var G=Math.max(B.lastIndexOf(o),B.lastIndexOf(g))+1;G>0&&(z=G,B=B.slice(0,z),C=this._getTextWidth(B))}if(this._addTextLine(B,C),d=Math.max(d,C),n+=e,!q||j&&n+e>m)break;if(x=x.slice(z),x.length>0&&(y=this._getTextWidth(x),l>=y)){this._addTextLine(x,y),n+=e,d=Math.max(d,y);break}}else this._addTextLine(x,y),n+=e,d=Math.max(d,y);if(j&&n+e>m)break}v.restore(),this.textHeight=b,this.textWidth=d}},Kinetic.Util.extend(Kinetic.Text,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontStyle",m),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontVariant",m),Kinetic.Factory.addGetterSetter(Kinetic.Text,"padding",0),Kinetic.Factory.addGetterSetter(Kinetic.Text,"align",i),Kinetic.Factory.addGetterSetter(Kinetic.Text,"lineHeight",1),Kinetic.Factory.addGetterSetter(Kinetic.Text,"wrap",q),Kinetic.Factory.addGetter(Kinetic.Text,"text",h),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Text,"text"),Kinetic.Collection.mapMethods(Kinetic.Text)}(),function(){Kinetic.Line=function(a){this.___init(a)},Kinetic.Line.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Line",this.on("pointsChange.kinetic tensionChange.kinetic closedChange.kinetic",function(){this._clearCache("tensionPoints")}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b,c,d,e=this.getPoints(),f=e.length,g=this.getTension(),h=this.getClosed();if(a.beginPath(),a.moveTo(e[0],e[1]),0!==g&&f>4){for(b=this.getTensionPoints(),c=b.length,d=h?0:4,h||a.quadraticCurveTo(b[0],b[1],b[2],b[3]);c-2>d;)a.bezierCurveTo(b[d++],b[d++],b[d++],b[d++],b[d++],b[d++]);h||a.quadraticCurveTo(b[c-2],b[c-1],e[f-2],e[f-1])}else for(d=2;f>d;d+=2)a.lineTo(e[d],e[d+1]);h?(a.closePath(),a.fillStrokeShape(this)):a.strokeShape(this)},getTensionPoints:function(){return this._getCache("tensionPoints",this._getTensionPoints)},_getTensionPoints:function(){return this.getClosed()?this._getTensionPointsClosed():Kinetic.Util._expandPoints(this.getPoints(),this.getTension())},_getTensionPointsClosed:function(){var a=this.getPoints(),b=a.length,c=this.getTension(),d=Kinetic.Util,e=d._getControlPoints(a[b-2],a[b-1],a[0],a[1],a[2],a[3],c),f=d._getControlPoints(a[b-4],a[b-3],a[b-2],a[b-1],a[0],a[1],c),g=Kinetic.Util._expandPoints(a,c),h=[e[2],e[3]].concat(g).concat([f[0],f[1],a[b-2],a[b-1],f[2],f[3],e[0],e[1],a[0],a[1]]);return h}},Kinetic.Util.extend(Kinetic.Line,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Line,"closed",!1),Kinetic.Factory.addGetterSetter(Kinetic.Line,"tension",0),Kinetic.Factory.addGetterSetter(Kinetic.Line,"points"),Kinetic.Collection.mapMethods(Kinetic.Line)}(),function(){Kinetic.Sprite=function(a){this.___init(a)},Kinetic.Sprite.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Sprite",this.anim=new Kinetic.Animation,this.on("animationChange.kinetic",function(){this.frameIndex(0)}),this.on("frameRateChange.kinetic",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(a){var b=this.getAnimation(),c=this.frameIndex(),d=4*c,e=this.getAnimations()[b],f=e[d+0],g=e[d+1],h=e[d+2],i=e[d+3],j=this.getImage();j&&a.drawImage(j,f,g,h,i,0,0,h,i)},_hitFunc:function(a){var b=this.getAnimation(),c=this.frameIndex(),d=4*c,e=this.getAnimations()[b],f=e[d+2],g=e[d+3];a.beginPath(),a.rect(0,0,f,g),a.closePath(),a.fillShape(this)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},_setInterval:function(){var a=this;this.interval=setInterval(function(){a._updateIndex()},1e3/this.getFrameRate())},start:function(){var a=this.getLayer();this.anim.setLayers(a),this._setInterval(),this.anim.start()},stop:function(){this.anim.stop(),clearInterval(this.interval)},isRunning:function(){return this.anim.isRunning()},_updateIndex:function(){var a=this.frameIndex(),b=this.getAnimation(),c=this.getAnimations(),d=c[b],e=d.length/4;this.frameIndex(e-1>a?a+1:0)}},Kinetic.Util.extend(Kinetic.Sprite,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animation"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animations"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"image"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameIndex",0),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameRate",17),Kinetic.Factory.backCompat(Kinetic.Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Kinetic.Collection.mapMethods(Kinetic.Sprite)}(),function(){Kinetic.Path=function(a){this.___init(a)},Kinetic.Path.prototype={___init:function(a){this.dataArray=[];var b=this;Kinetic.Shape.call(this,a),this.className="Path",this.dataArray=Kinetic.Path.parsePathData(this.getData()),this.on("dataChange.kinetic",function(){b.dataArray=Kinetic.Path.parsePathData(this.getData())}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b=this.dataArray,c=!1;a.beginPath();for(var d=0;d<b.length;d++){var e=b[d].command,f=b[d].points;switch(e){case"L":a.lineTo(f[0],f[1]);break;case"M":a.moveTo(f[0],f[1]);break;case"C":a.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case"Q":a.quadraticCurveTo(f[0],f[1],f[2],f[3]);break;case"A":var g=f[0],h=f[1],i=f[2],j=f[3],k=f[4],l=f[5],m=f[6],n=f[7],o=i>j?i:j,p=i>j?1:i/j,q=i>j?j/i:1;a.translate(g,h),a.rotate(m),a.scale(p,q),a.arc(0,0,o,k,k+l,1-n),a.scale(1/p,1/q),a.rotate(-m),a.translate(-g,-h);break;case"z":a.closePath(),c=!0}}c?a.fillStrokeShape(this):a.strokeShape(this)}},Kinetic.Util.extend(Kinetic.Path,Kinetic.Shape),Kinetic.Path.getLineLength=function(a,b,c,d){return Math.sqrt((c-a)*(c-a)+(d-b)*(d-b))},Kinetic.Path.getPointOnLine=function(a,b,c,d,e,f,g){void 0===f&&(f=b),void 0===g&&(g=c);var h=(e-c)/(d-b+1e-8),i=Math.sqrt(a*a/(1+h*h));b>d&&(i*=-1);var j,k=h*i;if(d===b)j={x:f,y:g+k};else if((g-c)/(f-b+1e-8)===h)j={x:f+i,y:g+k};else{var l,m,n=this.getLineLength(b,c,d,e);if(1e-8>n)return void 0;var o=(f-b)*(d-b)+(g-c)*(e-c);o/=n*n,l=b+o*(d-b),m=c+o*(e-c);var p=this.getLineLength(f,g,l,m),q=Math.sqrt(a*a-p*p);i=Math.sqrt(q*q/(1+h*h)),b>d&&(i*=-1),k=h*i,j={x:l+i,y:m+k}}return j},Kinetic.Path.getPointOnCubicBezier=function(a,b,c,d,e,f,g,h,i){function j(a){return a*a*a}function k(a){return 3*a*a*(1-a)}function l(a){return 3*a*(1-a)*(1-a)}function m(a){return(1-a)*(1-a)*(1-a)}var n=h*j(a)+f*k(a)+d*l(a)+b*m(a),o=i*j(a)+g*k(a)+e*l(a)+c*m(a);return{x:n,y:o}},Kinetic.Path.getPointOnQuadraticBezier=function(a,b,c,d,e,f,g){function h(a){return a*a}function i(a){return 2*a*(1-a)}function j(a){return(1-a)*(1-a)}var k=f*h(a)+d*i(a)+b*j(a),l=g*h(a)+e*i(a)+c*j(a);return{x:k,y:l}},Kinetic.Path.getPointOnEllipticalArc=function(a,b,c,d,e,f){var g=Math.cos(f),h=Math.sin(f),i={x:c*Math.cos(e),y:d*Math.sin(e)};return{x:a+(i.x*g-i.y*h),y:b+(i.x*h+i.y*g)}},Kinetic.Path.parsePathData=function(a){if(!a)return[];var b=a,c=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];b=b.replace(new RegExp(" ","g"),",");for(var d=0;d<c.length;d++)b=b.replace(new RegExp(c[d],"g"),"|"+c[d]);var e=b.split("|"),f=[],g=0,h=0;for(d=1;d<e.length;d++){var i=e[d],j=i.charAt(0);i=i.slice(1),i=i.replace(new RegExp(",-","g"),"-"),i=i.replace(new RegExp("-","g"),",-"),i=i.replace(new RegExp("e,-","g"),"e-");var k=i.split(",");k.length>0&&""===k[0]&&k.shift();for(var l=0;l<k.length;l++)k[l]=parseFloat(k[l]);for(;k.length>0&&!isNaN(k[0]);){var m,n,o,p,q,r,s,t,u,v,w=null,x=[],y=g,z=h;switch(j){case"l":g+=k.shift(),h+=k.shift(),w="L",x.push(g,h);break;case"L":g=k.shift(),h=k.shift(),x.push(g,h);break;case"m":var A=k.shift(),B=k.shift();if(g+=A,h+=B,w="M",f.length>2&&"z"===f[f.length-1].command)for(var C=f.length-2;C>=0;C--)if("M"===f[C].command){g=f[C].points[0]+A,h=f[C].points[1]+B;break}x.push(g,h),j="l";break;case"M":g=k.shift(),h=k.shift(),w="M",x.push(g,h),j="L";break;case"h":g+=k.shift(),w="L",x.push(g,h);break;case"H":g=k.shift(),w="L",x.push(g,h);break;case"v":h+=k.shift(),w="L",x.push(g,h);break;case"V":h=k.shift(),w="L",x.push(g,h);break;case"C":x.push(k.shift(),k.shift(),k.shift(),k.shift()),g=k.shift(),h=k.shift(),x.push(g,h);break;case"c":x.push(g+k.shift(),h+k.shift(),g+k.shift(),h+k.shift()),g+=k.shift(),h+=k.shift(),w="C",x.push(g,h);break;case"S":n=g,o=h,m=f[f.length-1],"C"===m.command&&(n=g+(g-m.points[2]),o=h+(h-m.points[3])),x.push(n,o,k.shift(),k.shift()),g=k.shift(),h=k.shift(),w="C",x.push(g,h);break;case"s":n=g,o=h,m=f[f.length-1],"C"===m.command&&(n=g+(g-m.points[2]),o=h+(h-m.points[3])),x.push(n,o,g+k.shift(),h+k.shift()),g+=k.shift(),h+=k.shift(),w="C",x.push(g,h);break;case"Q":x.push(k.shift(),k.shift()),g=k.shift(),h=k.shift(),x.push(g,h);break;case"q":x.push(g+k.shift(),h+k.shift()),g+=k.shift(),h+=k.shift(),w="Q",x.push(g,h);break;case"T":n=g,o=h,m=f[f.length-1],"Q"===m.command&&(n=g+(g-m.points[0]),o=h+(h-m.points[1])),g=k.shift(),h=k.shift(),w="Q",x.push(n,o,g,h);break;case"t":n=g,o=h,m=f[f.length-1],"Q"===m.command&&(n=g+(g-m.points[0]),o=h+(h-m.points[1])),g+=k.shift(),h+=k.shift(),w="Q",x.push(n,o,g,h);break;case"A":p=k.shift(),q=k.shift(),r=k.shift(),s=k.shift(),t=k.shift(),u=g,v=h,g=k.shift(),h=k.shift(),w="A",x=this.convertEndpointToCenterParameterization(u,v,g,h,s,t,p,q,r);break;case"a":p=k.shift(),q=k.shift(),r=k.shift(),s=k.shift(),t=k.shift(),u=g,v=h,g+=k.shift(),h+=k.shift(),w="A",x=this.convertEndpointToCenterParameterization(u,v,g,h,s,t,p,q,r)}f.push({command:w||j,points:x,start:{x:y,y:z},pathLength:this.calcLength(y,z,w||j,x)})}("z"===j||"Z"===j)&&f.push({command:"z",points:[],start:void 0,pathLength:0})}return f},Kinetic.Path.calcLength=function(a,b,c,d){var e,f,g,h,i=Kinetic.Path;switch(c){case"L":return i.getLineLength(a,b,d[0],d[1]);case"C":for(e=0,f=i.getPointOnCubicBezier(0,a,b,d[0],d[1],d[2],d[3],d[4],d[5]),h=.01;1>=h;h+=.01)g=i.getPointOnCubicBezier(h,a,b,d[0],d[1],d[2],d[3],d[4],d[5]),e+=i.getLineLength(f.x,f.y,g.x,g.y),f=g;return e;case"Q":for(e=0,f=i.getPointOnQuadraticBezier(0,a,b,d[0],d[1],d[2],d[3]),h=.01;1>=h;h+=.01)g=i.getPointOnQuadraticBezier(h,a,b,d[0],d[1],d[2],d[3]),e+=i.getLineLength(f.x,f.y,g.x,g.y),f=g;return e;case"A":e=0;var j=d[4],k=d[5],l=d[4]+k,m=Math.PI/180;if(Math.abs(j-l)<m&&(m=Math.abs(j-l)),f=i.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],j,0),0>k)for(h=j-m;h>l;h-=m)g=i.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],h,0),e+=i.getLineLength(f.x,f.y,g.x,g.y),f=g;else for(h=j+m;l>h;h+=m)g=i.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],h,0),e+=i.getLineLength(f.x,f.y,g.x,g.y),f=g;return g=i.getPointOnEllipticalArc(d[0],d[1],d[2],d[3],l,0),e+=i.getLineLength(f.x,f.y,g.x,g.y)}return 0},Kinetic.Path.convertEndpointToCenterParameterization=function(a,b,c,d,e,f,g,h,i){var j=i*(Math.PI/180),k=Math.cos(j)*(a-c)/2+Math.sin(j)*(b-d)/2,l=-1*Math.sin(j)*(a-c)/2+Math.cos(j)*(b-d)/2,m=k*k/(g*g)+l*l/(h*h);m>1&&(g*=Math.sqrt(m),h*=Math.sqrt(m));var n=Math.sqrt((g*g*h*h-g*g*l*l-h*h*k*k)/(g*g*l*l+h*h*k*k));e===f&&(n*=-1),isNaN(n)&&(n=0);var o=n*g*l/h,p=n*-h*k/g,q=(a+c)/2+Math.cos(j)*o-Math.sin(j)*p,r=(b+d)/2+Math.sin(j)*o+Math.cos(j)*p,s=function(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])},t=function(a,b){return(a[0]*b[0]+a[1]*b[1])/(s(a)*s(b))},u=function(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(t(a,b))},v=u([1,0],[(k-o)/g,(l-p)/h]),w=[(k-o)/g,(l-p)/h],x=[(-1*k-o)/g,(-1*l-p)/h],y=u(w,x);return t(w,x)<=-1&&(y=Math.PI),t(w,x)>=1&&(y=0),0===f&&y>0&&(y-=2*Math.PI),1===f&&0>y&&(y+=2*Math.PI),[q,r,g,h,v,y,j,f]},Kinetic.Factory.addGetterSetter(Kinetic.Path,"data"),Kinetic.Collection.mapMethods(Kinetic.Path)}(),function(){function a(a){a.fillText(this.partialText,0,0)}function b(a){a.strokeText(this.partialText,0,0)}var c="",d="normal";Kinetic.TextPath=function(a){this.___init(a)},Kinetic.TextPath.prototype={___init:function(c){var d=this;this.dummyCanvas=Kinetic.Util.createCanvasElement(),this.dataArray=[],Kinetic.Shape.call(this,c),this._fillFunc=a,this._strokeFunc=b,this._fillFuncHit=a,this._strokeFuncHit=b,this.className="TextPath",this.dataArray=Kinetic.Path.parsePathData(this.attrs.data),this.on("dataChange.kinetic",function(){d.dataArray=Kinetic.Path.parsePathData(this.attrs.data)}),this.on("textChange.kinetic textStroke.kinetic textStrokeWidth.kinetic",d._setTextData),d._setTextData(),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){a.setAttr("font",this._getContextFont()),a.setAttr("textBaseline","middle"),a.setAttr("textAlign","left"),a.save();for(var b=this.glyphInfo,c=0;c<b.length;c++){a.save();var d=b[c].p0;a.translate(d.x,d.y),a.rotate(b[c].rotation),this.partialText=b[c].text,a.fillStrokeShape(this),a.restore()}a.restore()},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},setText:function(a){Kinetic.Text.prototype.setText.call(this,a)},_getTextSize:function(a){var b=this.dummyCanvas,c=b.getContext("2d");c.save(),c.font=this._getContextFont();var d=c.measureText(a);return c.restore(),{width:d.width,height:parseInt(this.attrs.fontSize,10)}},_setTextData:function(){var a=this,b=this._getTextSize(this.attrs.text);this.textWidth=b.width,this.textHeight=b.height,this.glyphInfo=[];for(var c,d,e,f=this.attrs.text.split(""),g=-1,h=0,i=function(){h=0;for(var b=a.dataArray,d=g+1;d<b.length;d++){if(b[d].pathLength>0)return g=d,b[d];"M"==b[d].command&&(c={x:b[d].points[0],y:b[d].points[1]})}return{}},j=function(b){var f=a._getTextSize(b).width,g=0,j=0;for(d=void 0;Math.abs(f-g)/f>.01&&25>j;){j++;for(var k=g;void 0===e;)e=i(),e&&k+e.pathLength<f&&(k+=e.pathLength,e=void 0);if(e==={}||void 0===c)return void 0;var l=!1;switch(e.command){case"L":Kinetic.Path.getLineLength(c.x,c.y,e.points[0],e.points[1])>f?d=Kinetic.Path.getPointOnLine(f,c.x,c.y,e.points[0],e.points[1],c.x,c.y):e=void 0;break;case"A":var m=e.points[4],n=e.points[5],o=e.points[4]+n;0===h?h=m+1e-8:f>g?h+=Math.PI/180*n/Math.abs(n):h-=Math.PI/360*n/Math.abs(n),(0>n&&o>h||n>=0&&h>o)&&(h=o,l=!0),d=Kinetic.Path.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],h,e.points[6]);break;case"C":0===h?h=f>e.pathLength?1e-8:f/e.pathLength:f>g?h+=(f-g)/e.pathLength:h-=(g-f)/e.pathLength,h>1&&(h=1,l=!0),d=Kinetic.Path.getPointOnCubicBezier(h,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3],e.points[4],e.points[5]);break;case"Q":0===h?h=f/e.pathLength:f>g?h+=(f-g)/e.pathLength:h-=(g-f)/e.pathLength,h>1&&(h=1,l=!0),d=Kinetic.Path.getPointOnQuadraticBezier(h,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3])}void 0!==d&&(g=Kinetic.Path.getLineLength(c.x,c.y,d.x,d.y)),l&&(l=!1,e=void 0)}},k=0;k<f.length&&(j(f[k]),void 0!==c&&void 0!==d);k++){var l=Kinetic.Path.getLineLength(c.x,c.y,d.x,d.y),m=0,n=Kinetic.Path.getPointOnLine(m+l/2,c.x,c.y,d.x,d.y),o=Math.atan2(d.y-c.y,d.x-c.x);this.glyphInfo.push({transposeX:n.x,transposeY:n.y,text:f[k],rotation:o,p0:c,p1:d}),c=d}}},Kinetic.TextPath.prototype._getContextFont=Kinetic.Text.prototype._getContextFont,Kinetic.Util.extend(Kinetic.TextPath,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontStyle",d),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontVariant",d),Kinetic.Factory.addGetter(Kinetic.TextPath,"text",c),Kinetic.Collection.mapMethods(Kinetic.TextPath)}(),function(){Kinetic.RegularPolygon=function(a){this.___init(a)},Kinetic.RegularPolygon.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="RegularPolygon",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b,c,d,e=this.attrs.sides,f=this.attrs.radius;for(a.beginPath(),a.moveTo(0,0-f),b=1;e>b;b++)c=f*Math.sin(2*b*Math.PI/e),d=-1*f*Math.cos(2*b*Math.PI/e),a.lineTo(c,d);a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.RegularPolygon,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"sides",0),Kinetic.Collection.mapMethods(Kinetic.RegularPolygon)}(),function(){Kinetic.Star=function(a){this.___init(a)},Kinetic.Star.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Star",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b=this.innerRadius(),c=this.outerRadius(),d=this.numPoints();a.beginPath(),a.moveTo(0,0-c);for(var e=1;2*d>e;e++){var f=e%2===0?c:b,g=f*Math.sin(e*Math.PI/d),h=-1*f*Math.cos(e*Math.PI/d);a.lineTo(g,h)}a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Star,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Star,"numPoints",5),Kinetic.Factory.addGetterSetter(Kinetic.Star,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Star,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Star)}(),function(){var a=["fontFamily","fontSize","fontStyle","padding","lineHeight","text"],b="Change.kinetic",c="none",d="up",e="right",f="down",g="left",h="Label",i=a.length;Kinetic.Label=function(a){this.____init(a)},Kinetic.Label.prototype={____init:function(a){var b=this;this.className=h,Kinetic.Group.call(this,a),this.on("add.kinetic",function(a){b._addListeners(a.child),b._sync()})},getText:function(){return this.find("Text")[0]},getTag:function(){return this.find("Tag")[0]},_addListeners:function(c){var d,e=this,f=function(){e._sync()};for(d=0;i>d;d++)c.on(a[d]+b,f)},getWidth:function(){return this.getText().getWidth()},getHeight:function(){return this.getText().getHeight()},_sync:function(){var a,b,c,h,i,j,k,l=this.getText(),m=this.getTag();if(l&&m){switch(a=l.getWidth(),b=l.getHeight(),c=m.getPointerDirection(),h=m.getPointerWidth(),k=m.getPointerHeight(),i=0,j=0,c){case d:i=a/2,j=-1*k;break;case e:i=a+h,j=b/2;break;case f:i=a/2,j=b+k;break;case g:i=-1*h,j=b/2}m.setAttrs({x:-1*i,y:-1*j,width:a,height:b}),l.setAttrs({x:-1*i,y:-1*j})}}},Kinetic.Util.extend(Kinetic.Label,Kinetic.Group),Kinetic.Collection.mapMethods(Kinetic.Label),Kinetic.Tag=function(a){this.___init(a)},Kinetic.Tag.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className="Tag",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(a){var b=this.getWidth(),c=this.getHeight(),h=this.getPointerDirection(),i=this.getPointerWidth(),j=this.getPointerHeight();a.beginPath(),a.moveTo(0,0),h===d&&(a.lineTo((b-i)/2,0),a.lineTo(b/2,-1*j),a.lineTo((b+i)/2,0)),a.lineTo(b,0),h===e&&(a.lineTo(b,(c-j)/2),a.lineTo(b+i,c/2),a.lineTo(b,(c+j)/2)),a.lineTo(b,c),h===f&&(a.lineTo((b+i)/2,c),a.lineTo(b/2,c+j),a.lineTo((b-i)/2,c)),a.lineTo(0,c),h===g&&(a.lineTo(0,(c+j)/2),a.lineTo(-1*i,c/2),a.lineTo(0,(c-j)/2)),a.closePath(),a.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Tag,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerDirection",c),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerHeight",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Tag)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJraW5ldGljLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qISBLaW5ldGljSlMgdjUuMS4wIDIwMTQtMDMtMjcgaHR0cDovL3d3dy5raW5ldGljanMuY29tIGJ5IEVyaWMgUm93ZWxsIEBlcmljZHJvd2VsbCAtIE1JVCBMaWNlbnNlIGh0dHBzOi8vZ2l0aHViLmNvbS9lcmljZHJvd2VsbC9LaW5ldGljSlMvd2lraS9MaWNlbnNlKi9cbnZhciBLaW5ldGljPXt9OyFmdW5jdGlvbihhKXt2YXIgYj1NYXRoLlBJLzE4MDtLaW5ldGljPXt2ZXJzaW9uOlwiNS4xLjBcIixzdGFnZXM6W10saWRDb3VudGVyOjAsaWRzOnt9LG5hbWVzOnt9LHNoYXBlczp7fSxsaXN0ZW5DbGlja1RhcDohMSxpbkRibENsaWNrV2luZG93OiExLGVuYWJsZVRyYWNlOiExLHRyYWNlQXJyTWF4OjEwMCxkYmxDbGlja1dpbmRvdzo0MDAscGl4ZWxSYXRpbzp2b2lkIDAsZHJhZ0Rpc3RhbmNlOjAsYW5nbGVEZWc6ITAsVUE6ZnVuY3Rpb24oKXt2YXIgYj1hLm5hdmlnYXRvciYmYS5uYXZpZ2F0b3IudXNlckFnZW50fHxcIlwiLGM9Yi50b0xvd2VyQ2FzZSgpLGQ9LyhjaHJvbWUpWyBcXC9dKFtcXHcuXSspLy5leGVjKGMpfHwvKHdlYmtpdClbIFxcL10oW1xcdy5dKykvLmV4ZWMoYyl8fC8ob3BlcmEpKD86Lip2ZXJzaW9ufClbIFxcL10oW1xcdy5dKykvLmV4ZWMoYyl8fC8obXNpZSkgKFtcXHcuXSspLy5leGVjKGMpfHxjLmluZGV4T2YoXCJjb21wYXRpYmxlXCIpPDAmJi8obW96aWxsYSkoPzouKj8gcnY6KFtcXHcuXSspfCkvLmV4ZWMoYyl8fFtdLGU9ISFiLm1hdGNoKC9BbmRyb2lkfEJsYWNrQmVycnl8aVBob25lfGlQYWR8aVBvZHxPcGVyYSBNaW5pfElFTW9iaWxlL2kpO3JldHVybnticm93c2VyOmRbMV18fFwiXCIsdmVyc2lvbjpkWzJdfHxcIjBcIixtb2JpbGU6ZX19KCksRmlsdGVyczp7fSxOb2RlOmZ1bmN0aW9uKGEpe3RoaXMuX2luaXQoYSl9LFNoYXBlOmZ1bmN0aW9uKGEpe3RoaXMuX19pbml0KGEpfSxDb250YWluZXI6ZnVuY3Rpb24oYSl7dGhpcy5fX2luaXQoYSl9LFN0YWdlOmZ1bmN0aW9uKGEpe3RoaXMuX19faW5pdChhKX0sQmFzZUxheWVyOmZ1bmN0aW9uKGEpe3RoaXMuX19faW5pdChhKX0sTGF5ZXI6ZnVuY3Rpb24oYSl7dGhpcy5fX19faW5pdChhKX0sRmFzdExheWVyOmZ1bmN0aW9uKGEpe3RoaXMuX19fX2luaXQoYSl9LEdyb3VwOmZ1bmN0aW9uKGEpe3RoaXMuX19faW5pdChhKX0saXNEcmFnZ2luZzpmdW5jdGlvbigpe3ZhciBhPUtpbmV0aWMuREQ7cmV0dXJuIGE/YS5pc0RyYWdnaW5nOiExfSxpc0RyYWdSZWFkeTpmdW5jdGlvbigpe3ZhciBhPUtpbmV0aWMuREQ7cmV0dXJuIGE/ISFhLm5vZGU6ITF9LF9hZGRJZDpmdW5jdGlvbihhLGIpe3ZvaWQgMCE9PWImJih0aGlzLmlkc1tiXT1hKX0sX3JlbW92ZUlkOmZ1bmN0aW9uKGEpe3ZvaWQgMCE9PWEmJmRlbGV0ZSB0aGlzLmlkc1thXX0sX2FkZE5hbWU6ZnVuY3Rpb24oYSxiKXt2b2lkIDAhPT1iJiYodm9pZCAwPT09dGhpcy5uYW1lc1tiXSYmKHRoaXMubmFtZXNbYl09W10pLHRoaXMubmFtZXNbYl0ucHVzaChhKSl9LF9yZW1vdmVOYW1lOmZ1bmN0aW9uKGEsYil7aWYodm9pZCAwIT09YSl7dmFyIGM9dGhpcy5uYW1lc1thXTtpZih2b2lkIDAhPT1jKXtmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXTtlLl9pZD09PWImJmMuc3BsaWNlKGQsMSl9MD09PWMubGVuZ3RoJiZkZWxldGUgdGhpcy5uYW1lc1thXX19fSxnZXRBbmdsZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hbmdsZURlZz9hKmI6YX19fSh0aGlzKSxmdW5jdGlvbihhLGIpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzKXt2YXIgYz1yZXF1aXJlKFwiY2FudmFzXCIpLGQ9cmVxdWlyZShcImpzZG9tXCIpLmpzZG9tLGU9ZChcIjwhRE9DVFlQRSBodG1sPjxodG1sPjxoZWFkPjwvaGVhZD48Ym9keT48L2JvZHk+PC9odG1sPlwiKSxmPWIoKTtyZXR1cm4gS2luZXRpYy5kb2N1bWVudD1lLEtpbmV0aWMud2luZG93PUtpbmV0aWMuZG9jdW1lbnQuY3JlYXRlV2luZG93KCksS2luZXRpYy53aW5kb3cuSW1hZ2U9Yy5JbWFnZSxLaW5ldGljLnJvb3Q9YSxLaW5ldGljLl9ub2RlQ2FudmFzPWMsdm9pZChtb2R1bGUuZXhwb3J0cz1mKX1cImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZShiKSxLaW5ldGljLmRvY3VtZW50PWRvY3VtZW50LEtpbmV0aWMud2luZG93PXdpbmRvdyxLaW5ldGljLnJvb3Q9YX0oKDEsZXZhbCkoXCJ0aGlzXCIpLGZ1bmN0aW9uKCl7cmV0dXJuIEtpbmV0aWN9KSxmdW5jdGlvbigpe0tpbmV0aWMuQ29sbGVjdGlvbj1mdW5jdGlvbigpe3ZhciBhPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKSxiPWEubGVuZ3RoLGM9MDtmb3IodGhpcy5sZW5ndGg9YjtiPmM7YysrKXRoaXNbY109YVtjXTtyZXR1cm4gdGhpc30sS2luZXRpYy5Db2xsZWN0aW9uLnByb3RvdHlwZT1bXSxLaW5ldGljLkNvbGxlY3Rpb24ucHJvdG90eXBlLmVhY2g9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7Yjx0aGlzLmxlbmd0aDtiKyspYSh0aGlzW2JdLGIpfSxLaW5ldGljLkNvbGxlY3Rpb24ucHJvdG90eXBlLnRvQXJyYXk9ZnVuY3Rpb24oKXt2YXIgYSxiPVtdLGM9dGhpcy5sZW5ndGg7Zm9yKGE9MDtjPmE7YSsrKWIucHVzaCh0aGlzW2FdKTtyZXR1cm4gYn0sS2luZXRpYy5Db2xsZWN0aW9uLnRvQ29sbGVjdGlvbj1mdW5jdGlvbihhKXt2YXIgYixjPW5ldyBLaW5ldGljLkNvbGxlY3Rpb24sZD1hLmxlbmd0aDtmb3IoYj0wO2Q+YjtiKyspYy5wdXNoKGFbYl0pO3JldHVybiBjfSxLaW5ldGljLkNvbGxlY3Rpb24uX21hcE1ldGhvZD1mdW5jdGlvbihhKXtLaW5ldGljLkNvbGxlY3Rpb24ucHJvdG90eXBlW2FdPWZ1bmN0aW9uKCl7dmFyIGIsYz10aGlzLmxlbmd0aCxkPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtmb3IoYj0wO2M+YjtiKyspdGhpc1tiXVthXS5hcHBseSh0aGlzW2JdLGQpO3JldHVybiB0aGlzfX0sS2luZXRpYy5Db2xsZWN0aW9uLm1hcE1ldGhvZHM9ZnVuY3Rpb24oYSl7dmFyIGI9YS5wcm90b3R5cGU7Zm9yKHZhciBjIGluIGIpS2luZXRpYy5Db2xsZWN0aW9uLl9tYXBNZXRob2QoYyl9LEtpbmV0aWMuVHJhbnNmb3JtPWZ1bmN0aW9uKGEpe3RoaXMubT1hJiZhLnNsaWNlKCl8fFsxLDAsMCwxLDAsMF19LEtpbmV0aWMuVHJhbnNmb3JtLnByb3RvdHlwZT17Y29weTpmdW5jdGlvbigpe3JldHVybiBuZXcgS2luZXRpYy5UcmFuc2Zvcm0odGhpcy5tKX0scG9pbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5tO3JldHVybnt4OmJbMF0qYS54K2JbMl0qYS55K2JbNF0seTpiWzFdKmEueCtiWzNdKmEueStiWzVdfX0sdHJhbnNsYXRlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubVs0XSs9dGhpcy5tWzBdKmErdGhpcy5tWzJdKmIsdGhpcy5tWzVdKz10aGlzLm1bMV0qYSt0aGlzLm1bM10qYix0aGlzfSxzY2FsZTpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1bMF0qPWEsdGhpcy5tWzFdKj1hLHRoaXMubVsyXSo9Yix0aGlzLm1bM10qPWIsdGhpc30scm90YXRlOmZ1bmN0aW9uKGEpe3ZhciBiPU1hdGguY29zKGEpLGM9TWF0aC5zaW4oYSksZD10aGlzLm1bMF0qYit0aGlzLm1bMl0qYyxlPXRoaXMubVsxXSpiK3RoaXMubVszXSpjLGY9dGhpcy5tWzBdKi1jK3RoaXMubVsyXSpiLGc9dGhpcy5tWzFdKi1jK3RoaXMubVszXSpiO3JldHVybiB0aGlzLm1bMF09ZCx0aGlzLm1bMV09ZSx0aGlzLm1bMl09Zix0aGlzLm1bM109Zyx0aGlzfSxnZXRUcmFuc2xhdGlvbjpmdW5jdGlvbigpe3JldHVybnt4OnRoaXMubVs0XSx5OnRoaXMubVs1XX19LHNrZXc6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLm1bMF0rdGhpcy5tWzJdKmIsZD10aGlzLm1bMV0rdGhpcy5tWzNdKmIsZT10aGlzLm1bMl0rdGhpcy5tWzBdKmEsZj10aGlzLm1bM10rdGhpcy5tWzFdKmE7cmV0dXJuIHRoaXMubVswXT1jLHRoaXMubVsxXT1kLHRoaXMubVsyXT1lLHRoaXMubVszXT1mLHRoaXN9LG11bHRpcGx5OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubVswXSphLm1bMF0rdGhpcy5tWzJdKmEubVsxXSxjPXRoaXMubVsxXSphLm1bMF0rdGhpcy5tWzNdKmEubVsxXSxkPXRoaXMubVswXSphLm1bMl0rdGhpcy5tWzJdKmEubVszXSxlPXRoaXMubVsxXSphLm1bMl0rdGhpcy5tWzNdKmEubVszXSxmPXRoaXMubVswXSphLm1bNF0rdGhpcy5tWzJdKmEubVs1XSt0aGlzLm1bNF0sZz10aGlzLm1bMV0qYS5tWzRdK3RoaXMubVszXSphLm1bNV0rdGhpcy5tWzVdO3JldHVybiB0aGlzLm1bMF09Yix0aGlzLm1bMV09Yyx0aGlzLm1bMl09ZCx0aGlzLm1bM109ZSx0aGlzLm1bNF09Zix0aGlzLm1bNV09Zyx0aGlzfSxpbnZlcnQ6ZnVuY3Rpb24oKXt2YXIgYT0xLyh0aGlzLm1bMF0qdGhpcy5tWzNdLXRoaXMubVsxXSp0aGlzLm1bMl0pLGI9dGhpcy5tWzNdKmEsYz0tdGhpcy5tWzFdKmEsZD0tdGhpcy5tWzJdKmEsZT10aGlzLm1bMF0qYSxmPWEqKHRoaXMubVsyXSp0aGlzLm1bNV0tdGhpcy5tWzNdKnRoaXMubVs0XSksZz1hKih0aGlzLm1bMV0qdGhpcy5tWzRdLXRoaXMubVswXSp0aGlzLm1bNV0pO3JldHVybiB0aGlzLm1bMF09Yix0aGlzLm1bMV09Yyx0aGlzLm1bMl09ZCx0aGlzLm1bM109ZSx0aGlzLm1bNF09Zix0aGlzLm1bNV09Zyx0aGlzfSxnZXRNYXRyaXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tfSxzZXRBYnNvbHV0ZVBvc2l0aW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5tWzBdLGQ9dGhpcy5tWzFdLGU9dGhpcy5tWzJdLGY9dGhpcy5tWzNdLGc9dGhpcy5tWzRdLGg9dGhpcy5tWzVdLGk9KGMqKGItaCktZCooYS1nKSkvKGMqZi1kKmUpLGo9KGEtZy1lKmkpL2M7cmV0dXJuIHRoaXMudHJhbnNsYXRlKGosaSl9fTt2YXIgYT1cIjJkXCIsYj1cIltvYmplY3QgQXJyYXldXCIsYz1cIltvYmplY3QgTnVtYmVyXVwiLGQ9XCJbb2JqZWN0IFN0cmluZ11cIixlPU1hdGguUEkvMTgwLGY9MTgwL01hdGguUEksZz1cIiNcIixoPVwiXCIsaT1cIjBcIixqPVwiS2luZXRpYyB3YXJuaW5nOiBcIixrPVwiS2luZXRpYyBlcnJvcjogXCIsbD1cInJnYihcIixtPXthcXVhOlswLDI1NSwyNTVdLGxpbWU6WzAsMjU1LDBdLHNpbHZlcjpbMTkyLDE5MiwxOTJdLGJsYWNrOlswLDAsMF0sbWFyb29uOlsxMjgsMCwwXSx0ZWFsOlswLDEyOCwxMjhdLGJsdWU6WzAsMCwyNTVdLG5hdnk6WzAsMCwxMjhdLHdoaXRlOlsyNTUsMjU1LDI1NV0sZnVjaHNpYTpbMjU1LDAsMjU1XSxvbGl2ZTpbMTI4LDEyOCwwXSx5ZWxsb3c6WzI1NSwyNTUsMF0sb3JhbmdlOlsyNTUsMTY1LDBdLGdyYXk6WzEyOCwxMjgsMTI4XSxwdXJwbGU6WzEyOCwwLDEyOF0sZ3JlZW46WzAsMTI4LDBdLHJlZDpbMjU1LDAsMF0scGluazpbMjU1LDE5MiwyMDNdLGN5YW46WzAsMjU1LDI1NV0sdHJhbnNwYXJlbnQ6WzI1NSwyNTUsMjU1LDBdfSxuPS9yZ2JcXCgoXFxkezEsM30pLChcXGR7MSwzfSksKFxcZHsxLDN9KVxcKS87S2luZXRpYy5VdGlsPXtfaXNFbGVtZW50OmZ1bmN0aW9uKGEpe3JldHVybiEoIWF8fDEhPWEubm9kZVR5cGUpfSxfaXNGdW5jdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4hIShhJiZhLmNvbnN0cnVjdG9yJiZhLmNhbGwmJmEuYXBwbHkpfSxfaXNPYmplY3Q6ZnVuY3Rpb24oYSl7cmV0dXJuISFhJiZhLmNvbnN0cnVjdG9yPT1PYmplY3R9LF9pc0FycmF5OmZ1bmN0aW9uKGEpe3JldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSk9PWJ9LF9pc051bWJlcjpmdW5jdGlvbihhKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpPT1jfSxfaXNTdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKT09ZH0sX3Rocm90dGxlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZz1udWxsLGg9MDtjfHwoYz17fSk7dmFyIGk9ZnVuY3Rpb24oKXtoPWMubGVhZGluZz09PSExPzA6KG5ldyBEYXRlKS5nZXRUaW1lKCksZz1udWxsLGY9YS5hcHBseShkLGUpLGQ9ZT1udWxsfTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgaj0obmV3IERhdGUpLmdldFRpbWUoKTtofHxjLmxlYWRpbmchPT0hMXx8KGg9aik7dmFyIGs9Yi0oai1oKTtyZXR1cm4gZD10aGlzLGU9YXJndW1lbnRzLDA+PWs/KGNsZWFyVGltZW91dChnKSxnPW51bGwsaD1qLGY9YS5hcHBseShkLGUpLGQ9ZT1udWxsKTpnfHxjLnRyYWlsaW5nPT09ITF8fChnPXNldFRpbWVvdXQoaSxrKSksZn19LF9oYXNNZXRob2RzOmZ1bmN0aW9uKGEpe3ZhciBiLGM9W107Zm9yKGIgaW4gYSl0aGlzLl9pc0Z1bmN0aW9uKGFbYl0pJiZjLnB1c2goYik7cmV0dXJuIGMubGVuZ3RoPjB9LGNyZWF0ZUNhbnZhc0VsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgYT1LaW5ldGljLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7cmV0dXJuIGEuc3R5bGU9YS5zdHlsZXx8e30sYX0saXNCcm93c2VyOmZ1bmN0aW9uKCl7cmV0dXJuXCJvYmplY3RcIiE9dHlwZW9mIGV4cG9ydHN9LF9pc0luRG9jdW1lbnQ6ZnVuY3Rpb24oYSl7Zm9yKDthPWEucGFyZW50Tm9kZTspaWYoYT09S2luZXRpYy5kb2N1bWVudClyZXR1cm4hMDtyZXR1cm4hMX0sX3NpbXBsaWZ5QXJyYXk6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPVtdLGU9YS5sZW5ndGgsZj1LaW5ldGljLlV0aWw7Zm9yKGI9MDtlPmI7YisrKWM9YVtiXSxmLl9pc051bWJlcihjKT9jPU1hdGgucm91bmQoMWUzKmMpLzFlMzpmLl9pc1N0cmluZyhjKXx8KGM9Yy50b1N0cmluZygpKSxkLnB1c2goYyk7cmV0dXJuIGR9LF9nZXRJbWFnZTpmdW5jdGlvbihiLGMpe3ZhciBkLGU7aWYoYilpZih0aGlzLl9pc0VsZW1lbnQoYikpYyhiKTtlbHNlIGlmKHRoaXMuX2lzU3RyaW5nKGIpKWQ9bmV3IEtpbmV0aWMud2luZG93LkltYWdlLGQub25sb2FkPWZ1bmN0aW9uKCl7YyhkKX0sZC5zcmM9YjtlbHNlIGlmKGIuZGF0YSl7ZT1LaW5ldGljLlV0aWwuY3JlYXRlQ2FudmFzRWxlbWVudCgpLGUud2lkdGg9Yi53aWR0aCxlLmhlaWdodD1iLmhlaWdodDt2YXIgZj1lLmdldENvbnRleHQoYSk7Zi5wdXRJbWFnZURhdGEoYiwwLDApLHRoaXMuX2dldEltYWdlKGUudG9EYXRhVVJMKCksYyl9ZWxzZSBjKG51bGwpO2Vsc2UgYyhudWxsKX0sX2dldFJHQkFTdHJpbmc6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZWR8fDAsYz1hLmdyZWVufHwwLGQ9YS5ibHVlfHwwLGU9YS5hbHBoYXx8MTtyZXR1cm5bXCJyZ2JhKFwiLGIsXCIsXCIsYyxcIixcIixkLFwiLFwiLGUsXCIpXCJdLmpvaW4oaCl9LF9yZ2JUb0hleDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuKCgxPDwyNCkrKGE8PDE2KSsoYjw8OCkrYykudG9TdHJpbmcoMTYpLnNsaWNlKDEpfSxfaGV4VG9SZ2I6ZnVuY3Rpb24oYSl7YT1hLnJlcGxhY2UoZyxoKTt2YXIgYj1wYXJzZUludChhLDE2KTtyZXR1cm57cjpiPj4xNiYyNTUsZzpiPj44JjI1NSxiOjI1NSZifX0sZ2V0UmFuZG9tQ29sb3I6ZnVuY3Rpb24oKXtmb3IodmFyIGE9KDE2Nzc3MjE1Kk1hdGgucmFuZG9tKCk8PDApLnRvU3RyaW5nKDE2KTthLmxlbmd0aDw2OylhPWkrYTtyZXR1cm4gZythfSxnZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdm9pZCAwPT09YT9iOmF9LGdldFJHQjpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gYSBpbiBtPyhiPW1bYV0se3I6YlswXSxnOmJbMV0sYjpiWzJdfSk6YVswXT09PWc/dGhpcy5faGV4VG9SZ2IoYS5zdWJzdHJpbmcoMSkpOmEuc3Vic3RyKDAsNCk9PT1sPyhiPW4uZXhlYyhhLnJlcGxhY2UoLyAvZyxcIlwiKSkse3I6cGFyc2VJbnQoYlsxXSwxMCksZzpwYXJzZUludChiWzJdLDEwKSxiOnBhcnNlSW50KGJbM10sMTApfSk6e3I6MCxnOjAsYjowfX0sX21lcmdlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5fY2xvbmUoYik7Zm9yKHZhciBkIGluIGEpY1tkXT10aGlzLl9pc09iamVjdChhW2RdKT90aGlzLl9tZXJnZShhW2RdLGNbZF0pOmFbZF07cmV0dXJuIGN9LGNsb25lT2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiPXt9O2Zvcih2YXIgYyBpbiBhKWJbY109dGhpcy5faXNPYmplY3QoYVtjXSk/dGhpcy5jbG9uZU9iamVjdChhW2NdKTp0aGlzLl9pc0FycmF5KGFbY10pP3RoaXMuY2xvbmVBcnJheShhW2NdKTphW2NdO3JldHVybiBifSxjbG9uZUFycmF5OmZ1bmN0aW9uKGEpe3JldHVybiBhLnNsaWNlKDApfSxfZGVnVG9SYWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEqZX0sX3JhZFRvRGVnOmZ1bmN0aW9uKGEpe3JldHVybiBhKmZ9LF9jYXBpdGFsaXplOmZ1bmN0aW9uKGEpe3JldHVybiBhLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Euc2xpY2UoMSl9LGVycm9yOmZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcihrK2EpfSx3YXJuOmZ1bmN0aW9uKGEpe0tpbmV0aWMucm9vdC5jb25zb2xlJiZjb25zb2xlLndhcm4mJmNvbnNvbGUud2FybihqK2EpfSxleHRlbmQ6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMgaW4gYi5wcm90b3R5cGUpYyBpbiBhLnByb3RvdHlwZXx8KGEucHJvdG90eXBlW2NdPWIucHJvdG90eXBlW2NdKX0sYWRkTWV0aG9kczpmdW5jdGlvbihhLGIpe3ZhciBjO2ZvcihjIGluIGIpYS5wcm90b3R5cGVbY109YltjXX0sX2dldENvbnRyb2xQb2ludHM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7dmFyIGg9TWF0aC5zcXJ0KE1hdGgucG93KGMtYSwyKStNYXRoLnBvdyhkLWIsMikpLGk9TWF0aC5zcXJ0KE1hdGgucG93KGUtYywyKStNYXRoLnBvdyhmLWQsMikpLGo9ZypoLyhoK2kpLGs9ZyppLyhoK2kpLGw9Yy1qKihlLWEpLG09ZC1qKihmLWIpLG49YytrKihlLWEpLG89ZCtrKihmLWIpO3JldHVybltsLG0sbixvXX0sX2V4cGFuZFBvaW50czpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT1hLmxlbmd0aCxmPVtdO2ZvcihjPTI7ZS0yPmM7Yys9MilkPUtpbmV0aWMuVXRpbC5fZ2V0Q29udHJvbFBvaW50cyhhW2MtMl0sYVtjLTFdLGFbY10sYVtjKzFdLGFbYysyXSxhW2MrM10sYiksZi5wdXNoKGRbMF0pLGYucHVzaChkWzFdKSxmLnB1c2goYVtjXSksZi5wdXNoKGFbYysxXSksZi5wdXNoKGRbMl0pLGYucHVzaChkWzNdKTtyZXR1cm4gZn0sX3JlbW92ZUxhc3RMZXR0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3Vic3RyaW5nKDAsYS5sZW5ndGgtMSl9fX0oKSxmdW5jdGlvbigpe3ZhciBhPUtpbmV0aWMuVXRpbC5jcmVhdGVDYW52YXNFbGVtZW50KCksYj1hLmdldENvbnRleHQoXCIyZFwiKSxjPUtpbmV0aWMuVUEubW9iaWxlP2Z1bmN0aW9uKCl7dmFyIGE9d2luZG93LmRldmljZVBpeGVsUmF0aW98fDEsYz1iLndlYmtpdEJhY2tpbmdTdG9yZVBpeGVsUmF0aW98fGIubW96QmFja2luZ1N0b3JlUGl4ZWxSYXRpb3x8Yi5tc0JhY2tpbmdTdG9yZVBpeGVsUmF0aW98fGIub0JhY2tpbmdTdG9yZVBpeGVsUmF0aW98fGIuYmFja2luZ1N0b3JlUGl4ZWxSYXRpb3x8MTtyZXR1cm4gYS9jfSgpOjE7S2luZXRpYy5DYW52YXM9ZnVuY3Rpb24oYSl7dGhpcy5pbml0KGEpfSxLaW5ldGljLkNhbnZhcy5wcm90b3R5cGU9e2luaXQ6ZnVuY3Rpb24oYSl7YT1hfHx7fTt2YXIgYj1hLnBpeGVsUmF0aW98fEtpbmV0aWMucGl4ZWxSYXRpb3x8Yzt0aGlzLnBpeGVsUmF0aW89Yix0aGlzLl9jYW52YXM9S2luZXRpYy5VdGlsLmNyZWF0ZUNhbnZhc0VsZW1lbnQoKSx0aGlzLl9jYW52YXMuc3R5bGUucGFkZGluZz0wLHRoaXMuX2NhbnZhcy5zdHlsZS5tYXJnaW49MCx0aGlzLl9jYW52YXMuc3R5bGUuYm9yZGVyPTAsdGhpcy5fY2FudmFzLnN0eWxlLmJhY2tncm91bmQ9XCJ0cmFuc3BhcmVudFwiLHRoaXMuX2NhbnZhcy5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIsdGhpcy5fY2FudmFzLnN0eWxlLnRvcD0wLHRoaXMuX2NhbnZhcy5zdHlsZS5sZWZ0PTB9LGdldENvbnRleHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZXh0fSxnZXRQaXhlbFJhdGlvOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGl4ZWxSYXRpb30sc2V0UGl4ZWxSYXRpbzpmdW5jdGlvbihhKXt0aGlzLnBpeGVsUmF0aW89YSx0aGlzLnNldFNpemUodGhpcy5nZXRXaWR0aCgpLHRoaXMuZ2V0SGVpZ2h0KCkpfSxzZXRXaWR0aDpmdW5jdGlvbihhKXt0aGlzLndpZHRoPXRoaXMuX2NhbnZhcy53aWR0aD1hKnRoaXMucGl4ZWxSYXRpbyx0aGlzLl9jYW52YXMuc3R5bGUud2lkdGg9YStcInB4XCJ9LHNldEhlaWdodDpmdW5jdGlvbihhKXt0aGlzLmhlaWdodD10aGlzLl9jYW52YXMuaGVpZ2h0PWEqdGhpcy5waXhlbFJhdGlvLHRoaXMuX2NhbnZhcy5zdHlsZS5oZWlnaHQ9YStcInB4XCJ9LGdldFdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2lkdGh9LGdldEhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhlaWdodH0sc2V0U2l6ZTpmdW5jdGlvbihhLGIpe3RoaXMuc2V0V2lkdGgoYSksdGhpcy5zZXRIZWlnaHQoYil9LHRvRGF0YVVSTDpmdW5jdGlvbihhLGIpe3RyeXtyZXR1cm4gdGhpcy5fY2FudmFzLnRvRGF0YVVSTChhLGIpfWNhdGNoKGMpe3RyeXtyZXR1cm4gdGhpcy5fY2FudmFzLnRvRGF0YVVSTCgpfWNhdGNoKGQpe3JldHVybiBLaW5ldGljLlV0aWwud2FybihcIlVuYWJsZSB0byBnZXQgZGF0YSBVUkwuIFwiK2QubWVzc2FnZSksXCJcIn19fX0sS2luZXRpYy5TY2VuZUNhbnZhcz1mdW5jdGlvbihhKXthPWF8fHt9O3ZhciBiPWEud2lkdGh8fDAsYz1hLmhlaWdodHx8MDtLaW5ldGljLkNhbnZhcy5jYWxsKHRoaXMsYSksdGhpcy5jb250ZXh0PW5ldyBLaW5ldGljLlNjZW5lQ29udGV4dCh0aGlzKSx0aGlzLnNldFNpemUoYixjKX0sS2luZXRpYy5TY2VuZUNhbnZhcy5wcm90b3R5cGU9e3NldFdpZHRoOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucGl4ZWxSYXRpbyxjPXRoaXMuZ2V0Q29udGV4dCgpLl9jb250ZXh0O0tpbmV0aWMuQ2FudmFzLnByb3RvdHlwZS5zZXRXaWR0aC5jYWxsKHRoaXMsYSksYy5zY2FsZShiLGIpfSxzZXRIZWlnaHQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5waXhlbFJhdGlvLGM9dGhpcy5nZXRDb250ZXh0KCkuX2NvbnRleHQ7S2luZXRpYy5DYW52YXMucHJvdG90eXBlLnNldEhlaWdodC5jYWxsKHRoaXMsYSksYy5zY2FsZShiLGIpfX0sS2luZXRpYy5VdGlsLmV4dGVuZChLaW5ldGljLlNjZW5lQ2FudmFzLEtpbmV0aWMuQ2FudmFzKSxLaW5ldGljLkhpdENhbnZhcz1mdW5jdGlvbihhKXthPWF8fHt9O3ZhciBiPWEud2lkdGh8fDAsYz1hLmhlaWdodHx8MDtLaW5ldGljLkNhbnZhcy5jYWxsKHRoaXMsYSksdGhpcy5jb250ZXh0PW5ldyBLaW5ldGljLkhpdENvbnRleHQodGhpcyksdGhpcy5zZXRTaXplKGIsYyl9LEtpbmV0aWMuVXRpbC5leHRlbmQoS2luZXRpYy5IaXRDYW52YXMsS2luZXRpYy5DYW52YXMpfSgpLGZ1bmN0aW9uKCl7dmFyIGE9XCIsXCIsYj1cIihcIixjPVwiKVwiLGQ9XCIoW1wiLGU9XCJdKVwiLGY9XCI7XCIsZz1cIigpXCIsaD1cIj1cIixpPVtcImFyY1wiLFwiYXJjVG9cIixcImJlZ2luUGF0aFwiLFwiYmV6aWVyQ3VydmVUb1wiLFwiY2xlYXJSZWN0XCIsXCJjbGlwXCIsXCJjbG9zZVBhdGhcIixcImNyZWF0ZUxpbmVhckdyYWRpZW50XCIsXCJjcmVhdGVQYXR0ZXJuXCIsXCJjcmVhdGVSYWRpYWxHcmFkaWVudFwiLFwiZHJhd0ltYWdlXCIsXCJmaWxsXCIsXCJmaWxsVGV4dFwiLFwiZ2V0SW1hZ2VEYXRhXCIsXCJjcmVhdGVJbWFnZURhdGFcIixcImxpbmVUb1wiLFwibW92ZVRvXCIsXCJwdXRJbWFnZURhdGFcIixcInF1YWRyYXRpY0N1cnZlVG9cIixcInJlY3RcIixcInJlc3RvcmVcIixcInJvdGF0ZVwiLFwic2F2ZVwiLFwic2NhbGVcIixcInNldExpbmVEYXNoXCIsXCJzZXRUcmFuc2Zvcm1cIixcInN0cm9rZVwiLFwic3Ryb2tlVGV4dFwiLFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGVcIl07S2luZXRpYy5Db250ZXh0PWZ1bmN0aW9uKGEpe3RoaXMuaW5pdChhKX0sS2luZXRpYy5Db250ZXh0LnByb3RvdHlwZT17aW5pdDpmdW5jdGlvbihhKXt0aGlzLmNhbnZhcz1hLHRoaXMuX2NvbnRleHQ9YS5fY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSxLaW5ldGljLmVuYWJsZVRyYWNlJiYodGhpcy50cmFjZUFycj1bXSx0aGlzLl9lbmFibGVUcmFjZSgpKX0sZmlsbFNoYXBlOmZ1bmN0aW9uKGEpe2EuZ2V0RmlsbEVuYWJsZWQoKSYmdGhpcy5fZmlsbChhKX0sc3Ryb2tlU2hhcGU6ZnVuY3Rpb24oYSl7YS5nZXRTdHJva2VFbmFibGVkKCkmJnRoaXMuX3N0cm9rZShhKX0sZmlsbFN0cm9rZVNoYXBlOmZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0RmlsbEVuYWJsZWQoKTtiJiZ0aGlzLl9maWxsKGEpLGEuZ2V0U3Ryb2tlRW5hYmxlZCgpJiZ0aGlzLl9zdHJva2UoYSl9LGdldFRyYWNlOmZ1bmN0aW9uKGkpe3ZhciBqLGssbCxtLG49dGhpcy50cmFjZUFycixvPW4ubGVuZ3RoLHA9XCJcIjtmb3Ioaj0wO28+ajtqKyspaz1uW2pdLGw9ay5tZXRob2QsbD8obT1rLmFyZ3MscCs9bCxwKz1pP2c6S2luZXRpYy5VdGlsLl9pc0FycmF5KG1bMF0pP2QrbS5qb2luKGEpK2U6YittLmpvaW4oYSkrYyk6KHArPWsucHJvcGVydHksaXx8KHArPWgray52YWwpKSxwKz1mO3JldHVybiBwfSxjbGVhclRyYWNlOmZ1bmN0aW9uKCl7dGhpcy50cmFjZUFycj1bXX0sX3RyYWNlOmZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcy50cmFjZUFycjtjLnB1c2goYSksYj1jLmxlbmd0aCxiPj1LaW5ldGljLnRyYWNlQXJyTWF4JiZjLnNoaWZ0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRDYW52YXMoKS5nZXRQaXhlbFJhdGlvKCk7dGhpcy5zZXRUcmFuc2Zvcm0oMSphLDAsMCwxKmEsMCwwKX0sZ2V0Q2FudmFzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FudmFzfSxjbGVhcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldENhbnZhcygpO2E/dGhpcy5jbGVhclJlY3QoYS54fHwwLGEueXx8MCxhLndpZHRofHwwLGEuaGVpZ2h0fHwwKTp0aGlzLmNsZWFyUmVjdCgwLDAsYi5nZXRXaWR0aCgpLGIuZ2V0SGVpZ2h0KCkpfSxfYXBwbHlMaW5lQ2FwOmZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0TGluZUNhcCgpO2ImJnRoaXMuc2V0QXR0cihcImxpbmVDYXBcIixiKX0sX2FwcGx5T3BhY2l0eTpmdW5jdGlvbihhKXt2YXIgYj1hLmdldEFic29sdXRlT3BhY2l0eSgpOzEhPT1iJiZ0aGlzLnNldEF0dHIoXCJnbG9iYWxBbHBoYVwiLGIpfSxfYXBwbHlMaW5lSm9pbjpmdW5jdGlvbihhKXt2YXIgYj1hLmdldExpbmVKb2luKCk7YiYmdGhpcy5zZXRBdHRyKFwibGluZUpvaW5cIixiKX0sc2V0QXR0cjpmdW5jdGlvbihhLGIpe3RoaXMuX2NvbnRleHRbYV09Yn0sYXJjOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3RoaXMuX2NvbnRleHQuYXJjKGFbMF0sYVsxXSxhWzJdLGFbM10sYVs0XSxhWzVdKX0sYmVnaW5QYXRoOmZ1bmN0aW9uKCl7dGhpcy5fY29udGV4dC5iZWdpblBhdGgoKX0sYmV6aWVyQ3VydmVUbzpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50czt0aGlzLl9jb250ZXh0LmJlemllckN1cnZlVG8oYVswXSxhWzFdLGFbMl0sYVszXSxhWzRdLGFbNV0pfSxjbGVhclJlY3Q6ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7dGhpcy5fY29udGV4dC5jbGVhclJlY3QoYVswXSxhWzFdLGFbMl0sYVszXSl9LGNsaXA6ZnVuY3Rpb24oKXt0aGlzLl9jb250ZXh0LmNsaXAoKX0sY2xvc2VQYXRoOmZ1bmN0aW9uKCl7dGhpcy5fY29udGV4dC5jbG9zZVBhdGgoKX0sY3JlYXRlSW1hZ2VEYXRhOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiAyPT09YS5sZW5ndGg/dGhpcy5fY29udGV4dC5jcmVhdGVJbWFnZURhdGEoYVswXSxhWzFdKToxPT09YS5sZW5ndGg/dGhpcy5fY29udGV4dC5jcmVhdGVJbWFnZURhdGEoYVswXSk6dm9pZCAwfSxjcmVhdGVMaW5lYXJHcmFkaWVudDpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50cztyZXR1cm4gdGhpcy5fY29udGV4dC5jcmVhdGVMaW5lYXJHcmFkaWVudChhWzBdLGFbMV0sYVsyXSxhWzNdKX0sY3JlYXRlUGF0dGVybjpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50cztyZXR1cm4gdGhpcy5fY29udGV4dC5jcmVhdGVQYXR0ZXJuKGFbMF0sYVsxXSl9LGNyZWF0ZVJhZGlhbEdyYWRpZW50OmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiB0aGlzLl9jb250ZXh0LmNyZWF0ZVJhZGlhbEdyYWRpZW50KGFbMF0sYVsxXSxhWzJdLGFbM10sYVs0XSxhWzVdKX0sZHJhd0ltYWdlOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzLGI9dGhpcy5fY29udGV4dDszPT09YS5sZW5ndGg/Yi5kcmF3SW1hZ2UoYVswXSxhWzFdLGFbMl0pOjU9PT1hLmxlbmd0aD9iLmRyYXdJbWFnZShhWzBdLGFbMV0sYVsyXSxhWzNdLGFbNF0pOjk9PT1hLmxlbmd0aCYmYi5kcmF3SW1hZ2UoYVswXSxhWzFdLGFbMl0sYVszXSxhWzRdLGFbNV0sYVs2XSxhWzddLGFbOF0pfSxmaWxsOmZ1bmN0aW9uKCl7dGhpcy5fY29udGV4dC5maWxsKCl9LGZpbGxUZXh0OmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3RoaXMuX2NvbnRleHQuZmlsbFRleHQoYVswXSxhWzFdLGFbMl0pfSxnZXRJbWFnZURhdGE6ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7cmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0SW1hZ2VEYXRhKGFbMF0sYVsxXSxhWzJdLGFbM10pfSxsaW5lVG86ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7dGhpcy5fY29udGV4dC5saW5lVG8oYVswXSxhWzFdKX0sbW92ZVRvOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3RoaXMuX2NvbnRleHQubW92ZVRvKGFbMF0sYVsxXSl9LHJlY3Q6ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7dGhpcy5fY29udGV4dC5yZWN0KGFbMF0sYVsxXSxhWzJdLGFbM10pfSxwdXRJbWFnZURhdGE6ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7dGhpcy5fY29udGV4dC5wdXRJbWFnZURhdGEoYVswXSxhWzFdLGFbMl0pfSxxdWFkcmF0aWNDdXJ2ZVRvOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3RoaXMuX2NvbnRleHQucXVhZHJhdGljQ3VydmVUbyhhWzBdLGFbMV0sYVsyXSxhWzNdKX0scmVzdG9yZTpmdW5jdGlvbigpe3RoaXMuX2NvbnRleHQucmVzdG9yZSgpfSxyb3RhdGU6ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7dGhpcy5fY29udGV4dC5yb3RhdGUoYVswXSl9LHNhdmU6ZnVuY3Rpb24oKXt0aGlzLl9jb250ZXh0LnNhdmUoKX0sc2NhbGU6ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7dGhpcy5fY29udGV4dC5zY2FsZShhWzBdLGFbMV0pfSxzZXRMaW5lRGFzaDpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50cyxiPXRoaXMuX2NvbnRleHQ7dGhpcy5fY29udGV4dC5zZXRMaW5lRGFzaD9iLnNldExpbmVEYXNoKGFbMF0pOlwibW96RGFzaFwiaW4gYj9iLm1vekRhc2g9YVswXTpcIndlYmtpdExpbmVEYXNoXCJpbiBiJiYoYi53ZWJraXRMaW5lRGFzaD1hWzBdKX0sc2V0VHJhbnNmb3JtOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3RoaXMuX2NvbnRleHQuc2V0VHJhbnNmb3JtKGFbMF0sYVsxXSxhWzJdLGFbM10sYVs0XSxhWzVdKX0sc3Ryb2tlOmZ1bmN0aW9uKCl7dGhpcy5fY29udGV4dC5zdHJva2UoKX0sc3Ryb2tlVGV4dDpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50czt0aGlzLl9jb250ZXh0LnN0cm9rZVRleHQoYVswXSxhWzFdLGFbMl0pfSx0cmFuc2Zvcm06ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7dGhpcy5fY29udGV4dC50cmFuc2Zvcm0oYVswXSxhWzFdLGFbMl0sYVszXSxhWzRdLGFbNV0pfSx0cmFuc2xhdGU6ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7dGhpcy5fY29udGV4dC50cmFuc2xhdGUoYVswXSxhWzFdKX0sX2VuYWJsZVRyYWNlOmZ1bmN0aW9uKCl7dmFyIGEsYixjPXRoaXMsZD1pLmxlbmd0aCxlPUtpbmV0aWMuVXRpbC5fc2ltcGxpZnlBcnJheSxmPXRoaXMuc2V0QXR0cixnPWZ1bmN0aW9uKGEpe3ZhciBkLGY9Y1thXTtjW2FdPWZ1bmN0aW9uKCl7cmV0dXJuIGI9ZShBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCkpLGQ9Zi5hcHBseShjLGFyZ3VtZW50cyksYy5fdHJhY2Uoe21ldGhvZDphLGFyZ3M6Yn0pLGR9fTtmb3IoYT0wO2Q+YTthKyspZyhpW2FdKTtjLnNldEF0dHI9ZnVuY3Rpb24oKXtmLmFwcGx5KGMsYXJndW1lbnRzKSxjLl90cmFjZSh7cHJvcGVydHk6YXJndW1lbnRzWzBdLHZhbDphcmd1bWVudHNbMV19KX19fSxLaW5ldGljLlNjZW5lQ29udGV4dD1mdW5jdGlvbihhKXtLaW5ldGljLkNvbnRleHQuY2FsbCh0aGlzLGEpfSxLaW5ldGljLlNjZW5lQ29udGV4dC5wcm90b3R5cGU9e19maWxsQ29sb3I6ZnVuY3Rpb24oYSl7dmFyIGI9YS5maWxsKCl8fEtpbmV0aWMuVXRpbC5fZ2V0UkdCQVN0cmluZyh7cmVkOmEuZmlsbFJlZCgpLGdyZWVuOmEuZmlsbEdyZWVuKCksYmx1ZTphLmZpbGxCbHVlKCksYWxwaGE6YS5maWxsQWxwaGEoKX0pO3RoaXMuc2V0QXR0cihcImZpbGxTdHlsZVwiLGIpLGEuX2ZpbGxGdW5jKHRoaXMpfSxfZmlsbFBhdHRlcm46ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRGaWxsUGF0dGVybkltYWdlKCksYz1hLmdldEZpbGxQYXR0ZXJuWCgpLGQ9YS5nZXRGaWxsUGF0dGVyblkoKSxlPWEuZ2V0RmlsbFBhdHRlcm5TY2FsZSgpLGY9S2luZXRpYy5nZXRBbmdsZShhLmdldEZpbGxQYXR0ZXJuUm90YXRpb24oKSksZz1hLmdldEZpbGxQYXR0ZXJuT2Zmc2V0KCksaD1hLmdldEZpbGxQYXR0ZXJuUmVwZWF0KCk7KGN8fGQpJiZ0aGlzLnRyYW5zbGF0ZShjfHwwLGR8fDApLGYmJnRoaXMucm90YXRlKGYpLGUmJnRoaXMuc2NhbGUoZS54LGUueSksZyYmdGhpcy50cmFuc2xhdGUoLTEqZy54LC0xKmcueSksdGhpcy5zZXRBdHRyKFwiZmlsbFN0eWxlXCIsdGhpcy5jcmVhdGVQYXR0ZXJuKGIsaHx8XCJyZXBlYXRcIikpLHRoaXMuZmlsbCgpfSxfZmlsbExpbmVhckdyYWRpZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0RmlsbExpbmVhckdyYWRpZW50U3RhcnRQb2ludCgpLGM9YS5nZXRGaWxsTGluZWFyR3JhZGllbnRFbmRQb2ludCgpLGQ9YS5nZXRGaWxsTGluZWFyR3JhZGllbnRDb2xvclN0b3BzKCksZT10aGlzLmNyZWF0ZUxpbmVhckdyYWRpZW50KGIueCxiLnksYy54LGMueSk7aWYoZCl7Zm9yKHZhciBmPTA7ZjxkLmxlbmd0aDtmKz0yKWUuYWRkQ29sb3JTdG9wKGRbZl0sZFtmKzFdKTt0aGlzLnNldEF0dHIoXCJmaWxsU3R5bGVcIixlKSx0aGlzLmZpbGwoKX19LF9maWxsUmFkaWFsR3JhZGllbnQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWEuZ2V0RmlsbFJhZGlhbEdyYWRpZW50U3RhcnRQb2ludCgpLGM9YS5nZXRGaWxsUmFkaWFsR3JhZGllbnRFbmRQb2ludCgpLGQ9YS5nZXRGaWxsUmFkaWFsR3JhZGllbnRTdGFydFJhZGl1cygpLGU9YS5nZXRGaWxsUmFkaWFsR3JhZGllbnRFbmRSYWRpdXMoKSxmPWEuZ2V0RmlsbFJhZGlhbEdyYWRpZW50Q29sb3JTdG9wcygpLGc9dGhpcy5jcmVhdGVSYWRpYWxHcmFkaWVudChiLngsYi55LGQsYy54LGMueSxlKSxoPTA7aDxmLmxlbmd0aDtoKz0yKWcuYWRkQ29sb3JTdG9wKGZbaF0sZltoKzFdKTt0aGlzLnNldEF0dHIoXCJmaWxsU3R5bGVcIixnKSx0aGlzLmZpbGwoKX0sX2ZpbGw6ZnVuY3Rpb24oYSl7dmFyIGI9YS5maWxsKCl8fGEuZmlsbFJlZCgpfHxhLmZpbGxHcmVlbigpfHxhLmZpbGxCbHVlKCksYz1hLmdldEZpbGxQYXR0ZXJuSW1hZ2UoKSxkPWEuZ2V0RmlsbExpbmVhckdyYWRpZW50Q29sb3JTdG9wcygpLGU9YS5nZXRGaWxsUmFkaWFsR3JhZGllbnRDb2xvclN0b3BzKCksZj1hLmdldEZpbGxQcmlvcml0eSgpO2ImJlwiY29sb3JcIj09PWY/dGhpcy5fZmlsbENvbG9yKGEpOmMmJlwicGF0dGVyblwiPT09Zj90aGlzLl9maWxsUGF0dGVybihhKTpkJiZcImxpbmVhci1ncmFkaWVudFwiPT09Zj90aGlzLl9maWxsTGluZWFyR3JhZGllbnQoYSk6ZSYmXCJyYWRpYWwtZ3JhZGllbnRcIj09PWY/dGhpcy5fZmlsbFJhZGlhbEdyYWRpZW50KGEpOmI/dGhpcy5fZmlsbENvbG9yKGEpOmM/dGhpcy5fZmlsbFBhdHRlcm4oYSk6ZD90aGlzLl9maWxsTGluZWFyR3JhZGllbnQoYSk6ZSYmdGhpcy5fZmlsbFJhZGlhbEdyYWRpZW50KGEpfSxfc3Ryb2tlOmZ1bmN0aW9uKGEpe3ZhciBiPWEuZGFzaCgpLGM9YS5nZXRTdHJva2VTY2FsZUVuYWJsZWQoKTthLmhhc1N0cm9rZSgpJiYoY3x8KHRoaXMuc2F2ZSgpLHRoaXMuc2V0VHJhbnNmb3JtKDEsMCwwLDEsMCwwKSksdGhpcy5fYXBwbHlMaW5lQ2FwKGEpLGImJmEuZGFzaEVuYWJsZWQoKSYmdGhpcy5zZXRMaW5lRGFzaChiKSx0aGlzLnNldEF0dHIoXCJsaW5lV2lkdGhcIixhLnN0cm9rZVdpZHRoKCkpLHRoaXMuc2V0QXR0cihcInN0cm9rZVN0eWxlXCIsYS5zdHJva2UoKXx8S2luZXRpYy5VdGlsLl9nZXRSR0JBU3RyaW5nKHtyZWQ6YS5zdHJva2VSZWQoKSxncmVlbjphLnN0cm9rZUdyZWVuKCksYmx1ZTphLnN0cm9rZUJsdWUoKSxhbHBoYTphLnN0cm9rZUFscGhhKCl9KSksYS5fc3Ryb2tlRnVuYyh0aGlzKSxjfHx0aGlzLnJlc3RvcmUoKSl9LF9hcHBseVNoYWRvdzpmdW5jdGlvbihhKXt2YXIgYj1LaW5ldGljLlV0aWwsYz1hLmdldEFic29sdXRlT3BhY2l0eSgpLGQ9Yi5nZXQoYS5nZXRTaGFkb3dDb2xvcigpLFwiYmxhY2tcIiksZT1iLmdldChhLmdldFNoYWRvd0JsdXIoKSw1KSxmPWIuZ2V0KGEuZ2V0U2hhZG93T3BhY2l0eSgpLDEpLGc9Yi5nZXQoYS5nZXRTaGFkb3dPZmZzZXQoKSx7eDowLHk6MH0pO2YmJnRoaXMuc2V0QXR0cihcImdsb2JhbEFscGhhXCIsZipjKSx0aGlzLnNldEF0dHIoXCJzaGFkb3dDb2xvclwiLGQpLHRoaXMuc2V0QXR0cihcInNoYWRvd0JsdXJcIixlKSx0aGlzLnNldEF0dHIoXCJzaGFkb3dPZmZzZXRYXCIsZy54KSx0aGlzLnNldEF0dHIoXCJzaGFkb3dPZmZzZXRZXCIsZy55KX19LEtpbmV0aWMuVXRpbC5leHRlbmQoS2luZXRpYy5TY2VuZUNvbnRleHQsS2luZXRpYy5Db250ZXh0KSxLaW5ldGljLkhpdENvbnRleHQ9ZnVuY3Rpb24oYSl7S2luZXRpYy5Db250ZXh0LmNhbGwodGhpcyxhKX0sS2luZXRpYy5IaXRDb250ZXh0LnByb3RvdHlwZT17X2ZpbGw6ZnVuY3Rpb24oYSl7dGhpcy5zYXZlKCksdGhpcy5zZXRBdHRyKFwiZmlsbFN0eWxlXCIsYS5jb2xvcktleSksYS5fZmlsbEZ1bmNIaXQodGhpcyksdGhpcy5yZXN0b3JlKCl9LF9zdHJva2U6ZnVuY3Rpb24oYSl7YS5oYXNTdHJva2UoKSYmKHRoaXMuX2FwcGx5TGluZUNhcChhKSx0aGlzLnNldEF0dHIoXCJsaW5lV2lkdGhcIixhLnN0cm9rZVdpZHRoKCkpLHRoaXMuc2V0QXR0cihcInN0cm9rZVN0eWxlXCIsYS5jb2xvcktleSksYS5fc3Ryb2tlRnVuY0hpdCh0aGlzKSl9fSxLaW5ldGljLlV0aWwuZXh0ZW5kKEtpbmV0aWMuSGl0Q29udGV4dCxLaW5ldGljLkNvbnRleHQpfSgpLGZ1bmN0aW9uKCl7dmFyIGE9XCJnZXRcIixiPVwic2V0XCI7S2luZXRpYy5GYWN0b3J5PXthZGRHZXR0ZXJTZXR0ZXI6ZnVuY3Rpb24oYSxiLGMsZCxlKXt0aGlzLmFkZEdldHRlcihhLGIsYyksdGhpcy5hZGRTZXR0ZXIoYSxiLGQsZSksdGhpcy5hZGRPdmVybG9hZGVkR2V0dGVyU2V0dGVyKGEsYil9LGFkZEdldHRlcjpmdW5jdGlvbihiLGMsZCl7dmFyIGU9YStLaW5ldGljLlV0aWwuX2NhcGl0YWxpemUoYyk7Yi5wcm90b3R5cGVbZV09ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmF0dHJzW2NdO3JldHVybiB2b2lkIDA9PT1hP2Q6YX19LGFkZFNldHRlcjpmdW5jdGlvbihhLGMsZCxlKXt2YXIgZj1iK0tpbmV0aWMuVXRpbC5fY2FwaXRhbGl6ZShjKTthLnByb3RvdHlwZVtmXT1mdW5jdGlvbihhKXtyZXR1cm4gZCYmKGE9ZC5jYWxsKHRoaXMsYSkpLHRoaXMuX3NldEF0dHIoYyxhKSxlJiZlLmNhbGwodGhpcyksdGhpc319LGFkZENvbXBvbmVudHNHZXR0ZXJTZXR0ZXI6ZnVuY3Rpb24oYyxkLGUsZixnKXt2YXIgaCxpLGo9ZS5sZW5ndGgsaz1LaW5ldGljLlV0aWwuX2NhcGl0YWxpemUsbD1hK2soZCksbT1iK2soZCk7Yy5wcm90b3R5cGVbbF09ZnVuY3Rpb24oKXt2YXIgYT17fTtmb3IoaD0wO2o+aDtoKyspaT1lW2hdLGFbaV09dGhpcy5nZXRBdHRyKGQrayhpKSk7cmV0dXJuIGF9LGMucHJvdG90eXBlW21dPWZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcy5hdHRyc1tkXTtmJiYoYT1mLmNhbGwodGhpcyxhKSk7Zm9yKGIgaW4gYSl0aGlzLl9zZXRBdHRyKGQrayhiKSxhW2JdKTtyZXR1cm4gdGhpcy5fZmlyZUNoYW5nZUV2ZW50KGQsYyxhKSxnJiZnLmNhbGwodGhpcyksdGhpc30sdGhpcy5hZGRPdmVybG9hZGVkR2V0dGVyU2V0dGVyKGMsZCl9LGFkZE92ZXJsb2FkZWRHZXR0ZXJTZXR0ZXI6ZnVuY3Rpb24oYyxkKXt2YXIgZT1LaW5ldGljLlV0aWwuX2NhcGl0YWxpemUoZCksZj1iK2UsZz1hK2U7Yy5wcm90b3R5cGVbZF09ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odGhpc1tmXShhcmd1bWVudHNbMF0pLHRoaXMpOnRoaXNbZ10oKX19LGJhY2tDb21wYXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYztmb3IoYyBpbiBiKWEucHJvdG90eXBlW2NdPWEucHJvdG90eXBlW2JbY11dfSxhZnRlclNldEZpbHRlcjpmdW5jdGlvbigpe3RoaXMuX2ZpbHRlclVwVG9EYXRlPSExfX0sS2luZXRpYy5WYWxpZGF0b3JzPXtSR0JDb21wb25lbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGE+MjU1PzI1NTowPmE/MDpNYXRoLnJvdW5kKGEpfSxhbHBoYUNvbXBvbmVudDpmdW5jdGlvbihhKXtyZXR1cm4gYT4xPzE6MWUtND5hPzFlLTQ6YX19fSgpLGZ1bmN0aW9uKCl7dmFyIGE9XCJhYnNvbHV0ZU9wYWNpdHlcIixiPVwiYWJzb2x1dGVUcmFuc2Zvcm1cIixjPVwiQ2hhbmdlXCIsZD1cImNoaWxkcmVuXCIsZT1cIi5cIixmPVwiXCIsZz1cImdldFwiLGg9XCJpZFwiLGk9XCJraW5ldGljXCIsaj1cImxpc3RlbmluZ1wiLGs9XCJtb3VzZWVudGVyXCIsbD1cIm1vdXNlbGVhdmVcIixtPVwibmFtZVwiLG49XCJzZXRcIixvPVwiU2hhcGVcIixwPVwiIFwiLHE9XCJzdGFnZVwiLHI9XCJ0cmFuc2Zvcm1cIixzPVwiU3RhZ2VcIix0PVwidmlzaWJsZVwiLHU9W1wiaWRcIl0sdj1bXCJ4Q2hhbmdlLmtpbmV0aWNcIixcInlDaGFuZ2Uua2luZXRpY1wiLFwic2NhbGVYQ2hhbmdlLmtpbmV0aWNcIixcInNjYWxlWUNoYW5nZS5raW5ldGljXCIsXCJza2V3WENoYW5nZS5raW5ldGljXCIsXCJza2V3WUNoYW5nZS5raW5ldGljXCIsXCJyb3RhdGlvbkNoYW5nZS5raW5ldGljXCIsXCJvZmZzZXRYQ2hhbmdlLmtpbmV0aWNcIixcIm9mZnNldFlDaGFuZ2Uua2luZXRpY1wiLFwidHJhbnNmb3Jtc0VuYWJsZWRDaGFuZ2Uua2luZXRpY1wiXS5qb2luKHApO0tpbmV0aWMuVXRpbC5hZGRNZXRob2RzKEtpbmV0aWMuTm9kZSx7X2luaXQ6ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpczt0aGlzLl9pZD1LaW5ldGljLmlkQ291bnRlcisrLHRoaXMuZXZlbnRMaXN0ZW5lcnM9e30sdGhpcy5hdHRycz17fSx0aGlzLl9jYWNoZT17fSx0aGlzLl9maWx0ZXJVcFRvRGF0ZT0hMSx0aGlzLnNldEF0dHJzKGMpLHRoaXMub24odixmdW5jdGlvbigpe3RoaXMuX2NsZWFyQ2FjaGUociksZC5fY2xlYXJTZWxmQW5kRGVzY2VuZGFudENhY2hlKGIpfSksdGhpcy5vbihcInZpc2libGVDaGFuZ2Uua2luZXRpY1wiLGZ1bmN0aW9uKCl7ZC5fY2xlYXJTZWxmQW5kRGVzY2VuZGFudENhY2hlKHQpfSksdGhpcy5vbihcImxpc3RlbmluZ0NoYW5nZS5raW5ldGljXCIsZnVuY3Rpb24oKXtkLl9jbGVhclNlbGZBbmREZXNjZW5kYW50Q2FjaGUoail9KSx0aGlzLm9uKFwib3BhY2l0eUNoYW5nZS5raW5ldGljXCIsZnVuY3Rpb24oKXtkLl9jbGVhclNlbGZBbmREZXNjZW5kYW50Q2FjaGUoYSl9KX0sX2NsZWFyQ2FjaGU6ZnVuY3Rpb24oYSl7YT9kZWxldGUgdGhpcy5fY2FjaGVbYV06dGhpcy5fY2FjaGU9e319LF9nZXRDYWNoZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuX2NhY2hlW2FdO3JldHVybiB2b2lkIDA9PT1jJiYodGhpcy5fY2FjaGVbYV09Yi5jYWxsKHRoaXMpKSx0aGlzLl9jYWNoZVthXX0sX2NsZWFyU2VsZkFuZERlc2NlbmRhbnRDYWNoZTpmdW5jdGlvbihhKXt0aGlzLl9jbGVhckNhY2hlKGEpLHRoaXMuY2hpbGRyZW4mJnRoaXMuZ2V0Q2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKGIpe2IuX2NsZWFyU2VsZkFuZERlc2NlbmRhbnRDYWNoZShhKX0pfSxjbGVhckNhY2hlOmZ1bmN0aW9uKCl7cmV0dXJuIGRlbGV0ZSB0aGlzLl9jYWNoZS5jYW52YXMsdGhpcy5fZmlsdGVyVXBUb0RhdGU9ITEsdGhpc30sY2FjaGU6ZnVuY3Rpb24oYSl7e3ZhciBiPWF8fHt9LGM9Yi54fHwwLGQ9Yi55fHwwLGU9Yi53aWR0aHx8dGhpcy53aWR0aCgpLGY9Yi5oZWlnaHR8fHRoaXMuaGVpZ2h0KCksZz1iLmRyYXdCb3JkZXJ8fCExO3RoaXMuZ2V0TGF5ZXIoKX1pZigwPT09ZXx8MD09PWYpcmV0dXJuIHZvaWQgS2luZXRpYy5VdGlsLndhcm4oXCJXaWR0aCBvciBoZWlnaHQgb2YgY2FjaGluZyBjb25maWd1cmF0aW9uIGVxdWFscyAwLiBDYWNoZSBpcyBpZ25vcmVkLlwiKTt2YXIgaD1uZXcgS2luZXRpYy5TY2VuZUNhbnZhcyh7cGl4ZWxSYXRpbzoxLHdpZHRoOmUsaGVpZ2h0OmZ9KSxpPW5ldyBLaW5ldGljLlNjZW5lQ2FudmFzKHtwaXhlbFJhdGlvOjEsd2lkdGg6ZSxoZWlnaHQ6Zn0pLGo9bmV3IEtpbmV0aWMuSGl0Q2FudmFzKHt3aWR0aDplLGhlaWdodDpmfSksaz0odGhpcy50cmFuc2Zvcm1zRW5hYmxlZCgpLHRoaXMueCgpLHRoaXMueSgpLGguZ2V0Q29udGV4dCgpKSxsPWouZ2V0Q29udGV4dCgpO3JldHVybiB0aGlzLmNsZWFyQ2FjaGUoKSxrLnNhdmUoKSxsLnNhdmUoKSxnJiYoay5zYXZlKCksay5iZWdpblBhdGgoKSxrLnJlY3QoMCwwLGUsZiksay5jbG9zZVBhdGgoKSxrLnNldEF0dHIoXCJzdHJva2VTdHlsZVwiLFwicmVkXCIpLGsuc2V0QXR0cihcImxpbmVXaWR0aFwiLDUpLGsuc3Ryb2tlKCksay5yZXN0b3JlKCkpLGsudHJhbnNsYXRlKC0xKmMsLTEqZCksbC50cmFuc2xhdGUoLTEqYywtMSpkKSxcIlNoYXBlXCI9PT10aGlzLm5vZGVUeXBlJiYoay50cmFuc2xhdGUoLTEqdGhpcy54KCksLTEqdGhpcy55KCkpLGwudHJhbnNsYXRlKC0xKnRoaXMueCgpLC0xKnRoaXMueSgpKSksdGhpcy5kcmF3U2NlbmUoaCx0aGlzKSx0aGlzLmRyYXdIaXQoaix0aGlzKSxrLnJlc3RvcmUoKSxsLnJlc3RvcmUoKSx0aGlzLl9jYWNoZS5jYW52YXM9e3NjZW5lOmgsZmlsdGVyOmksaGl0Omp9LHRoaXN9LF9kcmF3Q2FjaGVkU2NlbmVDYW52YXM6ZnVuY3Rpb24oYSl7YS5zYXZlKCksdGhpcy5nZXRMYXllcigpLl9hcHBseVRyYW5zZm9ybSh0aGlzLGEpLGEuZHJhd0ltYWdlKHRoaXMuX2dldENhY2hlZFNjZW5lQ2FudmFzKCkuX2NhbnZhcywwLDApLGEucmVzdG9yZSgpfSxfZ2V0Q2FjaGVkU2NlbmVDYW52YXM6ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlPXRoaXMuZmlsdGVycygpLGY9dGhpcy5fY2FjaGUuY2FudmFzLGc9Zi5zY2VuZSxoPWYuZmlsdGVyLGk9aC5nZXRDb250ZXh0KCk7aWYoZSl7aWYoIXRoaXMuX2ZpbHRlclVwVG9EYXRlKXt0cnl7Zm9yKGE9ZS5sZW5ndGgsaS5jbGVhcigpLGkuZHJhd0ltYWdlKGcuX2NhbnZhcywwLDApLGI9aS5nZXRJbWFnZURhdGEoMCwwLGguZ2V0V2lkdGgoKSxoLmdldEhlaWdodCgpKSxjPTA7YT5jO2MrKylkPWVbY10sZC5jYWxsKHRoaXMsYiksaS5wdXRJbWFnZURhdGEoYiwwLDApfWNhdGNoKGope0tpbmV0aWMuVXRpbC53YXJuKFwiVW5hYmxlIHRvIGFwcGx5IGZpbHRlci4gXCIrai5tZXNzYWdlKX10aGlzLl9maWx0ZXJVcFRvRGF0ZT0hMH1yZXR1cm4gaH1yZXR1cm4gZ30sX2RyYXdDYWNoZWRIaXRDYW52YXM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fY2FjaGUuY2FudmFzLGM9Yi5oaXQ7YS5zYXZlKCksdGhpcy5nZXRMYXllcigpLl9hcHBseVRyYW5zZm9ybSh0aGlzLGEpLGEuZHJhd0ltYWdlKGMuX2NhbnZhcywwLDApLGEucmVzdG9yZSgpfSxvbjpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZyxoLGksaj1hLnNwbGl0KHApLGs9ai5sZW5ndGg7Zm9yKGM9MDtrPmM7YysrKWQ9altjXSxnPWQuc3BsaXQoZSksaD1nWzBdLGk9Z1sxXXx8Zix0aGlzLmV2ZW50TGlzdGVuZXJzW2hdfHwodGhpcy5ldmVudExpc3RlbmVyc1toXT1bXSksdGhpcy5ldmVudExpc3RlbmVyc1toXS5wdXNoKHtuYW1lOmksaGFuZGxlcjpifSk7cmV0dXJuIHRoaXN9LG9mZjpmdW5jdGlvbihhKXt2YXIgYixjLGQsZixnLGgsaT1hLnNwbGl0KHApLGo9aS5sZW5ndGg7Zm9yKGI9MDtqPmI7YisrKWlmKGQ9aVtiXSxmPWQuc3BsaXQoZSksZz1mWzBdLGg9ZlsxXSxnKXRoaXMuZXZlbnRMaXN0ZW5lcnNbZ10mJnRoaXMuX29mZihnLGgpO2Vsc2UgZm9yKGMgaW4gdGhpcy5ldmVudExpc3RlbmVycyl0aGlzLl9vZmYoYyxoKTtyZXR1cm4gdGhpc30sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbihhKXt2YXIgYj17dGFyZ2V0OnRoaXMsdHlwZTphLnR5cGUsZXZ0OmF9O3RoaXMuZmlyZShhLnR5cGUsYil9LGFkZEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLm9uKGEsZnVuY3Rpb24oYSl7Yi5jYWxsKHRoaXMsYS5ldnQpfSl9LHJlbW92ZTpmdW5jdGlvbigpe3ZhciBjPXRoaXMuZ2V0UGFyZW50KCk7cmV0dXJuIGMmJmMuY2hpbGRyZW4mJihjLmNoaWxkcmVuLnNwbGljZSh0aGlzLmluZGV4LDEpLGMuX3NldENoaWxkcmVuSW5kaWNlcygpLGRlbGV0ZSB0aGlzLnBhcmVudCksdGhpcy5fY2xlYXJTZWxmQW5kRGVzY2VuZGFudENhY2hlKHEpLHRoaXMuX2NsZWFyU2VsZkFuZERlc2NlbmRhbnRDYWNoZShiKSx0aGlzLl9jbGVhclNlbGZBbmREZXNjZW5kYW50Q2FjaGUodCksdGhpcy5fY2xlYXJTZWxmQW5kRGVzY2VuZGFudENhY2hlKGopLHRoaXMuX2NsZWFyU2VsZkFuZERlc2NlbmRhbnRDYWNoZShhKSx0aGlzfSxkZXN0cm95OmZ1bmN0aW9uKCl7S2luZXRpYy5fcmVtb3ZlSWQodGhpcy5nZXRJZCgpKSxLaW5ldGljLl9yZW1vdmVOYW1lKHRoaXMuZ2V0TmFtZSgpLHRoaXMuX2lkKSx0aGlzLnJlbW92ZSgpfSxnZXRBdHRyOmZ1bmN0aW9uKGEpe3ZhciBiPWcrS2luZXRpYy5VdGlsLl9jYXBpdGFsaXplKGEpO3JldHVybiBLaW5ldGljLlV0aWwuX2lzRnVuY3Rpb24odGhpc1tiXSk/dGhpc1tiXSgpOnRoaXMuYXR0cnNbYV19LGdldEFuY2VzdG9yczpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmdldFBhcmVudCgpLGI9bmV3IEtpbmV0aWMuQ29sbGVjdGlvbjthOyliLnB1c2goYSksYT1hLmdldFBhcmVudCgpO3JldHVybiBifSxnZXRBdHRyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmF0dHJzfHx7fX0sc2V0QXR0cnM6ZnVuY3Rpb24oYSl7dmFyIGIsYztpZihhKWZvcihiIGluIGEpYj09PWR8fChjPW4rS2luZXRpYy5VdGlsLl9jYXBpdGFsaXplKGIpLEtpbmV0aWMuVXRpbC5faXNGdW5jdGlvbih0aGlzW2NdKT90aGlzW2NdKGFbYl0pOnRoaXMuX3NldEF0dHIoYixhW2JdKSk7cmV0dXJuIHRoaXN9LGlzTGlzdGVuaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldENhY2hlKGosdGhpcy5faXNMaXN0ZW5pbmcpfSxfaXNMaXN0ZW5pbmc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldExpc3RlbmluZygpLGI9dGhpcy5nZXRQYXJlbnQoKTtyZXR1cm5cImluaGVyaXRcIj09PWE/Yj9iLmlzTGlzdGVuaW5nKCk6ITA6YX0saXNWaXNpYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldENhY2hlKHQsdGhpcy5faXNWaXNpYmxlKX0sX2lzVmlzaWJsZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0VmlzaWJsZSgpLGI9dGhpcy5nZXRQYXJlbnQoKTtyZXR1cm5cImluaGVyaXRcIj09PWE/Yj9iLmlzVmlzaWJsZSgpOiEwOmF9LHNob3VsZERyYXdIaXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldExheWVyKCk7cmV0dXJuIGEmJmEuaGl0R3JhcGhFbmFibGVkKCkmJnRoaXMuaXNMaXN0ZW5pbmcoKSYmdGhpcy5pc1Zpc2libGUoKSYmIUtpbmV0aWMuaXNEcmFnZ2luZygpfSxzaG93OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0VmlzaWJsZSghMCksdGhpc30saGlkZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNldFZpc2libGUoITEpLHRoaXN9LGdldFpJbmRleDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluZGV4fHwwfSxnZXRBYnNvbHV0ZVpJbmRleDpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoaSl7Zm9yKGI9W10sYz1pLmxlbmd0aCxkPTA7Yz5kO2QrKyllPWlbZF0saCsrLGUubm9kZVR5cGUhPT1vJiYoYj1iLmNvbmNhdChlLmdldENoaWxkcmVuKCkudG9BcnJheSgpKSksZS5faWQ9PT1nLl9pZCYmKGQ9Yyk7Yi5sZW5ndGg+MCYmYlswXS5nZXREZXB0aCgpPD1mJiZhKGIpfXZhciBiLGMsZCxlLGY9dGhpcy5nZXREZXB0aCgpLGc9dGhpcyxoPTA7cmV0dXJuIGcubm9kZVR5cGUhPT1zJiZhKGcuZ2V0U3RhZ2UoKS5nZXRDaGlsZHJlbigpKSxofSxnZXREZXB0aDpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI9dGhpcy5wYXJlbnQ7YjspYSsrLGI9Yi5wYXJlbnQ7cmV0dXJuIGF9LHNldFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnNldFgoYS54KSx0aGlzLnNldFkoYS55KSx0aGlzfSxnZXRQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybnt4OnRoaXMuZ2V0WCgpLHk6dGhpcy5nZXRZKCl9fSxnZXRBYnNvbHV0ZVBvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRBYnNvbHV0ZVRyYW5zZm9ybSgpLmdldE1hdHJpeCgpLGI9bmV3IEtpbmV0aWMuVHJhbnNmb3JtLGM9dGhpcy5vZmZzZXQoKTtyZXR1cm4gYi5tPWEuc2xpY2UoKSxiLnRyYW5zbGF0ZShjLngsYy55KSxiLmdldFRyYW5zbGF0aW9uKCl9LHNldEFic29sdXRlUG9zaXRpb246ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLl9jbGVhclRyYW5zZm9ybSgpO3JldHVybiB0aGlzLmF0dHJzLng9Yy54LHRoaXMuYXR0cnMueT1jLnksZGVsZXRlIGMueCxkZWxldGUgYy55LGI9dGhpcy5nZXRBYnNvbHV0ZVRyYW5zZm9ybSgpLGIuaW52ZXJ0KCksYi50cmFuc2xhdGUoYS54LGEueSksYT17eDp0aGlzLmF0dHJzLngrYi5nZXRUcmFuc2xhdGlvbigpLngseTp0aGlzLmF0dHJzLnkrYi5nZXRUcmFuc2xhdGlvbigpLnl9LHRoaXMuc2V0UG9zaXRpb24oe3g6YS54LHk6YS55fSksdGhpcy5fc2V0VHJhbnNmb3JtKGMpLHRoaXN9LF9zZXRUcmFuc2Zvcm06ZnVuY3Rpb24oYSl7dmFyIGM7Zm9yKGMgaW4gYSl0aGlzLmF0dHJzW2NdPWFbY107dGhpcy5fY2xlYXJDYWNoZShyKSx0aGlzLl9jbGVhclNlbGZBbmREZXNjZW5kYW50Q2FjaGUoYil9LF9jbGVhclRyYW5zZm9ybTpmdW5jdGlvbigpe3ZhciBhPXt4OnRoaXMuZ2V0WCgpLHk6dGhpcy5nZXRZKCkscm90YXRpb246dGhpcy5nZXRSb3RhdGlvbigpLHNjYWxlWDp0aGlzLmdldFNjYWxlWCgpLHNjYWxlWTp0aGlzLmdldFNjYWxlWSgpLG9mZnNldFg6dGhpcy5nZXRPZmZzZXRYKCksb2Zmc2V0WTp0aGlzLmdldE9mZnNldFkoKSxza2V3WDp0aGlzLmdldFNrZXdYKCksc2tld1k6dGhpcy5nZXRTa2V3WSgpfTtyZXR1cm4gdGhpcy5hdHRycy54PTAsdGhpcy5hdHRycy55PTAsdGhpcy5hdHRycy5yb3RhdGlvbj0wLHRoaXMuYXR0cnMuc2NhbGVYPTEsdGhpcy5hdHRycy5zY2FsZVk9MSx0aGlzLmF0dHJzLm9mZnNldFg9MCx0aGlzLmF0dHJzLm9mZnNldFk9MCx0aGlzLmF0dHJzLnNrZXdYPTAsdGhpcy5hdHRycy5za2V3WT0wLHRoaXMuX2NsZWFyQ2FjaGUociksdGhpcy5fY2xlYXJTZWxmQW5kRGVzY2VuZGFudENhY2hlKGIpLGF9LG1vdmU6ZnVuY3Rpb24oYSl7dmFyIGI9YS54LGM9YS55LGQ9dGhpcy5nZXRYKCksZT10aGlzLmdldFkoKTtyZXR1cm4gdm9pZCAwIT09YiYmKGQrPWIpLHZvaWQgMCE9PWMmJihlKz1jKSx0aGlzLnNldFBvc2l0aW9uKHt4OmQseTplfSksdGhpc30sX2VhY2hBbmNlc3RvclJldmVyc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9W10sZj10aGlzLmdldFBhcmVudCgpO2lmKGImJmIuX2lkPT09dGhpcy5faWQpcmV0dXJuIGEodGhpcyksITA7Zm9yKGUudW5zaGlmdCh0aGlzKTtmJiYoIWJ8fGYuX2lkIT09Yi5faWQpOyllLnVuc2hpZnQoZiksZj1mLnBhcmVudDtmb3IoYz1lLmxlbmd0aCxkPTA7Yz5kO2QrKylhKGVbZF0pfSxyb3RhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc2V0Um90YXRpb24odGhpcy5nZXRSb3RhdGlvbigpK2EpLHRoaXN9LG1vdmVUb1RvcDpmdW5jdGlvbigpe2lmKCF0aGlzLnBhcmVudClyZXR1cm4gdm9pZCBLaW5ldGljLlV0aWwud2FybihcIk5vZGUgaGFzIG5vIHBhcmVudC4gbW92ZVRvVG9wIGZ1bmN0aW9uIGlzIGlnbm9yZWQuXCIpO3ZhciBhPXRoaXMuaW5kZXg7cmV0dXJuIHRoaXMucGFyZW50LmNoaWxkcmVuLnNwbGljZShhLDEpLHRoaXMucGFyZW50LmNoaWxkcmVuLnB1c2godGhpcyksdGhpcy5wYXJlbnQuX3NldENoaWxkcmVuSW5kaWNlcygpLCEwfSxtb3ZlVXA6ZnVuY3Rpb24oKXtpZighdGhpcy5wYXJlbnQpcmV0dXJuIHZvaWQgS2luZXRpYy5VdGlsLndhcm4oXCJOb2RlIGhhcyBubyBwYXJlbnQuIG1vdmVVcCBmdW5jdGlvbiBpcyBpZ25vcmVkLlwiKTt2YXIgYT10aGlzLmluZGV4LGI9dGhpcy5wYXJlbnQuZ2V0Q2hpbGRyZW4oKS5sZW5ndGg7cmV0dXJuIGItMT5hPyh0aGlzLnBhcmVudC5jaGlsZHJlbi5zcGxpY2UoYSwxKSx0aGlzLnBhcmVudC5jaGlsZHJlbi5zcGxpY2UoYSsxLDAsdGhpcyksdGhpcy5wYXJlbnQuX3NldENoaWxkcmVuSW5kaWNlcygpLCEwKTohMX0sbW92ZURvd246ZnVuY3Rpb24oKXtpZighdGhpcy5wYXJlbnQpcmV0dXJuIHZvaWQgS2luZXRpYy5VdGlsLndhcm4oXCJOb2RlIGhhcyBubyBwYXJlbnQuIG1vdmVEb3duIGZ1bmN0aW9uIGlzIGlnbm9yZWQuXCIpO3ZhciBhPXRoaXMuaW5kZXg7cmV0dXJuIGE+MD8odGhpcy5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGEsMSksdGhpcy5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGEtMSwwLHRoaXMpLHRoaXMucGFyZW50Ll9zZXRDaGlsZHJlbkluZGljZXMoKSwhMCk6ITF9LG1vdmVUb0JvdHRvbTpmdW5jdGlvbigpe2lmKCF0aGlzLnBhcmVudClyZXR1cm4gdm9pZCBLaW5ldGljLlV0aWwud2FybihcIk5vZGUgaGFzIG5vIHBhcmVudC4gbW92ZVRvQm90dG9tIGZ1bmN0aW9uIGlzIGlnbm9yZWQuXCIpO3ZhciBhPXRoaXMuaW5kZXg7cmV0dXJuIGE+MD8odGhpcy5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGEsMSksdGhpcy5wYXJlbnQuY2hpbGRyZW4udW5zaGlmdCh0aGlzKSx0aGlzLnBhcmVudC5fc2V0Q2hpbGRyZW5JbmRpY2VzKCksITApOiExfSxzZXRaSW5kZXg6ZnVuY3Rpb24oYSl7aWYoIXRoaXMucGFyZW50KXJldHVybiB2b2lkIEtpbmV0aWMuVXRpbC53YXJuKFwiTm9kZSBoYXMgbm8gcGFyZW50LiB6SW5kZXggcGFyYW1ldGVyIGlzIGlnbm9yZWQuXCIpO3ZhciBiPXRoaXMuaW5kZXg7cmV0dXJuIHRoaXMucGFyZW50LmNoaWxkcmVuLnNwbGljZShiLDEpLHRoaXMucGFyZW50LmNoaWxkcmVuLnNwbGljZShhLDAsdGhpcyksdGhpcy5wYXJlbnQuX3NldENoaWxkcmVuSW5kaWNlcygpLHRoaXN9LGdldEFic29sdXRlT3BhY2l0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRDYWNoZShhLHRoaXMuX2dldEFic29sdXRlT3BhY2l0eSl9LF9nZXRBYnNvbHV0ZU9wYWNpdHk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldE9wYWNpdHkoKTtyZXR1cm4gdGhpcy5nZXRQYXJlbnQoKSYmKGEqPXRoaXMuZ2V0UGFyZW50KCkuZ2V0QWJzb2x1dGVPcGFjaXR5KCkpLGF9LG1vdmVUbzpmdW5jdGlvbihhKXtyZXR1cm4gS2luZXRpYy5Ob2RlLnByb3RvdHlwZS5yZW1vdmUuY2FsbCh0aGlzKSxhLmFkZCh0aGlzKSx0aGlzfSx0b09iamVjdDpmdW5jdGlvbigpe3ZhciBhLGIsYyxkLGU9S2luZXRpYy5VdGlsLGY9e30sZz10aGlzLmdldEF0dHJzKCk7Zi5hdHRycz17fTtmb3IoYSBpbiBnKWI9Z1thXSxlLl9pc0Z1bmN0aW9uKGIpfHxlLl9pc0VsZW1lbnQoYil8fGUuX2lzT2JqZWN0KGIpJiZlLl9oYXNNZXRob2RzKGIpfHwoYz10aGlzW2FdLGRlbGV0ZSBnW2FdLGQ9Yz9jLmNhbGwodGhpcyk6bnVsbCxnW2FdPWIsZCE9PWImJihmLmF0dHJzW2FdPWIpKTtyZXR1cm4gZi5jbGFzc05hbWU9dGhpcy5nZXRDbGFzc05hbWUoKSxmfSx0b0pTT046ZnVuY3Rpb24oKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy50b09iamVjdCgpKX0sZ2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50fSxnZXRMYXllcjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0UGFyZW50KCk7cmV0dXJuIGE/YS5nZXRMYXllcigpOm51bGx9LGdldFN0YWdlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldENhY2hlKHEsdGhpcy5fZ2V0U3RhZ2UpfSxfZ2V0U3RhZ2U6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFBhcmVudCgpO3JldHVybiBhP2EuZ2V0U3RhZ2UoKTp2b2lkIDB9LGZpcmU6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjP3RoaXMuX2ZpcmVBbmRCdWJibGUoYSxifHx7fSk6dGhpcy5fZmlyZShhLGJ8fHt9KSx0aGlzfSxnZXRBYnNvbHV0ZVRyYW5zZm9ybTpmdW5jdGlvbihhKXtyZXR1cm4gYT90aGlzLl9nZXRBYnNvbHV0ZVRyYW5zZm9ybShhKTp0aGlzLl9nZXRDYWNoZShiLHRoaXMuX2dldEFic29sdXRlVHJhbnNmb3JtKX0sX2dldEFic29sdXRlVHJhbnNmb3JtOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZD1uZXcgS2luZXRpYy5UcmFuc2Zvcm07cmV0dXJuIHRoaXMuX2VhY2hBbmNlc3RvclJldmVyc2UoZnVuY3Rpb24oYSl7Yj1hLnRyYW5zZm9ybXNFbmFibGVkKCksYz1hLmdldFRyYW5zZm9ybSgpLFwiYWxsXCI9PT1iP2QubXVsdGlwbHkoYyk6XCJwb3NpdGlvblwiPT09YiYmZC50cmFuc2xhdGUoYS54KCksYS55KCkpfSxhKSxkfSxnZXRUcmFuc2Zvcm06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0Q2FjaGUocix0aGlzLl9nZXRUcmFuc2Zvcm0pfSxfZ2V0VHJhbnNmb3JtOmZ1bmN0aW9uKCl7dmFyIGE9bmV3IEtpbmV0aWMuVHJhbnNmb3JtLGI9dGhpcy5nZXRYKCksYz10aGlzLmdldFkoKSxkPUtpbmV0aWMuZ2V0QW5nbGUodGhpcy5nZXRSb3RhdGlvbigpKSxlPXRoaXMuZ2V0U2NhbGVYKCksZj10aGlzLmdldFNjYWxlWSgpLGc9dGhpcy5nZXRTa2V3WCgpLGg9dGhpcy5nZXRTa2V3WSgpLGk9dGhpcy5nZXRPZmZzZXRYKCksaj10aGlzLmdldE9mZnNldFkoKTtyZXR1cm4oMCE9PWJ8fDAhPT1jKSYmYS50cmFuc2xhdGUoYixjKSwwIT09ZCYmYS5yb3RhdGUoZCksKDAhPT1nfHwwIT09aCkmJmEuc2tldyhnLGgpLCgxIT09ZXx8MSE9PWYpJiZhLnNjYWxlKGUsZiksKDAhPT1pfHwwIT09aikmJmEudHJhbnNsYXRlKC0xKmksLTEqaiksYX0sY2xvbmU6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnPXRoaXMuZ2V0Q2xhc3NOYW1lKCksaD1LaW5ldGljLlV0aWwuY2xvbmVPYmplY3QodGhpcy5hdHRycyk7Zm9yKHZhciBqIGluIHUpe3ZhciBrPXVbal07ZGVsZXRlIGhba119Zm9yKGIgaW4gYSloW2JdPWFbYl07dmFyIGw9bmV3IEtpbmV0aWNbZ10oaCk7Zm9yKGIgaW4gdGhpcy5ldmVudExpc3RlbmVycylmb3IoYz10aGlzLmV2ZW50TGlzdGVuZXJzW2JdLGQ9Yy5sZW5ndGgsZT0wO2Q+ZTtlKyspZj1jW2VdLGYubmFtZS5pbmRleE9mKGkpPDAmJihsLmV2ZW50TGlzdGVuZXJzW2JdfHwobC5ldmVudExpc3RlbmVyc1tiXT1bXSksbC5ldmVudExpc3RlbmVyc1tiXS5wdXNoKGYpKTtyZXR1cm4gbH0sdG9EYXRhVVJMOmZ1bmN0aW9uKGEpe2E9YXx8e307dmFyIGI9YS5taW1lVHlwZXx8bnVsbCxjPWEucXVhbGl0eXx8bnVsbCxkPXRoaXMuZ2V0U3RhZ2UoKSxlPWEueHx8MCxmPWEueXx8MCxnPW5ldyBLaW5ldGljLlNjZW5lQ2FudmFzKHt3aWR0aDphLndpZHRofHx0aGlzLmdldFdpZHRoKCl8fChkP2QuZ2V0V2lkdGgoKTowKSxoZWlnaHQ6YS5oZWlnaHR8fHRoaXMuZ2V0SGVpZ2h0KCl8fChkP2QuZ2V0SGVpZ2h0KCk6MCkscGl4ZWxSYXRpbzoxfSksaD1nLmdldENvbnRleHQoKTtyZXR1cm4gaC5zYXZlKCksKGV8fGYpJiZoLnRyYW5zbGF0ZSgtMSplLC0xKmYpLHRoaXMuZHJhd1NjZW5lKGcpLGgucmVzdG9yZSgpLGcudG9EYXRhVVJMKGIsYyl9LHRvSW1hZ2U6ZnVuY3Rpb24oYSl7S2luZXRpYy5VdGlsLl9nZXRJbWFnZSh0aGlzLnRvRGF0YVVSTChhKSxmdW5jdGlvbihiKXthLmNhbGxiYWNrKGIpfSl9LHNldFNpemU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc2V0V2lkdGgoYS53aWR0aCksdGhpcy5zZXRIZWlnaHQoYS5oZWlnaHQpLHRoaXN9LGdldFNpemU6ZnVuY3Rpb24oKXtyZXR1cm57d2lkdGg6dGhpcy5nZXRXaWR0aCgpLGhlaWdodDp0aGlzLmdldEhlaWdodCgpfX0sZ2V0V2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hdHRycy53aWR0aHx8MH0sZ2V0SGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXR0cnMuaGVpZ2h0fHwwfSxnZXRDbGFzc05hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jbGFzc05hbWV8fHRoaXMubm9kZVR5cGV9LGdldFR5cGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlVHlwZX0sZ2V0RHJhZ0Rpc3RhbmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMuYXR0cnMuZHJhZ0Rpc3RhbmNlP3RoaXMuYXR0cnMuZHJhZ0Rpc3RhbmNlOnRoaXMucGFyZW50P3RoaXMucGFyZW50LmdldERyYWdEaXN0YW5jZSgpOktpbmV0aWMuZHJhZ0Rpc3RhbmNlfSxfZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm5vZGVUeXBlPT09YT9bdGhpc106W119LF9vZmY6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9dGhpcy5ldmVudExpc3RlbmVyc1thXTtmb3IoYz0wO2M8ZS5sZW5ndGg7YysrKWlmKGQ9ZVtjXS5uYW1lLCEoXCJraW5ldGljXCI9PT1kJiZcImtpbmV0aWNcIiE9PWJ8fGImJmQhPT1iKSl7aWYoZS5zcGxpY2UoYywxKSwwPT09ZS5sZW5ndGgpe2RlbGV0ZSB0aGlzLmV2ZW50TGlzdGVuZXJzW2FdO2JyZWFrfWMtLX19LF9maXJlQ2hhbmdlRXZlbnQ6ZnVuY3Rpb24oYSxiLGQpe3RoaXMuX2ZpcmUoYStjLHtvbGRWYWw6YixuZXdWYWw6ZH0pfSxzZXRJZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldElkKCk7cmV0dXJuIEtpbmV0aWMuX3JlbW92ZUlkKGIpLEtpbmV0aWMuX2FkZElkKHRoaXMsYSksdGhpcy5fc2V0QXR0cihoLGEpLHRoaXNcbn0sc2V0TmFtZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldE5hbWUoKTtyZXR1cm4gS2luZXRpYy5fcmVtb3ZlTmFtZShiLHRoaXMuX2lkKSxLaW5ldGljLl9hZGROYW1lKHRoaXMsYSksdGhpcy5fc2V0QXR0cihtLGEpLHRoaXN9LHNldEF0dHI6ZnVuY3Rpb24oKXt2YXIgYT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLGI9YVswXSxjPWFbMV0sZD1uK0tpbmV0aWMuVXRpbC5fY2FwaXRhbGl6ZShiKSxlPXRoaXNbZF07cmV0dXJuIEtpbmV0aWMuVXRpbC5faXNGdW5jdGlvbihlKT9lLmNhbGwodGhpcyxjKTp0aGlzLl9zZXRBdHRyKGIsYyksdGhpc30sX3NldEF0dHI6ZnVuY3Rpb24oYSxiKXt2YXIgYzt2b2lkIDAhPT1iJiYoYz10aGlzLmF0dHJzW2FdLHRoaXMuYXR0cnNbYV09Yix0aGlzLl9maXJlQ2hhbmdlRXZlbnQoYSxjLGIpKX0sX3NldENvbXBvbmVudEF0dHI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3ZvaWQgMCE9PWMmJihkPXRoaXMuYXR0cnNbYV0sZHx8KHRoaXMuYXR0cnNbYV09dGhpcy5nZXRBdHRyKGEpKSx0aGlzLmF0dHJzW2FdW2JdPWMsdGhpcy5fZmlyZUNoYW5nZUV2ZW50KGEsZCxjKSl9LF9maXJlQW5kQnViYmxlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD0hMDtiJiZ0aGlzLm5vZGVUeXBlPT09byYmKGIudGFyZ2V0PXRoaXMpLGE9PT1rJiZjJiZ0aGlzLl9pZD09PWMuX2lkP2Q9ITE6YT09PWwmJmMmJnRoaXMuX2lkPT09Yy5faWQmJihkPSExKSxkJiYodGhpcy5fZmlyZShhLGIpLGImJiFiLmNhbmNlbEJ1YmJsZSYmdGhpcy5wYXJlbnQmJihjJiZjLnBhcmVudD90aGlzLl9maXJlQW5kQnViYmxlLmNhbGwodGhpcy5wYXJlbnQsYSxiLGMucGFyZW50KTp0aGlzLl9maXJlQW5kQnViYmxlLmNhbGwodGhpcy5wYXJlbnQsYSxiKSkpfSxfZmlyZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9dGhpcy5ldmVudExpc3RlbmVyc1thXTtpZihiLnR5cGU9YSxkKWZvcihjPTA7YzxkLmxlbmd0aDtjKyspZFtjXS5oYW5kbGVyLmNhbGwodGhpcyxiKX0sZHJhdzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRyYXdTY2VuZSgpLHRoaXMuZHJhd0hpdCgpLHRoaXN9fSksS2luZXRpYy5Ob2RlLmNyZWF0ZT1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLl9jcmVhdGVOb2RlKEpTT04ucGFyc2UoYSksYil9LEtpbmV0aWMuTm9kZS5fY3JlYXRlTm9kZT1mdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPUtpbmV0aWMuTm9kZS5wcm90b3R5cGUuZ2V0Q2xhc3NOYW1lLmNhbGwoYSksZz1hLmNoaWxkcmVuO2lmKGImJihhLmF0dHJzLmNvbnRhaW5lcj1iKSxjPW5ldyBLaW5ldGljW2ZdKGEuYXR0cnMpLGcpZm9yKGQ9Zy5sZW5ndGgsZT0wO2Q+ZTtlKyspYy5hZGQodGhpcy5fY3JlYXRlTm9kZShnW2VdKSk7cmV0dXJuIGN9LEtpbmV0aWMuRmFjdG9yeS5hZGRPdmVybG9hZGVkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcInBvc2l0aW9uXCIpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwieFwiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwieVwiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwib3BhY2l0eVwiLDEpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXIoS2luZXRpYy5Ob2RlLFwibmFtZVwiKSxLaW5ldGljLkZhY3RvcnkuYWRkT3ZlcmxvYWRlZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJuYW1lXCIpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXIoS2luZXRpYy5Ob2RlLFwiaWRcIiksS2luZXRpYy5GYWN0b3J5LmFkZE92ZXJsb2FkZWRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwiaWRcIiksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJyb3RhdGlvblwiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRDb21wb25lbnRzR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcInNjYWxlXCIsW1wieFwiLFwieVwiXSksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJzY2FsZVhcIiwxKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcInNjYWxlWVwiLDEpLEtpbmV0aWMuRmFjdG9yeS5hZGRDb21wb25lbnRzR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcInNrZXdcIixbXCJ4XCIsXCJ5XCJdKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcInNrZXdYXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJza2V3WVwiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRDb21wb25lbnRzR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcIm9mZnNldFwiLFtcInhcIixcInlcIl0pLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwib2Zmc2V0WFwiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwib2Zmc2V0WVwiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRTZXR0ZXIoS2luZXRpYy5Ob2RlLFwiZHJhZ0Rpc3RhbmNlXCIpLEtpbmV0aWMuRmFjdG9yeS5hZGRPdmVybG9hZGVkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcImRyYWdEaXN0YW5jZVwiKSxLaW5ldGljLkZhY3RvcnkuYWRkU2V0dGVyKEtpbmV0aWMuTm9kZSxcIndpZHRoXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZE92ZXJsb2FkZWRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwid2lkdGhcIiksS2luZXRpYy5GYWN0b3J5LmFkZFNldHRlcihLaW5ldGljLk5vZGUsXCJoZWlnaHRcIiwwKSxLaW5ldGljLkZhY3RvcnkuYWRkT3ZlcmxvYWRlZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJoZWlnaHRcIiksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJsaXN0ZW5pbmdcIixcImluaGVyaXRcIiksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJmaWx0ZXJzXCIsdm9pZCAwLGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9maWx0ZXJVcFRvRGF0ZT0hMSxhfSksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJ2aXNpYmxlXCIsXCJpbmhlcml0XCIpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwidHJhbnNmb3Jtc0VuYWJsZWRcIixcImFsbFwiKSxLaW5ldGljLkZhY3RvcnkuYWRkT3ZlcmxvYWRlZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJzaXplXCIpLEtpbmV0aWMuRmFjdG9yeS5iYWNrQ29tcGF0KEtpbmV0aWMuTm9kZSx7cm90YXRlRGVnOlwicm90YXRlXCIsc2V0Um90YXRpb25EZWc6XCJzZXRSb3RhdGlvblwiLGdldFJvdGF0aW9uRGVnOlwiZ2V0Um90YXRpb25cIn0pLEtpbmV0aWMuQ29sbGVjdGlvbi5tYXBNZXRob2RzKEtpbmV0aWMuTm9kZSl9KCksZnVuY3Rpb24oKXtLaW5ldGljLkZpbHRlcnMuR3JheXNjYWxlPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZD1hLmRhdGEsZT1kLmxlbmd0aDtmb3IoYj0wO2U+YjtiKz00KWM9LjM0KmRbYl0rLjUqZFtiKzFdKy4xNipkW2IrMl0sZFtiXT1jLGRbYisxXT1jLGRbYisyXT1jfX0oKSxmdW5jdGlvbigpe0tpbmV0aWMuRmlsdGVycy5CcmlnaHRlbj1mdW5jdGlvbihhKXt2YXIgYixjPTI1NSp0aGlzLmJyaWdodG5lc3MoKSxkPWEuZGF0YSxlPWQubGVuZ3RoO2ZvcihiPTA7ZT5iO2IrPTQpZFtiXSs9YyxkW2IrMV0rPWMsZFtiKzJdKz1jfSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcImJyaWdodG5lc3NcIiwwLG51bGwsS2luZXRpYy5GYWN0b3J5LmFmdGVyU2V0RmlsdGVyKX0oKSxmdW5jdGlvbigpe0tpbmV0aWMuRmlsdGVycy5JbnZlcnQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz1hLmRhdGEsZD1jLmxlbmd0aDtmb3IoYj0wO2Q+YjtiKz00KWNbYl09MjU1LWNbYl0sY1tiKzFdPTI1NS1jW2IrMV0sY1tiKzJdPTI1NS1jW2IrMl19fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3RoaXMucj0wLHRoaXMuZz0wLHRoaXMuYj0wLHRoaXMuYT0wLHRoaXMubmV4dD1udWxsfWZ1bmN0aW9uIGIoYixlKXt2YXIgZixnLGgsaSxqLGssbCxtLG4sbyxwLHEscixzLHQsdSx2LHcseCx5LHosQSxCLEMsRD1iLmRhdGEsRT1iLndpZHRoLEY9Yi5oZWlnaHQsRz1lK2UrMSxIPUUtMSxJPUYtMSxKPWUrMSxLPUoqKEorMSkvMixMPW5ldyBhLE09bnVsbCxOPUwsTz1udWxsLFA9bnVsbCxRPWNbZV0sUj1kW2VdO2ZvcihoPTE7Rz5oO2grKylOPU4ubmV4dD1uZXcgYSxoPT1KJiYoTT1OKTtmb3IoTi5uZXh0PUwsbD1rPTAsZz0wO0Y+ZztnKyspe2Zvcih1PXY9dz14PW09bj1vPXA9MCxxPUoqKHk9RFtrXSkscj1KKih6PURbaysxXSkscz1KKihBPURbaysyXSksdD1KKihCPURbayszXSksbSs9Syp5LG4rPUsqeixvKz1LKkEscCs9SypCLE49TCxoPTA7Sj5oO2grKylOLnI9eSxOLmc9eixOLmI9QSxOLmE9QixOPU4ubmV4dDtmb3IoaD0xO0o+aDtoKyspaT1rKygoaD5IP0g6aCk8PDIpLG0rPShOLnI9eT1EW2ldKSooQz1KLWgpLG4rPShOLmc9ej1EW2krMV0pKkMsbys9KE4uYj1BPURbaSsyXSkqQyxwKz0oTi5hPUI9RFtpKzNdKSpDLHUrPXksdis9eix3Kz1BLHgrPUIsTj1OLm5leHQ7Zm9yKE89TCxQPU0sZj0wO0U+ZjtmKyspRFtrKzNdPUI9cCpRPj5SLDAhPT1CPyhCPTI1NS9CLERba109KG0qUT4+UikqQixEW2srMV09KG4qUT4+UikqQixEW2srMl09KG8qUT4+UikqQik6RFtrXT1EW2srMV09RFtrKzJdPTAsbS09cSxuLT1yLG8tPXMscC09dCxxLT1PLnIsci09Ty5nLHMtPU8uYix0LT1PLmEsaT1sKygoaT1mK2UrMSk8SD9pOkgpPDwyLHUrPU8ucj1EW2ldLHYrPU8uZz1EW2krMV0sdys9Ty5iPURbaSsyXSx4Kz1PLmE9RFtpKzNdLG0rPXUsbis9dixvKz13LHArPXgsTz1PLm5leHQscSs9eT1QLnIscis9ej1QLmcscys9QT1QLmIsdCs9Qj1QLmEsdS09eSx2LT16LHctPUEseC09QixQPVAubmV4dCxrKz00O2wrPUV9Zm9yKGY9MDtFPmY7ZisrKXtmb3Iodj13PXg9dT1uPW89cD1tPTAsaz1mPDwyLHE9SiooeT1EW2tdKSxyPUoqKHo9RFtrKzFdKSxzPUoqKEE9RFtrKzJdKSx0PUoqKEI9RFtrKzNdKSxtKz1LKnksbis9Syp6LG8rPUsqQSxwKz1LKkIsTj1MLGg9MDtKPmg7aCsrKU4ucj15LE4uZz16LE4uYj1BLE4uYT1CLE49Ti5uZXh0O2ZvcihqPUUsaD0xO2U+PWg7aCsrKWs9aitmPDwyLG0rPShOLnI9eT1EW2tdKSooQz1KLWgpLG4rPShOLmc9ej1EW2srMV0pKkMsbys9KE4uYj1BPURbaysyXSkqQyxwKz0oTi5hPUI9RFtrKzNdKSpDLHUrPXksdis9eix3Kz1BLHgrPUIsTj1OLm5leHQsST5oJiYoais9RSk7Zm9yKGs9ZixPPUwsUD1NLGc9MDtGPmc7ZysrKWk9azw8MixEW2krM109Qj1wKlE+PlIsQj4wPyhCPTI1NS9CLERbaV09KG0qUT4+UikqQixEW2krMV09KG4qUT4+UikqQixEW2krMl09KG8qUT4+UikqQik6RFtpXT1EW2krMV09RFtpKzJdPTAsbS09cSxuLT1yLG8tPXMscC09dCxxLT1PLnIsci09Ty5nLHMtPU8uYix0LT1PLmEsaT1mKygoaT1nK0opPEk/aTpJKSpFPDwyLG0rPXUrPU8ucj1EW2ldLG4rPXYrPU8uZz1EW2krMV0sbys9dys9Ty5iPURbaSsyXSxwKz14Kz1PLmE9RFtpKzNdLE89Ty5uZXh0LHErPXk9UC5yLHIrPXo9UC5nLHMrPUE9UC5iLHQrPUI9UC5hLHUtPXksdi09eix3LT1BLHgtPUIsUD1QLm5leHQsays9RX19dmFyIGM9WzUxMiw1MTIsNDU2LDUxMiwzMjgsNDU2LDMzNSw1MTIsNDA1LDMyOCwyNzEsNDU2LDM4OCwzMzUsMjkyLDUxMiw0NTQsNDA1LDM2NCwzMjgsMjk4LDI3MSw0OTYsNDU2LDQyMCwzODgsMzYwLDMzNSwzMTIsMjkyLDI3Myw1MTIsNDgyLDQ1NCw0MjgsNDA1LDM4MywzNjQsMzQ1LDMyOCwzMTIsMjk4LDI4NCwyNzEsMjU5LDQ5Niw0NzUsNDU2LDQzNyw0MjAsNDA0LDM4OCwzNzQsMzYwLDM0NywzMzUsMzIzLDMxMiwzMDIsMjkyLDI4MiwyNzMsMjY1LDUxMiw0OTcsNDgyLDQ2OCw0NTQsNDQxLDQyOCw0MTcsNDA1LDM5NCwzODMsMzczLDM2NCwzNTQsMzQ1LDMzNywzMjgsMzIwLDMxMiwzMDUsMjk4LDI5MSwyODQsMjc4LDI3MSwyNjUsMjU5LDUwNyw0OTYsNDg1LDQ3NSw0NjUsNDU2LDQ0Niw0MzcsNDI4LDQyMCw0MTIsNDA0LDM5NiwzODgsMzgxLDM3NCwzNjcsMzYwLDM1NCwzNDcsMzQxLDMzNSwzMjksMzIzLDMxOCwzMTIsMzA3LDMwMiwyOTcsMjkyLDI4NywyODIsMjc4LDI3MywyNjksMjY1LDI2MSw1MTIsNTA1LDQ5Nyw0ODksNDgyLDQ3NSw0NjgsNDYxLDQ1NCw0NDcsNDQxLDQzNSw0MjgsNDIyLDQxNyw0MTEsNDA1LDM5OSwzOTQsMzg5LDM4MywzNzgsMzczLDM2OCwzNjQsMzU5LDM1NCwzNTAsMzQ1LDM0MSwzMzcsMzMyLDMyOCwzMjQsMzIwLDMxNiwzMTIsMzA5LDMwNSwzMDEsMjk4LDI5NCwyOTEsMjg3LDI4NCwyODEsMjc4LDI3NCwyNzEsMjY4LDI2NSwyNjIsMjU5LDI1Nyw1MDcsNTAxLDQ5Niw0OTEsNDg1LDQ4MCw0NzUsNDcwLDQ2NSw0NjAsNDU2LDQ1MSw0NDYsNDQyLDQzNyw0MzMsNDI4LDQyNCw0MjAsNDE2LDQxMiw0MDgsNDA0LDQwMCwzOTYsMzkyLDM4OCwzODUsMzgxLDM3NywzNzQsMzcwLDM2NywzNjMsMzYwLDM1NywzNTQsMzUwLDM0NywzNDQsMzQxLDMzOCwzMzUsMzMyLDMyOSwzMjYsMzIzLDMyMCwzMTgsMzE1LDMxMiwzMTAsMzA3LDMwNCwzMDIsMjk5LDI5NywyOTQsMjkyLDI4OSwyODcsMjg1LDI4MiwyODAsMjc4LDI3NSwyNzMsMjcxLDI2OSwyNjcsMjY1LDI2MywyNjEsMjU5XSxkPVs5LDExLDEyLDEzLDEzLDE0LDE0LDE1LDE1LDE1LDE1LDE2LDE2LDE2LDE2LDE3LDE3LDE3LDE3LDE3LDE3LDE3LDE4LDE4LDE4LDE4LDE4LDE4LDE4LDE4LDE4LDE5LDE5LDE5LDE5LDE5LDE5LDE5LDE5LDE5LDE5LDE5LDE5LDE5LDE5LDIwLDIwLDIwLDIwLDIwLDIwLDIwLDIwLDIwLDIwLDIwLDIwLDIwLDIwLDIwLDIwLDIwLDIwLDIxLDIxLDIxLDIxLDIxLDIxLDIxLDIxLDIxLDIxLDIxLDIxLDIxLDIxLDIxLDIxLDIxLDIxLDIxLDIxLDIxLDIxLDIxLDIxLDIxLDIxLDIxLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIyLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDIzLDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0LDI0XTtLaW5ldGljLkZpbHRlcnMuQmx1cj1mdW5jdGlvbihhKXt2YXIgYz1NYXRoLnJvdW5kKHRoaXMuYmx1clJhZGl1cygpKTtjPjAmJmIoYSxjKX0sS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJibHVyUmFkaXVzXCIsMCxudWxsLEtpbmV0aWMuRmFjdG9yeS5hZnRlclNldEZpbHRlcil9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYixjKXt2YXIgZD00KihjKmEud2lkdGgrYiksZT1bXTtyZXR1cm4gZS5wdXNoKGEuZGF0YVtkKytdLGEuZGF0YVtkKytdLGEuZGF0YVtkKytdLGEuZGF0YVtkKytdKSxlfWZ1bmN0aW9uIGIoYSxiKXtyZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KGFbMF0tYlswXSwyKStNYXRoLnBvdyhhWzFdLWJbMV0sMikrTWF0aC5wb3coYVsyXS1iWzJdLDIpKX1mdW5jdGlvbiBjKGEpe2Zvcih2YXIgYj1bMCwwLDBdLGM9MDtjPGEubGVuZ3RoO2MrKyliWzBdKz1hW2NdWzBdLGJbMV0rPWFbY11bMV0sYlsyXSs9YVtjXVsyXTtyZXR1cm4gYlswXS89YS5sZW5ndGgsYlsxXS89YS5sZW5ndGgsYlsyXS89YS5sZW5ndGgsYn1mdW5jdGlvbiBkKGQsZSl7dmFyIGY9YShkLDAsMCksZz1hKGQsZC53aWR0aC0xLDApLGg9YShkLDAsZC5oZWlnaHQtMSksaT1hKGQsZC53aWR0aC0xLGQuaGVpZ2h0LTEpLGo9ZXx8MTA7aWYoYihmLGcpPGomJmIoZyxpKTxqJiZiKGksaCk8aiYmYihoLGYpPGope2Zvcih2YXIgaz1jKFtnLGYsaSxoXSksbD1bXSxtPTA7bTxkLndpZHRoKmQuaGVpZ2h0O20rKyl7dmFyIG49YihrLFtkLmRhdGFbNCptXSxkLmRhdGFbNCptKzFdLGQuZGF0YVs0Km0rMl1dKTtsW21dPWo+bj8wOjI1NX1yZXR1cm4gbH19ZnVuY3Rpb24gZShhLGIpe2Zvcih2YXIgYz0wO2M8YS53aWR0aCphLmhlaWdodDtjKyspYS5kYXRhWzQqYyszXT1iW2NdfWZ1bmN0aW9uIGYoYSxiLGMpe2Zvcih2YXIgZD1bMSwxLDEsMSwwLDEsMSwxLDFdLGU9TWF0aC5yb3VuZChNYXRoLnNxcnQoZC5sZW5ndGgpKSxmPU1hdGguZmxvb3IoZS8yKSxnPVtdLGg9MDtjPmg7aCsrKWZvcih2YXIgaT0wO2I+aTtpKyspe2Zvcih2YXIgaj1oKmIraSxrPTAsbD0wO2U+bDtsKyspZm9yKHZhciBtPTA7ZT5tO20rKyl7dmFyIG49aCtsLWYsbz1pK20tZjtpZihuPj0wJiZjPm4mJm8+PTAmJmI+byl7dmFyIHA9bipiK28scT1kW2wqZSttXTtrKz1hW3BdKnF9fWdbal09MjA0MD09PWs/MjU1OjB9cmV0dXJuIGd9ZnVuY3Rpb24gZyhhLGIsYyl7Zm9yKHZhciBkPVsxLDEsMSwxLDEsMSwxLDEsMV0sZT1NYXRoLnJvdW5kKE1hdGguc3FydChkLmxlbmd0aCkpLGY9TWF0aC5mbG9vcihlLzIpLGc9W10saD0wO2M+aDtoKyspZm9yKHZhciBpPTA7Yj5pO2krKyl7Zm9yKHZhciBqPWgqYitpLGs9MCxsPTA7ZT5sO2wrKylmb3IodmFyIG09MDtlPm07bSsrKXt2YXIgbj1oK2wtZixvPWkrbS1mO2lmKG4+PTAmJmM+biYmbz49MCYmYj5vKXt2YXIgcD1uKmIrbyxxPWRbbCplK21dO2srPWFbcF0qcX19Z1tqXT1rPj0xMDIwPzI1NTowfXJldHVybiBnfWZ1bmN0aW9uIGgoYSxiLGMpe2Zvcih2YXIgZD1bMS85LDEvOSwxLzksMS85LDEvOSwxLzksMS85LDEvOSwxLzldLGU9TWF0aC5yb3VuZChNYXRoLnNxcnQoZC5sZW5ndGgpKSxmPU1hdGguZmxvb3IoZS8yKSxnPVtdLGg9MDtjPmg7aCsrKWZvcih2YXIgaT0wO2I+aTtpKyspe2Zvcih2YXIgaj1oKmIraSxrPTAsbD0wO2U+bDtsKyspZm9yKHZhciBtPTA7ZT5tO20rKyl7dmFyIG49aCtsLWYsbz1pK20tZjtpZihuPj0wJiZjPm4mJm8+PTAmJmI+byl7dmFyIHA9bipiK28scT1kW2wqZSttXTtrKz1hW3BdKnF9fWdbal09a31yZXR1cm4gZ31LaW5ldGljLkZpbHRlcnMuTWFzaz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLnRocmVzaG9sZCgpLGM9ZChhLGIpO3JldHVybiBjJiYoYz1mKGMsYS53aWR0aCxhLmhlaWdodCksYz1nKGMsYS53aWR0aCxhLmhlaWdodCksYz1oKGMsYS53aWR0aCxhLmhlaWdodCksZShhLGMpKSxhfSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcInRocmVzaG9sZFwiLDAsbnVsbCxLaW5ldGljLkZhY3RvcnkuYWZ0ZXJTZXRGaWx0ZXIpfSgpLGZ1bmN0aW9uKCl7S2luZXRpYy5GaWx0ZXJzLlJHQj1mdW5jdGlvbihhKXt2YXIgYixjLGQ9YS5kYXRhLGU9ZC5sZW5ndGgsZj10aGlzLnJlZCgpLGc9dGhpcy5ncmVlbigpLGg9dGhpcy5ibHVlKCk7Zm9yKGI9MDtlPmI7Yis9NCljPSguMzQqZFtiXSsuNSpkW2IrMV0rLjE2KmRbYisyXSkvMjU1LGRbYl09YypmLGRbYisxXT1jKmcsZFtiKzJdPWMqaCxkW2IrM109ZFtiKzNdfSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcInJlZFwiLDAsZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX2ZpbHRlclVwVG9EYXRlPSExLGE+MjU1PzI1NTowPmE/MDpNYXRoLnJvdW5kKGEpfSksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJncmVlblwiLDAsZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX2ZpbHRlclVwVG9EYXRlPSExLGE+MjU1PzI1NTowPmE/MDpNYXRoLnJvdW5kKGEpfSksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJibHVlXCIsMCxLaW5ldGljLlZhbGlkYXRvcnMuUkdCQ29tcG9uZW50LEtpbmV0aWMuRmFjdG9yeS5hZnRlclNldEZpbHRlcil9KCksZnVuY3Rpb24oKXtLaW5ldGljLkZpbHRlcnMuSFNWPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZz1hLmRhdGEsaD1nLmxlbmd0aCxpPU1hdGgucG93KDIsdGhpcy52YWx1ZSgpKSxqPU1hdGgucG93KDIsdGhpcy5zYXR1cmF0aW9uKCkpLGs9TWF0aC5hYnModGhpcy5odWUoKSszNjApJTM2MCxsPWkqaipNYXRoLmNvcyhrKk1hdGguUEkvMTgwKSxtPWkqaipNYXRoLnNpbihrKk1hdGguUEkvMTgwKSxuPS4yOTkqaSsuNzAxKmwrLjE2NyptLG89LjU4NyppLS41ODcqbCsuMzMqbSxwPS4xMTQqaS0uMTE0KmwtLjQ5NyptLHE9LjI5OSppLS4yOTkqbC0uMzI4Km0scj0uNTg3KmkrLjQxMypsKy4wMzUqbSxzPS4xMTQqaS0uMTE0KmwrLjI5MyptLHQ9LjI5OSppLS4zKmwrMS4yNSptLHU9LjU4NyppLS41ODYqbC0xLjA1Km0sdj0uMTE0KmkrLjg4NipsLS4yKm07Zm9yKGI9MDtoPmI7Yis9NCljPWdbYiswXSxkPWdbYisxXSxlPWdbYisyXSxmPWdbYiszXSxnW2IrMF09bipjK28qZCtwKmUsZ1tiKzFdPXEqYytyKmQrcyplLGdbYisyXT10KmMrdSpkK3YqZSxnW2IrM109Zn0sS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJodWVcIiwwLG51bGwsS2luZXRpYy5GYWN0b3J5LmFmdGVyU2V0RmlsdGVyKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcInNhdHVyYXRpb25cIiwwLG51bGwsS2luZXRpYy5GYWN0b3J5LmFmdGVyU2V0RmlsdGVyKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcInZhbHVlXCIsMCxudWxsLEtpbmV0aWMuRmFjdG9yeS5hZnRlclNldEZpbHRlcil9KCksZnVuY3Rpb24oKXtLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcImh1ZVwiLDAsbnVsbCxLaW5ldGljLkZhY3RvcnkuYWZ0ZXJTZXRGaWx0ZXIpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwic2F0dXJhdGlvblwiLDAsbnVsbCxLaW5ldGljLkZhY3RvcnkuYWZ0ZXJTZXRGaWx0ZXIpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwibHVtaW5hbmNlXCIsMCxudWxsLEtpbmV0aWMuRmFjdG9yeS5hZnRlclNldEZpbHRlciksS2luZXRpYy5GaWx0ZXJzLkhTTD1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGc9YS5kYXRhLGg9Zy5sZW5ndGgsaT0xLGo9TWF0aC5wb3coMix0aGlzLnNhdHVyYXRpb24oKSksaz1NYXRoLmFicyh0aGlzLmh1ZSgpKzM2MCklMzYwLGw9MTI3KnRoaXMubHVtaW5hbmNlKCksbT1pKmoqTWF0aC5jb3MoaypNYXRoLlBJLzE4MCksbj1pKmoqTWF0aC5zaW4oaypNYXRoLlBJLzE4MCksbz0uMjk5KmkrLjcwMSptKy4xNjcqbixwPS41ODcqaS0uNTg3Km0rLjMzKm4scT0uMTE0KmktLjExNCptLS40OTcqbixyPS4yOTkqaS0uMjk5Km0tLjMyOCpuLHM9LjU4NyppKy40MTMqbSsuMDM1Km4sdD0uMTE0KmktLjExNCptKy4yOTMqbix1PS4yOTkqaS0uMyptKzEuMjUqbix2PS41ODcqaS0uNTg2Km0tMS4wNSpuLHc9LjExNCppKy44ODYqbS0uMipuO2ZvcihiPTA7aD5iO2IrPTQpYz1nW2IrMF0sZD1nW2IrMV0sZT1nW2IrMl0sZj1nW2IrM10sZ1tiKzBdPW8qYytwKmQrcSplK2wsZ1tiKzFdPXIqYytzKmQrdCplK2wsZ1tiKzJdPXUqYyt2KmQrdyplK2wsZ1tiKzNdPWZ9fSgpLGZ1bmN0aW9uKCl7S2luZXRpYy5GaWx0ZXJzLkVtYm9zcz1mdW5jdGlvbihhKXt2YXIgYj0xMCp0aGlzLmVtYm9zc1N0cmVuZ3RoKCksYz0yNTUqdGhpcy5lbWJvc3NXaGl0ZUxldmVsKCksZD10aGlzLmVtYm9zc0RpcmVjdGlvbigpLGU9dGhpcy5lbWJvc3NCbGVuZCgpLGY9MCxnPTAsaD1hLmRhdGEsaT1hLndpZHRoLGo9YS5oZWlnaHQsaz00KmksbD1qO3N3aXRjaChkKXtjYXNlXCJ0b3AtbGVmdFwiOmY9LTEsZz0tMTticmVhaztjYXNlXCJ0b3BcIjpmPS0xLGc9MDticmVhaztjYXNlXCJ0b3AtcmlnaHRcIjpmPS0xLGc9MTticmVhaztjYXNlXCJyaWdodFwiOmY9MCxnPTE7YnJlYWs7Y2FzZVwiYm90dG9tLXJpZ2h0XCI6Zj0xLGc9MTticmVhaztjYXNlXCJib3R0b21cIjpmPTEsZz0wO2JyZWFrO2Nhc2VcImJvdHRvbS1sZWZ0XCI6Zj0xLGc9LTE7YnJlYWs7Y2FzZVwibGVmdFwiOmY9MCxnPS0xfWRve3ZhciBtPShsLTEpKmssbj1mOzE+bCtuJiYobj0wKSxsK24+aiYmKG49MCk7dmFyIG89KGwtMStuKSppKjQscD1pO2Rve3ZhciBxPW0rNCoocC0xKSxyPWc7MT5wK3ImJihyPTApLHArcj5pJiYocj0wKTt2YXIgcz1vKzQqKHAtMStyKSx0PWhbcV0taFtzXSx1PWhbcSsxXS1oW3MrMV0sdj1oW3ErMl0taFtzKzJdLHc9dCx4PXc+MD93Oi13LHk9dT4wP3U6LXUsej12PjA/djotdjtpZih5PngmJih3PXUpLHo+eCYmKHc9diksdyo9YixlKXt2YXIgQT1oW3FdK3csQj1oW3ErMV0rdyxDPWhbcSsyXSt3O2hbcV09QT4yNTU/MjU1OjA+QT8wOkEsaFtxKzFdPUI+MjU1PzI1NTowPkI/MDpCLGhbcSsyXT1DPjI1NT8yNTU6MD5DPzA6Q31lbHNle3ZhciBEPWMtdzswPkQ/RD0wOkQ+MjU1JiYoRD0yNTUpLGhbcV09aFtxKzFdPWhbcSsyXT1EfX13aGlsZSgtLXApfXdoaWxlKC0tbCl9LEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwiZW1ib3NzU3RyZW5ndGhcIiwuNSxudWxsLEtpbmV0aWMuRmFjdG9yeS5hZnRlclNldEZpbHRlciksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJlbWJvc3NXaGl0ZUxldmVsXCIsLjUsbnVsbCxLaW5ldGljLkZhY3RvcnkuYWZ0ZXJTZXRGaWx0ZXIpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwiZW1ib3NzRGlyZWN0aW9uXCIsXCJ0b3AtbGVmdFwiLG51bGwsS2luZXRpYy5GYWN0b3J5LmFmdGVyU2V0RmlsdGVyKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcImVtYm9zc0JsZW5kXCIsITEsbnVsbCxLaW5ldGljLkZhY3RvcnkuYWZ0ZXJTZXRGaWx0ZXIpfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIsYyxkLGUpe3ZhciBmLGc9Yy1iLGg9ZS1kO3JldHVybiAwPT09Zz9kK2gvMjowPT09aD9kOihmPShhLWIpL2csZj1oKmYrZCl9S2luZXRpYy5GaWx0ZXJzLkVuaGFuY2U9ZnVuY3Rpb24oYil7dmFyIGMsZCxlLGYsZz1iLmRhdGEsaD1nLmxlbmd0aCxpPWdbMF0saj1pLGs9Z1sxXSxsPWssbT1nWzJdLG49bSxvPWdbM10scD1vLHE9dGhpcy5lbmhhbmNlKCk7aWYoMCE9PXEpe2ZvcihmPTA7aD5mO2YrPTQpYz1nW2YrMF0saT5jP2k9YzpjPmomJihqPWMpLGQ9Z1tmKzFdLGs+ZD9rPWQ6ZD5sJiYobD1kKSxlPWdbZisyXSxtPmU/bT1lOmU+biYmKG49ZSk7aj09PWkmJihqPTI1NSxpPTApLGw9PT1rJiYobD0yNTUsaz0wKSxuPT09bSYmKG49MjU1LG09MCkscD09PW8mJihwPTI1NSxvPTApO3ZhciByLHMsdCx1LHYsdyx4LHkseixBLEIsQztmb3IocT4wPyhzPWorcSooMjU1LWopLHQ9aS1xKihpLTApLHY9bCtxKigyNTUtbCksdz1rLXEqKGstMCkseT1uK3EqKDI1NS1uKSxDPW0tcSoobS0wKSxCPXArcSooMjU1LXApLHo9by1xKihvLTApKToocj0uNSooaitpKSxzPWorcSooai1yKSx0PWkrcSooaS1yKSx1PS41KihsK2spLHY9bCtxKihsLXUpLHc9aytxKihrLXUpLHg9LjUqKG4rbSkseT1uK3EqKG4teCksQz1tK3EqKG0teCksQT0uNSoocCtvKSxCPXArcSoocC1BKSx6PW8rcSooby1BKSksZj0wO2g+ZjtmKz00KWdbZiswXT1hKGdbZiswXSxpLGosdCxzKSxnW2YrMV09YShnW2YrMV0sayxsLHcsdiksZ1tmKzJdPWEoZ1tmKzJdLG0sbixDLHkpfX0sS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJlbmhhbmNlXCIsMCxudWxsLEtpbmV0aWMuRmFjdG9yeS5hZnRlclNldEZpbHRlcil9KCksZnVuY3Rpb24oKXtLaW5ldGljLkZpbHRlcnMuUG9zdGVyaXplPWZ1bmN0aW9uKGEpe3ZhciBiLGM9TWF0aC5yb3VuZCgyNTQqdGhpcy5sZXZlbHMoKSkrMSxkPWEuZGF0YSxlPWQubGVuZ3RoLGY9MjU1L2M7Zm9yKGI9MDtlPmI7Yis9MSlkW2JdPU1hdGguZmxvb3IoZFtiXS9mKSpmfSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcImxldmVsc1wiLC41LG51bGwsS2luZXRpYy5GYWN0b3J5LmFmdGVyU2V0RmlsdGVyKX0oKSxmdW5jdGlvbigpe0tpbmV0aWMuRmlsdGVycy5Ob2lzZT1mdW5jdGlvbihhKXt2YXIgYixjPTI1NSp0aGlzLm5vaXNlKCksZD1hLmRhdGEsZT1kLmxlbmd0aCxmPWMvMjtmb3IoYj0wO2U+YjtiKz00KWRbYiswXSs9Zi0yKmYqTWF0aC5yYW5kb20oKSxkW2IrMV0rPWYtMipmKk1hdGgucmFuZG9tKCksZFtiKzJdKz1mLTIqZipNYXRoLnJhbmRvbSgpfSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcIm5vaXNlXCIsLjIsbnVsbCxLaW5ldGljLkZhY3RvcnkuYWZ0ZXJTZXRGaWx0ZXIpfSgpLGZ1bmN0aW9uKCl7S2luZXRpYy5GaWx0ZXJzLlBpeGVsYXRlPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGksaixrLGwsbSxuLG8scD1NYXRoLmNlaWwodGhpcy5waXhlbFNpemUoKSkscT1hLndpZHRoLHI9YS5oZWlnaHQscz1NYXRoLmNlaWwocS9wKSx0PU1hdGguY2VpbChyL3ApO2ZvcihhPWEuZGF0YSxtPTA7cz5tO20rPTEpZm9yKG49MDt0Pm47bis9MSl7Zm9yKGU9MCxmPTAsZz0wLGg9MCxpPW0qcCxqPWkrcCxrPW4qcCxsPWsrcCxvPTAsYj1pO2o+YjtiKz0xKWlmKCEoYj49cSkpZm9yKGM9aztsPmM7Yys9MSljPj1yfHwoZD00KihxKmMrYiksZSs9YVtkKzBdLGYrPWFbZCsxXSxnKz1hW2QrMl0saCs9YVtkKzNdLG8rPTEpO2ZvcihlLz1vLGYvPW8sZy89byxiPWk7aj5iO2IrPTEpaWYoIShiPj1xKSlmb3IoYz1rO2w+YztjKz0xKWM+PXJ8fChkPTQqKHEqYytiKSxhW2QrMF09ZSxhW2QrMV09ZixhW2QrMl09ZyxhW2QrM109aCl9fSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcInBpeGVsU2l6ZVwiLDgsbnVsbCxLaW5ldGljLkZhY3RvcnkuYWZ0ZXJTZXRGaWx0ZXIpfSgpLGZ1bmN0aW9uKCl7S2luZXRpYy5GaWx0ZXJzLlRocmVzaG9sZD1mdW5jdGlvbihhKXt2YXIgYixjPTI1NSp0aGlzLnRocmVzaG9sZCgpLGQ9YS5kYXRhLGU9ZC5sZW5ndGg7Zm9yKGI9MDtlPmI7Yis9MSlkW2JdPWRbYl08Yz8wOjI1NX0sS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJ0aHJlc2hvbGRcIiwuNSxudWxsLEtpbmV0aWMuRmFjdG9yeS5hZnRlclNldEZpbHRlcil9KCksZnVuY3Rpb24oKXtLaW5ldGljLkZpbHRlcnMuU2VwaWE9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaSxqLGs9YS5kYXRhLGw9YS53aWR0aCxtPWEuaGVpZ2h0LG49NCpsO2Rve2I9KG0tMSkqbixjPWw7ZG8gZD1iKzQqKGMtMSksZT1rW2RdLGY9a1tkKzFdLGc9a1tkKzJdLGg9LjM5MyplKy43NjkqZisuMTg5KmcsaT0uMzQ5KmUrLjY4NipmKy4xNjgqZyxqPS4yNzIqZSsuNTM0KmYrLjEzMSpnLGtbZF09aD4yNTU/MjU1Omgsa1tkKzFdPWk+MjU1PzI1NTppLGtbZCsyXT1qPjI1NT8yNTU6aixrW2QrM109a1tkKzNdO3doaWxlKC0tYyl9d2hpbGUoLS1tKX19KCksZnVuY3Rpb24oKXtLaW5ldGljLkZpbHRlcnMuU29sYXJpemU9ZnVuY3Rpb24oYSl7dmFyIGI9YS5kYXRhLGM9YS53aWR0aCxkPWEuaGVpZ2h0LGU9NCpjLGY9ZDtkb3t2YXIgZz0oZi0xKSplLGg9Yztkb3t2YXIgaT1nKzQqKGgtMSksaj1iW2ldLGs9YltpKzFdLGw9YltpKzJdO2o+MTI3JiYoaj0yNTUtaiksaz4xMjcmJihrPTI1NS1rKSxsPjEyNyYmKGw9MjU1LWwpLGJbaV09aixiW2krMV09ayxiW2krMl09bH13aGlsZSgtLWgpfXdoaWxlKC0tZil9fSgpLGZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5kYXRhLGk9Yi5kYXRhLGo9YS53aWR0aCxrPWEuaGVpZ2h0LGw9Yy5wb2xhckNlbnRlclh8fGovMixtPWMucG9sYXJDZW50ZXJZfHxrLzIsbj0wLG89MCxwPTAscT0wLHI9TWF0aC5zcXJ0KGwqbCttKm0pO2U9ai1sLGY9ay1tLGc9TWF0aC5zcXJ0KGUqZStmKmYpLHI9Zz5yP2c6cjt2YXIgcyx0LHUsdix3PWsseD1qLHk9MzYwL3gqTWF0aC5QSS8xODA7Zm9yKHQ9MDt4PnQ7dCs9MSlmb3IodT1NYXRoLnNpbih0KnkpLHY9TWF0aC5jb3ModCp5KSxzPTA7dz5zO3MrPTEpZT1NYXRoLmZsb29yKGwrcipzL3cqdiksZj1NYXRoLmZsb29yKG0rcipzL3cqdSksZD00KihmKmorZSksbj1oW2QrMF0sbz1oW2QrMV0scD1oW2QrMl0scT1oW2QrM10sZD00Kih0K3MqaiksaVtkKzBdPW4saVtkKzFdPW8saVtkKzJdPXAsaVtkKzNdPXF9LGI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqPWEuZGF0YSxrPWIuZGF0YSxsPWEud2lkdGgsbT1hLmhlaWdodCxuPWMucG9sYXJDZW50ZXJYfHxsLzIsbz1jLnBvbGFyQ2VudGVyWXx8bS8yLHA9MCxxPTAscj0wLHM9MCx0PU1hdGguc3FydChuKm4rbypvKTtlPWwtbixmPW0tbyxpPU1hdGguc3FydChlKmUrZipmKSx0PWk+dD9pOnQ7dmFyIHUsdix3LHgseT1tLHo9bCxBPWMucG9sYXJSb3RhdGlvbnx8MDtmb3IoZT0wO2w+ZTtlKz0xKWZvcihmPTA7bT5mO2YrPTEpZz1lLW4saD1mLW8sdT1NYXRoLnNxcnQoZypnK2gqaCkqeS90LHY9KDE4MCpNYXRoLmF0YW4yKGgsZykvTWF0aC5QSSszNjArQSklMzYwLHY9dip6LzM2MCx3PU1hdGguZmxvb3IodikseD1NYXRoLmZsb29yKHUpLGQ9NCooeCpsK3cpLHA9altkKzBdLHE9altkKzFdLHI9altkKzJdLHM9altkKzNdLGQ9NCooZipsK2UpLGtbZCswXT1wLGtbZCsxXT1xLGtbZCsyXT1yLGtbZCszXT1zfSxjPUtpbmV0aWMuVXRpbC5jcmVhdGVDYW52YXNFbGVtZW50KCk7S2luZXRpYy5GaWx0ZXJzLkthbGVpZG9zY29wZT1mdW5jdGlvbihkKXt2YXIgZSxmLGcsaCxpLGosayxsLG0sbixvPWQud2lkdGgscD1kLmhlaWdodCxxPU1hdGgucm91bmQodGhpcy5rYWxlaWRvc2NvcGVQb3dlcigpKSxyPU1hdGgucm91bmQodGhpcy5rYWxlaWRvc2NvcGVBbmdsZSgpKSxzPU1hdGguZmxvb3IobyoociUzNjApLzM2MCk7aWYoISgxPnEpKXtjLndpZHRoPW8sYy5oZWlnaHQ9cDt2YXIgdD1jLmdldENvbnRleHQoXCIyZFwiKS5nZXRJbWFnZURhdGEoMCwwLG8scCk7YShkLHQse3BvbGFyQ2VudGVyWDpvLzIscG9sYXJDZW50ZXJZOnAvMn0pO2Zvcih2YXIgdT1vL01hdGgucG93KDIscSk7OD49dTspdT0yKnUscS09MTt1PU1hdGguY2VpbCh1KTt2YXIgdj11LHc9MCx4PXYseT0xO2ZvcihzK3U+byYmKHc9dix4PTAseT0tMSksZj0wO3A+ZjtmKz0xKWZvcihlPXc7ZSE9PXg7ZSs9eSlnPU1hdGgucm91bmQoZStzKSVvLG09NCoobypmK2cpLGk9dC5kYXRhW20rMF0saj10LmRhdGFbbSsxXSxrPXQuZGF0YVttKzJdLGw9dC5kYXRhW20rM10sbj00KihvKmYrZSksdC5kYXRhW24rMF09aSx0LmRhdGFbbisxXT1qLHQuZGF0YVtuKzJdPWssdC5kYXRhW24rM109bDtmb3IoZj0wO3A+ZjtmKz0xKWZvcih2PU1hdGguZmxvb3IodSksaD0wO3E+aDtoKz0xKXtmb3IoZT0wO3YrMT5lO2UrPTEpbT00KihvKmYrZSksaT10LmRhdGFbbSswXSxqPXQuZGF0YVttKzFdLGs9dC5kYXRhW20rMl0sbD10LmRhdGFbbSszXSxuPTQqKG8qZisyKnYtZS0xKSx0LmRhdGFbbiswXT1pLHQuZGF0YVtuKzFdPWosdC5kYXRhW24rMl09ayx0LmRhdGFbbiszXT1sO3YqPTJ9Yih0LGQse3BvbGFyUm90YXRpb246MH0pfX0sS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLk5vZGUsXCJrYWxlaWRvc2NvcGVQb3dlclwiLDIsbnVsbCxLaW5ldGljLkZhY3RvcnkuYWZ0ZXJTZXRGaWx0ZXIpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwia2FsZWlkb3Njb3BlQW5nbGVcIiwwLG51bGwsS2luZXRpYy5GYWN0b3J5LmFmdGVyU2V0RmlsdGVyKX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7S2luZXRpYy5yb290LnNldFRpbWVvdXQoYSwxZTMvNjApfWZ1bmN0aW9uIGIoKXtyZXR1cm4gZS5hcHBseShLaW5ldGljLnJvb3QsYXJndW1lbnRzKX12YXIgYz01MDAsZD1mdW5jdGlvbigpe3JldHVybiBLaW5ldGljLnJvb3QucGVyZm9ybWFuY2UmJktpbmV0aWMucm9vdC5wZXJmb3JtYW5jZS5ub3c/ZnVuY3Rpb24oKXtyZXR1cm4gS2luZXRpYy5yb290LnBlcmZvcm1hbmNlLm5vdygpfTpmdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfX0oKSxlPWZ1bmN0aW9uKCl7cmV0dXJuIEtpbmV0aWMucm9vdC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fEtpbmV0aWMucm9vdC53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fEtpbmV0aWMucm9vdC5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fEtpbmV0aWMucm9vdC5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxLaW5ldGljLnJvb3QubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGF9KCk7S2luZXRpYy5BbmltYXRpb249ZnVuY3Rpb24oYSxiKXt2YXIgYz1LaW5ldGljLkFuaW1hdGlvbjt0aGlzLmZ1bmM9YSx0aGlzLnNldExheWVycyhiKSx0aGlzLmlkPWMuYW5pbUlkQ291bnRlcisrLHRoaXMuZnJhbWU9e3RpbWU6MCx0aW1lRGlmZjowLGxhc3RUaW1lOmQoKX19LEtpbmV0aWMuQW5pbWF0aW9uLnByb3RvdHlwZT17c2V0TGF5ZXJzOmZ1bmN0aW9uKGEpe3ZhciBiPVtdO2I9YT9hLmxlbmd0aD4wP2E6W2FdOltdLHRoaXMubGF5ZXJzPWJ9LGdldExheWVyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxheWVyc30sYWRkTGF5ZXI6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPXRoaXMubGF5ZXJzO2lmKGQpe2ZvcihiPWQubGVuZ3RoLGM9MDtiPmM7YysrKWlmKGRbY10uX2lkPT09YS5faWQpcmV0dXJuITF9ZWxzZSB0aGlzLmxheWVycz1bXTtyZXR1cm4gdGhpcy5sYXllcnMucHVzaChhKSwhMH0saXNSdW5uaW5nOmZ1bmN0aW9uKCl7dmFyIGEsYj1LaW5ldGljLkFuaW1hdGlvbixjPWIuYW5pbWF0aW9ucyxkPWMubGVuZ3RoO2ZvcihhPTA7ZD5hO2ErKylpZihjW2FdLmlkPT09dGhpcy5pZClyZXR1cm4hMDtyZXR1cm4hMX0sc3RhcnQ6ZnVuY3Rpb24oKXt2YXIgYT1LaW5ldGljLkFuaW1hdGlvbjt0aGlzLnN0b3AoKSx0aGlzLmZyYW1lLnRpbWVEaWZmPTAsdGhpcy5mcmFtZS5sYXN0VGltZT1kKCksYS5fYWRkQW5pbWF0aW9uKHRoaXMpfSxzdG9wOmZ1bmN0aW9uKCl7S2luZXRpYy5BbmltYXRpb24uX3JlbW92ZUFuaW1hdGlvbih0aGlzKX0sX3VwZGF0ZUZyYW1lT2JqZWN0OmZ1bmN0aW9uKGEpe3RoaXMuZnJhbWUudGltZURpZmY9YS10aGlzLmZyYW1lLmxhc3RUaW1lLHRoaXMuZnJhbWUubGFzdFRpbWU9YSx0aGlzLmZyYW1lLnRpbWUrPXRoaXMuZnJhbWUudGltZURpZmYsdGhpcy5mcmFtZS5mcmFtZVJhdGU9MWUzL3RoaXMuZnJhbWUudGltZURpZmZ9fSxLaW5ldGljLkFuaW1hdGlvbi5hbmltYXRpb25zPVtdLEtpbmV0aWMuQW5pbWF0aW9uLmFuaW1JZENvdW50ZXI9MCxLaW5ldGljLkFuaW1hdGlvbi5hbmltUnVubmluZz0hMSxLaW5ldGljLkFuaW1hdGlvbi5fYWRkQW5pbWF0aW9uPWZ1bmN0aW9uKGEpe3RoaXMuYW5pbWF0aW9ucy5wdXNoKGEpLHRoaXMuX2hhbmRsZUFuaW1hdGlvbigpfSxLaW5ldGljLkFuaW1hdGlvbi5fcmVtb3ZlQW5pbWF0aW9uPWZ1bmN0aW9uKGEpe3ZhciBiLGM9YS5pZCxkPXRoaXMuYW5pbWF0aW9ucyxlPWQubGVuZ3RoO2ZvcihiPTA7ZT5iO2IrKylpZihkW2JdLmlkPT09Yyl7dGhpcy5hbmltYXRpb25zLnNwbGljZShiLDEpO2JyZWFrfX0sS2luZXRpYy5BbmltYXRpb24uX3J1bkZyYW1lcz1mdW5jdGlvbigpe3ZhciBhLGIsYyxlLGYsZyxoLGksaj17fSxrPXRoaXMuYW5pbWF0aW9ucztmb3IoZT0wO2U8ay5sZW5ndGg7ZSsrKXtmb3IoYT1rW2VdLGI9YS5sYXllcnMsYz1hLmZ1bmMsYS5fdXBkYXRlRnJhbWVPYmplY3QoZCgpKSxnPWIubGVuZ3RoLGY9MDtnPmY7ZisrKWg9YltmXSx2b2lkIDAhPT1oLl9pZCYmKGpbaC5faWRdPWgpO2MmJmMuY2FsbChhLGEuZnJhbWUpfWZvcihpIGluIGopaltpXS5kcmF3KCl9LEtpbmV0aWMuQW5pbWF0aW9uLl9hbmltYXRpb25Mb29wPWZ1bmN0aW9uKCl7dmFyIGE9S2luZXRpYy5BbmltYXRpb247YS5hbmltYXRpb25zLmxlbmd0aD8oYihhLl9hbmltYXRpb25Mb29wKSxhLl9ydW5GcmFtZXMoKSk6YS5hbmltUnVubmluZz0hMX0sS2luZXRpYy5BbmltYXRpb24uX2hhbmRsZUFuaW1hdGlvbj1mdW5jdGlvbigpe3ZhciBhPXRoaXM7dGhpcy5hbmltUnVubmluZ3x8KHRoaXMuYW5pbVJ1bm5pbmc9ITAsYS5fYW5pbWF0aW9uTG9vcCgpKX07dmFyIGY9S2luZXRpYy5Ob2RlLnByb3RvdHlwZS5tb3ZlVG87S2luZXRpYy5Ob2RlLnByb3RvdHlwZS5tb3ZlVG89ZnVuY3Rpb24oYSl7Zi5jYWxsKHRoaXMsYSl9LEtpbmV0aWMuTGF5ZXIucHJvdG90eXBlLmJhdGNoRHJhdz1mdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1LaW5ldGljLkFuaW1hdGlvbjt0aGlzLmJhdGNoQW5pbXx8KHRoaXMuYmF0Y2hBbmltPW5ldyBiKGZ1bmN0aW9uKCl7YS5sYXN0QmF0Y2hEcmF3VGltZSYmZCgpLWEubGFzdEJhdGNoRHJhd1RpbWU+YyYmYS5iYXRjaEFuaW0uc3RvcCgpfSx0aGlzKSksdGhpcy5sYXN0QmF0Y2hEcmF3VGltZT1kKCksdGhpcy5iYXRjaEFuaW0uaXNSdW5uaW5nKCl8fCh0aGlzLmRyYXcoKSx0aGlzLmJhdGNoQW5pbS5zdGFydCgpKX0sS2luZXRpYy5TdGFnZS5wcm90b3R5cGUuYmF0Y2hEcmF3PWZ1bmN0aW9uKCl7dGhpcy5nZXRDaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oYSl7YS5iYXRjaERyYXcoKX0pfX0oKDEsZXZhbCkoXCJ0aGlzXCIpKSxmdW5jdGlvbigpe3ZhciBhPXtub2RlOjEsZHVyYXRpb246MSxlYXNpbmc6MSxvbkZpbmlzaDoxLHlveW86MX0sYj0xLGM9MixkPTMsZT0wO0tpbmV0aWMuVHdlZW49ZnVuY3Rpb24oYil7dmFyIGMsZD10aGlzLGc9Yi5ub2RlLGg9Zy5faWQsaT1iLmR1cmF0aW9ufHwxLGo9Yi5lYXNpbmd8fEtpbmV0aWMuRWFzaW5ncy5MaW5lYXIsaz0hIWIueW95bzt0aGlzLm5vZGU9Zyx0aGlzLl9pZD1lKyssdGhpcy5hbmltPW5ldyBLaW5ldGljLkFuaW1hdGlvbihmdW5jdGlvbigpe2QudHdlZW4ub25FbnRlckZyYW1lKCl9LGcuZ2V0TGF5ZXIoKSksdGhpcy50d2Vlbj1uZXcgZihjLGZ1bmN0aW9uKGEpe2QuX3R3ZWVuRnVuYyhhKX0saiwwLDEsMWUzKmksayksdGhpcy5fYWRkTGlzdGVuZXJzKCksS2luZXRpYy5Ud2Vlbi5hdHRyc1toXXx8KEtpbmV0aWMuVHdlZW4uYXR0cnNbaF09e30pLEtpbmV0aWMuVHdlZW4uYXR0cnNbaF1bdGhpcy5faWRdfHwoS2luZXRpYy5Ud2Vlbi5hdHRyc1toXVt0aGlzLl9pZF09e30pLEtpbmV0aWMuVHdlZW4udHdlZW5zW2hdfHwoS2luZXRpYy5Ud2Vlbi50d2VlbnNbaF09e30pO2ZvcihjIGluIGIpdm9pZCAwPT09YVtjXSYmdGhpcy5fYWRkQXR0cihjLGJbY10pO3RoaXMucmVzZXQoKSx0aGlzLm9uRmluaXNoPWIub25GaW5pc2gsdGhpcy5vblJlc2V0PWIub25SZXNldH0sS2luZXRpYy5Ud2Vlbi5hdHRycz17fSxLaW5ldGljLlR3ZWVuLnR3ZWVucz17fSxLaW5ldGljLlR3ZWVuLnByb3RvdHlwZT17X2FkZEF0dHI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnLGg9dGhpcy5ub2RlLGk9aC5faWQ7aWYoZT1LaW5ldGljLlR3ZWVuLnR3ZWVuc1tpXVthXSxlJiZkZWxldGUgS2luZXRpYy5Ud2Vlbi5hdHRyc1tpXVtlXVthXSxjPWguZ2V0QXR0cihhKSxLaW5ldGljLlV0aWwuX2lzQXJyYXkoYikpZm9yKGQ9W10sZz1iLmxlbmd0aCxmPTA7Zz5mO2YrKylkLnB1c2goYltmXS1jW2ZdKTtlbHNlIGQ9Yi1jO0tpbmV0aWMuVHdlZW4uYXR0cnNbaV1bdGhpcy5faWRdW2FdPXtzdGFydDpjLGRpZmY6ZH0sS2luZXRpYy5Ud2Vlbi50d2VlbnNbaV1bYV09dGhpcy5faWR9LF90d2VlbkZ1bmM6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaT10aGlzLm5vZGUsaj1LaW5ldGljLlR3ZWVuLmF0dHJzW2kuX2lkXVt0aGlzLl9pZF07Zm9yKGIgaW4gail7aWYoYz1qW2JdLGQ9Yy5zdGFydCxlPWMuZGlmZixLaW5ldGljLlV0aWwuX2lzQXJyYXkoZCkpZm9yKGY9W10saD1kLmxlbmd0aCxnPTA7aD5nO2crKylmLnB1c2goZFtnXStlW2ddKmEpO2Vsc2UgZj1kK2UqYTtpLnNldEF0dHIoYixmKX19LF9hZGRMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMudHdlZW4ub25QbGF5PWZ1bmN0aW9uKCl7YS5hbmltLnN0YXJ0KCl9LHRoaXMudHdlZW4ub25SZXZlcnNlPWZ1bmN0aW9uKCl7YS5hbmltLnN0YXJ0KCl9LHRoaXMudHdlZW4ub25QYXVzZT1mdW5jdGlvbigpe2EuYW5pbS5zdG9wKCl9LHRoaXMudHdlZW4ub25GaW5pc2g9ZnVuY3Rpb24oKXthLm9uRmluaXNoJiZhLm9uRmluaXNoKCl9LHRoaXMudHdlZW4ub25SZXNldD1mdW5jdGlvbigpe2Eub25SZXNldCYmYS5vblJlc2V0KCl9fSxwbGF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHdlZW4ucGxheSgpLHRoaXN9LHJldmVyc2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50d2Vlbi5yZXZlcnNlKCksdGhpc30scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLm5vZGU7cmV0dXJuIHRoaXMudHdlZW4ucmVzZXQoKSx0aGlzfSxzZWVrOmZ1bmN0aW9uKGEpe3RoaXMubm9kZTtyZXR1cm4gdGhpcy50d2Vlbi5zZWVrKDFlMyphKSx0aGlzfSxwYXVzZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnR3ZWVuLnBhdXNlKCksdGhpc30sZmluaXNoOmZ1bmN0aW9uKCl7dGhpcy5ub2RlO3JldHVybiB0aGlzLnR3ZWVuLmZpbmlzaCgpLHRoaXN9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgYSxiPXRoaXMubm9kZS5faWQsYz10aGlzLl9pZCxkPUtpbmV0aWMuVHdlZW4udHdlZW5zW2JdO3RoaXMucGF1c2UoKTtmb3IoYSBpbiBkKWRlbGV0ZSBLaW5ldGljLlR3ZWVuLnR3ZWVuc1tiXVthXTtkZWxldGUgS2luZXRpYy5Ud2Vlbi5hdHRyc1tiXVtjXX19O3ZhciBmPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3RoaXMucHJvcD1hLHRoaXMucHJvcEZ1bmM9Yix0aGlzLmJlZ2luPWQsdGhpcy5fcG9zPWQsdGhpcy5kdXJhdGlvbj1mLHRoaXMuX2NoYW5nZT0wLHRoaXMucHJldlBvcz0wLHRoaXMueW95bz1nLHRoaXMuX3RpbWU9MCx0aGlzLl9wb3NpdGlvbj0wLHRoaXMuX3N0YXJ0VGltZT0wLHRoaXMuX2ZpbmlzaD0wLHRoaXMuZnVuYz1jLHRoaXMuX2NoYW5nZT1lLXRoaXMuYmVnaW4sdGhpcy5wYXVzZSgpfTtmLnByb3RvdHlwZT17ZmlyZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzW2FdO2ImJmIoKX0sc2V0VGltZTpmdW5jdGlvbihhKXthPnRoaXMuZHVyYXRpb24/dGhpcy55b3lvPyh0aGlzLl90aW1lPXRoaXMuZHVyYXRpb24sdGhpcy5yZXZlcnNlKCkpOnRoaXMuZmluaXNoKCk6MD5hP3RoaXMueW95bz8odGhpcy5fdGltZT0wLHRoaXMucGxheSgpKTp0aGlzLnJlc2V0KCk6KHRoaXMuX3RpbWU9YSx0aGlzLnVwZGF0ZSgpKX0sZ2V0VGltZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aW1lfSxzZXRQb3NpdGlvbjpmdW5jdGlvbihhKXt0aGlzLnByZXZQb3M9dGhpcy5fcG9zLHRoaXMucHJvcEZ1bmMoYSksdGhpcy5fcG9zPWF9LGdldFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PT1hJiYoYT10aGlzLl90aW1lKSx0aGlzLmZ1bmMoYSx0aGlzLmJlZ2luLHRoaXMuX2NoYW5nZSx0aGlzLmR1cmF0aW9uKX0scGxheTpmdW5jdGlvbigpe3RoaXMuc3RhdGU9Yyx0aGlzLl9zdGFydFRpbWU9dGhpcy5nZXRUaW1lcigpLXRoaXMuX3RpbWUsdGhpcy5vbkVudGVyRnJhbWUoKSx0aGlzLmZpcmUoXCJvblBsYXlcIil9LHJldmVyc2U6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlPWQsdGhpcy5fdGltZT10aGlzLmR1cmF0aW9uLXRoaXMuX3RpbWUsdGhpcy5fc3RhcnRUaW1lPXRoaXMuZ2V0VGltZXIoKS10aGlzLl90aW1lLHRoaXMub25FbnRlckZyYW1lKCksdGhpcy5maXJlKFwib25SZXZlcnNlXCIpfSxzZWVrOmZ1bmN0aW9uKGEpe3RoaXMucGF1c2UoKSx0aGlzLl90aW1lPWEsdGhpcy51cGRhdGUoKSx0aGlzLmZpcmUoXCJvblNlZWtcIil9LHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5wYXVzZSgpLHRoaXMuX3RpbWU9MCx0aGlzLnVwZGF0ZSgpLHRoaXMuZmlyZShcIm9uUmVzZXRcIil9LGZpbmlzaDpmdW5jdGlvbigpe3RoaXMucGF1c2UoKSx0aGlzLl90aW1lPXRoaXMuZHVyYXRpb24sdGhpcy51cGRhdGUoKSx0aGlzLmZpcmUoXCJvbkZpbmlzaFwiKX0sdXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy5zZXRQb3NpdGlvbih0aGlzLmdldFBvc2l0aW9uKHRoaXMuX3RpbWUpKX0sb25FbnRlckZyYW1lOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRUaW1lcigpLXRoaXMuX3N0YXJ0VGltZTt0aGlzLnN0YXRlPT09Yz90aGlzLnNldFRpbWUoYSk6dGhpcy5zdGF0ZT09PWQmJnRoaXMuc2V0VGltZSh0aGlzLmR1cmF0aW9uLWEpfSxwYXVzZTpmdW5jdGlvbigpe3RoaXMuc3RhdGU9Yix0aGlzLmZpcmUoXCJvblBhdXNlXCIpfSxnZXRUaW1lcjpmdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfX0sS2luZXRpYy5FYXNpbmdzPXtCYWNrRWFzZUluOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPTEuNzAxNTg7cmV0dXJuIGMqKGEvPWQpKmEqKChlKzEpKmEtZSkrYn0sQmFja0Vhc2VPdXQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9MS43MDE1ODtyZXR1cm4gYyooKGE9YS9kLTEpKmEqKChlKzEpKmErZSkrMSkrYn0sQmFja0Vhc2VJbk91dDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT0xLjcwMTU4O3JldHVybihhLz1kLzIpPDE/Yy8yKmEqYSooKChlKj0xLjUyNSkrMSkqYS1lKStiOmMvMiooKGEtPTIpKmEqKCgoZSo9MS41MjUpKzEpKmErZSkrMikrYn0sRWxhc3RpY0Vhc2VJbjpmdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9MDtyZXR1cm4gMD09PWE/YjoxPT0oYS89ZCk/YitjOihmfHwoZj0uMypkKSwhZXx8ZTxNYXRoLmFicyhjKT8oZT1jLGc9Zi80KTpnPWYvKDIqTWF0aC5QSSkqTWF0aC5hc2luKGMvZSksLShlKk1hdGgucG93KDIsMTAqKGEtPTEpKSpNYXRoLnNpbigyKihhKmQtZykqTWF0aC5QSS9mKSkrYil9LEVsYXN0aWNFYXNlT3V0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZz0wO3JldHVybiAwPT09YT9iOjE9PShhLz1kKT9iK2M6KGZ8fChmPS4zKmQpLCFlfHxlPE1hdGguYWJzKGMpPyhlPWMsZz1mLzQpOmc9Zi8oMipNYXRoLlBJKSpNYXRoLmFzaW4oYy9lKSxlKk1hdGgucG93KDIsLTEwKmEpKk1hdGguc2luKDIqKGEqZC1nKSpNYXRoLlBJL2YpK2MrYil9LEVsYXN0aWNFYXNlSW5PdXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBnPTA7cmV0dXJuIDA9PT1hP2I6Mj09KGEvPWQvMik/YitjOihmfHwoZj0uMypkKjEuNSksIWV8fGU8TWF0aC5hYnMoYyk/KGU9YyxnPWYvNCk6Zz1mLygyKk1hdGguUEkpKk1hdGguYXNpbihjL2UpLDE+YT8tLjUqZSpNYXRoLnBvdygyLDEwKihhLT0xKSkqTWF0aC5zaW4oMiooYSpkLWcpKk1hdGguUEkvZikrYjplKk1hdGgucG93KDIsLTEwKihhLT0xKSkqTWF0aC5zaW4oMiooYSpkLWcpKk1hdGguUEkvZikqLjUrYytiKX0sQm91bmNlRWFzZU91dDpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4oYS89ZCk8MS8yLjc1PzcuNTYyNSpjKmEqYStiOjIvMi43NT5hP2MqKDcuNTYyNSooYS09MS41LzIuNzUpKmErLjc1KStiOjIuNS8yLjc1PmE/YyooNy41NjI1KihhLT0yLjI1LzIuNzUpKmErLjkzNzUpK2I6YyooNy41NjI1KihhLT0yLjYyNS8yLjc1KSphKy45ODQzNzUpK2J9LEJvdW5jZUVhc2VJbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gYy1LaW5ldGljLkVhc2luZ3MuQm91bmNlRWFzZU91dChkLWEsMCxjLGQpK2J9LEJvdW5jZUVhc2VJbk91dDpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gZC8yPmE/LjUqS2luZXRpYy5FYXNpbmdzLkJvdW5jZUVhc2VJbigyKmEsMCxjLGQpK2I6LjUqS2luZXRpYy5FYXNpbmdzLkJvdW5jZUVhc2VPdXQoMiphLWQsMCxjLGQpKy41KmMrYn0sRWFzZUluOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBjKihhLz1kKSphK2J9LEVhc2VPdXQ6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuLWMqKGEvPWQpKihhLTIpK2J9LEVhc2VJbk91dDpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4oYS89ZC8yKTwxP2MvMiphKmErYjotYy8yKigtLWEqKGEtMiktMSkrYn0sU3Ryb25nRWFzZUluOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBjKihhLz1kKSphKmEqYSphK2J9LFN0cm9uZ0Vhc2VPdXQ6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGMqKChhPWEvZC0xKSphKmEqYSphKzEpK2J9LFN0cm9uZ0Vhc2VJbk91dDpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4oYS89ZC8yKTwxP2MvMiphKmEqYSphKmErYjpjLzIqKChhLT0yKSphKmEqYSphKzIpK2J9LExpbmVhcjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gYyphL2QrYn19fSgpLGZ1bmN0aW9uKCl7S2luZXRpYy5ERD17YW5pbTpuZXcgS2luZXRpYy5BbmltYXRpb24saXNEcmFnZ2luZzohMSxvZmZzZXQ6e3g6MCx5OjB9LG5vZGU6bnVsbCxfZHJhZzpmdW5jdGlvbihhKXt2YXIgYj1LaW5ldGljLkRELGM9Yi5ub2RlO2lmKGMpe2lmKCFiLmlzRHJhZ2dpbmcpe3ZhciBkPWMuZ2V0U3RhZ2UoKS5nZXRQb2ludGVyUG9zaXRpb24oKSxlPWMuZHJhZ0Rpc3RhbmNlKCksZj1NYXRoLm1heChNYXRoLmFicyhkLngtYi5zdGFydFBvaW50ZXJQb3MueCksTWF0aC5hYnMoZC55LWIuc3RhcnRQb2ludGVyUG9zLnkpKTtpZihlPmYpcmV0dXJufWMuX3NldERyYWdQb3NpdGlvbihhKSxiLmlzRHJhZ2dpbmd8fChiLmlzRHJhZ2dpbmc9ITAsYy5maXJlKFwiZHJhZ3N0YXJ0XCIse3R5cGU6XCJkcmFnc3RhcnRcIix0YXJnZXQ6YyxldnQ6YX0sITApKSxjLmZpcmUoXCJkcmFnbW92ZVwiLHt0eXBlOlwiZHJhZ21vdmVcIix0YXJnZXQ6YyxldnQ6YX0sITApfX0sX2VuZERyYWdCZWZvcmU6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPUtpbmV0aWMuREQsZT1kLm5vZGU7ZSYmKGI9ZS5ub2RlVHlwZSxjPWUuZ2V0TGF5ZXIoKSxkLmFuaW0uc3RvcCgpLGQuaXNEcmFnZ2luZyYmKGQuaXNEcmFnZ2luZz0hMSxLaW5ldGljLmxpc3RlbkNsaWNrVGFwPSExLGEmJihhLmRyYWdFbmROb2RlPWUpKSxkZWxldGUgZC5ub2RlLChjfHxlKS5kcmF3KCkpfSxfZW5kRHJhZ0FmdGVyOmZ1bmN0aW9uKGEpe2E9YXx8e307dmFyIGI9YS5kcmFnRW5kTm9kZTthJiZiJiZiLmZpcmUoXCJkcmFnZW5kXCIse3R5cGU6XCJkcmFnZW5kXCIsdGFyZ2V0OmIsZXZ0OmF9LCEwKX19LEtpbmV0aWMuTm9kZS5wcm90b3R5cGUuc3RhcnREcmFnPWZ1bmN0aW9uKCl7dmFyIGE9S2luZXRpYy5ERCxiPXRoaXMuZ2V0U3RhZ2UoKSxjPXRoaXMuZ2V0TGF5ZXIoKSxkPWIuZ2V0UG9pbnRlclBvc2l0aW9uKCksZT10aGlzLmdldEFic29sdXRlUG9zaXRpb24oKTtkJiYoYS5ub2RlJiZhLm5vZGUuc3RvcERyYWcoKSxhLm5vZGU9dGhpcyxhLnN0YXJ0UG9pbnRlclBvcz1kLGEub2Zmc2V0Lng9ZC54LWUueCxhLm9mZnNldC55PWQueS1lLnksYS5hbmltLnNldExheWVycyhjfHx0aGlzLmdldExheWVycygpKSxhLmFuaW0uc3RhcnQoKSx0aGlzLl9zZXREcmFnUG9zaXRpb24oKSl9LEtpbmV0aWMuTm9kZS5wcm90b3R5cGUuX3NldERyYWdQb3NpdGlvbj1mdW5jdGlvbihhKXt2YXIgYj1LaW5ldGljLkRELGM9dGhpcy5nZXRTdGFnZSgpLmdldFBvaW50ZXJQb3NpdGlvbigpLGQ9dGhpcy5nZXREcmFnQm91bmRGdW5jKCk7aWYoYyl7dmFyIGU9e3g6Yy54LWIub2Zmc2V0LngseTpjLnktYi5vZmZzZXQueX07dm9pZCAwIT09ZCYmKGU9ZC5jYWxsKHRoaXMsZSxhKSksdGhpcy5zZXRBYnNvbHV0ZVBvc2l0aW9uKGUpfX0sS2luZXRpYy5Ob2RlLnByb3RvdHlwZS5zdG9wRHJhZz1mdW5jdGlvbigpe3ZhciBhPUtpbmV0aWMuREQsYj17fTthLl9lbmREcmFnQmVmb3JlKGIpLGEuX2VuZERyYWdBZnRlcihiKX0sS2luZXRpYy5Ob2RlLnByb3RvdHlwZS5zZXREcmFnZ2FibGU9ZnVuY3Rpb24oYSl7dGhpcy5fc2V0QXR0cihcImRyYWdnYWJsZVwiLGEpLHRoaXMuX2RyYWdDaGFuZ2UoKX07dmFyIGE9S2luZXRpYy5Ob2RlLnByb3RvdHlwZS5kZXN0cm95O0tpbmV0aWMuTm9kZS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3ZhciBiPUtpbmV0aWMuREQ7Yi5ub2RlJiZiLm5vZGUuX2lkPT09dGhpcy5faWQmJnRoaXMuc3RvcERyYWcoKSxhLmNhbGwodGhpcyl9LEtpbmV0aWMuTm9kZS5wcm90b3R5cGUuaXNEcmFnZ2luZz1mdW5jdGlvbigpe3ZhciBhPUtpbmV0aWMuREQ7cmV0dXJuIGEubm9kZSYmYS5ub2RlLl9pZD09PXRoaXMuX2lkJiZhLmlzRHJhZ2dpbmd9LEtpbmV0aWMuTm9kZS5wcm90b3R5cGUuX2xpc3RlbkRyYWc9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMuX2RyYWdDbGVhbnVwKCksXCJTdGFnZVwiPT09dGhpcy5nZXRDbGFzc05hbWUoKT90aGlzLm9uKFwiY29udGVudE1vdXNlZG93bi5raW5ldGljIGNvbnRlbnRUb3VjaHN0YXJ0LmtpbmV0aWNcIixmdW5jdGlvbihiKXtLaW5ldGljLkRELm5vZGV8fGEuc3RhcnREcmFnKGIpfSk6dGhpcy5vbihcIm1vdXNlZG93bi5raW5ldGljIHRvdWNoc3RhcnQua2luZXRpY1wiLGZ1bmN0aW9uKGIpe0tpbmV0aWMuREQubm9kZXx8YS5zdGFydERyYWcoYil9KX0sS2luZXRpYy5Ob2RlLnByb3RvdHlwZS5fZHJhZ0NoYW5nZT1mdW5jdGlvbigpe2lmKHRoaXMuYXR0cnMuZHJhZ2dhYmxlKXRoaXMuX2xpc3RlbkRyYWcoKTtlbHNle3RoaXMuX2RyYWdDbGVhbnVwKCk7dmFyIGE9dGhpcy5nZXRTdGFnZSgpLGI9S2luZXRpYy5ERDthJiZiLm5vZGUmJmIubm9kZS5faWQ9PT10aGlzLl9pZCYmYi5ub2RlLnN0b3BEcmFnKCl9fSxLaW5ldGljLk5vZGUucHJvdG90eXBlLl9kcmFnQ2xlYW51cD1mdW5jdGlvbigpe1wiU3RhZ2VcIj09PXRoaXMuZ2V0Q2xhc3NOYW1lKCk/KHRoaXMub2ZmKFwiY29udGVudE1vdXNlZG93bi5raW5ldGljXCIpLHRoaXMub2ZmKFwiY29udGVudFRvdWNoc3RhcnQua2luZXRpY1wiKSk6KHRoaXMub2ZmKFwibW91c2Vkb3duLmtpbmV0aWNcIiksdGhpcy5vZmYoXCJ0b3VjaHN0YXJ0LmtpbmV0aWNcIikpfSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTm9kZSxcImRyYWdCb3VuZEZ1bmNcIiksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlcihLaW5ldGljLk5vZGUsXCJkcmFnZ2FibGVcIiwhMSksS2luZXRpYy5GYWN0b3J5LmFkZE92ZXJsb2FkZWRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Ob2RlLFwiZHJhZ2dhYmxlXCIpO3ZhciBiPUtpbmV0aWMuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2IuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIixLaW5ldGljLkRELl9lbmREcmFnQmVmb3JlLCEwKSxiLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLEtpbmV0aWMuREQuX2VuZERyYWdCZWZvcmUsITApLGIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIixLaW5ldGljLkRELl9lbmREcmFnQWZ0ZXIsITEpLGIuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsS2luZXRpYy5ERC5fZW5kRHJhZ0FmdGVyLCExKX0oKSxmdW5jdGlvbigpe0tpbmV0aWMuVXRpbC5hZGRNZXRob2RzKEtpbmV0aWMuQ29udGFpbmVyLHtfX2luaXQ6ZnVuY3Rpb24oYSl7dGhpcy5jaGlsZHJlbj1uZXcgS2luZXRpYy5Db2xsZWN0aW9uLEtpbmV0aWMuTm9kZS5jYWxsKHRoaXMsYSl9LGdldENoaWxkcmVuOmZ1bmN0aW9uKGEpe2lmKGEpe3ZhciBiPW5ldyBLaW5ldGljLkNvbGxlY3Rpb247cmV0dXJuIHRoaXMuY2hpbGRyZW4uZWFjaChmdW5jdGlvbihjKXthKGMpJiZiLnB1c2goYyl9KSxifXJldHVybiB0aGlzLmNoaWxkcmVufSxoYXNDaGlsZHJlbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldENoaWxkcmVuKCkubGVuZ3RoPjB9LHJlbW92ZUNoaWxkcmVuOmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9S2luZXRpYy5Db2xsZWN0aW9uLnRvQ29sbGVjdGlvbih0aGlzLmNoaWxkcmVuKSxjPTA7YzxiLmxlbmd0aDtjKyspYT1iW2NdLGRlbGV0ZSBhLnBhcmVudCxhLmluZGV4PTAsYS5oYXNDaGlsZHJlbigpJiZhLnJlbW92ZUNoaWxkcmVuKCksYS5yZW1vdmUoKTtyZXR1cm4gYj1udWxsLHRoaXMuY2hpbGRyZW49bmV3IEtpbmV0aWMuQ29sbGVjdGlvbix0aGlzfSxkZXN0cm95Q2hpbGRyZW46ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj1LaW5ldGljLkNvbGxlY3Rpb24udG9Db2xsZWN0aW9uKHRoaXMuY2hpbGRyZW4pLGM9MDtjPGIubGVuZ3RoO2MrKylhPWJbY10sZGVsZXRlIGEucGFyZW50LGEuaW5kZXg9MCxhLmRlc3Ryb3koKTtyZXR1cm4gYj1udWxsLHRoaXMuY2hpbGRyZW49bmV3IEtpbmV0aWMuQ29sbGVjdGlvbix0aGlzfSxhZGQ6ZnVuY3Rpb24oYSl7aWYoIShhcmd1bWVudHMubGVuZ3RoPjEpKXtpZihhLmdldFBhcmVudCgpKXJldHVybiB2b2lkIGEubW92ZVRvKHRoaXMpO3ZhciBiPXRoaXMuY2hpbGRyZW47cmV0dXJuIHRoaXMuX3ZhbGlkYXRlQWRkKGEpLGEuaW5kZXg9Yi5sZW5ndGgsYS5wYXJlbnQ9dGhpcyxiLnB1c2goYSksdGhpcy5fZmlyZShcImFkZFwiLHtjaGlsZDphfSksdGhpc31mb3IodmFyIGM9MDtjPGFyZ3VtZW50cy5sZW5ndGg7YysrKXRoaXMuYWRkKGFyZ3VtZW50c1tjXSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmhhc0NoaWxkcmVuKCkmJnRoaXMuZGVzdHJveUNoaWxkcmVuKCksS2luZXRpYy5Ob2RlLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyl9LGZpbmQ6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaT1bXSxqPWEucmVwbGFjZSgvIC9nLFwiXCIpLnNwbGl0KFwiLFwiKSxrPWoubGVuZ3RoO2ZvcihiPTA7az5iO2IrKylpZihkPWpbYl0sXCIjXCI9PT1kLmNoYXJBdCgwKSlmPXRoaXMuX2dldE5vZGVCeUlkKGQuc2xpY2UoMSkpLGYmJmkucHVzaChmKTtlbHNlIGlmKFwiLlwiPT09ZC5jaGFyQXQoMCkpZT10aGlzLl9nZXROb2Rlc0J5TmFtZShkLnNsaWNlKDEpKSxpPWkuY29uY2F0KGUpO2Vsc2UgZm9yKGc9dGhpcy5nZXRDaGlsZHJlbigpLGg9Zy5sZW5ndGgsYz0wO2g+YztjKyspaT1pLmNvbmNhdChnW2NdLl9nZXQoZCkpO3JldHVybiBLaW5ldGljLkNvbGxlY3Rpb24udG9Db2xsZWN0aW9uKGkpfSxfZ2V0Tm9kZUJ5SWQ6ZnVuY3Rpb24oYSl7dmFyIGI9S2luZXRpYy5pZHNbYV07cmV0dXJuIHZvaWQgMCE9PWImJnRoaXMuaXNBbmNlc3Rvck9mKGIpP2I6bnVsbH0sX2dldE5vZGVzQnlOYW1lOmZ1bmN0aW9uKGEpe3ZhciBiPUtpbmV0aWMubmFtZXNbYV18fFtdO3JldHVybiB0aGlzLl9nZXREZXNjZW5kYW50cyhiKX0sX2dldDpmdW5jdGlvbihhKXtmb3IodmFyIGI9S2luZXRpYy5Ob2RlLnByb3RvdHlwZS5fZ2V0LmNhbGwodGhpcyxhKSxjPXRoaXMuZ2V0Q2hpbGRyZW4oKSxkPWMubGVuZ3RoLGU9MDtkPmU7ZSsrKWI9Yi5jb25jYXQoY1tlXS5fZ2V0KGEpKTtyZXR1cm4gYn0sdG9PYmplY3Q6ZnVuY3Rpb24oKXt2YXIgYT1LaW5ldGljLk5vZGUucHJvdG90eXBlLnRvT2JqZWN0LmNhbGwodGhpcyk7YS5jaGlsZHJlbj1bXTtmb3IodmFyIGI9dGhpcy5nZXRDaGlsZHJlbigpLGM9Yi5sZW5ndGgsZD0wO2M+ZDtkKyspe3ZhciBlPWJbZF07YS5jaGlsZHJlbi5wdXNoKGUudG9PYmplY3QoKSl9cmV0dXJuIGF9LF9nZXREZXNjZW5kYW50czpmdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz1hLmxlbmd0aCxkPTA7Yz5kO2QrKyl7dmFyIGU9YVtkXTt0aGlzLmlzQW5jZXN0b3JPZihlKSYmYi5wdXNoKGUpfXJldHVybiBifSxpc0FuY2VzdG9yT2Y6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWEuZ2V0UGFyZW50KCk7Yjspe2lmKGIuX2lkPT09dGhpcy5faWQpcmV0dXJuITA7Yj1iLmdldFBhcmVudCgpfXJldHVybiExfSxjbG9uZTpmdW5jdGlvbihhKXt2YXIgYj1LaW5ldGljLk5vZGUucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyxhKTtyZXR1cm4gdGhpcy5nZXRDaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oYSl7Yi5hZGQoYS5jbG9uZSgpKX0pLGJ9LGdldEFsbEludGVyc2VjdGlvbnM6ZnVuY3Rpb24oYSl7dmFyIGI9W107cmV0dXJuIHRoaXMuZmluZChcIlNoYXBlXCIpLmVhY2goZnVuY3Rpb24oYyl7Yy5pc1Zpc2libGUoKSYmYy5pbnRlcnNlY3RzKGEpJiZiLnB1c2goYyl9KSxifSxfc2V0Q2hpbGRyZW5JbmRpY2VzOmZ1bmN0aW9uKCl7dGhpcy5jaGlsZHJlbi5lYWNoKGZ1bmN0aW9uKGEsYil7YS5pbmRleD1ifSl9LGRyYXdTY2VuZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0TGF5ZXIoKSxkPWF8fGMmJmMuZ2V0Q2FudmFzKCksZT1kJiZkLmdldENvbnRleHQoKSxmPXRoaXMuX2NhY2hlLmNhbnZhcyxnPWYmJmYuc2NlbmU7cmV0dXJuIHRoaXMuaXNWaXNpYmxlKCkmJihnP3RoaXMuX2RyYXdDYWNoZWRTY2VuZUNhbnZhcyhlKTp0aGlzLl9kcmF3Q2hpbGRyZW4oZCxcImRyYXdTY2VuZVwiLGIpKSx0aGlzXG59LGRyYXdIaXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldExheWVyKCksZD1hfHxjJiZjLmhpdENhbnZhcyxlPWQmJmQuZ2V0Q29udGV4dCgpLGY9dGhpcy5fY2FjaGUuY2FudmFzLGc9ZiYmZi5oaXQ7cmV0dXJuIHRoaXMuc2hvdWxkRHJhd0hpdCgpJiYoZz90aGlzLl9kcmF3Q2FjaGVkSGl0Q2FudmFzKGUpOnRoaXMuX2RyYXdDaGlsZHJlbihkLFwiZHJhd0hpdFwiLGIpKSx0aGlzfSxfZHJhd0NoaWxkcmVuOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9dGhpcy5nZXRMYXllcigpLGc9YSYmYS5nZXRDb250ZXh0KCksaD10aGlzLmdldENsaXBXaWR0aCgpLGk9dGhpcy5nZXRDbGlwSGVpZ2h0KCksaj1oJiZpO2omJmYmJihkPXRoaXMuZ2V0Q2xpcFgoKSxlPXRoaXMuZ2V0Q2xpcFkoKSxnLnNhdmUoKSxmLl9hcHBseVRyYW5zZm9ybSh0aGlzLGcpLGcuYmVnaW5QYXRoKCksZy5yZWN0KGQsZSxoLGkpLGcuY2xpcCgpLGcucmVzZXQoKSksdGhpcy5jaGlsZHJlbi5lYWNoKGZ1bmN0aW9uKGQpe2RbYl0oYSxjKX0pLGomJmcucmVzdG9yZSgpfX0pLEtpbmV0aWMuVXRpbC5leHRlbmQoS2luZXRpYy5Db250YWluZXIsS2luZXRpYy5Ob2RlKSxLaW5ldGljLkNvbnRhaW5lci5wcm90b3R5cGUuZ2V0PUtpbmV0aWMuQ29udGFpbmVyLnByb3RvdHlwZS5maW5kLEtpbmV0aWMuRmFjdG9yeS5hZGRDb21wb25lbnRzR2V0dGVyU2V0dGVyKEtpbmV0aWMuQ29udGFpbmVyLFwiY2xpcFwiLFtcInhcIixcInlcIixcIndpZHRoXCIsXCJoZWlnaHRcIl0pLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5Db250YWluZXIsXCJjbGlwWFwiKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuQ29udGFpbmVyLFwiY2xpcFlcIiksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLkNvbnRhaW5lcixcImNsaXBXaWR0aFwiKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuQ29udGFpbmVyLFwiY2xpcEhlaWdodFwiKSxLaW5ldGljLkNvbGxlY3Rpb24ubWFwTWV0aG9kcyhLaW5ldGljLkNvbnRhaW5lcil9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe2EuZmlsbCgpfWZ1bmN0aW9uIGIoYSl7YS5zdHJva2UoKX1mdW5jdGlvbiBjKGEpe2EuZmlsbCgpfWZ1bmN0aW9uIGQoYSl7YS5zdHJva2UoKX1mdW5jdGlvbiBlKCl7dGhpcy5fY2xlYXJDYWNoZShmKX12YXIgZj1cImhhc1NoYWRvd1wiO0tpbmV0aWMuVXRpbC5hZGRNZXRob2RzKEtpbmV0aWMuU2hhcGUse19faW5pdDpmdW5jdGlvbihmKXt0aGlzLm5vZGVUeXBlPVwiU2hhcGVcIix0aGlzLl9maWxsRnVuYz1hLHRoaXMuX3N0cm9rZUZ1bmM9Yix0aGlzLl9maWxsRnVuY0hpdD1jLHRoaXMuX3N0cm9rZUZ1bmNIaXQ9ZDtmb3IodmFyIGcsaD1LaW5ldGljLnNoYXBlczs7KWlmKGc9S2luZXRpYy5VdGlsLmdldFJhbmRvbUNvbG9yKCksZyYmIShnIGluIGgpKWJyZWFrO3RoaXMuY29sb3JLZXk9ZyxoW2ddPXRoaXMsS2luZXRpYy5Ob2RlLmNhbGwodGhpcyxmKSx0aGlzLm9uKFwic2hhZG93Q29sb3JDaGFuZ2Uua2luZXRpYyBzaGFkb3dCbHVyQ2hhbmdlLmtpbmV0aWMgc2hhZG93T2Zmc2V0Q2hhbmdlLmtpbmV0aWMgc2hhZG93T3BhY2l0eUNoYW5nZS5raW5ldGljIHNoYWRvd0VuYWJsZWRDaGFuZ2Uua2luZXRpY1wiLGUpfSxoYXNDaGlsZHJlbjpmdW5jdGlvbigpe3JldHVybiExfSxnZXRDaGlsZHJlbjpmdW5jdGlvbigpe3JldHVybltdfSxnZXRDb250ZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0TGF5ZXIoKS5nZXRDb250ZXh0KCl9LGdldENhbnZhczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldExheWVyKCkuZ2V0Q2FudmFzKCl9LGhhc1NoYWRvdzpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRDYWNoZShmLHRoaXMuX2hhc1NoYWRvdyl9LF9oYXNTaGFkb3c6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTaGFkb3dFbmFibGVkKCkmJjAhPT10aGlzLmdldFNoYWRvd09wYWNpdHkoKSYmISEodGhpcy5nZXRTaGFkb3dDb2xvcigpfHx0aGlzLmdldFNoYWRvd0JsdXIoKXx8dGhpcy5nZXRTaGFkb3dPZmZzZXRYKCl8fHRoaXMuZ2V0U2hhZG93T2Zmc2V0WSgpKX0saGFzRmlsbDpmdW5jdGlvbigpe3JldHVybiEhKHRoaXMuZ2V0RmlsbCgpfHx0aGlzLmdldEZpbGxQYXR0ZXJuSW1hZ2UoKXx8dGhpcy5nZXRGaWxsTGluZWFyR3JhZGllbnRDb2xvclN0b3BzKCl8fHRoaXMuZ2V0RmlsbFJhZGlhbEdyYWRpZW50Q29sb3JTdG9wcygpKX0saGFzU3Ryb2tlOmZ1bmN0aW9uKCl7cmV0dXJuISEodGhpcy5zdHJva2UoKXx8dGhpcy5zdHJva2VSZWQoKXx8dGhpcy5zdHJva2VHcmVlbigpfHx0aGlzLnN0cm9rZUJsdWUoKSl9LF9nZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY2xhc3NOYW1lPT09YXx8dGhpcy5ub2RlVHlwZT09PWE/W3RoaXNdOltdfSxpbnRlcnNlY3RzOmZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcy5nZXRTdGFnZSgpLGQ9Yy5idWZmZXJIaXRDYW52YXM7cmV0dXJuIGQuZ2V0Q29udGV4dCgpLmNsZWFyKCksdGhpcy5kcmF3U2NlbmUoZCksYj1kLmNvbnRleHQuZ2V0SW1hZ2VEYXRhKE1hdGgucm91bmQoYS54KSxNYXRoLnJvdW5kKGEueSksMSwxKS5kYXRhLGJbM10+MH0sZGVzdHJveTpmdW5jdGlvbigpe0tpbmV0aWMuTm9kZS5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpLGRlbGV0ZSBLaW5ldGljLnNoYXBlc1t0aGlzLmNvbG9yS2V5XX0sX3VzZUJ1ZmZlckNhbnZhczpmdW5jdGlvbigpe3JldHVybih0aGlzLmhhc1NoYWRvdygpfHwxIT09dGhpcy5nZXRBYnNvbHV0ZU9wYWNpdHkoKSkmJnRoaXMuaGFzRmlsbCgpJiZ0aGlzLmhhc1N0cm9rZSgpJiZ0aGlzLmdldFN0YWdlKCl9LGRyYXdTY2VuZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPXRoaXMuZ2V0TGF5ZXIoKSxnPWF8fGYuZ2V0Q2FudmFzKCksaD1nLmdldENvbnRleHQoKSxpPXRoaXMuX2NhY2hlLmNhbnZhcyxqPXRoaXMuc2NlbmVGdW5jKCksaz10aGlzLmhhc1NoYWRvdygpO3JldHVybiB0aGlzLmlzVmlzaWJsZSgpJiYoaT90aGlzLl9kcmF3Q2FjaGVkU2NlbmVDYW52YXMoaCk6aiYmKGguc2F2ZSgpLHRoaXMuX3VzZUJ1ZmZlckNhbnZhcygpPyhjPXRoaXMuZ2V0U3RhZ2UoKSxkPWMuYnVmZmVyQ2FudmFzLGU9ZC5nZXRDb250ZXh0KCksZS5jbGVhcigpLGUuc2F2ZSgpLGUuX2FwcGx5TGluZUpvaW4odGhpcyksZi5fYXBwbHlUcmFuc2Zvcm0odGhpcyxlLGIpLGouY2FsbCh0aGlzLGUpLGUucmVzdG9yZSgpLGsmJihoLnNhdmUoKSxoLl9hcHBseVNoYWRvdyh0aGlzKSxoLmRyYXdJbWFnZShkLl9jYW52YXMsMCwwKSxoLnJlc3RvcmUoKSksaC5fYXBwbHlPcGFjaXR5KHRoaXMpLGguZHJhd0ltYWdlKGQuX2NhbnZhcywwLDApKTooaC5fYXBwbHlMaW5lSm9pbih0aGlzKSxmLl9hcHBseVRyYW5zZm9ybSh0aGlzLGgsYiksayYmKGguc2F2ZSgpLGguX2FwcGx5U2hhZG93KHRoaXMpLGouY2FsbCh0aGlzLGgpLGgucmVzdG9yZSgpKSxoLl9hcHBseU9wYWNpdHkodGhpcyksai5jYWxsKHRoaXMsaCkpLGgucmVzdG9yZSgpKSksdGhpc30sZHJhd0hpdDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0TGF5ZXIoKSxkPWF8fGMuaGl0Q2FudmFzLGU9ZC5nZXRDb250ZXh0KCksZj10aGlzLmhpdEZ1bmMoKXx8dGhpcy5zY2VuZUZ1bmMoKSxnPXRoaXMuX2NhY2hlLmNhbnZhcyxoPWcmJmcuaGl0O3JldHVybiB0aGlzLnNob3VsZERyYXdIaXQoKSYmKGg/dGhpcy5fZHJhd0NhY2hlZEhpdENhbnZhcyhlKTpmJiYoZS5zYXZlKCksZS5fYXBwbHlMaW5lSm9pbih0aGlzKSxjLl9hcHBseVRyYW5zZm9ybSh0aGlzLGUsYiksZi5jYWxsKHRoaXMsZSksZS5yZXN0b3JlKCkpKSx0aGlzfSxkcmF3SGl0RnJvbUNhY2hlOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGksaj1hfHwwLGs9dGhpcy5fY2FjaGUuY2FudmFzLGw9dGhpcy5fZ2V0Q2FjaGVkU2NlbmVDYW52YXMoKSxtPWwuZ2V0Q29udGV4dCgpLG49ay5oaXQsbz1uLmdldENvbnRleHQoKSxwPWwuZ2V0V2lkdGgoKSxxPWwuZ2V0SGVpZ2h0KCk7by5jbGVhcigpO3RyeXtmb3IoYj1tLmdldEltYWdlRGF0YSgwLDAscCxxKSxjPWIuZGF0YSxkPW8uZ2V0SW1hZ2VEYXRhKDAsMCxwLHEpLGU9ZC5kYXRhLGY9Yy5sZW5ndGgsZz1LaW5ldGljLlV0aWwuX2hleFRvUmdiKHRoaXMuY29sb3JLZXkpLGg9MDtmPmg7aCs9NClpPWNbaCszXSxpPmomJihlW2hdPWcucixlW2grMV09Zy5nLGVbaCsyXT1nLmIsZVtoKzNdPTI1NSk7by5wdXRJbWFnZURhdGEoZCwwLDApfWNhdGNoKHIpe0tpbmV0aWMuVXRpbC53YXJuKFwiVW5hYmxlIHRvIGRyYXcgaGl0IGdyYXBoIGZyb20gY2FjaGVkIHNjZW5lIGNhbnZhcy4gXCIrci5tZXNzYWdlKX1yZXR1cm4gdGhpc319KSxLaW5ldGljLlV0aWwuZXh0ZW5kKEtpbmV0aWMuU2hhcGUsS2luZXRpYy5Ob2RlKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJzdHJva2VcIiksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwic3Ryb2tlUmVkXCIsMCxLaW5ldGljLlZhbGlkYXRvcnMuUkdCQ29tcG9uZW50KSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJzdHJva2VHcmVlblwiLDAsS2luZXRpYy5WYWxpZGF0b3JzLlJHQkNvbXBvbmVudCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwic3Ryb2tlQmx1ZVwiLDAsS2luZXRpYy5WYWxpZGF0b3JzLlJHQkNvbXBvbmVudCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwic3Ryb2tlQWxwaGFcIiwxLEtpbmV0aWMuVmFsaWRhdG9ycy5hbHBoYUNvbXBvbmVudCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwic3Ryb2tlV2lkdGhcIiwyKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJsaW5lSm9pblwiKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJsaW5lQ2FwXCIpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcInNjZW5lRnVuY1wiKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJoaXRGdW5jXCIpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImRhc2hcIiksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwic2hhZG93Q29sb3JcIiksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwic2hhZG93UmVkXCIsMCxLaW5ldGljLlZhbGlkYXRvcnMuUkdCQ29tcG9uZW50KSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJzaGFkb3dHcmVlblwiLDAsS2luZXRpYy5WYWxpZGF0b3JzLlJHQkNvbXBvbmVudCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwic2hhZG93Qmx1ZVwiLDAsS2luZXRpYy5WYWxpZGF0b3JzLlJHQkNvbXBvbmVudCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwic2hhZG93QWxwaGFcIiwxLEtpbmV0aWMuVmFsaWRhdG9ycy5hbHBoYUNvbXBvbmVudCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwic2hhZG93Qmx1clwiKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJzaGFkb3dPcGFjaXR5XCIpLEtpbmV0aWMuRmFjdG9yeS5hZGRDb21wb25lbnRzR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJzaGFkb3dPZmZzZXRcIixbXCJ4XCIsXCJ5XCJdKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJzaGFkb3dPZmZzZXRYXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwic2hhZG93T2Zmc2V0WVwiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxQYXR0ZXJuSW1hZ2VcIiksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZmlsbFwiKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJmaWxsUmVkXCIsMCxLaW5ldGljLlZhbGlkYXRvcnMuUkdCQ29tcG9uZW50KSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJmaWxsR3JlZW5cIiwwLEtpbmV0aWMuVmFsaWRhdG9ycy5SR0JDb21wb25lbnQpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxCbHVlXCIsMCxLaW5ldGljLlZhbGlkYXRvcnMuUkdCQ29tcG9uZW50KSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJmaWxsQWxwaGFcIiwxLEtpbmV0aWMuVmFsaWRhdG9ycy5hbHBoYUNvbXBvbmVudCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZmlsbFBhdHRlcm5YXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZmlsbFBhdHRlcm5ZXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZmlsbExpbmVhckdyYWRpZW50Q29sb3JTdG9wc1wiKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJmaWxsUmFkaWFsR3JhZGllbnRTdGFydFJhZGl1c1wiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxSYWRpYWxHcmFkaWVudEVuZFJhZGl1c1wiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxSYWRpYWxHcmFkaWVudENvbG9yU3RvcHNcIiksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZmlsbFBhdHRlcm5SZXBlYXRcIixcInJlcGVhdFwiKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJmaWxsRW5hYmxlZFwiLCEwKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJzdHJva2VFbmFibGVkXCIsITApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcInNoYWRvd0VuYWJsZWRcIiwhMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZGFzaEVuYWJsZWRcIiwhMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwic3Ryb2tlU2NhbGVFbmFibGVkXCIsITApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxQcmlvcml0eVwiLFwiY29sb3JcIiksS2luZXRpYy5GYWN0b3J5LmFkZENvbXBvbmVudHNHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxQYXR0ZXJuT2Zmc2V0XCIsW1wieFwiLFwieVwiXSksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZmlsbFBhdHRlcm5PZmZzZXRYXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZmlsbFBhdHRlcm5PZmZzZXRZXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZENvbXBvbmVudHNHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxQYXR0ZXJuU2NhbGVcIixbXCJ4XCIsXCJ5XCJdKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJmaWxsUGF0dGVyblNjYWxlWFwiLDEpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxQYXR0ZXJuU2NhbGVZXCIsMSksS2luZXRpYy5GYWN0b3J5LmFkZENvbXBvbmVudHNHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxMaW5lYXJHcmFkaWVudFN0YXJ0UG9pbnRcIixbXCJ4XCIsXCJ5XCJdKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJmaWxsTGluZWFyR3JhZGllbnRTdGFydFBvaW50WFwiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxMaW5lYXJHcmFkaWVudFN0YXJ0UG9pbnRZXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZENvbXBvbmVudHNHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxMaW5lYXJHcmFkaWVudEVuZFBvaW50XCIsW1wieFwiLFwieVwiXSksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZmlsbExpbmVhckdyYWRpZW50RW5kUG9pbnRYXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZmlsbExpbmVhckdyYWRpZW50RW5kUG9pbnRZXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZENvbXBvbmVudHNHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxSYWRpYWxHcmFkaWVudFN0YXJ0UG9pbnRcIixbXCJ4XCIsXCJ5XCJdKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU2hhcGUsXCJmaWxsUmFkaWFsR3JhZGllbnRTdGFydFBvaW50WFwiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxSYWRpYWxHcmFkaWVudFN0YXJ0UG9pbnRZXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZENvbXBvbmVudHNHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TaGFwZSxcImZpbGxSYWRpYWxHcmFkaWVudEVuZFBvaW50XCIsW1wieFwiLFwieVwiXSksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZmlsbFJhZGlhbEdyYWRpZW50RW5kUG9pbnRYXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZmlsbFJhZGlhbEdyYWRpZW50RW5kUG9pbnRZXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlNoYXBlLFwiZmlsbFBhdHRlcm5Sb3RhdGlvblwiLDApLEtpbmV0aWMuRmFjdG9yeS5iYWNrQ29tcGF0KEtpbmV0aWMuU2hhcGUse2Rhc2hBcnJheTpcImRhc2hcIixnZXREYXNoQXJyYXk6XCJnZXREYXNoXCIsc2V0RGFzaEFycmF5OlwiZ2V0RGFzaFwiLGRyYXdGdW5jOlwic2NlbmVGdW5jXCIsZ2V0RHJhd0Z1bmM6XCJnZXRTY2VuZUZ1bmNcIixzZXREcmF3RnVuYzpcInNldFNjZW5lRnVuY1wiLGRyYXdIaXRGdW5jOlwiaGl0RnVuY1wiLGdldERyYXdIaXRGdW5jOlwiZ2V0SGl0RnVuY1wiLHNldERyYXdIaXRGdW5jOlwic2V0SGl0RnVuY1wifSksS2luZXRpYy5Db2xsZWN0aW9uLm1hcE1ldGhvZHMoS2luZXRpYy5TaGFwZSl9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYil7YS5jb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoYixmdW5jdGlvbihjKXthW0krYl0oYyl9LCExKX12YXIgYj1cIlN0YWdlXCIsYz1cInN0cmluZ1wiLGQ9XCJweFwiLGU9XCJtb3VzZW91dFwiLGY9XCJtb3VzZWxlYXZlXCIsZz1cIm1vdXNlb3ZlclwiLGg9XCJtb3VzZWVudGVyXCIsaT1cIm1vdXNlbW92ZVwiLGo9XCJtb3VzZWRvd25cIixrPVwibW91c2V1cFwiLGw9XCJjbGlja1wiLG09XCJkYmxjbGlja1wiLG49XCJ0b3VjaHN0YXJ0XCIsbz1cInRvdWNoZW5kXCIscD1cInRhcFwiLHE9XCJkYmx0YXBcIixyPVwidG91Y2htb3ZlXCIscz1cImNvbnRlbnRNb3VzZW91dFwiLHQ9XCJjb250ZW50TW91c2VvdmVyXCIsdT1cImNvbnRlbnRNb3VzZW1vdmVcIix2PVwiY29udGVudE1vdXNlZG93blwiLHc9XCJjb250ZW50TW91c2V1cFwiLHg9XCJjb250ZW50Q2xpY2tcIix5PVwiY29udGVudERibGNsaWNrXCIsej1cImNvbnRlbnRUb3VjaHN0YXJ0XCIsQT1cImNvbnRlbnRUb3VjaGVuZFwiLEI9XCJjb250ZW50RGJsdGFwXCIsQz1cImNvbnRlbnRUb3VjaG1vdmVcIixEPVwiZGl2XCIsRT1cInJlbGF0aXZlXCIsRj1cImlubGluZS1ibG9ja1wiLEc9XCJraW5ldGljanMtY29udGVudFwiLEg9XCIgXCIsST1cIl9cIixKPVwiY29udGFpbmVyXCIsSz1cIlwiLEw9W2osaSxrLGUsbixyLG8sZ10sTT1MLmxlbmd0aDtLaW5ldGljLlV0aWwuYWRkTWV0aG9kcyhLaW5ldGljLlN0YWdlLHtfX19pbml0OmZ1bmN0aW9uKGEpe3RoaXMubm9kZVR5cGU9YixLaW5ldGljLkNvbnRhaW5lci5jYWxsKHRoaXMsYSksdGhpcy5faWQ9S2luZXRpYy5pZENvdW50ZXIrKyx0aGlzLl9idWlsZERPTSgpLHRoaXMuX2JpbmRDb250ZW50RXZlbnRzKCksdGhpcy5fZW5hYmxlTmVzdGVkVHJhbnNmb3Jtcz0hMSxLaW5ldGljLnN0YWdlcy5wdXNoKHRoaXMpfSxfdmFsaWRhdGVBZGQ6ZnVuY3Rpb24oYSl7XCJMYXllclwiIT09YS5nZXRUeXBlKCkmJktpbmV0aWMuVXRpbC5lcnJvcihcIllvdSBtYXkgb25seSBhZGQgbGF5ZXJzIHRvIHRoZSBzdGFnZS5cIil9LHNldENvbnRhaW5lcjpmdW5jdGlvbihhKXtpZih0eXBlb2YgYT09PWMpe3ZhciBiPWE7aWYoYT1LaW5ldGljLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEpLCFhKXRocm93XCJDYW4gbm90IGZpbmQgY29udGFpbmVyIGluIGRvY3VtZW50IHdpdGggaWQgXCIrYn1yZXR1cm4gdGhpcy5fc2V0QXR0cihKLGEpLHRoaXN9LHNob3VsZERyYXdIaXQ6ZnVuY3Rpb24oKXtyZXR1cm4hMH0sZHJhdzpmdW5jdGlvbigpe3JldHVybiBLaW5ldGljLk5vZGUucHJvdG90eXBlLmRyYXcuY2FsbCh0aGlzKSx0aGlzfSxzZXRIZWlnaHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEtpbmV0aWMuTm9kZS5wcm90b3R5cGUuc2V0SGVpZ2h0LmNhbGwodGhpcyxhKSx0aGlzLl9yZXNpemVET00oKSx0aGlzfSxzZXRXaWR0aDpmdW5jdGlvbihhKXtyZXR1cm4gS2luZXRpYy5Ob2RlLnByb3RvdHlwZS5zZXRXaWR0aC5jYWxsKHRoaXMsYSksdGhpcy5fcmVzaXplRE9NKCksdGhpc30sY2xlYXI6ZnVuY3Rpb24oKXt2YXIgYSxiPXRoaXMuY2hpbGRyZW4sYz1iLmxlbmd0aDtmb3IoYT0wO2M+YTthKyspYlthXS5jbGVhcigpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihhKXtyZXR1cm4gYXx8KGE9e30pLGEuY29udGFpbmVyPUtpbmV0aWMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChEKSxLaW5ldGljLkNvbnRhaW5lci5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzLGEpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jb250ZW50O0tpbmV0aWMuQ29udGFpbmVyLnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyksYSYmS2luZXRpYy5VdGlsLl9pc0luRG9jdW1lbnQoYSkmJnRoaXMuZ2V0Q29udGFpbmVyKCkucmVtb3ZlQ2hpbGQoYSk7dmFyIGI9S2luZXRpYy5zdGFnZXMuaW5kZXhPZih0aGlzKTtiPi0xJiZLaW5ldGljLnN0YWdlcy5zcGxpY2UoYiwxKX0sZ2V0UG9pbnRlclBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9pbnRlclBvc30sZ2V0U3RhZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sZ2V0Q29udGVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnR9LHRvRGF0YVVSTDpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGUpe3ZhciBmPWlbZV0saj1mLnRvRGF0YVVSTCgpLGs9bmV3IEtpbmV0aWMud2luZG93LkltYWdlO2sub25sb2FkPWZ1bmN0aW9uKCl7aC5kcmF3SW1hZ2UoaywwLDApLGU8aS5sZW5ndGgtMT9iKGUrMSk6YS5jYWxsYmFjayhnLnRvRGF0YVVSTChjLGQpKX0say5zcmM9an1hPWF8fHt9O3ZhciBjPWEubWltZVR5cGV8fG51bGwsZD1hLnF1YWxpdHl8fG51bGwsZT1hLnh8fDAsZj1hLnl8fDAsZz1uZXcgS2luZXRpYy5TY2VuZUNhbnZhcyh7d2lkdGg6YS53aWR0aHx8dGhpcy5nZXRXaWR0aCgpLGhlaWdodDphLmhlaWdodHx8dGhpcy5nZXRIZWlnaHQoKSxwaXhlbFJhdGlvOjF9KSxoPWcuZ2V0Q29udGV4dCgpLl9jb250ZXh0LGk9dGhpcy5jaGlsZHJlbjsoZXx8ZikmJmgudHJhbnNsYXRlKC0xKmUsLTEqZiksYigwKX0sdG9JbWFnZTpmdW5jdGlvbihhKXt2YXIgYj1hLmNhbGxiYWNrO2EuY2FsbGJhY2s9ZnVuY3Rpb24oYSl7S2luZXRpYy5VdGlsLl9nZXRJbWFnZShhLGZ1bmN0aW9uKGEpe2IoYSl9KX0sdGhpcy50b0RhdGFVUkwoYSl9LGdldEludGVyc2VjdGlvbjpmdW5jdGlvbihhKXt2YXIgYixjLGQ9dGhpcy5nZXRDaGlsZHJlbigpLGU9ZC5sZW5ndGgsZj1lLTE7Zm9yKGI9ZjtiPj0wO2ItLSlpZihjPWRbYl0uZ2V0SW50ZXJzZWN0aW9uKGEpKXJldHVybiBjO3JldHVybiBudWxsfSxfcmVzaXplRE9NOmZ1bmN0aW9uKCl7aWYodGhpcy5jb250ZW50KXt2YXIgYSxiLGM9dGhpcy5nZXRXaWR0aCgpLGU9dGhpcy5nZXRIZWlnaHQoKSxmPXRoaXMuZ2V0Q2hpbGRyZW4oKSxnPWYubGVuZ3RoO2Zvcih0aGlzLmNvbnRlbnQuc3R5bGUud2lkdGg9YytkLHRoaXMuY29udGVudC5zdHlsZS5oZWlnaHQ9ZStkLHRoaXMuYnVmZmVyQ2FudmFzLnNldFNpemUoYyxlKSx0aGlzLmJ1ZmZlckhpdENhbnZhcy5zZXRTaXplKGMsZSksYT0wO2c+YTthKyspYj1mW2FdLGIuZ2V0Q2FudmFzKCkuc2V0U2l6ZShjLGUpLGIuaGl0Q2FudmFzLnNldFNpemUoYyxlKSxiLmRyYXcoKX19LGFkZDpmdW5jdGlvbihhKXtpZighKGFyZ3VtZW50cy5sZW5ndGg+MSkpcmV0dXJuIEtpbmV0aWMuQ29udGFpbmVyLnByb3RvdHlwZS5hZGQuY2FsbCh0aGlzLGEpLGEuX3NldENhbnZhc1NpemUodGhpcy53aWR0aCgpLHRoaXMuaGVpZ2h0KCkpLGEuZHJhdygpLHRoaXMuY29udGVudC5hcHBlbmRDaGlsZChhLmNhbnZhcy5fY2FudmFzKSx0aGlzO2Zvcih2YXIgYj0wO2I8YXJndW1lbnRzLmxlbmd0aDtiKyspdGhpcy5hZGQoYXJndW1lbnRzW2JdKX0sZ2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LGdldExheWVyOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LGdldExheWVyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldENoaWxkcmVuKCl9LF9iaW5kQ29udGVudEV2ZW50czpmdW5jdGlvbigpe2Zvcih2YXIgYj0wO00+YjtiKyspYSh0aGlzLExbYl0pfSxfbW91c2VvdmVyOmZ1bmN0aW9uKGEpe0tpbmV0aWMuVUEubW9iaWxlfHwodGhpcy5fc2V0UG9pbnRlclBvc2l0aW9uKGEpLHRoaXMuX2ZpcmUodCx7ZXZ0OmF9KSl9LF9tb3VzZW91dDpmdW5jdGlvbihhKXtpZighS2luZXRpYy5VQS5tb2JpbGUpe3RoaXMuX3NldFBvaW50ZXJQb3NpdGlvbihhKTt2YXIgYj10aGlzLnRhcmdldFNoYXBlO2ImJiFLaW5ldGljLmlzRHJhZ2dpbmcoKSYmKGIuX2ZpcmVBbmRCdWJibGUoZSx7ZXZ0OmF9KSxiLl9maXJlQW5kQnViYmxlKGYse2V2dDphfSksdGhpcy50YXJnZXRTaGFwZT1udWxsKSx0aGlzLnBvaW50ZXJQb3M9dm9pZCAwLHRoaXMuX2ZpcmUocyx7ZXZ0OmF9KX19LF9tb3VzZW1vdmU6ZnVuY3Rpb24oYSl7aWYoIUtpbmV0aWMuVUEubW9iaWxlKXt0aGlzLl9zZXRQb2ludGVyUG9zaXRpb24oYSk7dmFyIGI9S2luZXRpYy5ERCxjPXRoaXMuZ2V0SW50ZXJzZWN0aW9uKHRoaXMuZ2V0UG9pbnRlclBvc2l0aW9uKCkpO2MmJmMuaXNMaXN0ZW5pbmcoKT9LaW5ldGljLmlzRHJhZ2dpbmcoKXx8dGhpcy50YXJnZXRTaGFwZSYmdGhpcy50YXJnZXRTaGFwZS5faWQ9PT1jLl9pZD9jLl9maXJlQW5kQnViYmxlKGkse2V2dDphfSk6KHRoaXMudGFyZ2V0U2hhcGUmJih0aGlzLnRhcmdldFNoYXBlLl9maXJlQW5kQnViYmxlKGUse2V2dDphfSxjKSx0aGlzLnRhcmdldFNoYXBlLl9maXJlQW5kQnViYmxlKGYse2V2dDphfSxjKSksYy5fZmlyZUFuZEJ1YmJsZShnLHtldnQ6YX0sdGhpcy50YXJnZXRTaGFwZSksYy5fZmlyZUFuZEJ1YmJsZShoLHtldnQ6YX0sdGhpcy50YXJnZXRTaGFwZSksdGhpcy50YXJnZXRTaGFwZT1jKTp0aGlzLnRhcmdldFNoYXBlJiYhS2luZXRpYy5pc0RyYWdnaW5nKCkmJih0aGlzLnRhcmdldFNoYXBlLl9maXJlQW5kQnViYmxlKGUse2V2dDphfSksdGhpcy50YXJnZXRTaGFwZS5fZmlyZUFuZEJ1YmJsZShmLHtldnQ6YX0pLHRoaXMudGFyZ2V0U2hhcGU9bnVsbCksdGhpcy5fZmlyZSh1LHtldnQ6YX0pLGImJmIuX2RyYWcoYSl9YS5wcmV2ZW50RGVmYXVsdCYmYS5wcmV2ZW50RGVmYXVsdCgpfSxfbW91c2Vkb3duOmZ1bmN0aW9uKGEpe2lmKCFLaW5ldGljLlVBLm1vYmlsZSl7dGhpcy5fc2V0UG9pbnRlclBvc2l0aW9uKGEpO3ZhciBiPXRoaXMuZ2V0SW50ZXJzZWN0aW9uKHRoaXMuZ2V0UG9pbnRlclBvc2l0aW9uKCkpO0tpbmV0aWMubGlzdGVuQ2xpY2tUYXA9ITAsYiYmYi5pc0xpc3RlbmluZygpJiYodGhpcy5jbGlja1N0YXJ0U2hhcGU9YixiLl9maXJlQW5kQnViYmxlKGose2V2dDphfSkpLHRoaXMuX2ZpcmUodix7ZXZ0OmF9KX1hLnByZXZlbnREZWZhdWx0JiZhLnByZXZlbnREZWZhdWx0KCl9LF9tb3VzZXVwOmZ1bmN0aW9uKGEpe2lmKCFLaW5ldGljLlVBLm1vYmlsZSl7dGhpcy5fc2V0UG9pbnRlclBvc2l0aW9uKGEpO3ZhciBiPXRoaXMuZ2V0SW50ZXJzZWN0aW9uKHRoaXMuZ2V0UG9pbnRlclBvc2l0aW9uKCkpLGM9dGhpcy5jbGlja1N0YXJ0U2hhcGUsZD0hMTtLaW5ldGljLmluRGJsQ2xpY2tXaW5kb3c/KGQ9ITAsS2luZXRpYy5pbkRibENsaWNrV2luZG93PSExKTpLaW5ldGljLmluRGJsQ2xpY2tXaW5kb3c9ITAsc2V0VGltZW91dChmdW5jdGlvbigpe0tpbmV0aWMuaW5EYmxDbGlja1dpbmRvdz0hMX0sS2luZXRpYy5kYmxDbGlja1dpbmRvdyksYiYmYi5pc0xpc3RlbmluZygpJiYoYi5fZmlyZUFuZEJ1YmJsZShrLHtldnQ6YX0pLEtpbmV0aWMubGlzdGVuQ2xpY2tUYXAmJmMmJmMuX2lkPT09Yi5faWQmJihiLl9maXJlQW5kQnViYmxlKGwse2V2dDphfSksZCYmYi5fZmlyZUFuZEJ1YmJsZShtLHtldnQ6YX0pKSksdGhpcy5fZmlyZSh3LHtldnQ6YX0pLEtpbmV0aWMubGlzdGVuQ2xpY2tUYXAmJih0aGlzLl9maXJlKHgse2V2dDphfSksZCYmdGhpcy5fZmlyZSh5LHtldnQ6YX0pKSxLaW5ldGljLmxpc3RlbkNsaWNrVGFwPSExfWEucHJldmVudERlZmF1bHQmJmEucHJldmVudERlZmF1bHQoKX0sX3RvdWNoc3RhcnQ6ZnVuY3Rpb24oYSl7dGhpcy5fc2V0UG9pbnRlclBvc2l0aW9uKGEpO3ZhciBiPXRoaXMuZ2V0SW50ZXJzZWN0aW9uKHRoaXMuZ2V0UG9pbnRlclBvc2l0aW9uKCkpO0tpbmV0aWMubGlzdGVuQ2xpY2tUYXA9ITAsYiYmYi5pc0xpc3RlbmluZygpJiYodGhpcy50YXBTdGFydFNoYXBlPWIsYi5fZmlyZUFuZEJ1YmJsZShuLHtldnQ6YX0pLGIuaXNMaXN0ZW5pbmcoKSYmYS5wcmV2ZW50RGVmYXVsdCYmYS5wcmV2ZW50RGVmYXVsdCgpKSx0aGlzLl9maXJlKHose2V2dDphfSl9LF90b3VjaGVuZDpmdW5jdGlvbihhKXt0aGlzLl9zZXRQb2ludGVyUG9zaXRpb24oYSk7dmFyIGI9dGhpcy5nZXRJbnRlcnNlY3Rpb24odGhpcy5nZXRQb2ludGVyUG9zaXRpb24oKSksYz0hMTtLaW5ldGljLmluRGJsQ2xpY2tXaW5kb3c/KGM9ITAsS2luZXRpYy5pbkRibENsaWNrV2luZG93PSExKTpLaW5ldGljLmluRGJsQ2xpY2tXaW5kb3c9ITAsc2V0VGltZW91dChmdW5jdGlvbigpe0tpbmV0aWMuaW5EYmxDbGlja1dpbmRvdz0hMX0sS2luZXRpYy5kYmxDbGlja1dpbmRvdyksYiYmYi5pc0xpc3RlbmluZygpJiYoYi5fZmlyZUFuZEJ1YmJsZShvLHtldnQ6YX0pLEtpbmV0aWMubGlzdGVuQ2xpY2tUYXAmJmIuX2lkPT09dGhpcy50YXBTdGFydFNoYXBlLl9pZCYmKGIuX2ZpcmVBbmRCdWJibGUocCx7ZXZ0OmF9KSxjJiZiLl9maXJlQW5kQnViYmxlKHEse2V2dDphfSkpLGIuaXNMaXN0ZW5pbmcoKSYmYS5wcmV2ZW50RGVmYXVsdCYmYS5wcmV2ZW50RGVmYXVsdCgpKSxLaW5ldGljLmxpc3RlbkNsaWNrVGFwJiYodGhpcy5fZmlyZShBLHtldnQ6YX0pLGMmJnRoaXMuX2ZpcmUoQix7ZXZ0OmF9KSksS2luZXRpYy5saXN0ZW5DbGlja1RhcD0hMX0sX3RvdWNobW92ZTpmdW5jdGlvbihhKXt0aGlzLl9zZXRQb2ludGVyUG9zaXRpb24oYSk7dmFyIGI9S2luZXRpYy5ERCxjPXRoaXMuZ2V0SW50ZXJzZWN0aW9uKHRoaXMuZ2V0UG9pbnRlclBvc2l0aW9uKCkpO2MmJmMuaXNMaXN0ZW5pbmcoKSYmKGMuX2ZpcmVBbmRCdWJibGUocix7ZXZ0OmF9KSxjLmlzTGlzdGVuaW5nKCkmJmEucHJldmVudERlZmF1bHQmJmEucHJldmVudERlZmF1bHQoKSksdGhpcy5fZmlyZShDLHtldnQ6YX0pLGImJmIuX2RyYWcoYSl9LF9zZXRQb2ludGVyUG9zaXRpb246ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLl9nZXRDb250ZW50UG9zaXRpb24oKSxkPWEub2Zmc2V0WCxlPWEuY2xpZW50WCxmPW51bGwsZz1udWxsO2E9YT9hOndpbmRvdy5ldmVudCx2b2lkIDAhPT1hLnRvdWNoZXM/YS50b3VjaGVzLmxlbmd0aD4wJiYoYj1hLnRvdWNoZXNbMF0sZj1iLmNsaWVudFgtYy5sZWZ0LGc9Yi5jbGllbnRZLWMudG9wKTp2b2lkIDAhPT1kPyhmPWQsZz1hLm9mZnNldFkpOlwibW96aWxsYVwiPT09S2luZXRpYy5VQS5icm93c2VyPyhmPWEubGF5ZXJYLGc9YS5sYXllclkpOnZvaWQgMCE9PWUmJmMmJihmPWUtYy5sZWZ0LGc9YS5jbGllbnRZLWMudG9wKSxudWxsIT09ZiYmbnVsbCE9PWcmJih0aGlzLnBvaW50ZXJQb3M9e3g6Zix5Omd9KX0sX2dldENvbnRlbnRQb3NpdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY29udGVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3Q/dGhpcy5jb250ZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOnt0b3A6MCxsZWZ0OjB9O3JldHVybnt0b3A6YS50b3AsbGVmdDphLmxlZnR9fSxfYnVpbGRET006ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldENvbnRhaW5lcigpO2lmKCFhKXtpZihLaW5ldGljLlV0aWwuaXNCcm93c2VyKCkpdGhyb3dcIlN0YWdlIGhhcyBub3QgY29udGFpbmVyLiBCdXQgY29udGFpbmVyIGlzIHJlcXVpcmVkXCI7YT1LaW5ldGljLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoRCl9YS5pbm5lckhUTUw9Syx0aGlzLmNvbnRlbnQ9S2luZXRpYy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KEQpLHRoaXMuY29udGVudC5zdHlsZS5wb3NpdGlvbj1FLHRoaXMuY29udGVudC5zdHlsZS5kaXNwbGF5PUYsdGhpcy5jb250ZW50LmNsYXNzTmFtZT1HLHRoaXMuY29udGVudC5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJwcmVzZW50YXRpb25cIiksYS5hcHBlbmRDaGlsZCh0aGlzLmNvbnRlbnQpLHRoaXMuYnVmZmVyQ2FudmFzPW5ldyBLaW5ldGljLlNjZW5lQ2FudmFzKHtwaXhlbFJhdGlvOjF9KSx0aGlzLmJ1ZmZlckhpdENhbnZhcz1uZXcgS2luZXRpYy5IaXRDYW52YXMsdGhpcy5fcmVzaXplRE9NKCl9LF9vbkNvbnRlbnQ6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9YS5zcGxpdChIKSxmPWUubGVuZ3RoO2ZvcihjPTA7Zj5jO2MrKylkPWVbY10sdGhpcy5jb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoZCxiLCExKX0sY2FjaGU6ZnVuY3Rpb24oKXtLaW5ldGljLlV0aWwud2FybihcIkNhY2hlIGZ1bmN0aW9uIGlzIG5vdCBhbGxvd2VkIGZvciBzdGFnZS4gWW91IG1heSB1c2UgY2FjaGUgb25seSBmb3IgbGF5ZXJzLCBncm91cHMgYW5kIHNoYXBlcy5cIil9LGNsZWFyQ2FjaGU6ZnVuY3Rpb24oKXt9fSksS2luZXRpYy5VdGlsLmV4dGVuZChLaW5ldGljLlN0YWdlLEtpbmV0aWMuQ29udGFpbmVyKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyKEtpbmV0aWMuU3RhZ2UsXCJjb250YWluZXJcIiksS2luZXRpYy5GYWN0b3J5LmFkZE92ZXJsb2FkZWRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TdGFnZSxcImNvbnRhaW5lclwiKX0oKSxmdW5jdGlvbigpe0tpbmV0aWMuVXRpbC5hZGRNZXRob2RzKEtpbmV0aWMuQmFzZUxheWVyLHtfX19pbml0OmZ1bmN0aW9uKGEpe3RoaXMubm9kZVR5cGU9XCJMYXllclwiLEtpbmV0aWMuQ29udGFpbmVyLmNhbGwodGhpcyxhKX0sY3JlYXRlUE5HU3RyZWFtOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FudmFzLl9jYW52YXMuY3JlYXRlUE5HU3RyZWFtKCl9LGdldENhbnZhczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNhbnZhc30sZ2V0SGl0Q2FudmFzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGl0Q2FudmFzfSxnZXRDb250ZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0Q2FudmFzKCkuZ2V0Q29udGV4dCgpfSxjbGVhcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRDb250ZXh0KCkuY2xlYXIoYSksdGhpcy5nZXRIaXRDYW52YXMoKS5nZXRDb250ZXh0KCkuY2xlYXIoYSksdGhpc30sc2V0WkluZGV4OmZ1bmN0aW9uKGEpe0tpbmV0aWMuTm9kZS5wcm90b3R5cGUuc2V0WkluZGV4LmNhbGwodGhpcyxhKTt2YXIgYj10aGlzLmdldFN0YWdlKCk7cmV0dXJuIGImJihiLmNvbnRlbnQucmVtb3ZlQ2hpbGQodGhpcy5nZXRDYW52YXMoKS5fY2FudmFzKSxhPGIuZ2V0Q2hpbGRyZW4oKS5sZW5ndGgtMT9iLmNvbnRlbnQuaW5zZXJ0QmVmb3JlKHRoaXMuZ2V0Q2FudmFzKCkuX2NhbnZhcyxiLmdldENoaWxkcmVuKClbYSsxXS5nZXRDYW52YXMoKS5fY2FudmFzKTpiLmNvbnRlbnQuYXBwZW5kQ2hpbGQodGhpcy5nZXRDYW52YXMoKS5fY2FudmFzKSksdGhpc30sbW92ZVRvVG9wOmZ1bmN0aW9uKCl7S2luZXRpYy5Ob2RlLnByb3RvdHlwZS5tb3ZlVG9Ub3AuY2FsbCh0aGlzKTt2YXIgYT10aGlzLmdldFN0YWdlKCk7YSYmKGEuY29udGVudC5yZW1vdmVDaGlsZCh0aGlzLmdldENhbnZhcygpLl9jYW52YXMpLGEuY29udGVudC5hcHBlbmRDaGlsZCh0aGlzLmdldENhbnZhcygpLl9jYW52YXMpKX0sbW92ZVVwOmZ1bmN0aW9uKCl7aWYoS2luZXRpYy5Ob2RlLnByb3RvdHlwZS5tb3ZlVXAuY2FsbCh0aGlzKSl7dmFyIGE9dGhpcy5nZXRTdGFnZSgpO2EmJihhLmNvbnRlbnQucmVtb3ZlQ2hpbGQodGhpcy5nZXRDYW52YXMoKS5fY2FudmFzKSx0aGlzLmluZGV4PGEuZ2V0Q2hpbGRyZW4oKS5sZW5ndGgtMT9hLmNvbnRlbnQuaW5zZXJ0QmVmb3JlKHRoaXMuZ2V0Q2FudmFzKCkuX2NhbnZhcyxhLmdldENoaWxkcmVuKClbdGhpcy5pbmRleCsxXS5nZXRDYW52YXMoKS5fY2FudmFzKTphLmNvbnRlbnQuYXBwZW5kQ2hpbGQodGhpcy5nZXRDYW52YXMoKS5fY2FudmFzKSl9fSxtb3ZlRG93bjpmdW5jdGlvbigpe2lmKEtpbmV0aWMuTm9kZS5wcm90b3R5cGUubW92ZURvd24uY2FsbCh0aGlzKSl7dmFyIGE9dGhpcy5nZXRTdGFnZSgpO2lmKGEpe3ZhciBiPWEuZ2V0Q2hpbGRyZW4oKTthLmNvbnRlbnQucmVtb3ZlQ2hpbGQodGhpcy5nZXRDYW52YXMoKS5fY2FudmFzKSxhLmNvbnRlbnQuaW5zZXJ0QmVmb3JlKHRoaXMuZ2V0Q2FudmFzKCkuX2NhbnZhcyxiW3RoaXMuaW5kZXgrMV0uZ2V0Q2FudmFzKCkuX2NhbnZhcyl9fX0sbW92ZVRvQm90dG9tOmZ1bmN0aW9uKCl7aWYoS2luZXRpYy5Ob2RlLnByb3RvdHlwZS5tb3ZlVG9Cb3R0b20uY2FsbCh0aGlzKSl7dmFyIGE9dGhpcy5nZXRTdGFnZSgpO2lmKGEpe3ZhciBiPWEuZ2V0Q2hpbGRyZW4oKTthLmNvbnRlbnQucmVtb3ZlQ2hpbGQodGhpcy5nZXRDYW52YXMoKS5fY2FudmFzKSxhLmNvbnRlbnQuaW5zZXJ0QmVmb3JlKHRoaXMuZ2V0Q2FudmFzKCkuX2NhbnZhcyxiWzFdLmdldENhbnZhcygpLl9jYW52YXMpfX19LGdldExheWVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0Q2FudmFzKCkuX2NhbnZhcztyZXR1cm4gS2luZXRpYy5Ob2RlLnByb3RvdHlwZS5yZW1vdmUuY2FsbCh0aGlzKSxhJiZhLnBhcmVudE5vZGUmJktpbmV0aWMuVXRpbC5faXNJbkRvY3VtZW50KGEpJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSksdGhpc30sZ2V0U3RhZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnR9fSksS2luZXRpYy5VdGlsLmV4dGVuZChLaW5ldGljLkJhc2VMYXllcixLaW5ldGljLkNvbnRhaW5lciksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLkJhc2VMYXllcixcImNsZWFyQmVmb3JlRHJhd1wiLCEwKSxLaW5ldGljLkNvbGxlY3Rpb24ubWFwTWV0aG9kcyhLaW5ldGljLkJhc2VMYXllcil9KCksZnVuY3Rpb24oKXt2YXIgYT1cIiNcIixiPVwiYmVmb3JlRHJhd1wiLGM9XCJkcmF3XCIsZD1be3g6MCx5OjB9LHt4Oi0xLHk6MH0se3g6LTEseTotMX0se3g6MCx5Oi0xfSx7eDoxLHk6LTF9LHt4OjEseTowfSx7eDoxLHk6MX0se3g6MCx5OjF9LHt4Oi0xLHk6MX1dLGU9ZC5sZW5ndGg7S2luZXRpYy5VdGlsLmFkZE1ldGhvZHMoS2luZXRpYy5MYXllcix7X19fX2luaXQ6ZnVuY3Rpb24oYSl7dGhpcy5ub2RlVHlwZT1cIkxheWVyXCIsdGhpcy5jYW52YXM9bmV3IEtpbmV0aWMuU2NlbmVDYW52YXMsdGhpcy5oaXRDYW52YXM9bmV3IEtpbmV0aWMuSGl0Q2FudmFzLEtpbmV0aWMuQmFzZUxheWVyLmNhbGwodGhpcyxhKX0sX3NldENhbnZhc1NpemU6ZnVuY3Rpb24oYSxiKXt0aGlzLmNhbnZhcy5zZXRTaXplKGEsYiksdGhpcy5oaXRDYW52YXMuc2V0U2l6ZShhLGIpfSxfdmFsaWRhdGVBZGQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRUeXBlKCk7XCJHcm91cFwiIT09YiYmXCJTaGFwZVwiIT09YiYmS2luZXRpYy5VdGlsLmVycm9yKFwiWW91IG1heSBvbmx5IGFkZCBncm91cHMgYW5kIHNoYXBlcyB0byBhIGxheWVyLlwiKX0sZ2V0SW50ZXJzZWN0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZixnO2lmKCF0aGlzLmhpdEdyYXBoRW5hYmxlZCgpfHwhdGhpcy5pc1Zpc2libGUoKSlyZXR1cm4gbnVsbDtmb3IoYz0wO2U+YztjKyspe2lmKGY9ZFtjXSxiPXRoaXMuX2dldEludGVyc2VjdGlvbih7eDphLngrZi54LHk6YS55K2YueX0pLGc9Yi5zaGFwZSlyZXR1cm4gZztpZighYi5hbnRpYWxpYXNlZClyZXR1cm4gbnVsbH19LF9nZXRJbnRlcnNlY3Rpb246ZnVuY3Rpb24oYil7dmFyIGMsZCxlPXRoaXMuaGl0Q2FudmFzLmNvbnRleHQuX2NvbnRleHQuZ2V0SW1hZ2VEYXRhKGIueCxiLnksMSwxKS5kYXRhLGY9ZVszXTtyZXR1cm4gMjU1PT09Zj8oYz1LaW5ldGljLlV0aWwuX3JnYlRvSGV4KGVbMF0sZVsxXSxlWzJdKSxkPUtpbmV0aWMuc2hhcGVzW2ErY10se3NoYXBlOmR9KTpmPjA/e2FudGlhbGlhc2VkOiEwfTp7fX0sZHJhd1NjZW5lOmZ1bmN0aW9uKGEsZCl7dmFyIGU9dGhpcy5nZXRMYXllcigpLGY9YXx8ZSYmZS5nZXRDYW52YXMoKTtyZXR1cm4gdGhpcy5fZmlyZShiLHtub2RlOnRoaXN9KSx0aGlzLmdldENsZWFyQmVmb3JlRHJhdygpJiZmLmdldENvbnRleHQoKS5jbGVhcigpLEtpbmV0aWMuQ29udGFpbmVyLnByb3RvdHlwZS5kcmF3U2NlbmUuY2FsbCh0aGlzLGYsZCksdGhpcy5fZmlyZShjLHtub2RlOnRoaXN9KSx0aGlzfSxfYXBwbHlUcmFuc2Zvcm06ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEuZ2V0QWJzb2x1dGVUcmFuc2Zvcm0oYykuZ2V0TWF0cml4KCk7Yi50cmFuc2Zvcm0oZFswXSxkWzFdLGRbMl0sZFszXSxkWzRdLGRbNV0pfSxkcmF3SGl0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRMYXllcigpLGQ9YXx8YyYmYy5oaXRDYW52YXM7cmV0dXJuIGMmJmMuZ2V0Q2xlYXJCZWZvcmVEcmF3KCkmJmMuZ2V0SGl0Q2FudmFzKCkuZ2V0Q29udGV4dCgpLmNsZWFyKCksS2luZXRpYy5Db250YWluZXIucHJvdG90eXBlLmRyYXdIaXQuY2FsbCh0aGlzLGQsYiksdGhpc30sY2xlYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0Q29udGV4dCgpLmNsZWFyKGEpLHRoaXMuZ2V0SGl0Q2FudmFzKCkuZ2V0Q29udGV4dCgpLmNsZWFyKGEpLHRoaXN9LHNldFZpc2libGU6ZnVuY3Rpb24oYSl7cmV0dXJuIEtpbmV0aWMuTm9kZS5wcm90b3R5cGUuc2V0VmlzaWJsZS5jYWxsKHRoaXMsYSksYT8odGhpcy5nZXRDYW52YXMoKS5fY2FudmFzLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiLHRoaXMuaGl0Q2FudmFzLl9jYW52YXMuc3R5bGUuZGlzcGxheT1cImJsb2NrXCIpOih0aGlzLmdldENhbnZhcygpLl9jYW52YXMuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0aGlzLmhpdENhbnZhcy5fY2FudmFzLnN0eWxlLmRpc3BsYXk9XCJub25lXCIpLHRoaXN9LGVuYWJsZUhpdEdyYXBoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0SGl0R3JhcGhFbmFibGVkKCEwKSx0aGlzfSxkaXNhYmxlSGl0R3JhcGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXRIaXRHcmFwaEVuYWJsZWQoITEpLHRoaXN9fSksS2luZXRpYy5VdGlsLmV4dGVuZChLaW5ldGljLkxheWVyLEtpbmV0aWMuQmFzZUxheWVyKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuTGF5ZXIsXCJoaXRHcmFwaEVuYWJsZWRcIiwhMCksS2luZXRpYy5Db2xsZWN0aW9uLm1hcE1ldGhvZHMoS2luZXRpYy5MYXllcil9KCksZnVuY3Rpb24oKXtLaW5ldGljLlV0aWwuYWRkTWV0aG9kcyhLaW5ldGljLkZhc3RMYXllcix7X19fX2luaXQ6ZnVuY3Rpb24oYSl7dGhpcy5ub2RlVHlwZT1cIkxheWVyXCIsdGhpcy5jYW52YXM9bmV3IEtpbmV0aWMuU2NlbmVDYW52YXMsS2luZXRpYy5CYXNlTGF5ZXIuY2FsbCh0aGlzLGEpfSxfdmFsaWRhdGVBZGQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRUeXBlKCk7XCJTaGFwZVwiIT09YiYmS2luZXRpYy5VdGlsLmVycm9yKFwiWW91IG1heSBvbmx5IGFkZCBzaGFwZXMgdG8gYSBmYXN0IGxheWVyLlwiKX0sX3NldENhbnZhc1NpemU6ZnVuY3Rpb24oYSxiKXt0aGlzLmNhbnZhcy5zZXRTaXplKGEsYil9LGhpdEdyYXBoRW5hYmxlZDpmdW5jdGlvbigpe3JldHVybiExfSxnZXRJbnRlcnNlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sZHJhd1NjZW5lOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0TGF5ZXIoKSxjPWF8fGImJmIuZ2V0Q2FudmFzKCk7cmV0dXJuIHRoaXMuZ2V0Q2xlYXJCZWZvcmVEcmF3KCkmJmMuZ2V0Q29udGV4dCgpLmNsZWFyKCksS2luZXRpYy5Db250YWluZXIucHJvdG90eXBlLmRyYXdTY2VuZS5jYWxsKHRoaXMsYyksdGhpc30sX2FwcGx5VHJhbnNmb3JtOmZ1bmN0aW9uKGEsYixjKXtpZighY3x8Yy5faWQhPT10aGlzLl9pZCl7dmFyIGQ9YS5nZXRUcmFuc2Zvcm0oKS5nZXRNYXRyaXgoKTtiLnRyYW5zZm9ybShkWzBdLGRbMV0sZFsyXSxkWzNdLGRbNF0sZFs1XSl9fSxkcmF3OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZHJhd1NjZW5lKCksdGhpc30sY2xlYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0Q29udGV4dCgpLmNsZWFyKGEpLHRoaXN9LHNldFZpc2libGU6ZnVuY3Rpb24oYSl7cmV0dXJuIEtpbmV0aWMuTm9kZS5wcm90b3R5cGUuc2V0VmlzaWJsZS5jYWxsKHRoaXMsYSksdGhpcy5nZXRDYW52YXMoKS5fY2FudmFzLnN0eWxlLmRpc3BsYXk9YT9cImJsb2NrXCI6XCJub25lXCIsdGhpc319KSxLaW5ldGljLlV0aWwuZXh0ZW5kKEtpbmV0aWMuRmFzdExheWVyLEtpbmV0aWMuQmFzZUxheWVyKSxLaW5ldGljLkNvbGxlY3Rpb24ubWFwTWV0aG9kcyhLaW5ldGljLkZhc3RMYXllcil9KCksZnVuY3Rpb24oKXtLaW5ldGljLlV0aWwuYWRkTWV0aG9kcyhLaW5ldGljLkdyb3VwLHtfX19pbml0OmZ1bmN0aW9uKGEpe3RoaXMubm9kZVR5cGU9XCJHcm91cFwiLEtpbmV0aWMuQ29udGFpbmVyLmNhbGwodGhpcyxhKX0sX3ZhbGlkYXRlQWRkOmZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0VHlwZSgpO1wiR3JvdXBcIiE9PWImJlwiU2hhcGVcIiE9PWImJktpbmV0aWMuVXRpbC5lcnJvcihcIllvdSBtYXkgb25seSBhZGQgZ3JvdXBzIGFuZCBzaGFwZXMgdG8gZ3JvdXBzLlwiKX19KSxLaW5ldGljLlV0aWwuZXh0ZW5kKEtpbmV0aWMuR3JvdXAsS2luZXRpYy5Db250YWluZXIpLEtpbmV0aWMuQ29sbGVjdGlvbi5tYXBNZXRob2RzKEtpbmV0aWMuR3JvdXApfSgpLGZ1bmN0aW9uKCl7S2luZXRpYy5SZWN0PWZ1bmN0aW9uKGEpe3RoaXMuX19faW5pdChhKX0sS2luZXRpYy5SZWN0LnByb3RvdHlwZT17X19faW5pdDpmdW5jdGlvbihhKXtLaW5ldGljLlNoYXBlLmNhbGwodGhpcyxhKSx0aGlzLmNsYXNzTmFtZT1cIlJlY3RcIix0aGlzLnNjZW5lRnVuYyh0aGlzLl9zY2VuZUZ1bmMpfSxfc2NlbmVGdW5jOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0Q29ybmVyUmFkaXVzKCksYz10aGlzLmdldFdpZHRoKCksZD10aGlzLmdldEhlaWdodCgpO2EuYmVnaW5QYXRoKCksYj8oYS5tb3ZlVG8oYiwwKSxhLmxpbmVUbyhjLWIsMCksYS5hcmMoYy1iLGIsYiwzKk1hdGguUEkvMiwwLCExKSxhLmxpbmVUbyhjLGQtYiksYS5hcmMoYy1iLGQtYixiLDAsTWF0aC5QSS8yLCExKSxhLmxpbmVUbyhiLGQpLGEuYXJjKGIsZC1iLGIsTWF0aC5QSS8yLE1hdGguUEksITEpLGEubGluZVRvKDAsYiksYS5hcmMoYixiLGIsTWF0aC5QSSwzKk1hdGguUEkvMiwhMSkpOmEucmVjdCgwLDAsYyxkKSxhLmNsb3NlUGF0aCgpLGEuZmlsbFN0cm9rZVNoYXBlKHRoaXMpfX0sS2luZXRpYy5VdGlsLmV4dGVuZChLaW5ldGljLlJlY3QsS2luZXRpYy5TaGFwZSksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlJlY3QsXCJjb3JuZXJSYWRpdXNcIiwwKSxLaW5ldGljLkNvbGxlY3Rpb24ubWFwTWV0aG9kcyhLaW5ldGljLlJlY3QpfSgpLGZ1bmN0aW9uKCl7dmFyIGE9MipNYXRoLlBJLTFlLTQsYj1cIkNpcmNsZVwiO0tpbmV0aWMuQ2lyY2xlPWZ1bmN0aW9uKGEpe3RoaXMuX19faW5pdChhKX0sS2luZXRpYy5DaXJjbGUucHJvdG90eXBlPXtfX19pbml0OmZ1bmN0aW9uKGEpe0tpbmV0aWMuU2hhcGUuY2FsbCh0aGlzLGEpLHRoaXMuY2xhc3NOYW1lPWIsdGhpcy5zY2VuZUZ1bmModGhpcy5fc2NlbmVGdW5jKX0sX3NjZW5lRnVuYzpmdW5jdGlvbihiKXtiLmJlZ2luUGF0aCgpLGIuYXJjKDAsMCx0aGlzLmdldFJhZGl1cygpLDAsYSwhMSksYi5jbG9zZVBhdGgoKSxiLmZpbGxTdHJva2VTaGFwZSh0aGlzKX0sZ2V0V2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gMip0aGlzLmdldFJhZGl1cygpfSxnZXRIZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gMip0aGlzLmdldFJhZGl1cygpfSxzZXRXaWR0aDpmdW5jdGlvbihhKXtLaW5ldGljLk5vZGUucHJvdG90eXBlLnNldFdpZHRoLmNhbGwodGhpcyxhKSx0aGlzLnNldFJhZGl1cyhhLzIpfSxzZXRIZWlnaHQ6ZnVuY3Rpb24oYSl7S2luZXRpYy5Ob2RlLnByb3RvdHlwZS5zZXRIZWlnaHQuY2FsbCh0aGlzLGEpLHRoaXMuc2V0UmFkaXVzKGEvMil9fSxLaW5ldGljLlV0aWwuZXh0ZW5kKEtpbmV0aWMuQ2lyY2xlLEtpbmV0aWMuU2hhcGUpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5DaXJjbGUsXCJyYWRpdXNcIiwwKSxLaW5ldGljLkNvbGxlY3Rpb24ubWFwTWV0aG9kcyhLaW5ldGljLkNpcmNsZSl9KCksZnVuY3Rpb24oKXt2YXIgYT0yKk1hdGguUEktMWUtNCxiPVwiRWxsaXBzZVwiO0tpbmV0aWMuRWxsaXBzZT1mdW5jdGlvbihhKXt0aGlzLl9fX2luaXQoYSl9LEtpbmV0aWMuRWxsaXBzZS5wcm90b3R5cGU9e19fX2luaXQ6ZnVuY3Rpb24oYSl7S2luZXRpYy5TaGFwZS5jYWxsKHRoaXMsYSksdGhpcy5jbGFzc05hbWU9Yix0aGlzLnNjZW5lRnVuYyh0aGlzLl9zY2VuZUZ1bmMpfSxfc2NlbmVGdW5jOmZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMuZ2V0UmFkaXVzKCksZD1jLngsZT1jLnk7Yi5iZWdpblBhdGgoKSxiLnNhdmUoKSxkIT09ZSYmYi5zY2FsZSgxLGUvZCksYi5hcmMoMCwwLGQsMCxhLCExKSxiLnJlc3RvcmUoKSxiLmNsb3NlUGF0aCgpLGIuZmlsbFN0cm9rZVNoYXBlKHRoaXMpfSxnZXRXaWR0aDpmdW5jdGlvbigpe3JldHVybiAyKnRoaXMuZ2V0UmFkaXVzKCkueH0sZ2V0SGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIDIqdGhpcy5nZXRSYWRpdXMoKS55fSxzZXRXaWR0aDpmdW5jdGlvbihhKXtLaW5ldGljLk5vZGUucHJvdG90eXBlLnNldFdpZHRoLmNhbGwodGhpcyxhKSx0aGlzLnNldFJhZGl1cyh7eDphLzJ9KX0sc2V0SGVpZ2h0OmZ1bmN0aW9uKGEpe0tpbmV0aWMuTm9kZS5wcm90b3R5cGUuc2V0SGVpZ2h0LmNhbGwodGhpcyxhKSx0aGlzLnNldFJhZGl1cyh7eTphLzJ9KX19LEtpbmV0aWMuVXRpbC5leHRlbmQoS2luZXRpYy5FbGxpcHNlLEtpbmV0aWMuU2hhcGUpLEtpbmV0aWMuRmFjdG9yeS5hZGRDb21wb25lbnRzR2V0dGVyU2V0dGVyKEtpbmV0aWMuRWxsaXBzZSxcInJhZGl1c1wiLFtcInhcIixcInlcIl0pLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5FbGxpcHNlLFwicmFkaXVzWFwiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5FbGxpcHNlLFwicmFkaXVzWVwiLDApLEtpbmV0aWMuQ29sbGVjdGlvbi5tYXBNZXRob2RzKEtpbmV0aWMuRWxsaXBzZSl9KCksZnVuY3Rpb24oKXt2YXIgYT0yKk1hdGguUEktMWUtNDtLaW5ldGljLlJpbmc9ZnVuY3Rpb24oYSl7dGhpcy5fX19pbml0KGEpfSxLaW5ldGljLlJpbmcucHJvdG90eXBlPXtfX19pbml0OmZ1bmN0aW9uKGEpe0tpbmV0aWMuU2hhcGUuY2FsbCh0aGlzLGEpLHRoaXMuY2xhc3NOYW1lPVwiUmluZ1wiLHRoaXMuc2NlbmVGdW5jKHRoaXMuX3NjZW5lRnVuYyl9LF9zY2VuZUZ1bmM6ZnVuY3Rpb24oYil7Yi5iZWdpblBhdGgoKSxiLmFyYygwLDAsdGhpcy5nZXRJbm5lclJhZGl1cygpLDAsYSwhMSksYi5tb3ZlVG8odGhpcy5nZXRPdXRlclJhZGl1cygpLDApLGIuYXJjKDAsMCx0aGlzLmdldE91dGVyUmFkaXVzKCksYSwwLCEwKSxiLmNsb3NlUGF0aCgpLGIuZmlsbFN0cm9rZVNoYXBlKHRoaXMpfSxnZXRXaWR0aDpmdW5jdGlvbigpe3JldHVybiAyKnRoaXMuZ2V0T3V0ZXJSYWRpdXMoKX0sZ2V0SGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIDIqdGhpcy5nZXRPdXRlclJhZGl1cygpfSxzZXRXaWR0aDpmdW5jdGlvbihhKXtLaW5ldGljLk5vZGUucHJvdG90eXBlLnNldFdpZHRoLmNhbGwodGhpcyxhKSx0aGlzLnNldE91dGVyUmFkaXVzKGEvMil9LHNldEhlaWdodDpmdW5jdGlvbihhKXtLaW5ldGljLk5vZGUucHJvdG90eXBlLnNldEhlaWdodC5jYWxsKHRoaXMsYSksdGhpcy5zZXRPdXRlclJhZGl1cyhhLzIpfX0sS2luZXRpYy5VdGlsLmV4dGVuZChLaW5ldGljLlJpbmcsS2luZXRpYy5TaGFwZSksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlJpbmcsXCJpbm5lclJhZGl1c1wiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5SaW5nLFwib3V0ZXJSYWRpdXNcIiwwKSxLaW5ldGljLkNvbGxlY3Rpb24ubWFwTWV0aG9kcyhLaW5ldGljLlJpbmcpfSgpLGZ1bmN0aW9uKCl7S2luZXRpYy5XZWRnZT1mdW5jdGlvbihhKXt0aGlzLl9fX2luaXQoYSl9LEtpbmV0aWMuV2VkZ2UucHJvdG90eXBlPXtfX19pbml0OmZ1bmN0aW9uKGEpe0tpbmV0aWMuU2hhcGUuY2FsbCh0aGlzLGEpLHRoaXMuY2xhc3NOYW1lPVwiV2VkZ2VcIix0aGlzLnNjZW5lRnVuYyh0aGlzLl9zY2VuZUZ1bmMpfSxfc2NlbmVGdW5jOmZ1bmN0aW9uKGEpe2EuYmVnaW5QYXRoKCksYS5hcmMoMCwwLHRoaXMuZ2V0UmFkaXVzKCksMCxLaW5ldGljLmdldEFuZ2xlKHRoaXMuZ2V0QW5nbGUoKSksdGhpcy5nZXRDbG9ja3dpc2UoKSksYS5saW5lVG8oMCwwKSxhLmNsb3NlUGF0aCgpLGEuZmlsbFN0cm9rZVNoYXBlKHRoaXMpfX0sS2luZXRpYy5VdGlsLmV4dGVuZChLaW5ldGljLldlZGdlLEtpbmV0aWMuU2hhcGUpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5XZWRnZSxcInJhZGl1c1wiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5XZWRnZSxcImFuZ2xlXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLldlZGdlLFwiY2xvY2t3aXNlXCIsITEpLEtpbmV0aWMuRmFjdG9yeS5iYWNrQ29tcGF0KEtpbmV0aWMuV2VkZ2Use2FuZ2xlRGVnOlwiYW5nbGVcIixnZXRBbmdsZURlZzpcImdldEFuZ2xlXCIsc2V0QW5nbGVEZWc6XCJzZXRBbmdsZVwifSksS2luZXRpYy5Db2xsZWN0aW9uLm1hcE1ldGhvZHMoS2luZXRpYy5XZWRnZSl9KCksZnVuY3Rpb24oKXtNYXRoLlBJLzE4MDtLaW5ldGljLkFyYz1mdW5jdGlvbihhKXt0aGlzLl9fX2luaXQoYSl9LEtpbmV0aWMuQXJjLnByb3RvdHlwZT17X19faW5pdDpmdW5jdGlvbihhKXtLaW5ldGljLlNoYXBlLmNhbGwodGhpcyxhKSx0aGlzLmNsYXNzTmFtZT1cIkFyY1wiLHRoaXMuc2NlbmVGdW5jKHRoaXMuX3NjZW5lRnVuYyl9LF9zY2VuZUZ1bmM6ZnVuY3Rpb24oYSl7dmFyIGI9S2luZXRpYy5nZXRBbmdsZSh0aGlzLmFuZ2xlKCkpLGM9dGhpcy5jbG9ja3dpc2UoKTthLmJlZ2luUGF0aCgpLGEuYXJjKDAsMCx0aGlzLmdldE91dGVyUmFkaXVzKCksMCxiLGMpLGEuYXJjKDAsMCx0aGlzLmdldElubmVyUmFkaXVzKCksYiwwLCFjKSxhLmNsb3NlUGF0aCgpLGEuZmlsbFN0cm9rZVNoYXBlKHRoaXMpfX0sS2luZXRpYy5VdGlsLmV4dGVuZChLaW5ldGljLkFyYyxLaW5ldGljLlNoYXBlKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuQXJjLFwiaW5uZXJSYWRpdXNcIiwwKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuQXJjLFwib3V0ZXJSYWRpdXNcIiwwKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuQXJjLFwiYW5nbGVcIiwwKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuQXJjLFwiY2xvY2t3aXNlXCIsITEpLEtpbmV0aWMuQ29sbGVjdGlvbi5tYXBNZXRob2RzKEtpbmV0aWMuQXJjKX0oKSxmdW5jdGlvbigpe3ZhciBhPVwiSW1hZ2VcIjtLaW5ldGljLkltYWdlPWZ1bmN0aW9uKGEpe3RoaXMuX19faW5pdChhKX0sS2luZXRpYy5JbWFnZS5wcm90b3R5cGU9e19fX2luaXQ6ZnVuY3Rpb24oYil7S2luZXRpYy5TaGFwZS5jYWxsKHRoaXMsYiksdGhpcy5jbGFzc05hbWU9YSx0aGlzLnNjZW5lRnVuYyh0aGlzLl9zY2VuZUZ1bmMpLHRoaXMuaGl0RnVuYyh0aGlzLl9oaXRGdW5jKX0sX3VzZUJ1ZmZlckNhbnZhczpmdW5jdGlvbigpe3JldHVybih0aGlzLmhhc1NoYWRvdygpfHwxIT09dGhpcy5nZXRBYnNvbHV0ZU9wYWNpdHkoKSkmJnRoaXMuaGFzU3Ryb2tlKCl9LF9zY2VuZUZ1bmM6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZj10aGlzLmdldFdpZHRoKCksZz10aGlzLmdldEhlaWdodCgpLGg9dGhpcy5nZXRJbWFnZSgpO2gmJihiPXRoaXMuZ2V0Q3JvcCgpLGM9Yi53aWR0aCxkPWIuaGVpZ2h0LGU9YyYmZD9baCxiLngsYi55LGMsZCwwLDAsZixnXTpbaCwwLDAsZixnXSksYS5iZWdpblBhdGgoKSxhLnJlY3QoMCwwLGYsZyksYS5jbG9zZVBhdGgoKSxhLmZpbGxTdHJva2VTaGFwZSh0aGlzKSxoJiZhLmRyYXdJbWFnZS5hcHBseShhLGUpfSxfaGl0RnVuYzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldFdpZHRoKCksYz10aGlzLmdldEhlaWdodCgpO2EuYmVnaW5QYXRoKCksYS5yZWN0KDAsMCxiLGMpLGEuY2xvc2VQYXRoKCksYS5maWxsU3Ryb2tlU2hhcGUodGhpcyl9LGdldFdpZHRoOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRJbWFnZSgpO3JldHVybiB0aGlzLmF0dHJzLndpZHRofHwoYT9hLndpZHRoOjApfSxnZXRIZWlnaHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEltYWdlKCk7cmV0dXJuIHRoaXMuYXR0cnMuaGVpZ2h0fHwoYT9hLmhlaWdodDowKX19LEtpbmV0aWMuVXRpbC5leHRlbmQoS2luZXRpYy5JbWFnZSxLaW5ldGljLlNoYXBlKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuSW1hZ2UsXCJpbWFnZVwiKSxLaW5ldGljLkZhY3RvcnkuYWRkQ29tcG9uZW50c0dldHRlclNldHRlcihLaW5ldGljLkltYWdlLFwiY3JvcFwiLFtcInhcIixcInlcIixcIndpZHRoXCIsXCJoZWlnaHRcIl0pLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5JbWFnZSxcImNyb3BYXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLkltYWdlLFwiY3JvcFlcIiwwKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuSW1hZ2UsXCJjcm9wV2lkdGhcIiwwKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuSW1hZ2UsXCJjcm9wSGVpZ2h0XCIsMCksS2luZXRpYy5Db2xsZWN0aW9uLm1hcE1ldGhvZHMoS2luZXRpYy5JbWFnZSl9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe2EuZmlsbFRleHQodGhpcy5wYXJ0aWFsVGV4dCwwLDApfWZ1bmN0aW9uIGIoYSl7YS5zdHJva2VUZXh0KHRoaXMucGFydGlhbFRleHQsMCwwKX12YXIgYz1cImF1dG9cIixkPVwiY2VudGVyXCIsZT1cIkNoYW5nZS5raW5ldGljXCIsZj1cIjJkXCIsZz1cIi1cIixoPVwiXCIsaT1cImxlZnRcIixqPVwidGV4dFwiLGs9XCJUZXh0XCIsbD1cIm1pZGRsZVwiLG09XCJub3JtYWxcIixuPVwicHggXCIsbz1cIiBcIixwPVwicmlnaHRcIixxPVwid29yZFwiLHI9XCJjaGFyXCIscz1cIm5vbmVcIix0PVtcImZvbnRGYW1pbHlcIixcImZvbnRTaXplXCIsXCJmb250U3R5bGVcIixcImZvbnRWYXJpYW50XCIsXCJwYWRkaW5nXCIsXCJhbGlnblwiLFwibGluZUhlaWdodFwiLFwidGV4dFwiLFwid2lkdGhcIixcImhlaWdodFwiLFwid3JhcFwiXSx1PXQubGVuZ3RoLHY9S2luZXRpYy5VdGlsLmNyZWF0ZUNhbnZhc0VsZW1lbnQoKS5nZXRDb250ZXh0KGYpO0tpbmV0aWMuVGV4dD1mdW5jdGlvbihhKXt0aGlzLl9fX2luaXQoYSl9LEtpbmV0aWMuVGV4dC5wcm90b3R5cGU9e19fX2luaXQ6ZnVuY3Rpb24oZCl7dmFyIGY9dGhpczt2b2lkIDA9PT1kLndpZHRoJiYoZC53aWR0aD1jKSx2b2lkIDA9PT1kLmhlaWdodCYmKGQuaGVpZ2h0PWMpLEtpbmV0aWMuU2hhcGUuY2FsbCh0aGlzLGQpLHRoaXMuX2ZpbGxGdW5jPWEsdGhpcy5fc3Ryb2tlRnVuYz1iLHRoaXMuY2xhc3NOYW1lPWs7Zm9yKHZhciBnPTA7dT5nO2crKyl0aGlzLm9uKHRbZ10rZSxmLl9zZXRUZXh0RGF0YSk7dGhpcy5fc2V0VGV4dERhdGEoKSx0aGlzLnNjZW5lRnVuYyh0aGlzLl9zY2VuZUZ1bmMpLHRoaXMuaGl0RnVuYyh0aGlzLl9oaXRGdW5jKX0sX3NjZW5lRnVuYzpmdW5jdGlvbihhKXt2YXIgYixjPXRoaXMuZ2V0UGFkZGluZygpLGU9dGhpcy5nZXRUZXh0SGVpZ2h0KCksZj10aGlzLmdldExpbmVIZWlnaHQoKSplLGc9dGhpcy50ZXh0QXJyLGg9Zy5sZW5ndGgsaj10aGlzLmdldFdpZHRoKCk7Zm9yKGEuc2V0QXR0cihcImZvbnRcIix0aGlzLl9nZXRDb250ZXh0Rm9udCgpKSxhLnNldEF0dHIoXCJ0ZXh0QmFzZWxpbmVcIixsKSxhLnNldEF0dHIoXCJ0ZXh0QWxpZ25cIixpKSxhLnNhdmUoKSxhLnRyYW5zbGF0ZShjLDApLGEudHJhbnNsYXRlKDAsYytlLzIpLGI9MDtoPmI7YisrKXt2YXIgaz1nW2JdLG09ay50ZXh0LG49ay53aWR0aDthLnNhdmUoKSx0aGlzLmdldEFsaWduKCk9PT1wP2EudHJhbnNsYXRlKGotbi0yKmMsMCk6dGhpcy5nZXRBbGlnbigpPT09ZCYmYS50cmFuc2xhdGUoKGotbi0yKmMpLzIsMCksdGhpcy5wYXJ0aWFsVGV4dD1tLGEuZmlsbFN0cm9rZVNoYXBlKHRoaXMpLGEucmVzdG9yZSgpLGEudHJhbnNsYXRlKDAsZil9YS5yZXN0b3JlKCl9LF9oaXRGdW5jOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0V2lkdGgoKSxjPXRoaXMuZ2V0SGVpZ2h0KCk7YS5iZWdpblBhdGgoKSxhLnJlY3QoMCwwLGIsYyksYS5jbG9zZVBhdGgoKSxhLmZpbGxTdHJva2VTaGFwZSh0aGlzKX0sc2V0VGV4dDpmdW5jdGlvbihhKXt2YXIgYj1LaW5ldGljLlV0aWwuX2lzU3RyaW5nKGEpP2E6YS50b1N0cmluZygpO3JldHVybiB0aGlzLl9zZXRBdHRyKGosYiksdGhpc30sZ2V0V2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hdHRycy53aWR0aD09PWM/dGhpcy5nZXRUZXh0V2lkdGgoKSsyKnRoaXMuZ2V0UGFkZGluZygpOnRoaXMuYXR0cnMud2lkdGh9LGdldEhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmF0dHJzLmhlaWdodD09PWM/dGhpcy5nZXRUZXh0SGVpZ2h0KCkqdGhpcy50ZXh0QXJyLmxlbmd0aCp0aGlzLmdldExpbmVIZWlnaHQoKSsyKnRoaXMuZ2V0UGFkZGluZygpOnRoaXMuYXR0cnMuaGVpZ2h0fSxnZXRUZXh0V2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0V2lkdGh9LGdldFRleHRIZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0SGVpZ2h0fSxfZ2V0VGV4dFNpemU6ZnVuY3Rpb24oYSl7dmFyIGIsYz12LGQ9dGhpcy5nZXRGb250U2l6ZSgpO3JldHVybiBjLnNhdmUoKSxjLmZvbnQ9dGhpcy5fZ2V0Q29udGV4dEZvbnQoKSxiPWMubWVhc3VyZVRleHQoYSksYy5yZXN0b3JlKCkse3dpZHRoOmIud2lkdGgsaGVpZ2h0OnBhcnNlSW50KGQsMTApfX0sX2dldENvbnRleHRGb250OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0Rm9udFN0eWxlKCkrbyt0aGlzLmdldEZvbnRWYXJpYW50KCkrbyt0aGlzLmdldEZvbnRTaXplKCkrbit0aGlzLmdldEZvbnRGYW1pbHkoKX0sX2FkZFRleHRMaW5lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMudGV4dEFyci5wdXNoKHt0ZXh0OmEsd2lkdGg6Yn0pfSxfZ2V0VGV4dFdpZHRoOmZ1bmN0aW9uKGEpe3JldHVybiB2Lm1lYXN1cmVUZXh0KGEpLndpZHRofSxfc2V0VGV4dERhdGE6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFRleHQoKS5zcGxpdChcIlxcblwiKSxiPSt0aGlzLmdldEZvbnRTaXplKCksZD0wLGU9dGhpcy5nZXRMaW5lSGVpZ2h0KCkqYixmPXRoaXMuYXR0cnMud2lkdGgsaD10aGlzLmF0dHJzLmhlaWdodCxpPWYhPT1jLGo9aCE9PWMsaz10aGlzLmdldFBhZGRpbmcoKSxsPWYtMiprLG09aC0yKmssbj0wLHA9dGhpcy5nZXRXcmFwKCkscT1wIT09cyx0PXAhPT1yJiZxO3RoaXMudGV4dEFycj1bXSx2LnNhdmUoKSx2LmZvbnQ9dGhpcy5fZ2V0Q29udGV4dEZvbnQoKTtcbmZvcih2YXIgdT0wLHc9YS5sZW5ndGg7dz51OysrdSl7dmFyIHg9YVt1XSx5PXRoaXMuX2dldFRleHRXaWR0aCh4KTtpZihpJiZ5PmwpZm9yKDt4Lmxlbmd0aD4wOyl7Zm9yKHZhciB6PTAsQT14Lmxlbmd0aCxCPVwiXCIsQz0wO0E+ejspe3ZhciBEPXorQT4+PjEsRT14LnNsaWNlKDAsRCsxKSxGPXRoaXMuX2dldFRleHRXaWR0aChFKTtsPj1GPyh6PUQrMSxCPUUsQz1GKTpBPUR9aWYoIUIpYnJlYWs7aWYodCl7dmFyIEc9TWF0aC5tYXgoQi5sYXN0SW5kZXhPZihvKSxCLmxhc3RJbmRleE9mKGcpKSsxO0c+MCYmKHo9RyxCPUIuc2xpY2UoMCx6KSxDPXRoaXMuX2dldFRleHRXaWR0aChCKSl9aWYodGhpcy5fYWRkVGV4dExpbmUoQixDKSxkPU1hdGgubWF4KGQsQyksbis9ZSwhcXx8aiYmbitlPm0pYnJlYWs7aWYoeD14LnNsaWNlKHopLHgubGVuZ3RoPjAmJih5PXRoaXMuX2dldFRleHRXaWR0aCh4KSxsPj15KSl7dGhpcy5fYWRkVGV4dExpbmUoeCx5KSxuKz1lLGQ9TWF0aC5tYXgoZCx5KTticmVha319ZWxzZSB0aGlzLl9hZGRUZXh0TGluZSh4LHkpLG4rPWUsZD1NYXRoLm1heChkLHkpO2lmKGomJm4rZT5tKWJyZWFrfXYucmVzdG9yZSgpLHRoaXMudGV4dEhlaWdodD1iLHRoaXMudGV4dFdpZHRoPWR9fSxLaW5ldGljLlV0aWwuZXh0ZW5kKEtpbmV0aWMuVGV4dCxLaW5ldGljLlNoYXBlKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuVGV4dCxcImZvbnRGYW1pbHlcIixcIkFyaWFsXCIpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5UZXh0LFwiZm9udFNpemVcIiwxMiksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlRleHQsXCJmb250U3R5bGVcIixtKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuVGV4dCxcImZvbnRWYXJpYW50XCIsbSksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlRleHQsXCJwYWRkaW5nXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlRleHQsXCJhbGlnblwiLGkpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5UZXh0LFwibGluZUhlaWdodFwiLDEpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5UZXh0LFwid3JhcFwiLHEpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXIoS2luZXRpYy5UZXh0LFwidGV4dFwiLGgpLEtpbmV0aWMuRmFjdG9yeS5hZGRPdmVybG9hZGVkR2V0dGVyU2V0dGVyKEtpbmV0aWMuVGV4dCxcInRleHRcIiksS2luZXRpYy5Db2xsZWN0aW9uLm1hcE1ldGhvZHMoS2luZXRpYy5UZXh0KX0oKSxmdW5jdGlvbigpe0tpbmV0aWMuTGluZT1mdW5jdGlvbihhKXt0aGlzLl9fX2luaXQoYSl9LEtpbmV0aWMuTGluZS5wcm90b3R5cGU9e19fX2luaXQ6ZnVuY3Rpb24oYSl7S2luZXRpYy5TaGFwZS5jYWxsKHRoaXMsYSksdGhpcy5jbGFzc05hbWU9XCJMaW5lXCIsdGhpcy5vbihcInBvaW50c0NoYW5nZS5raW5ldGljIHRlbnNpb25DaGFuZ2Uua2luZXRpYyBjbG9zZWRDaGFuZ2Uua2luZXRpY1wiLGZ1bmN0aW9uKCl7dGhpcy5fY2xlYXJDYWNoZShcInRlbnNpb25Qb2ludHNcIil9KSx0aGlzLnNjZW5lRnVuYyh0aGlzLl9zY2VuZUZ1bmMpfSxfc2NlbmVGdW5jOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlPXRoaXMuZ2V0UG9pbnRzKCksZj1lLmxlbmd0aCxnPXRoaXMuZ2V0VGVuc2lvbigpLGg9dGhpcy5nZXRDbG9zZWQoKTtpZihhLmJlZ2luUGF0aCgpLGEubW92ZVRvKGVbMF0sZVsxXSksMCE9PWcmJmY+NCl7Zm9yKGI9dGhpcy5nZXRUZW5zaW9uUG9pbnRzKCksYz1iLmxlbmd0aCxkPWg/MDo0LGh8fGEucXVhZHJhdGljQ3VydmVUbyhiWzBdLGJbMV0sYlsyXSxiWzNdKTtjLTI+ZDspYS5iZXppZXJDdXJ2ZVRvKGJbZCsrXSxiW2QrK10sYltkKytdLGJbZCsrXSxiW2QrK10sYltkKytdKTtofHxhLnF1YWRyYXRpY0N1cnZlVG8oYltjLTJdLGJbYy0xXSxlW2YtMl0sZVtmLTFdKX1lbHNlIGZvcihkPTI7Zj5kO2QrPTIpYS5saW5lVG8oZVtkXSxlW2QrMV0pO2g/KGEuY2xvc2VQYXRoKCksYS5maWxsU3Ryb2tlU2hhcGUodGhpcykpOmEuc3Ryb2tlU2hhcGUodGhpcyl9LGdldFRlbnNpb25Qb2ludHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0Q2FjaGUoXCJ0ZW5zaW9uUG9pbnRzXCIsdGhpcy5fZ2V0VGVuc2lvblBvaW50cyl9LF9nZXRUZW5zaW9uUG9pbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0Q2xvc2VkKCk/dGhpcy5fZ2V0VGVuc2lvblBvaW50c0Nsb3NlZCgpOktpbmV0aWMuVXRpbC5fZXhwYW5kUG9pbnRzKHRoaXMuZ2V0UG9pbnRzKCksdGhpcy5nZXRUZW5zaW9uKCkpfSxfZ2V0VGVuc2lvblBvaW50c0Nsb3NlZDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0UG9pbnRzKCksYj1hLmxlbmd0aCxjPXRoaXMuZ2V0VGVuc2lvbigpLGQ9S2luZXRpYy5VdGlsLGU9ZC5fZ2V0Q29udHJvbFBvaW50cyhhW2ItMl0sYVtiLTFdLGFbMF0sYVsxXSxhWzJdLGFbM10sYyksZj1kLl9nZXRDb250cm9sUG9pbnRzKGFbYi00XSxhW2ItM10sYVtiLTJdLGFbYi0xXSxhWzBdLGFbMV0sYyksZz1LaW5ldGljLlV0aWwuX2V4cGFuZFBvaW50cyhhLGMpLGg9W2VbMl0sZVszXV0uY29uY2F0KGcpLmNvbmNhdChbZlswXSxmWzFdLGFbYi0yXSxhW2ItMV0sZlsyXSxmWzNdLGVbMF0sZVsxXSxhWzBdLGFbMV1dKTtyZXR1cm4gaH19LEtpbmV0aWMuVXRpbC5leHRlbmQoS2luZXRpYy5MaW5lLEtpbmV0aWMuU2hhcGUpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5MaW5lLFwiY2xvc2VkXCIsITEpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5MaW5lLFwidGVuc2lvblwiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5MaW5lLFwicG9pbnRzXCIpLEtpbmV0aWMuQ29sbGVjdGlvbi5tYXBNZXRob2RzKEtpbmV0aWMuTGluZSl9KCksZnVuY3Rpb24oKXtLaW5ldGljLlNwcml0ZT1mdW5jdGlvbihhKXt0aGlzLl9fX2luaXQoYSl9LEtpbmV0aWMuU3ByaXRlLnByb3RvdHlwZT17X19faW5pdDpmdW5jdGlvbihhKXtLaW5ldGljLlNoYXBlLmNhbGwodGhpcyxhKSx0aGlzLmNsYXNzTmFtZT1cIlNwcml0ZVwiLHRoaXMuYW5pbT1uZXcgS2luZXRpYy5BbmltYXRpb24sdGhpcy5vbihcImFuaW1hdGlvbkNoYW5nZS5raW5ldGljXCIsZnVuY3Rpb24oKXt0aGlzLmZyYW1lSW5kZXgoMCl9KSx0aGlzLm9uKFwiZnJhbWVSYXRlQ2hhbmdlLmtpbmV0aWNcIixmdW5jdGlvbigpe3RoaXMuYW5pbS5pc1J1bm5pbmcoKSYmKGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCksdGhpcy5fc2V0SW50ZXJ2YWwoKSl9KSx0aGlzLnNjZW5lRnVuYyh0aGlzLl9zY2VuZUZ1bmMpLHRoaXMuaGl0RnVuYyh0aGlzLl9oaXRGdW5jKX0sX3NjZW5lRnVuYzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldEFuaW1hdGlvbigpLGM9dGhpcy5mcmFtZUluZGV4KCksZD00KmMsZT10aGlzLmdldEFuaW1hdGlvbnMoKVtiXSxmPWVbZCswXSxnPWVbZCsxXSxoPWVbZCsyXSxpPWVbZCszXSxqPXRoaXMuZ2V0SW1hZ2UoKTtqJiZhLmRyYXdJbWFnZShqLGYsZyxoLGksMCwwLGgsaSl9LF9oaXRGdW5jOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0QW5pbWF0aW9uKCksYz10aGlzLmZyYW1lSW5kZXgoKSxkPTQqYyxlPXRoaXMuZ2V0QW5pbWF0aW9ucygpW2JdLGY9ZVtkKzJdLGc9ZVtkKzNdO2EuYmVnaW5QYXRoKCksYS5yZWN0KDAsMCxmLGcpLGEuY2xvc2VQYXRoKCksYS5maWxsU2hhcGUodGhpcyl9LF91c2VCdWZmZXJDYW52YXM6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5oYXNTaGFkb3coKXx8MSE9PXRoaXMuZ2V0QWJzb2x1dGVPcGFjaXR5KCkpJiZ0aGlzLmhhc1N0cm9rZSgpfSxfc2V0SW50ZXJ2YWw6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMuaW50ZXJ2YWw9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXthLl91cGRhdGVJbmRleCgpfSwxZTMvdGhpcy5nZXRGcmFtZVJhdGUoKSl9LHN0YXJ0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRMYXllcigpO3RoaXMuYW5pbS5zZXRMYXllcnMoYSksdGhpcy5fc2V0SW50ZXJ2YWwoKSx0aGlzLmFuaW0uc3RhcnQoKX0sc3RvcDpmdW5jdGlvbigpe3RoaXMuYW5pbS5zdG9wKCksY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKX0saXNSdW5uaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYW5pbS5pc1J1bm5pbmcoKX0sX3VwZGF0ZUluZGV4OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5mcmFtZUluZGV4KCksYj10aGlzLmdldEFuaW1hdGlvbigpLGM9dGhpcy5nZXRBbmltYXRpb25zKCksZD1jW2JdLGU9ZC5sZW5ndGgvNDt0aGlzLmZyYW1lSW5kZXgoZS0xPmE/YSsxOjApfX0sS2luZXRpYy5VdGlsLmV4dGVuZChLaW5ldGljLlNwcml0ZSxLaW5ldGljLlNoYXBlKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU3ByaXRlLFwiYW5pbWF0aW9uXCIpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TcHJpdGUsXCJhbmltYXRpb25zXCIpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TcHJpdGUsXCJpbWFnZVwiKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU3ByaXRlLFwiZnJhbWVJbmRleFwiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5TcHJpdGUsXCJmcmFtZVJhdGVcIiwxNyksS2luZXRpYy5GYWN0b3J5LmJhY2tDb21wYXQoS2luZXRpYy5TcHJpdGUse2luZGV4OlwiZnJhbWVJbmRleFwiLGdldEluZGV4OlwiZ2V0RnJhbWVJbmRleFwiLHNldEluZGV4Olwic2V0RnJhbWVJbmRleFwifSksS2luZXRpYy5Db2xsZWN0aW9uLm1hcE1ldGhvZHMoS2luZXRpYy5TcHJpdGUpfSgpLGZ1bmN0aW9uKCl7S2luZXRpYy5QYXRoPWZ1bmN0aW9uKGEpe3RoaXMuX19faW5pdChhKX0sS2luZXRpYy5QYXRoLnByb3RvdHlwZT17X19faW5pdDpmdW5jdGlvbihhKXt0aGlzLmRhdGFBcnJheT1bXTt2YXIgYj10aGlzO0tpbmV0aWMuU2hhcGUuY2FsbCh0aGlzLGEpLHRoaXMuY2xhc3NOYW1lPVwiUGF0aFwiLHRoaXMuZGF0YUFycmF5PUtpbmV0aWMuUGF0aC5wYXJzZVBhdGhEYXRhKHRoaXMuZ2V0RGF0YSgpKSx0aGlzLm9uKFwiZGF0YUNoYW5nZS5raW5ldGljXCIsZnVuY3Rpb24oKXtiLmRhdGFBcnJheT1LaW5ldGljLlBhdGgucGFyc2VQYXRoRGF0YSh0aGlzLmdldERhdGEoKSl9KSx0aGlzLnNjZW5lRnVuYyh0aGlzLl9zY2VuZUZ1bmMpfSxfc2NlbmVGdW5jOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZGF0YUFycmF5LGM9ITE7YS5iZWdpblBhdGgoKTtmb3IodmFyIGQ9MDtkPGIubGVuZ3RoO2QrKyl7dmFyIGU9YltkXS5jb21tYW5kLGY9YltkXS5wb2ludHM7c3dpdGNoKGUpe2Nhc2VcIkxcIjphLmxpbmVUbyhmWzBdLGZbMV0pO2JyZWFrO2Nhc2VcIk1cIjphLm1vdmVUbyhmWzBdLGZbMV0pO2JyZWFrO2Nhc2VcIkNcIjphLmJlemllckN1cnZlVG8oZlswXSxmWzFdLGZbMl0sZlszXSxmWzRdLGZbNV0pO2JyZWFrO2Nhc2VcIlFcIjphLnF1YWRyYXRpY0N1cnZlVG8oZlswXSxmWzFdLGZbMl0sZlszXSk7YnJlYWs7Y2FzZVwiQVwiOnZhciBnPWZbMF0saD1mWzFdLGk9ZlsyXSxqPWZbM10saz1mWzRdLGw9Zls1XSxtPWZbNl0sbj1mWzddLG89aT5qP2k6aixwPWk+aj8xOmkvaixxPWk+aj9qL2k6MTthLnRyYW5zbGF0ZShnLGgpLGEucm90YXRlKG0pLGEuc2NhbGUocCxxKSxhLmFyYygwLDAsbyxrLGsrbCwxLW4pLGEuc2NhbGUoMS9wLDEvcSksYS5yb3RhdGUoLW0pLGEudHJhbnNsYXRlKC1nLC1oKTticmVhaztjYXNlXCJ6XCI6YS5jbG9zZVBhdGgoKSxjPSEwfX1jP2EuZmlsbFN0cm9rZVNoYXBlKHRoaXMpOmEuc3Ryb2tlU2hhcGUodGhpcyl9fSxLaW5ldGljLlV0aWwuZXh0ZW5kKEtpbmV0aWMuUGF0aCxLaW5ldGljLlNoYXBlKSxLaW5ldGljLlBhdGguZ2V0TGluZUxlbmd0aD1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gTWF0aC5zcXJ0KChjLWEpKihjLWEpKyhkLWIpKihkLWIpKX0sS2luZXRpYy5QYXRoLmdldFBvaW50T25MaW5lPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3ZvaWQgMD09PWYmJihmPWIpLHZvaWQgMD09PWcmJihnPWMpO3ZhciBoPShlLWMpLyhkLWIrMWUtOCksaT1NYXRoLnNxcnQoYSphLygxK2gqaCkpO2I+ZCYmKGkqPS0xKTt2YXIgaixrPWgqaTtpZihkPT09YilqPXt4OmYseTpnK2t9O2Vsc2UgaWYoKGctYykvKGYtYisxZS04KT09PWgpaj17eDpmK2kseTpnK2t9O2Vsc2V7dmFyIGwsbSxuPXRoaXMuZ2V0TGluZUxlbmd0aChiLGMsZCxlKTtpZigxZS04Pm4pcmV0dXJuIHZvaWQgMDt2YXIgbz0oZi1iKSooZC1iKSsoZy1jKSooZS1jKTtvLz1uKm4sbD1iK28qKGQtYiksbT1jK28qKGUtYyk7dmFyIHA9dGhpcy5nZXRMaW5lTGVuZ3RoKGYsZyxsLG0pLHE9TWF0aC5zcXJ0KGEqYS1wKnApO2k9TWF0aC5zcXJ0KHEqcS8oMStoKmgpKSxiPmQmJihpKj0tMSksaz1oKmksaj17eDpsK2kseTptK2t9fXJldHVybiBqfSxLaW5ldGljLlBhdGguZ2V0UG9pbnRPbkN1YmljQmV6aWVyPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxpKXtmdW5jdGlvbiBqKGEpe3JldHVybiBhKmEqYX1mdW5jdGlvbiBrKGEpe3JldHVybiAzKmEqYSooMS1hKX1mdW5jdGlvbiBsKGEpe3JldHVybiAzKmEqKDEtYSkqKDEtYSl9ZnVuY3Rpb24gbShhKXtyZXR1cm4oMS1hKSooMS1hKSooMS1hKX12YXIgbj1oKmooYSkrZiprKGEpK2QqbChhKStiKm0oYSksbz1pKmooYSkrZyprKGEpK2UqbChhKStjKm0oYSk7cmV0dXJue3g6bix5Om99fSxLaW5ldGljLlBhdGguZ2V0UG9pbnRPblF1YWRyYXRpY0Jlemllcj1mdW5jdGlvbihhLGIsYyxkLGUsZixnKXtmdW5jdGlvbiBoKGEpe3JldHVybiBhKmF9ZnVuY3Rpb24gaShhKXtyZXR1cm4gMiphKigxLWEpfWZ1bmN0aW9uIGooYSl7cmV0dXJuKDEtYSkqKDEtYSl9dmFyIGs9ZipoKGEpK2QqaShhKStiKmooYSksbD1nKmgoYSkrZSppKGEpK2MqaihhKTtyZXR1cm57eDprLHk6bH19LEtpbmV0aWMuUGF0aC5nZXRQb2ludE9uRWxsaXB0aWNhbEFyYz1mdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9TWF0aC5jb3MoZiksaD1NYXRoLnNpbihmKSxpPXt4OmMqTWF0aC5jb3MoZSkseTpkKk1hdGguc2luKGUpfTtyZXR1cm57eDphKyhpLngqZy1pLnkqaCkseTpiKyhpLngqaCtpLnkqZyl9fSxLaW5ldGljLlBhdGgucGFyc2VQYXRoRGF0YT1mdW5jdGlvbihhKXtpZighYSlyZXR1cm5bXTt2YXIgYj1hLGM9W1wibVwiLFwiTVwiLFwibFwiLFwiTFwiLFwidlwiLFwiVlwiLFwiaFwiLFwiSFwiLFwielwiLFwiWlwiLFwiY1wiLFwiQ1wiLFwicVwiLFwiUVwiLFwidFwiLFwiVFwiLFwic1wiLFwiU1wiLFwiYVwiLFwiQVwiXTtiPWIucmVwbGFjZShuZXcgUmVnRXhwKFwiIFwiLFwiZ1wiKSxcIixcIik7Zm9yKHZhciBkPTA7ZDxjLmxlbmd0aDtkKyspYj1iLnJlcGxhY2UobmV3IFJlZ0V4cChjW2RdLFwiZ1wiKSxcInxcIitjW2RdKTt2YXIgZT1iLnNwbGl0KFwifFwiKSxmPVtdLGc9MCxoPTA7Zm9yKGQ9MTtkPGUubGVuZ3RoO2QrKyl7dmFyIGk9ZVtkXSxqPWkuY2hhckF0KDApO2k9aS5zbGljZSgxKSxpPWkucmVwbGFjZShuZXcgUmVnRXhwKFwiLC1cIixcImdcIiksXCItXCIpLGk9aS5yZXBsYWNlKG5ldyBSZWdFeHAoXCItXCIsXCJnXCIpLFwiLC1cIiksaT1pLnJlcGxhY2UobmV3IFJlZ0V4cChcImUsLVwiLFwiZ1wiKSxcImUtXCIpO3ZhciBrPWkuc3BsaXQoXCIsXCIpO2subGVuZ3RoPjAmJlwiXCI9PT1rWzBdJiZrLnNoaWZ0KCk7Zm9yKHZhciBsPTA7bDxrLmxlbmd0aDtsKyspa1tsXT1wYXJzZUZsb2F0KGtbbF0pO2Zvcig7ay5sZW5ndGg+MCYmIWlzTmFOKGtbMF0pOyl7dmFyIG0sbixvLHAscSxyLHMsdCx1LHYsdz1udWxsLHg9W10seT1nLHo9aDtzd2l0Y2goail7Y2FzZVwibFwiOmcrPWsuc2hpZnQoKSxoKz1rLnNoaWZ0KCksdz1cIkxcIix4LnB1c2goZyxoKTticmVhaztjYXNlXCJMXCI6Zz1rLnNoaWZ0KCksaD1rLnNoaWZ0KCkseC5wdXNoKGcsaCk7YnJlYWs7Y2FzZVwibVwiOnZhciBBPWsuc2hpZnQoKSxCPWsuc2hpZnQoKTtpZihnKz1BLGgrPUIsdz1cIk1cIixmLmxlbmd0aD4yJiZcInpcIj09PWZbZi5sZW5ndGgtMV0uY29tbWFuZClmb3IodmFyIEM9Zi5sZW5ndGgtMjtDPj0wO0MtLSlpZihcIk1cIj09PWZbQ10uY29tbWFuZCl7Zz1mW0NdLnBvaW50c1swXStBLGg9ZltDXS5wb2ludHNbMV0rQjticmVha314LnB1c2goZyxoKSxqPVwibFwiO2JyZWFrO2Nhc2VcIk1cIjpnPWsuc2hpZnQoKSxoPWsuc2hpZnQoKSx3PVwiTVwiLHgucHVzaChnLGgpLGo9XCJMXCI7YnJlYWs7Y2FzZVwiaFwiOmcrPWsuc2hpZnQoKSx3PVwiTFwiLHgucHVzaChnLGgpO2JyZWFrO2Nhc2VcIkhcIjpnPWsuc2hpZnQoKSx3PVwiTFwiLHgucHVzaChnLGgpO2JyZWFrO2Nhc2VcInZcIjpoKz1rLnNoaWZ0KCksdz1cIkxcIix4LnB1c2goZyxoKTticmVhaztjYXNlXCJWXCI6aD1rLnNoaWZ0KCksdz1cIkxcIix4LnB1c2goZyxoKTticmVhaztjYXNlXCJDXCI6eC5wdXNoKGsuc2hpZnQoKSxrLnNoaWZ0KCksay5zaGlmdCgpLGsuc2hpZnQoKSksZz1rLnNoaWZ0KCksaD1rLnNoaWZ0KCkseC5wdXNoKGcsaCk7YnJlYWs7Y2FzZVwiY1wiOngucHVzaChnK2suc2hpZnQoKSxoK2suc2hpZnQoKSxnK2suc2hpZnQoKSxoK2suc2hpZnQoKSksZys9ay5zaGlmdCgpLGgrPWsuc2hpZnQoKSx3PVwiQ1wiLHgucHVzaChnLGgpO2JyZWFrO2Nhc2VcIlNcIjpuPWcsbz1oLG09ZltmLmxlbmd0aC0xXSxcIkNcIj09PW0uY29tbWFuZCYmKG49ZysoZy1tLnBvaW50c1syXSksbz1oKyhoLW0ucG9pbnRzWzNdKSkseC5wdXNoKG4sbyxrLnNoaWZ0KCksay5zaGlmdCgpKSxnPWsuc2hpZnQoKSxoPWsuc2hpZnQoKSx3PVwiQ1wiLHgucHVzaChnLGgpO2JyZWFrO2Nhc2VcInNcIjpuPWcsbz1oLG09ZltmLmxlbmd0aC0xXSxcIkNcIj09PW0uY29tbWFuZCYmKG49ZysoZy1tLnBvaW50c1syXSksbz1oKyhoLW0ucG9pbnRzWzNdKSkseC5wdXNoKG4sbyxnK2suc2hpZnQoKSxoK2suc2hpZnQoKSksZys9ay5zaGlmdCgpLGgrPWsuc2hpZnQoKSx3PVwiQ1wiLHgucHVzaChnLGgpO2JyZWFrO2Nhc2VcIlFcIjp4LnB1c2goay5zaGlmdCgpLGsuc2hpZnQoKSksZz1rLnNoaWZ0KCksaD1rLnNoaWZ0KCkseC5wdXNoKGcsaCk7YnJlYWs7Y2FzZVwicVwiOngucHVzaChnK2suc2hpZnQoKSxoK2suc2hpZnQoKSksZys9ay5zaGlmdCgpLGgrPWsuc2hpZnQoKSx3PVwiUVwiLHgucHVzaChnLGgpO2JyZWFrO2Nhc2VcIlRcIjpuPWcsbz1oLG09ZltmLmxlbmd0aC0xXSxcIlFcIj09PW0uY29tbWFuZCYmKG49ZysoZy1tLnBvaW50c1swXSksbz1oKyhoLW0ucG9pbnRzWzFdKSksZz1rLnNoaWZ0KCksaD1rLnNoaWZ0KCksdz1cIlFcIix4LnB1c2gobixvLGcsaCk7YnJlYWs7Y2FzZVwidFwiOm49ZyxvPWgsbT1mW2YubGVuZ3RoLTFdLFwiUVwiPT09bS5jb21tYW5kJiYobj1nKyhnLW0ucG9pbnRzWzBdKSxvPWgrKGgtbS5wb2ludHNbMV0pKSxnKz1rLnNoaWZ0KCksaCs9ay5zaGlmdCgpLHc9XCJRXCIseC5wdXNoKG4sbyxnLGgpO2JyZWFrO2Nhc2VcIkFcIjpwPWsuc2hpZnQoKSxxPWsuc2hpZnQoKSxyPWsuc2hpZnQoKSxzPWsuc2hpZnQoKSx0PWsuc2hpZnQoKSx1PWcsdj1oLGc9ay5zaGlmdCgpLGg9ay5zaGlmdCgpLHc9XCJBXCIseD10aGlzLmNvbnZlcnRFbmRwb2ludFRvQ2VudGVyUGFyYW1ldGVyaXphdGlvbih1LHYsZyxoLHMsdCxwLHEscik7YnJlYWs7Y2FzZVwiYVwiOnA9ay5zaGlmdCgpLHE9ay5zaGlmdCgpLHI9ay5zaGlmdCgpLHM9ay5zaGlmdCgpLHQ9ay5zaGlmdCgpLHU9Zyx2PWgsZys9ay5zaGlmdCgpLGgrPWsuc2hpZnQoKSx3PVwiQVwiLHg9dGhpcy5jb252ZXJ0RW5kcG9pbnRUb0NlbnRlclBhcmFtZXRlcml6YXRpb24odSx2LGcsaCxzLHQscCxxLHIpfWYucHVzaCh7Y29tbWFuZDp3fHxqLHBvaW50czp4LHN0YXJ0Ont4OnkseTp6fSxwYXRoTGVuZ3RoOnRoaXMuY2FsY0xlbmd0aCh5LHosd3x8aix4KX0pfShcInpcIj09PWp8fFwiWlwiPT09aikmJmYucHVzaCh7Y29tbWFuZDpcInpcIixwb2ludHM6W10sc3RhcnQ6dm9pZCAwLHBhdGhMZW5ndGg6MH0pfXJldHVybiBmfSxLaW5ldGljLlBhdGguY2FsY0xlbmd0aD1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGcsaCxpPUtpbmV0aWMuUGF0aDtzd2l0Y2goYyl7Y2FzZVwiTFwiOnJldHVybiBpLmdldExpbmVMZW5ndGgoYSxiLGRbMF0sZFsxXSk7Y2FzZVwiQ1wiOmZvcihlPTAsZj1pLmdldFBvaW50T25DdWJpY0JlemllcigwLGEsYixkWzBdLGRbMV0sZFsyXSxkWzNdLGRbNF0sZFs1XSksaD0uMDE7MT49aDtoKz0uMDEpZz1pLmdldFBvaW50T25DdWJpY0JlemllcihoLGEsYixkWzBdLGRbMV0sZFsyXSxkWzNdLGRbNF0sZFs1XSksZSs9aS5nZXRMaW5lTGVuZ3RoKGYueCxmLnksZy54LGcueSksZj1nO3JldHVybiBlO2Nhc2VcIlFcIjpmb3IoZT0wLGY9aS5nZXRQb2ludE9uUXVhZHJhdGljQmV6aWVyKDAsYSxiLGRbMF0sZFsxXSxkWzJdLGRbM10pLGg9LjAxOzE+PWg7aCs9LjAxKWc9aS5nZXRQb2ludE9uUXVhZHJhdGljQmV6aWVyKGgsYSxiLGRbMF0sZFsxXSxkWzJdLGRbM10pLGUrPWkuZ2V0TGluZUxlbmd0aChmLngsZi55LGcueCxnLnkpLGY9ZztyZXR1cm4gZTtjYXNlXCJBXCI6ZT0wO3ZhciBqPWRbNF0saz1kWzVdLGw9ZFs0XStrLG09TWF0aC5QSS8xODA7aWYoTWF0aC5hYnMoai1sKTxtJiYobT1NYXRoLmFicyhqLWwpKSxmPWkuZ2V0UG9pbnRPbkVsbGlwdGljYWxBcmMoZFswXSxkWzFdLGRbMl0sZFszXSxqLDApLDA+aylmb3IoaD1qLW07aD5sO2gtPW0pZz1pLmdldFBvaW50T25FbGxpcHRpY2FsQXJjKGRbMF0sZFsxXSxkWzJdLGRbM10saCwwKSxlKz1pLmdldExpbmVMZW5ndGgoZi54LGYueSxnLngsZy55KSxmPWc7ZWxzZSBmb3IoaD1qK207bD5oO2grPW0pZz1pLmdldFBvaW50T25FbGxpcHRpY2FsQXJjKGRbMF0sZFsxXSxkWzJdLGRbM10saCwwKSxlKz1pLmdldExpbmVMZW5ndGgoZi54LGYueSxnLngsZy55KSxmPWc7cmV0dXJuIGc9aS5nZXRQb2ludE9uRWxsaXB0aWNhbEFyYyhkWzBdLGRbMV0sZFsyXSxkWzNdLGwsMCksZSs9aS5nZXRMaW5lTGVuZ3RoKGYueCxmLnksZy54LGcueSl9cmV0dXJuIDB9LEtpbmV0aWMuUGF0aC5jb252ZXJ0RW5kcG9pbnRUb0NlbnRlclBhcmFtZXRlcml6YXRpb249ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoLGkpe3ZhciBqPWkqKE1hdGguUEkvMTgwKSxrPU1hdGguY29zKGopKihhLWMpLzIrTWF0aC5zaW4oaikqKGItZCkvMixsPS0xKk1hdGguc2luKGopKihhLWMpLzIrTWF0aC5jb3MoaikqKGItZCkvMixtPWsqay8oZypnKStsKmwvKGgqaCk7bT4xJiYoZyo9TWF0aC5zcXJ0KG0pLGgqPU1hdGguc3FydChtKSk7dmFyIG49TWF0aC5zcXJ0KChnKmcqaCpoLWcqZypsKmwtaCpoKmsqaykvKGcqZypsKmwraCpoKmsqaykpO2U9PT1mJiYobio9LTEpLGlzTmFOKG4pJiYobj0wKTt2YXIgbz1uKmcqbC9oLHA9biotaCprL2cscT0oYStjKS8yK01hdGguY29zKGopKm8tTWF0aC5zaW4oaikqcCxyPShiK2QpLzIrTWF0aC5zaW4oaikqbytNYXRoLmNvcyhqKSpwLHM9ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGguc3FydChhWzBdKmFbMF0rYVsxXSphWzFdKX0sdD1mdW5jdGlvbihhLGIpe3JldHVybihhWzBdKmJbMF0rYVsxXSpiWzFdKS8ocyhhKSpzKGIpKX0sdT1mdW5jdGlvbihhLGIpe3JldHVybihhWzBdKmJbMV08YVsxXSpiWzBdPy0xOjEpKk1hdGguYWNvcyh0KGEsYikpfSx2PXUoWzEsMF0sWyhrLW8pL2csKGwtcCkvaF0pLHc9WyhrLW8pL2csKGwtcCkvaF0seD1bKC0xKmstbykvZywoLTEqbC1wKS9oXSx5PXUodyx4KTtyZXR1cm4gdCh3LHgpPD0tMSYmKHk9TWF0aC5QSSksdCh3LHgpPj0xJiYoeT0wKSwwPT09ZiYmeT4wJiYoeS09MipNYXRoLlBJKSwxPT09ZiYmMD55JiYoeSs9MipNYXRoLlBJKSxbcSxyLGcsaCx2LHksaixmXX0sS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlBhdGgsXCJkYXRhXCIpLEtpbmV0aWMuQ29sbGVjdGlvbi5tYXBNZXRob2RzKEtpbmV0aWMuUGF0aCl9KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe2EuZmlsbFRleHQodGhpcy5wYXJ0aWFsVGV4dCwwLDApfWZ1bmN0aW9uIGIoYSl7YS5zdHJva2VUZXh0KHRoaXMucGFydGlhbFRleHQsMCwwKX12YXIgYz1cIlwiLGQ9XCJub3JtYWxcIjtLaW5ldGljLlRleHRQYXRoPWZ1bmN0aW9uKGEpe3RoaXMuX19faW5pdChhKX0sS2luZXRpYy5UZXh0UGF0aC5wcm90b3R5cGU9e19fX2luaXQ6ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpczt0aGlzLmR1bW15Q2FudmFzPUtpbmV0aWMuVXRpbC5jcmVhdGVDYW52YXNFbGVtZW50KCksdGhpcy5kYXRhQXJyYXk9W10sS2luZXRpYy5TaGFwZS5jYWxsKHRoaXMsYyksdGhpcy5fZmlsbEZ1bmM9YSx0aGlzLl9zdHJva2VGdW5jPWIsdGhpcy5fZmlsbEZ1bmNIaXQ9YSx0aGlzLl9zdHJva2VGdW5jSGl0PWIsdGhpcy5jbGFzc05hbWU9XCJUZXh0UGF0aFwiLHRoaXMuZGF0YUFycmF5PUtpbmV0aWMuUGF0aC5wYXJzZVBhdGhEYXRhKHRoaXMuYXR0cnMuZGF0YSksdGhpcy5vbihcImRhdGFDaGFuZ2Uua2luZXRpY1wiLGZ1bmN0aW9uKCl7ZC5kYXRhQXJyYXk9S2luZXRpYy5QYXRoLnBhcnNlUGF0aERhdGEodGhpcy5hdHRycy5kYXRhKX0pLHRoaXMub24oXCJ0ZXh0Q2hhbmdlLmtpbmV0aWMgdGV4dFN0cm9rZS5raW5ldGljIHRleHRTdHJva2VXaWR0aC5raW5ldGljXCIsZC5fc2V0VGV4dERhdGEpLGQuX3NldFRleHREYXRhKCksdGhpcy5zY2VuZUZ1bmModGhpcy5fc2NlbmVGdW5jKX0sX3NjZW5lRnVuYzpmdW5jdGlvbihhKXthLnNldEF0dHIoXCJmb250XCIsdGhpcy5fZ2V0Q29udGV4dEZvbnQoKSksYS5zZXRBdHRyKFwidGV4dEJhc2VsaW5lXCIsXCJtaWRkbGVcIiksYS5zZXRBdHRyKFwidGV4dEFsaWduXCIsXCJsZWZ0XCIpLGEuc2F2ZSgpO2Zvcih2YXIgYj10aGlzLmdseXBoSW5mbyxjPTA7YzxiLmxlbmd0aDtjKyspe2Euc2F2ZSgpO3ZhciBkPWJbY10ucDA7YS50cmFuc2xhdGUoZC54LGQueSksYS5yb3RhdGUoYltjXS5yb3RhdGlvbiksdGhpcy5wYXJ0aWFsVGV4dD1iW2NdLnRleHQsYS5maWxsU3Ryb2tlU2hhcGUodGhpcyksYS5yZXN0b3JlKCl9YS5yZXN0b3JlKCl9LGdldFRleHRXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHRXaWR0aH0sZ2V0VGV4dEhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHRIZWlnaHR9LHNldFRleHQ6ZnVuY3Rpb24oYSl7S2luZXRpYy5UZXh0LnByb3RvdHlwZS5zZXRUZXh0LmNhbGwodGhpcyxhKX0sX2dldFRleHRTaXplOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZHVtbXlDYW52YXMsYz1iLmdldENvbnRleHQoXCIyZFwiKTtjLnNhdmUoKSxjLmZvbnQ9dGhpcy5fZ2V0Q29udGV4dEZvbnQoKTt2YXIgZD1jLm1lYXN1cmVUZXh0KGEpO3JldHVybiBjLnJlc3RvcmUoKSx7d2lkdGg6ZC53aWR0aCxoZWlnaHQ6cGFyc2VJbnQodGhpcy5hdHRycy5mb250U2l6ZSwxMCl9fSxfc2V0VGV4dERhdGE6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9dGhpcy5fZ2V0VGV4dFNpemUodGhpcy5hdHRycy50ZXh0KTt0aGlzLnRleHRXaWR0aD1iLndpZHRoLHRoaXMudGV4dEhlaWdodD1iLmhlaWdodCx0aGlzLmdseXBoSW5mbz1bXTtmb3IodmFyIGMsZCxlLGY9dGhpcy5hdHRycy50ZXh0LnNwbGl0KFwiXCIpLGc9LTEsaD0wLGk9ZnVuY3Rpb24oKXtoPTA7Zm9yKHZhciBiPWEuZGF0YUFycmF5LGQ9ZysxO2Q8Yi5sZW5ndGg7ZCsrKXtpZihiW2RdLnBhdGhMZW5ndGg+MClyZXR1cm4gZz1kLGJbZF07XCJNXCI9PWJbZF0uY29tbWFuZCYmKGM9e3g6YltkXS5wb2ludHNbMF0seTpiW2RdLnBvaW50c1sxXX0pfXJldHVybnt9fSxqPWZ1bmN0aW9uKGIpe3ZhciBmPWEuX2dldFRleHRTaXplKGIpLndpZHRoLGc9MCxqPTA7Zm9yKGQ9dm9pZCAwO01hdGguYWJzKGYtZykvZj4uMDEmJjI1Pmo7KXtqKys7Zm9yKHZhciBrPWc7dm9pZCAwPT09ZTspZT1pKCksZSYmaytlLnBhdGhMZW5ndGg8ZiYmKGsrPWUucGF0aExlbmd0aCxlPXZvaWQgMCk7aWYoZT09PXt9fHx2b2lkIDA9PT1jKXJldHVybiB2b2lkIDA7dmFyIGw9ITE7c3dpdGNoKGUuY29tbWFuZCl7Y2FzZVwiTFwiOktpbmV0aWMuUGF0aC5nZXRMaW5lTGVuZ3RoKGMueCxjLnksZS5wb2ludHNbMF0sZS5wb2ludHNbMV0pPmY/ZD1LaW5ldGljLlBhdGguZ2V0UG9pbnRPbkxpbmUoZixjLngsYy55LGUucG9pbnRzWzBdLGUucG9pbnRzWzFdLGMueCxjLnkpOmU9dm9pZCAwO2JyZWFrO2Nhc2VcIkFcIjp2YXIgbT1lLnBvaW50c1s0XSxuPWUucG9pbnRzWzVdLG89ZS5wb2ludHNbNF0rbjswPT09aD9oPW0rMWUtODpmPmc/aCs9TWF0aC5QSS8xODAqbi9NYXRoLmFicyhuKTpoLT1NYXRoLlBJLzM2MCpuL01hdGguYWJzKG4pLCgwPm4mJm8+aHx8bj49MCYmaD5vKSYmKGg9byxsPSEwKSxkPUtpbmV0aWMuUGF0aC5nZXRQb2ludE9uRWxsaXB0aWNhbEFyYyhlLnBvaW50c1swXSxlLnBvaW50c1sxXSxlLnBvaW50c1syXSxlLnBvaW50c1szXSxoLGUucG9pbnRzWzZdKTticmVhaztjYXNlXCJDXCI6MD09PWg/aD1mPmUucGF0aExlbmd0aD8xZS04OmYvZS5wYXRoTGVuZ3RoOmY+Zz9oKz0oZi1nKS9lLnBhdGhMZW5ndGg6aC09KGctZikvZS5wYXRoTGVuZ3RoLGg+MSYmKGg9MSxsPSEwKSxkPUtpbmV0aWMuUGF0aC5nZXRQb2ludE9uQ3ViaWNCZXppZXIoaCxlLnN0YXJ0LngsZS5zdGFydC55LGUucG9pbnRzWzBdLGUucG9pbnRzWzFdLGUucG9pbnRzWzJdLGUucG9pbnRzWzNdLGUucG9pbnRzWzRdLGUucG9pbnRzWzVdKTticmVhaztjYXNlXCJRXCI6MD09PWg/aD1mL2UucGF0aExlbmd0aDpmPmc/aCs9KGYtZykvZS5wYXRoTGVuZ3RoOmgtPShnLWYpL2UucGF0aExlbmd0aCxoPjEmJihoPTEsbD0hMCksZD1LaW5ldGljLlBhdGguZ2V0UG9pbnRPblF1YWRyYXRpY0JlemllcihoLGUuc3RhcnQueCxlLnN0YXJ0LnksZS5wb2ludHNbMF0sZS5wb2ludHNbMV0sZS5wb2ludHNbMl0sZS5wb2ludHNbM10pfXZvaWQgMCE9PWQmJihnPUtpbmV0aWMuUGF0aC5nZXRMaW5lTGVuZ3RoKGMueCxjLnksZC54LGQueSkpLGwmJihsPSExLGU9dm9pZCAwKX19LGs9MDtrPGYubGVuZ3RoJiYoaihmW2tdKSx2b2lkIDAhPT1jJiZ2b2lkIDAhPT1kKTtrKyspe3ZhciBsPUtpbmV0aWMuUGF0aC5nZXRMaW5lTGVuZ3RoKGMueCxjLnksZC54LGQueSksbT0wLG49S2luZXRpYy5QYXRoLmdldFBvaW50T25MaW5lKG0rbC8yLGMueCxjLnksZC54LGQueSksbz1NYXRoLmF0YW4yKGQueS1jLnksZC54LWMueCk7dGhpcy5nbHlwaEluZm8ucHVzaCh7dHJhbnNwb3NlWDpuLngsdHJhbnNwb3NlWTpuLnksdGV4dDpmW2tdLHJvdGF0aW9uOm8scDA6YyxwMTpkfSksYz1kfX19LEtpbmV0aWMuVGV4dFBhdGgucHJvdG90eXBlLl9nZXRDb250ZXh0Rm9udD1LaW5ldGljLlRleHQucHJvdG90eXBlLl9nZXRDb250ZXh0Rm9udCxLaW5ldGljLlV0aWwuZXh0ZW5kKEtpbmV0aWMuVGV4dFBhdGgsS2luZXRpYy5TaGFwZSksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlRleHRQYXRoLFwiZm9udEZhbWlseVwiLFwiQXJpYWxcIiksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlRleHRQYXRoLFwiZm9udFNpemVcIiwxMiksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlRleHRQYXRoLFwiZm9udFN0eWxlXCIsZCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlRleHRQYXRoLFwiZm9udFZhcmlhbnRcIixkKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyKEtpbmV0aWMuVGV4dFBhdGgsXCJ0ZXh0XCIsYyksS2luZXRpYy5Db2xsZWN0aW9uLm1hcE1ldGhvZHMoS2luZXRpYy5UZXh0UGF0aCl9KCksZnVuY3Rpb24oKXtLaW5ldGljLlJlZ3VsYXJQb2x5Z29uPWZ1bmN0aW9uKGEpe3RoaXMuX19faW5pdChhKX0sS2luZXRpYy5SZWd1bGFyUG9seWdvbi5wcm90b3R5cGU9e19fX2luaXQ6ZnVuY3Rpb24oYSl7S2luZXRpYy5TaGFwZS5jYWxsKHRoaXMsYSksdGhpcy5jbGFzc05hbWU9XCJSZWd1bGFyUG9seWdvblwiLHRoaXMuc2NlbmVGdW5jKHRoaXMuX3NjZW5lRnVuYyl9LF9zY2VuZUZ1bmM6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU9dGhpcy5hdHRycy5zaWRlcyxmPXRoaXMuYXR0cnMucmFkaXVzO2ZvcihhLmJlZ2luUGF0aCgpLGEubW92ZVRvKDAsMC1mKSxiPTE7ZT5iO2IrKyljPWYqTWF0aC5zaW4oMipiKk1hdGguUEkvZSksZD0tMSpmKk1hdGguY29zKDIqYipNYXRoLlBJL2UpLGEubGluZVRvKGMsZCk7YS5jbG9zZVBhdGgoKSxhLmZpbGxTdHJva2VTaGFwZSh0aGlzKX19LEtpbmV0aWMuVXRpbC5leHRlbmQoS2luZXRpYy5SZWd1bGFyUG9seWdvbixLaW5ldGljLlNoYXBlKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuUmVndWxhclBvbHlnb24sXCJyYWRpdXNcIiwwKSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuUmVndWxhclBvbHlnb24sXCJzaWRlc1wiLDApLEtpbmV0aWMuQ29sbGVjdGlvbi5tYXBNZXRob2RzKEtpbmV0aWMuUmVndWxhclBvbHlnb24pfSgpLGZ1bmN0aW9uKCl7S2luZXRpYy5TdGFyPWZ1bmN0aW9uKGEpe3RoaXMuX19faW5pdChhKX0sS2luZXRpYy5TdGFyLnByb3RvdHlwZT17X19faW5pdDpmdW5jdGlvbihhKXtLaW5ldGljLlNoYXBlLmNhbGwodGhpcyxhKSx0aGlzLmNsYXNzTmFtZT1cIlN0YXJcIix0aGlzLnNjZW5lRnVuYyh0aGlzLl9zY2VuZUZ1bmMpfSxfc2NlbmVGdW5jOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaW5uZXJSYWRpdXMoKSxjPXRoaXMub3V0ZXJSYWRpdXMoKSxkPXRoaXMubnVtUG9pbnRzKCk7YS5iZWdpblBhdGgoKSxhLm1vdmVUbygwLDAtYyk7Zm9yKHZhciBlPTE7MipkPmU7ZSsrKXt2YXIgZj1lJTI9PT0wP2M6YixnPWYqTWF0aC5zaW4oZSpNYXRoLlBJL2QpLGg9LTEqZipNYXRoLmNvcyhlKk1hdGguUEkvZCk7YS5saW5lVG8oZyxoKX1hLmNsb3NlUGF0aCgpLGEuZmlsbFN0cm9rZVNoYXBlKHRoaXMpfX0sS2luZXRpYy5VdGlsLmV4dGVuZChLaW5ldGljLlN0YXIsS2luZXRpYy5TaGFwZSksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlN0YXIsXCJudW1Qb2ludHNcIiw1KSxLaW5ldGljLkZhY3RvcnkuYWRkR2V0dGVyU2V0dGVyKEtpbmV0aWMuU3RhcixcImlubmVyUmFkaXVzXCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlN0YXIsXCJvdXRlclJhZGl1c1wiLDApLEtpbmV0aWMuQ29sbGVjdGlvbi5tYXBNZXRob2RzKEtpbmV0aWMuU3Rhcil9KCksZnVuY3Rpb24oKXt2YXIgYT1bXCJmb250RmFtaWx5XCIsXCJmb250U2l6ZVwiLFwiZm9udFN0eWxlXCIsXCJwYWRkaW5nXCIsXCJsaW5lSGVpZ2h0XCIsXCJ0ZXh0XCJdLGI9XCJDaGFuZ2Uua2luZXRpY1wiLGM9XCJub25lXCIsZD1cInVwXCIsZT1cInJpZ2h0XCIsZj1cImRvd25cIixnPVwibGVmdFwiLGg9XCJMYWJlbFwiLGk9YS5sZW5ndGg7S2luZXRpYy5MYWJlbD1mdW5jdGlvbihhKXt0aGlzLl9fX19pbml0KGEpfSxLaW5ldGljLkxhYmVsLnByb3RvdHlwZT17X19fX2luaXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpczt0aGlzLmNsYXNzTmFtZT1oLEtpbmV0aWMuR3JvdXAuY2FsbCh0aGlzLGEpLHRoaXMub24oXCJhZGQua2luZXRpY1wiLGZ1bmN0aW9uKGEpe2IuX2FkZExpc3RlbmVycyhhLmNoaWxkKSxiLl9zeW5jKCl9KX0sZ2V0VGV4dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbmQoXCJUZXh0XCIpWzBdfSxnZXRUYWc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maW5kKFwiVGFnXCIpWzBdfSxfYWRkTGlzdGVuZXJzOmZ1bmN0aW9uKGMpe3ZhciBkLGU9dGhpcyxmPWZ1bmN0aW9uKCl7ZS5fc3luYygpfTtmb3IoZD0wO2k+ZDtkKyspYy5vbihhW2RdK2IsZil9LGdldFdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0VGV4dCgpLmdldFdpZHRoKCl9LGdldEhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFRleHQoKS5nZXRIZWlnaHQoKX0sX3N5bmM6ZnVuY3Rpb24oKXt2YXIgYSxiLGMsaCxpLGosayxsPXRoaXMuZ2V0VGV4dCgpLG09dGhpcy5nZXRUYWcoKTtpZihsJiZtKXtzd2l0Y2goYT1sLmdldFdpZHRoKCksYj1sLmdldEhlaWdodCgpLGM9bS5nZXRQb2ludGVyRGlyZWN0aW9uKCksaD1tLmdldFBvaW50ZXJXaWR0aCgpLGs9bS5nZXRQb2ludGVySGVpZ2h0KCksaT0wLGo9MCxjKXtjYXNlIGQ6aT1hLzIsaj0tMSprO2JyZWFrO2Nhc2UgZTppPWEraCxqPWIvMjticmVhaztjYXNlIGY6aT1hLzIsaj1iK2s7YnJlYWs7Y2FzZSBnOmk9LTEqaCxqPWIvMn1tLnNldEF0dHJzKHt4Oi0xKmkseTotMSpqLHdpZHRoOmEsaGVpZ2h0OmJ9KSxsLnNldEF0dHJzKHt4Oi0xKmkseTotMSpqfSl9fX0sS2luZXRpYy5VdGlsLmV4dGVuZChLaW5ldGljLkxhYmVsLEtpbmV0aWMuR3JvdXApLEtpbmV0aWMuQ29sbGVjdGlvbi5tYXBNZXRob2RzKEtpbmV0aWMuTGFiZWwpLEtpbmV0aWMuVGFnPWZ1bmN0aW9uKGEpe3RoaXMuX19faW5pdChhKX0sS2luZXRpYy5UYWcucHJvdG90eXBlPXtfX19pbml0OmZ1bmN0aW9uKGEpe0tpbmV0aWMuU2hhcGUuY2FsbCh0aGlzLGEpLHRoaXMuY2xhc3NOYW1lPVwiVGFnXCIsdGhpcy5zY2VuZUZ1bmModGhpcy5fc2NlbmVGdW5jKX0sX3NjZW5lRnVuYzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldFdpZHRoKCksYz10aGlzLmdldEhlaWdodCgpLGg9dGhpcy5nZXRQb2ludGVyRGlyZWN0aW9uKCksaT10aGlzLmdldFBvaW50ZXJXaWR0aCgpLGo9dGhpcy5nZXRQb2ludGVySGVpZ2h0KCk7YS5iZWdpblBhdGgoKSxhLm1vdmVUbygwLDApLGg9PT1kJiYoYS5saW5lVG8oKGItaSkvMiwwKSxhLmxpbmVUbyhiLzIsLTEqaiksYS5saW5lVG8oKGIraSkvMiwwKSksYS5saW5lVG8oYiwwKSxoPT09ZSYmKGEubGluZVRvKGIsKGMtaikvMiksYS5saW5lVG8oYitpLGMvMiksYS5saW5lVG8oYiwoYytqKS8yKSksYS5saW5lVG8oYixjKSxoPT09ZiYmKGEubGluZVRvKChiK2kpLzIsYyksYS5saW5lVG8oYi8yLGMraiksYS5saW5lVG8oKGItaSkvMixjKSksYS5saW5lVG8oMCxjKSxoPT09ZyYmKGEubGluZVRvKDAsKGMraikvMiksYS5saW5lVG8oLTEqaSxjLzIpLGEubGluZVRvKDAsKGMtaikvMikpLGEuY2xvc2VQYXRoKCksYS5maWxsU3Ryb2tlU2hhcGUodGhpcyl9fSxLaW5ldGljLlV0aWwuZXh0ZW5kKEtpbmV0aWMuVGFnLEtpbmV0aWMuU2hhcGUpLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5UYWcsXCJwb2ludGVyRGlyZWN0aW9uXCIsYyksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlRhZyxcInBvaW50ZXJXaWR0aFwiLDApLEtpbmV0aWMuRmFjdG9yeS5hZGRHZXR0ZXJTZXR0ZXIoS2luZXRpYy5UYWcsXCJwb2ludGVySGVpZ2h0XCIsMCksS2luZXRpYy5GYWN0b3J5LmFkZEdldHRlclNldHRlcihLaW5ldGljLlRhZyxcImNvcm5lclJhZGl1c1wiLDApLEtpbmV0aWMuQ29sbGVjdGlvbi5tYXBNZXRob2RzKEtpbmV0aWMuVGFnKX0oKTsiXSwiZmlsZSI6ImtpbmV0aWMuanMifQ==
