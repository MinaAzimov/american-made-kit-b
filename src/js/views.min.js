homeView = function(e, t) {

    this.container = e, this.dispatcher = void 0 !== t ? t : new Dispatcher, this.device = Detectizr.device.type, this.sections = ["home", "story", "castncrew", "gallery", "videos", "tickets"]
}, homeView.prototype = {
    constructor: homeView,
    init: function() {
        this.dispatcher.dispatch("ANALYTICS", {
            hitType: "pageview",
            page: "www.mylink"
        }), this.dispatcher.dispatch("ANALYTICS", {
            hitType: "event",
            eventCategory: "Videos",
            eventAction: "play",
            eventLabel: "Fall Campaign"
        }), this.addYoutubeVideo(), 

         document.getElementById("splash_trailer").addEventListener("click", function() {
            var e = Array.prototype.slice.call(document.getElementById("videos-list").children),
                t = e.indexOf(this);
                    console.log(0), app.dispatcher.dispatch("CUE_PLAYLIST_INDEX", 0);
                    app.dispatcher.dispatch("SHOW_TRAILER")
        }),
        document.getElementById("splash_trailer2").addEventListener("click", function() {
            var e = Array.prototype.slice.call(document.getElementById("videos-list").children),
                t = e.indexOf(this);
                    console.log(0), app.dispatcher.dispatch("CUE_PLAYLIST_INDEX", 0);
                    app.dispatcher.dispatch("SHOW_TRAILER")
        }),
        $("#videos-list-mobile li.video_active").click(function() {
            var e = Array.prototype.slice.call(document.getElementById("videos-list-mobile").children),
                t = e.indexOf(this);
            switch (t) {
                case 0:
                    console.log(0), app.dispatcher.dispatch("CUE_PLAYLIST_INDEX", 0);
                    break;
                case 1:
                    console.log(1), app.dispatcher.dispatch("CUE_PLAYLIST_INDEX", 1);
                    break;
               
            }
            app.dispatcher.dispatch("SHOW_TRAILER")
        }),
          $("#videos-list-safari li.video_active-safari").click(function() {
            var e = Array.prototype.slice.call(document.getElementById("videos-list-safari").children),
                t = e.indexOf(this);
            switch (t) {
                case 0:
                    console.log(0), app.dispatcher.dispatch("CUE_PLAYLIST_INDEX", 0);
                    break;
                case 1:
                    console.log(1), app.dispatcher.dispatch("CUE_PLAYLIST_INDEX", 1);
                    break;
               
            }
            app.dispatcher.dispatch("SHOW_TRAILER")
        }),

        $("#tout_trailer-safari").click(function() {
            var e = Array.prototype.slice.call(document.getElementById("videos-list").children),
                t = e.indexOf(this);
                    console.log(0), app.dispatcher.dispatch("CUE_PLAYLIST_INDEX", 0);
            app.dispatcher.dispatch("SHOW_TRAILER")
        }),
         "mobile" != Detectizr.device.type ? this.initPreload() : (this.initPreloadMobile(), $("#splash").show(), $("body").removeClass("noscroll"), window.location.hash="home-mobile"),
        "desktop" !== app.device && "safari" == app.browser && this.onIOSdevice(app.device)
    },
    onSplashHide: function() {
        document.removeEventListener("touchmove", app.onScroll, !1), $("#splash").hide(),  this.initPreload(), $("body").removeClass("noscroll")
    },
    onLoadComplete: function() {
       this.populate(), window.scrollTo(0, 0)
    },
    onIntroComplete: function() {
        app.preloader.startLoad()
    },


    preventScroll: function(e) {
        e.preventDefault(), e.stopPropagation()
    },
    populate: function() {
        for (i = 0; i < data.home.tout.length; i++) $("#touts").append('<li class="tout" id="tout' + (i + 1) + '"><a href="' + data.home.tout[i].link + '" target="_blank"> <div class="tout_border"></div> <img src="' + data.home.tout[i].img + '" />  <div class="tout_inner"><h1>' + data.home.tout[i].label + "</h1></div></a></li>");

        TweenMax.delayedCall(1, this.homeAnimate.bind(this)), this.bindEvents()
    },
    homeAnimate: function() {
        document.getElementById("tout_video").play();
        var e = new TimelineMax;
        e.set($("#btn_scroll_outer"), {
            transformOrign: "50% 50%"
        }).set($("#btn_scroll_middle"), {
            transformOrign: "50% 50%"
        }).set($("#btn_scroll_inner"), {
            transformOrign: "50% 50%"
        }).fromTo($("#btn_scroll_outer"), .5, {
            scale: 0
        }, {
            scale: 1,
            ease: Back.easeOut.config(2)
        }, "grp").fromTo($("#btn_scroll_middle"), .35, {
            scale: 0
        }, {
            scale: 1,
            delay: .1,
            ease: Back.easeOut.config(2)
        }, "grp").fromTo($("#btn_scroll_inner"), .25, {
            scale: 0
        }, {
            scale: 1,
            delay: .3,
            ease: Circ.easeOut
        }, "grp").fromTo($("#btn_scroll_text"), .25, {
            y: 20,
            autoAlpha: 0
        }, {
            y: 10,
            autoAlpha: 1,
            delay: .5,
            ease: Power2.easeOut,
            onComplete: function() {
            
                $("#btn_scroll").mouseenter(function() {
                    TweenMax.fromTo($("#btn_scroll_text"), .5, {
                        y: 10
                    }, {
                        y: 5,
                        ease: Circ.easeInOut
                    }), TweenMax.to($("#btn_scroll_divider"), .25, {
                        clip: "rect(0px, 10px, 1px, 0px)",
                        delay: .1,
                        ease: Circ.easeInOut
                    }), TweenMax.to($("#btn_scroll_outer"), .35, {
                        scale: 1.1,
                        delay: .05,
                        ease: Power2.easeInOut
                    }), TweenMax.to($("#btn_scroll_middle"), .25, {
                        scale: 1.05,
                        autoAlpha: .9,
                        ease: Power2.easeInOut
                    }), TweenMax.to($("#btn_scroll_inner"), .25, {
                        scale: 1.1,
                        ease: Power2.easeInOut
                    })
                }).mouseleave(function() {
                    TweenMax.to($("#btn_scroll_divider"), .25, {
                        clip: "rect(0px, 5px, 1px, 5px)",
                        ease: Circ.easeInOut
                    }), TweenMax.fromTo($("#btn_scroll_text"), .25, {
                        y: 5
                    }, {
                        y: 10,
                        delay: .1,
                        ease: Circ.easeInOut
                    }), TweenMax.to($("#btn_scroll_outer"), .5, {
                        scale: 1,
                        ease: Power2.easeInOut
                    }), TweenMax.to($("#btn_scroll_middle"), .35, {
                        scale: 1,
                        autoAlpha: .75,
                        delay: .1,
                        ease: Power2.easeInOut
                    }), TweenMax.to($("#btn_scroll_inner"), .35, {
                        scale: 1,
                        delay: .15,
                        ease: Power2.easeInOut
                    })
                }), document.getElementById("btn_scroll").addEventListener("click", function() {
                 
                }.bind(this))
            }.bind(this)
        }, "grp");
        var t = new TimelineMax({
            delay: 2,
            repeat: -1
        });
        t.staggerFromTo($("#btn_scroll_arrows img"), .15, {
            y: -3,
            autoAlpha: 0
        }, {
            y: 0,
            autoAlpha: 1,
            ease: Power3.easeOut
        }, .05).staggerFromTo($("#btn_scroll_arrows img"), .15, {
            y: 0,
            autoAlpha: 1
        }, {
            y: 3,
            autoAlpha: 0,
            delay: 1.0,
            ease: Power3.easeOut
        }, .05);
        var s = new TimelineMax({
            repeat: -1
        });
        
    },

  
    initPreload: function() {

     
        app.preloader = new AssetManager(settings.initialManifest, app.dispatcher), this.dispatcher.addEventlistener("AM_COMPLETE_G", this.onLoadComplete.bind(this)), this.dispatcher.addEventlistener("INTRO_DONE_EVENT", this.onIntroComplete.bind(this)), this.preloadView = new PreloadView(app.dispatcher), this.preloadView.intro()
    },
    initPreloadMobile: function() {
           app.preloader = new AssetManager(settingsmobile.initialManifest, app.dispatcher), this.dispatcher.addEventlistener("AM_COMPLETE_G", this.onLoadComplete.bind(this)), this.dispatcher.addEventlistener("INTRO_DONE_EVENT", this.onIntroComplete.bind(this)), this.preloadView = new PreloadView(app.dispatcher), this.preloadView.intro()
    },
    bindEvents: function() {
        for (i = 0; i < this.sections.length; i++) TweenMax.set($("#nav-" + this.sections[i] + " .nav-margin-top"), {
            clip: "rect(0px, 0px, 1px, 0px)"
        }), TweenMax.set($("#nav-" + this.sections[i] + " .nav-margin-bottom"), {
            clip: "rect(0px, 0px, 1px, " + $("#nav-" + this.sections[i]).width() + "px)"
        });
        $(".navbar-main li").mouseenter(function() {
            TweenMax.to($(this).find(".nav-margin-top"), .35, {
                clip: "rect(0px, " + ((this.offsetWidth - 40) / 2 + 5) + "px, 1px, 0px)",
                ease: Circ.easeIn
            }), TweenMax.to($(this).find(".nav-margin-top"), .25, {
                clip: "rect(0px, " + ((this.offsetWidth - 40) / 2 + 5) + "px, 1px, " + ((this.offsetWidth - 40) / 2 - 5) + "px)",
                delay: .35,
                ease: Circ.easeOut
            }), TweenMax.to($(this).find(".nav-margin-bottom"), .35, {
                clip: "rect(0px, " + (this.offsetWidth - 40) + "px, 1px, " + ((this.offsetWidth - 40) / 2 - 5) + "px)",
                ease: Circ.easeIn
            }), TweenMax.to($(this).find(".nav-margin-bottom"), .25, {
                clip: "rect(0px, " + ((this.offsetWidth - 40) / 2 + 5) + "px, 1px, " + ((this.offsetWidth - 40) / 2 - 5) + "px)",
                delay: .35,
                ease: Circ.easeOut
            })
        }).mouseleave(function() {
            TweenMax.to($(this).find(".nav-margin-top"), .35, {
                clip: "rect(0px, " + (this.offsetWidth - 40) + "px, 1px, " + ((this.offsetWidth - 40) / 2 - 5) + "px)",
                ease: Circ.easeIn
            }), TweenMax.to($(this).find(".nav-margin-top"), .25, {
                clip: "rect(0px, " + (this.offsetWidth - 40) + "px, 1px, " + (this.offsetWidth - 40) + "px)",
                delay: .35,
                ease: Circ.easeOut
            }), TweenMax.set($(this).find(".nav-margin-top"), {
                clip: "rect(0px, 0px, 1px, 0px)",
                delay: .6
            }), TweenMax.to($(this).find(".nav-margin-bottom"), .35, {
                clip: "rect(0px, " + ((this.offsetWidth - 40) / 2 + 5) + "px, 1px, 0px)",
                ease: Circ.easeIn
            }), TweenMax.to($(this).find(".nav-margin-bottom"), .25, {
                clip: "rect(0px, 0px, 1px, 0px)",
                delay: .35,
                ease: Circ.easeOut
            }), TweenMax.set($(this).find(".nav-margin-bottom"), {
                clip: "rect(0px, 0px, 1px, " + (this.offsetWidth - 40) + "px)",
                delay: .6
            })
        }),  $("#tout_trailer").mouseenter(function() {
            TweenMax.set($("#tout_trailer_btn_over"), {
                transformOrign: "50% 50%"
            }), TweenMax.to($(this).find(".tout_border"), .25, {
                "border-width": "4px",
                ease: Power4.easeOut
            }), TweenMax.to($(this).find("#tout_trailer_btn_over"), .15, {
                scale: 1,
                ease: Power4.easeOut
            }), TweenMax.to($(this).find("#tout_trailer_btn_over img"), .15, {
                x: 34,
                delay: .15,
                ease: Power4.easeOut
            })
        }).mouseleave(function() {
            TweenMax.to($(this).find(".tout_border"), .25, {
                "border-width": "2px",
                ease: Power4.easeOut
            }), TweenMax.to($(this).find("#tout_trailer_btn_over img"), .15, {
                x: 0,
                ease: Power4.easeOut
            }), TweenMax.to($(this).find("#tout_trailer_btn_over"), .15, {
                scale: 0,
                delay: .15,
                ease: Power4.easeOut
            })
        }), $(".tout").mouseenter(function() {
            TweenMax.to($(this).find(".tout_border"), .25, {
                "border-width": "4px",
                ease: Power4.easeOut
            }), TweenMax.fromTo($(this).find("h1"), .2, {
                y: 0,
                autoAlpha: 1
            }, {
                y: 6,
                autoAlpha: 0,
                ease: Power3.easeOut
            }), TweenMax.fromTo($(this).find("h1"), .2, {
                y: -6,
                autoAlpha: 0
            }, {
                y: 0,
                autoAlpha: 1,
                delay: .2,
                ease: Power3.easeOut
            })
        }).mouseleave(function() {
            TweenMax.to($(this).find(".tout_border"), .25, {
                "border-width": "2px",
                ease: Power4.easeOut
            }), TweenMax.fromTo($(this).find("h1"), .2, {
                y: 0,
                autoAlpha: 1
            }, {
                y: -6,
                autoAlpha: 0,
                ease: Power3.easeOut
            }), TweenMax.fromTo($(this).find("h1"), .2, {
                y: 6,
                autoAlpha: 0
            }, {
                y: 0,
                autoAlpha: 1,
                delay: .2,
                ease: Power3.easeOut
            })
        })
    },
   
    addYoutubeVideo: function() {
        var e = {
                playBtn: "yt-playtoggle",
                scrubber: "yt-progress-holder",
                soundBtn: "yt-soundtoggle",
                prevBtn: "yt-previous",
                nextBtn: "yt-next"
            },
            t = {
                containerID: "trailer_overlay",
                id: "PLuq_rgCzEP_NX61MTbG3euU6L_9SscIop", 
                closeBtn: "yt-close",
                list: !0,
                index: 0,
                showinfo: 0,
                autoplay: 0,
                controls: 0,
                loop: 1,
                customControls: !0,
                customBackground: !0,
                dispatcher: app.dispatcher,
                customButtons: e
            };
        this.yt = new Trailer(t, app.dispatcher), this.yt.add(), document.getElementById("nav_trailer").addEventListener("click", function() {
            "desktop" !== this.device && $(".navbar-toggle").click(), app.dispatcher.dispatch("SHOW_TRAILER")
        }.bind(this)), document.getElementById("tout_trailer").addEventListener("click", function() {
            var e = Array.prototype.slice.call(document.getElementById("videos-list").children),
                t = e.indexOf(this);
                    console.log(0), app.dispatcher.dispatch("CUE_PLAYLIST_INDEX", 0);
                    app.dispatcher.dispatch("SHOW_TRAILER")
        })
    }
}, PreloadView = function(e) {

    this.vh = -1 * window.innerHeight, this.view = document.getElementById("preloader"), this.content = document.getElementById("preloader-content"), this.dispatcher = void 0 !== e ? e : new Dispatcher, this.device = Detectizr.device.type, this.tl = new TimelineMax({
        delay: .5
    }), this.split = new SplitText("#preloader-text", {
        type: "chars"
    }), this.init()
}, PreloadView.prototype = {
    constructor: PreloadView,
    init: function() {
        this.bindEvents(), this.intro(), chars = this.split.chars, $('#preloader').addClass('animating') , this.tl.set($("#preloader-indicator"), {
            clip: "rect(0px, " + $("#preloader-indicator").width() * 2 + "px, 2px, " + $("#preloader-indicator").width() * 2 + "px)"
        }).set($("#preloader-content h1"), {
            autoAlpha: 1
        }).to($("#preloader-indicator"), .5, {
            clip: "rect(0px, " + $("#preloader-indicator").width() + "px, 2px, 0px)",
            ease: Power1.easeInOut
        }).set($("#preloader-indicator-bg"), {
            autoAlpha: 1
        }).fromTo($("#preloader-tt-1"), 0.9, {
            autoAlpha: 0,
            y: 80
        }, {
            autoAlpha: 1,
            y: 0,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-2"), 2.0, {
            autoAlpha: 0,
            y: 80
        }, {
            autoAlpha: 1,
            y: 0,
            delay: .1,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-3"), 0.7, {
            autoAlpha: 0,
            y: 20
        }, {
            autoAlpha: 1,
            y: 0,
            delay: .2,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-4"), 1.7, {
            autoAlpha: 0,
            y: 40
        },{
            autoAlpha: 1,
            y: 0,
            delay: .2,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-5"), 1.2, {
            autoAlpha: 0,
            y: 50
        },
        {
            autoAlpha: 1,
            y: 0,
            delay: .2,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-6"), 0.8, {
            autoAlpha: 0,
            y: 60
        },
        {
            autoAlpha: 1,
            y: 0,
            delay: .2,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-7"), 2.5, {
            autoAlpha: 0,
            y: 70
        }, 
        {
            autoAlpha: 1,
            y: 0,
            delay: .2,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-8"), 0.9, {
            autoAlpha: 0,
            y: 80
        },  
         {
            autoAlpha: 1,
            y: 0,
            delay: .2,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-9"), 0.5, {
            autoAlpha: 0,
            y: 90
        },
         {
            autoAlpha: 1,
            y: 0,
            delay: .2,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-10"), 1.7, {
            autoAlpha: 0,
            y: 60
        },
         {
            autoAlpha: 1,
            y: 0,
            delay: .2,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-11"), 1.1, {
            autoAlpha: 0,
            y: 80
        },
         {
            autoAlpha: 1,
            y: 0,
            delay: .2,
            ease: Power4.easeOut
        }, "grp1").fromTo($("#preloader-tt-12"), 1.1, {
            autoAlpha: 0,
            y: 80
        },
         {
            autoAlpha: 1,
            y: 0,
            delay: .2,
            ease: Power4.easeOut
        }, "grp1").fromTo($("#preloader-tt-13"), 2.0, {
            autoAlpha: 0,
            y: 80
        }, {
            autoAlpha: 1,
            y: 0,
            delay: 1.06,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-14"), 0.7, {
            autoAlpha: 0,
            y: 20
        }, {
            autoAlpha: 1,
            y: 0,
            delay: 1.07,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-14"), 1.7, {
            autoAlpha: 0,
            y: 40
        },{
            autoAlpha: 1,
            y: 0,
            delay: 1.07,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-15"), 1.2, {
            autoAlpha: 0,
            y: 50
        },
        {
            autoAlpha: 1,
            y: 0,
            delay: 1.07,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-16"), 0.8, {
            autoAlpha: 0,
            y: 60
        },
        {
            autoAlpha: 1,
            y: 0,
            delay: 1.07,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-17"), 1.5, {
            autoAlpha: 0,
            y: 70
        }, 
        {
            autoAlpha: 1,
            y: 0,
            delay: 1.07,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-18"), 0.9, {
            autoAlpha: 0,
            y: 80
        },  
         {
            autoAlpha: 1,
            y: 0,
            delay: 1.07,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-19"), 0.5, {
            autoAlpha: 0,
            y: 90
        },
         {
            autoAlpha: 1,
            y: 0,
            delay: 1.07,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-20"), 1.7, {
            autoAlpha: 0,
            y: 60
        },
         {
            autoAlpha: 1,
            y: 0,
            delay: 1.07,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-21"), 1.1, {
            autoAlpha: 0,
            y: 80
        },
         {
            autoAlpha: 1,
            y: 0,
            delay: 1.07,
            ease: Power4.easeOut
        }, "grp1").fromTo($("#preloader-tt-22"), 2.0, {
            autoAlpha: 0,
            y: 80
        }, {
            autoAlpha: 1,
            y: 0,
            delay: 1.06,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-23"), 0.7, {
            autoAlpha: 0,
            y: 20
        }, {
            autoAlpha: 1,
            y: 0,
            delay: 1.07,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-24"), 1.7, {
            autoAlpha: 0,
            y: 40
        },{
            autoAlpha: 1,
            y: 0,
            delay: 1.07,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-25"), 1.2, {
            autoAlpha: 0,
            y: 50
        },
        {
            autoAlpha: 1,
            y: 0,
            delay: 1.2,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-26"), 0.8, {
            autoAlpha: 0,
            y: 60
        },
        {
            autoAlpha: 1,
            y: 0,
            delay: 1.2,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-27"), 2.5, {
            autoAlpha: 0,
            y: 70
        }, 
        {
            autoAlpha: 1,
            y: 0,
            delay: 1.2,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-28"), 0.9, {
            autoAlpha: 0,
            y: 80
        },  
         {
            autoAlpha: 1,
            y: 0,
            delay: 1.2,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-29"), 0.5, {
            autoAlpha: 0,
            y: 90
        },
         {
            autoAlpha: 1,
            y: 0,
            delay: 1.2,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-30"), 1.7, {
            autoAlpha: 0,
            y: 60
        },
         {
            autoAlpha: 1,
            y: 0,
            delay: 1.2,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-31"), 1.1, {
            autoAlpha: 0,
            y: 80
        },
         {
            autoAlpha: 1,
            y: 0,
            delay: 1.2,
            ease: Power4.easeOut
        }, "grp1").fromTo($("#preloader-tt-32"), 1.1, {
            autoAlpha: 0,
            y: 80
        },
         {
            autoAlpha: 1,
            y: 0,
            delay: 1.2,
            ease: Power4.easeOut
        }, "grp1").fromTo($("#preloader-tt-33"), 1.1, {
            autoAlpha: 0,
            y: 80
        }, {
            autoAlpha: 1,
            y: 0,
            delay: 1.1,
            ease: Power3.easeOut
        }, "grp1").fromTo($("#preloader-tt-34"), 2.5, {
            autoAlpha: 0,
            y: 20
        },  {
            autoAlpha: 1,
            y: 0,
            delay: 1.6,
            ease: Power3.easeOut,
            onComplete: function() {
                this.dispatcher.dispatch("INTRO_DONE_EVENT")
            }.bind(this)
        }, "grp1").staggerFromTo(chars, .75, {
            autoAlpha: 0,
            y: -10
        }, {
            autoAlpha: 1,
            y: 0,
            delay: .2,
            ease: Power3.easeOut
        }, .05, "grp1").to($("#preloader-indicator"), .5, {
            clip: "rect(0px, " + $("#preloader-indicator").width() * -200 + "px, 2px, " + $("#preloader-indicator").width() * -200 + "px)",
            delay: .2,
            ease: Power1.easeInOut
        }, "grp1")
    },
    updateProgress: function(e, t) {
        if (Math.floor(t) > parseInt($('#preloader-loading-text').text(), 10)) {
            $('#preloader-loading-text').text(Math.floor(t));
        }
        TweenMax.to($("#preloader-indicator"), .25, {
            clip: "rect(200px, " + (t / -100 * $("#preloader-indicator").width() * -200 + $("#preloader-indicator").width() * -200) + "px, 2px, " + ($("#preloader-indicator").width() * -200 + t / 100 * $("#preloader-indicator").width() * 200) + "px)"
        })
    },
    onLoaded: function(e, t) {
       app.browserCheck(), this.outro(), this.dispatcher.removeEventlistener(this.progressEvent), this.dispatcher.removeEventlistener(this.completeEvent),
           imageAnimation = function() {
                var headline = document.querySelector('.trigger-headline');
                var headline1 = document.querySelector('.trigger-headline1');
                var headline2 = document.querySelector('.trigger-headline2');
                var headline3 = document.querySelector('.trigger-headline3');
                var headline4 = document.querySelector('.trigger-headline4');
                var headline5 = document.querySelector('.trigger-headline5');
                var headline6 = document.querySelector('.trigger-headline6');
                var headline7 = document.querySelector('.trigger-headline7');
                if ($('#home_sec').css('top') <= '0px') {
                    setTimeout(function() {
                        headline.classList.remove('trigger-headline--hidden');
                        headline1.classList.remove('trigger-headline1--hidden');
                        headline2.classList.remove('trigger-headline2--hidden');
                        headline3.classList.remove('trigger-headline3--hidden');
                        headline4.classList.remove('trigger-headline4--hidden');
                        headline5.classList.remove('trigger-headline5--hidden');
                        headline6.classList.remove('trigger-headline6--hidden');
                        headline7.classList.remove('trigger-headline7--hidden');
                    }, 1000)
                }
                setTimeout(function() {
                    headline4.classList.remove('trigger-headline4--hidden');
                    headline5.classList.remove('trigger-headline5--hidden');
                    headline6.classList.remove('trigger-headline6--hidden');
                    headline7.classList.remove('trigger-headline7--hidden');
                }, 1000);    
            },
        imageAnimation(); 

        browserCheckFireFox=function() {
    switch (app.browser) {
            case "firefox":
            "mobile" !== app.device &&
               $("#s1_fg_video").attr("src", "img/videos_mobile_bg.jpg");
                $("#s1_fg_video").attr("type", "img/jpg");
                 $("#s1_fg").css("display", "block");
                 $("#safari-page").hide();
                 $("#main").show();
                break;
                case "chrome":
                 "mobile" !== app.device && $("#safari-page").hide();
                 $("#main").show();
                break;
                 case "safari":
               "mobile" !== app.device && $("#safari-page").show();
                 $("#main").hide();
                break;
                case "ie":
                "mobile" !== app.device && $("#safari-page").hide();
                 $("#main").show();
                break;
            default:
                $("#upgrade").css("display", "none")
        }

     }, browserCheckFireFox();

    },

    onIntroComplete: function(e) {
        TweenMax.set(this.view, {
            autoAlpha: 1
        })
    },
    onOutroComplete: function(e) {
        TweenMax.set(this.view, {
            display: "none"
        }), this.dispatcher.dispatch("OUTRO_DONE_EVENT")
    },
    bindEvents: function() {
        this.progressEvent = this.dispatcher.addEventlistener("AM_PROGRESS_G", this.updateProgress.bind(this)), this.completeEvent = this.dispatcher.addEventlistener("AM_COMPLETE_G", this.onLoaded.bind(this))
    },
    intro: function() {
        TweenMax.fromTo(this.view, 1, {
            autoAlpha: 1
        }, {
            autoAlpha: 1,
            onComplete: this.onIntroComplete.bind(this)
        }); 
        var count = function(){
            if (parseInt($('#preloader-loading-text').text(), 10) < 100) {
                $('#preloader-loading-text').text((parseInt($('#preloader-loading-text').text(), 10)+1));
                setTimeout(count, 100);
            }
        }
        count(); 
    },
    outro: function() {
        TweenMax.fromTo(this.view, .75, {
            y: 0
        }, {
            y: this.vh,
            delay: .75,
            ease: Power4.easeOut,
            onComplete: this.onOutroComplete.bind(this)
        }), TweenMax.fromTo($("#dimmer"), .75, {
            autoAlpha: 1
        }, {
            autoAlpha: 0,
            delay: .5,
            ease: Power4.easeIn,
            onComplete: function() {
                $("#dimmer").css({
                    "z-index": 9,
                    autoAlpha: "0"
                })
            }.bind(this)
        })
    }
}, scrollView = function(e) {
  
    this.dispatcher = void 0 !== e ? e : new Dispatcher, this.device = Detectizr.device.type, this.controller = new ScrollMagic.Controller, this.sections = ["home_sec", "story_sec", "castncrew_sec", "gallery_sec", "videos_sec", "tickets_sec"], this.sectionNames = ["home", "story", "castncrew", "gallery", "videos", "tickets"], this.curSection = 0, this.scrollHeight = 0, this.scrollOffset = 0, this.scenes = [], this.navScenes = [], this.clientHeight, this.scrollTo, this.scrollPos
}, scrollView.prototype = {
    constructor: scrollView,
    init: function() {
        if (this.dispatcher.dispatch("SCROLL_INIT"), this.bindEvents(), this.setbodyHeight(), 
            this.createNavScene("navbar", this.scrollHeight - document.getElementById(this.sections[0]).clientHeight, document.getElementById(this.sections[0]).clientHeight, "navbar", ".navbar", "nav-darken"),
            this.createNavScene("footer", this.scrollHeight - document.getElementById(this.sections[0]).clientHeight, document.getElementById(this.sections[0]).clientHeight, "footer", ".footer", "nav-darken"), "desktop" == this.device)
            this.createScene("home_secScroll", document.getElementById("home_sec").clientHeight, document.getElementById("home_sec").clientHeight, this.getOffset(0), this.sections[0], "#nav-" + this.sectionNames[0], "active", 0), 
            this.createScene("story_secScroll", document.getElementById("story_sec").clientHeight, document.getElementById("story_sec").clientHeight, this.getOffset(1), this.sections[1], "#nav-" + this.sectionNames[1], "active", 1),
            this.createScene("castncrew_secScroll", document.getElementById("castncrew_sec").clientHeight, document.getElementById("castncrew_sec").clientHeight, this.getOffset(2), this.sections[2], "#nav-" + this.sectionNames[2], "active", 2),
            this.createScene("gallery_secScroll", document.getElementById("gallery_sec").clientHeight, document.getElementById("gallery_sec").clientHeight, this.getOffset(3), this.sections[3], "#nav-" + this.sectionNames[3], "active", 3), 
            this.createScene("videos_secScroll", document.getElementById("videos_sec").clientHeight, document.getElementById("videos_sec").clientHeight, this.getOffset(4), this.sections[4], "#nav-" + this.sectionNames[4], "active", 4),
            this.createScene("tickets_secScroll", document.getElementById("tickets_sec").clientHeight, document.getElementById("tickets_sec").clientHeight, this.getOffset(5), this.sections[5], "#nav-" + this.sectionNames[5], "active", 5);
        else
            for (i = 0; i < this.sections.length; i++) this.createMobileScene(this.sections[i] + "Scroll", document.getElementById(this.sections[i]).clientHeight, this.getOffset(i), this.sections[i], "#nav-" + this.sectionNames[i], "active", i)
    },
    bindEvents: function() {
        this.hashEvent = this.dispatcher.addEventlistener("HASH_EVENT", this.onHashEvent.bind(this)), "desktop" == this.device && $(window).resize(this.resize.bind(this)), $(".navbar-main li").click(this.navigateOnClick.bind(this)), $(".navbar-toggle").click(function() {
            $(this).toggleClass("open");

        });
        this.hashEvent = this.dispatcher.addEventlistener("HASH_EVENT", this.onHashEvent.bind(this)), "desktop" == this.device && $(window).resize(this.resize.bind(this)), $(".navbar-right li").click(this.navigateOnClick.bind(this)), $(".navbar-toggle").click(function() {
            $(this).toggleClass("open")
        });
    $("#story-wrapper").click(function() {
              TweenMax.to($("body"), 1, {
                        scrollTo: {
                            y: window.innerHeight * 4.68
                        },
                        ease: Power4.easeInOut,
                    })
                })
    },
    onHashEvent: function(e, t) {
        this.scrollTo = t, this.navigateTo(this.scrollTo)
    },
    setbodyHeight: function() {
        for (this.scrollHeight = 0, i = 0; i < this.sections.length; i++) this.scrollHeight = this.scrollHeight + document.getElementById(this.sections[i]).clientHeight;
        $("body").css("height", this.scrollHeight + "px")
    },
    createScene: function(e, t, s, o, n, a, r, c) {
        var d = new TimelineMax;
        "story_secScroll" === e ? d.to(document.getElementById(n), 1, {
            y: -1 * s + "px",
            onUpdate: function() {

                this.dispatcher.dispatch("STORY_SCROLL_EVENT", parseInt(document.getElementById("story_sec").style.y))
            }.bind(this),
            rotation:0.001,
            force3D: true,
            autoRound: !1,
            ease: Linear.easeNone,

           
        }) : d.to(document.getElementById(n), 1, {
            y: -1 * s + "px",
            rotation:0.001,
            force3D: true,
            autoRound: !1,
            ease: Linear.easeNone,
        });
        var e = new ScrollMagic.Scene({
            triggerElement: "body",
            triggerHook: "onLeave",
            duration: t,
            offset: o,
        

          
            
        }).setTween(d).setClassToggle(a, r).on("leave", function(e) {
            "FORWARD" === e.target.controller().info("scrollDirection") ? (this.curSection++, this.curSection > 6 && (this.curSection = 6), window.location.hash = this.sectionNames[this.curSection]) : (this.curSection--, this.curSection < 0 && (this.curSection = 0), window.location.hash = this.sectionNames[this.curSection])
        }.bind(this)).addTo(this.controller);
        e.indicator = n, e.ch = document.getElementById(n).clientHeight, e.id = document.getElementById(n), e.index = i, this.scenes.push(e)
    },
    createMobileScene: function(e, t, i, s, o, n, a) {
        new ScrollMagic.Scene({
            triggerElement: "body",
            triggerHook: "onLeave",
            duration: t,
            offset: i,
            reverse: !0
        }).setClassToggle(o, n).on("leave", function(e) {
            "FORWARD" === e.target.controller().info("scrollDirection") ? this.curSection++ : this.curSection--
        }.bind(this)).addTo(this.controller)
    },
    createNavScene: function(e, t, s, o, n, a) {
        var e = new ScrollMagic.Scene({
            triggerElement: "#home_sec",
            triggerHook: "onLeave",
            duration: t,
            offset: s*0.5,
            reverse: !0
        }).setClassToggle(n, a).on("leave", function(e) {
            $(".navbar").addClass("nav-lighten"), $("#footer").addClass("nav-lighten"), "desktop" == this.device && TweenMax.fromTo($(".navbar-brand"), .5, {
                autoAlpha: 1,
                x: 0
            }, {
                autoAlpha: 0,
                x: -25,
                ease: Power3.easeOut
            }),TweenMax.fromTo($("#nav-overlay"), 0, {
                autoAlpha: 0,
           
            }, {
                autoAlpha: 1,
            
                ease: Power3.easeOut
            })
        }.bind(this)).on("enter", function(e) {
            $(".navbar").removeClass("nav-lighten"), $("#footer").removeClass("nav-lighten"), "desktop" == this.device && TweenMax.fromTo($(".navbar-brand"), .5, {
                autoAlpha: 0,
                x: -25
            }, {
                autoAlpha: 1,
                delay: .5,
                x: 0,
                ease: Power3.easeOut
            }),
            TweenMax.fromTo($("#nav-overlay"), 0, {
                autoAlpha: 0,
           
            }, {
                autoAlpha: 1,
            
                ease: Power3.easeOut
            })
        }.bind(this)).addTo(this.controller);
        e.indicator = o, e.ch = document.getElementById(o).clientHeight, e.id = document.getElementById(o), e.index = i, this.navScenes.push(e)
    },
    navigateOnClick: function(e) {
        "desktop" !== this.device && $(".navbar-toggle").click(), this.scrollTo = $(e.currentTarget).attr("id"), this.scrollTo = this.sectionNames.indexOf(this.scrollTo.substring(4)), this.navigateTo(this.scrollTo)
           
    },
    navigateTo: function(e) {
        for (this.scrollPos = 0, i = 0; i < this.scrollTo; i++) this.scrollPos = this.scrollPos + document.getElementById(this.sections[i]).clientHeight;
        "mobile" !== app.device && (window.location.hash = this.sectionNames[i]), "desktop" == this.device ? e < this.curSection ? (TweenMax.set($("#nav-lock"), {
            "z-index": "11"
        }), TweenMax.fromTo($("#nav-mask"), .75, {
            clip: "rect(0px, " + window.innerWidth + "px, 0px, 0px)"
        }, {
            clip: "rect(0px, " + window.innerWidth + "px, " + window.innerHeight + "px, 0px)",
            ease: Power3.easeInOut,
            onComplete: function() {
                $("body").scrollTop(this.scrollPos), TweenMax.fromTo($("#nav-mask"), 1, {
                    autoAlpha: 1
                }, {
                    autoAlpha: 0,
                    ease: Power1.easeOut,
                    onComplete: function() {

                        TweenMax.set($("#nav-mask"), {
                            clip: "rect(0px, " + window.innerWidth + "px, 0px, 0px)",
                            autoAlpha: 1
                        }), TweenMax.set($("#nav-lock"), {
                            "z-index": "1"
                        })
                    }
                })
            }.bind(this)
        })) : e > this.curSection ? (TweenMax.set($("#nav-lock"), {
            "z-index": "11"
        }), TweenMax.fromTo($("#nav-mask"), .75, {
            clip: "rect(" + window.innerHeight + "px, " + window.innerWidth + "px, " + window.innerHeight + "px, 0px)"
        }, {
            clip: "rect(0px, " + window.innerWidth + "px, " + window.innerHeight + "px, 0px)",
            ease: Power3.easeInOut,
            onComplete: function() {
                $("body").scrollTop(this.scrollPos), TweenMax.fromTo($("#nav-mask"), 1, {
                    autoAlpha: 1
                }, {
                    autoAlpha: 0,
                    ease: Power1.easeOut,
                    onComplete: function() {
                        TweenMax.set($("#nav-mask"), {
                            clip: "rect(0px, " + window.innerWidth + "px, 0px, 0px)",
                            autoAlpha: 1
                        }), TweenMax.set($("#nav-lock"), {
                            "z-index": "1"
                        })
                    }
                })
            }.bind(this)
        })) : e === this.curSection : $("body").scrollTop(this.scrollPos)
    },
    getTween: function(e) {
        return TweenMax.fromTo(document.getElementById(e), 1, {
            y: "0px"
        }, {
            y: -1 * document.getElementById(e).clientHeight + "px",
             rotation:0.001,
            force3D: true,
            autoRound: !1,
            ease: Power0.easeNone
        })
    },
    getOffset: function(e) {
        var t = 0;
        for (i = 0; i < e; i++) t += document.getElementById(this.sections[i]).clientHeight;
        return t
    },
    resize: function() {
        this.setbodyHeight()
        if (!window.screenTop && !window.screenY) {
    window.location.reload();
}

    },
    updateFixedValues: function() {

        this.scenes.forEach(function(e, t) {
            var i = this.getTween(e.indicator);
            i.progress(0), e.setTween(i), e.offset(this.getOffset(e.index)), e.duration(e.id.clientHeight), e.refresh(), e.update(!0)
        }.bind(this));
        var e = new TimelineMax;
        e.to(document.getElementById("story_sec"), 1, {
            y: -1 * document.getElementById("story_sec").clientHeight + "px",
            onUpdate: function() {
                this.dispatcher.dispatch("STORY_SCROLL_EVENT", parseInt(document.getElementById("story_sec").style.y))

            }.bind(this),
             rotation:0.001,
            force3D: true,
            autoRound: !1,
            ease: Power0.easeNone
        }), this.scenes[i].setTween(e), this.scenes[i].refresh(), this.scenes[i].update(!0), this.navScenes.forEach(function(e, t) {
            e.offset(document.getElementById(this.sections[0]).clientHeight), e.duration($(window).height() - document.getElementById(this.sections[0]).clientHeight), e.refresh(), e.update(!0)
        }.bind(this))
    }
}, footerView = function(e) {
    this.dispatcher = void 0 !== e ? e : new Dispatcher, this.device = Detectizr.device.type
}, footerView.prototype = {
    constructor: footerView,
    init: function() {
        this.bindEvents()
    },
    populate: function() {
        for (i = 0; i < data.footer.billingBlock.length; i++) $(".footer_billingblock_container").append('<i class="footer_billingblock am-icon ' + data.footer.billingBlock[i] + '"></i>');
        for ($("#footer_logos").append('<p>' + data.footer.footerText + '</p>'), i = 0; i < data.footer.footerLinks.length; i++) data.footer.footerLinks[i].hasOwnProperty("link") ? $("#footer_links").append('<li><a href="' + data.footer.footerLinks[i].link + '" target="_blank">' + data.footer.footerLinks[i].label + "</a></li>") : $("#footer_links").append("<li>" + data.footer.footerLinks[i].label + "</li>")
    },
    bindEvents: function() {
        $("#btn_sound").mouseenter(function() {
            TweenMax.to($(this).find(".btn_footer_inner"), .25, {
                border: "1px solid rgba(116, 140, 132, 1)",
                ease: Power3.easeOut
            })
        }).mouseleave(function() {
            TweenMax.to($(this).find(".btn_footer_inner"), .25, {
                border: "1px solid rgba(116, 140, 132, 0.5)",
                ease: Power3.easeOut
            })
        }), $("#btn_legal").mouseenter(function() {
            TweenMax.to($(this).find(".btn_footer_inner"), .25, {
                border: "1px solid rgba(116, 140, 132, 1)",
                ease: Power3.easeOut
            }), TweenMax.fromTo($(this).find("p"), .2, {
                y: 0,
                autoAlpha: 1
            }, {
                y: 6,
                autoAlpha: 0,
                ease: Power3.easeOut
            }), TweenMax.fromTo($(this).find("p"), .2, {
                y: -6,
                autoAlpha: 0
            }, {
                y: 0,
                autoAlpha: 1,
                delay: .2,
                ease: Power3.easeOut
            })
        }).mouseleave(function() {
            TweenMax.to($(this).find(".btn_footer_inner"), .25, {
                border: "1px solid rgba(116, 140, 132, 0.5)",
                ease: Power3.easeOut
            }), TweenMax.fromTo($(this).find("p"), .2, {
                y: 0,
                autoAlpha: 1
            }, {
                y: -6,
                autoAlpha: 0,
                ease: Power3.easeOut
            }), TweenMax.fromTo($(this).find("p"), .2, {
                y: 6,
                autoAlpha: 0
            }, {
                y: 0,
                autoAlpha: 1,
                delay: .2,
                ease: Power3.easeOut
            })
        }), $("#footer_close").mouseenter(function() {
            TweenMax.set($(this).find(".close-outer"), {
                transformOrigin: "50% 50%"
            }), TweenMax.set($(this).find(".close-inner"), {
                transformOrigin: "50% 50%"
            }), TweenMax.set($(this).find(".close-img"), {
                transformOrigin: "50% 50%"
            }), TweenMax.to($(this).find(".close-outer"), .25, {
                scale: 1.2,
                ease: Power3.easeOut
            }), TweenMax.to($(this).find(".close-inner"), .25, {
                scale: 1.15,
                border: "1px solid rgba(255, 254, 237, 0.75)",
                ease: Power3.easeOut
            }), TweenMax.to($(this).find(".close-img"), .4, {
                rotation: 90,
                ease: Power3.easeOut
            })
        }).mouseleave(function() {
            TweenMax.to($(this).find(".close-outer"), .25, {
                scale: 1,
                ease: Power3.easeOut
            }), TweenMax.to($(this).find(".close-inner"), .25, {
                scale: 1,
                border: "1px solid rgba(255, 254, 237, 0.2)",
                ease: Power3.easeOut
            }), TweenMax.to($(this).find(".close-img"), .4, {
                rotation: 0,
                ease: Power3.easeOut
            })
        }), $("#btn_legal").click(this.footerExpand.bind(this)), $("#nav_legal").click(this.footerExpand.bind(this)), $("#footer_close").click(this.footerCollapse.bind(this)), this.completeEvent = this.dispatcher.addEventlistener("AM_COMPLETE_G", this.populate.bind(this)), $("#footer-overlay").mouseleave(this.footerCollapse.bind(this)), $("#btn_sound").click(function() {
            $(".bar").toggleClass("barOn")
        })
    },
    footerExpand: function(e) {
        "mobile" == this.device ? ($(".navbar-toggle").click(), $("#footer-overlay").hasClass("mobile_footer_expanded") ? this.footerCollapse() : ($("#footer-overlay").removeClass("mobile_footer_collapsed"), $("#footer-overlay").addClass("mobile_footer_expanded"))) : $("#footer-overlay").hasClass("footer_expanded") ? this.footerCollapse() : ($("#footer-overlay").removeClass("footer_collapsed"), $("#footer-overlay").addClass("footer_expanded"))
    },
    footerCollapse: function() {
        "mobile" == this.device ? $("#footer-overlay").hasClass("mobile_footer_expanded") && $("#footer-overlay").removeClass("mobile_footer_expanded").addClass("mobile_footer_collapsed") : $("#footer-overlay").hasClass("footer_expanded") && $("#footer-overlay").removeClass("footer_expanded").addClass("footer_collapsed")
    }
},  storyView = function(e) {
    this.dispatcher = void 0 !== e ? e : new Dispatcher, this.device = Detectizr.device.type, this.controller = new ScrollMagic.Controller, this.scenes = []
}, storyView.prototype = {
    constructor: storyView,
    init: function() {
        this.bindEvents()
    },
    bindEvents: function() {
        this.completeEvent = this.dispatcher.addEventlistener("AM_COMPLETE_G", this.populate.bind(this)), this.scrollUpdate = this.dispatcher.addEventlistener("STORY_SCROLL_EVENT", this.updateBind.bind(this)), "desktop" == this.device && $(window).resize(this.updateFixedValues.bind(this))
    },
    updateBind: function(e, t) {

       
     
        
       TweenMax.set(".s1_text1B", {
            y: "calc( 50% + " + Math.abs(t) + "px)"
        }), TweenMax.set("#s5_text_a", {
            "margin-top": "calc(" + Math.abs(t) + "px - 525%)"
        })
    },
    populate: function() {
            $("#story1").css("background-image", "url('" + app.preloader.getAsset("story1bg").src + "')"),
            $("#s1_fg").attr("src", app.preloader.getAsset("story1fg").src),
            $("#s1_cloud1").attr("src", app.preloader.getAsset("story1cloud1").src),
            $("#s1_cloud2").attr("src", app.preloader.getAsset("story1cloud2").src),
            $("#s1_cloud3").attr("src", app.preloader.getAsset("story1cloud3").src),
            $('#s1_fg_video')[0].play(),
            $("#story6").css("background-image", "url('" + app.preloader.getAsset("story6bg").src + "')"),
            $("#story7").vide(app.preloader.getAsset("story7bg").src, {
            posterType: "jpg",
            autoplay: !0,
            loop: !0
        }), "mobile" !== this.device ? ( $("#story2").vide(app.preloader.getAsset("story3vid").src, {
            posterType: "jpg",
            autoplay: !0,
            loop: !0
        })) : ($("#story2")),
         "desktop" == this.device ? tween1_1=TweenMax.fromTo(".s1_text1", .5, {
            autoAlpha: 1, y: 0
        },{
            autoAlpha: 0,
            y: 50,
            ease: Power4.easeOut,
            onComplete: function() {
                TweenMax.set(".s1_text1", {
                    autoAlpha: 0
                })
            }
        }
        ):tween1_1=TweenMax.fromTo(".s1_text1", .5, {
            y: 0,
            autoAlpha: 1
        },{
            y: document.getElementById("story1").clientHeight-window.innerHeight, autoAlpha: 0
        }
        ), "desktop" == this.device ? tween1_2 = TweenMax.fromTo(".s1_text1B", .5, {
            autoAlpha: 0,
            y: 300,
        }, {
            autoAlpha: 4,
            y: document.getElementById("home_sec").clientHeight-window.innerHeight / 1.7,
            ease: Power0.easeOut,
            onComplete: function() {

                TweenMax.set(".s1_text1B", {
                    autoAlpha: 1,
                   
                }),
                 TweenMax.set("#btn_scroll", {
                    autoAlpha: 1,
                    y: 10
                })
            }
        }) : tween1_2 = TweenMax.fromTo(".s1_text1B", .5, {
            autoAlpha: 0,
            y: 0
        }, {
            autoAlpha: 1,
            y: document.getElementById("story1").clientHeight-window.innerHeight,
        }), tween1_3 = TweenMax.fromTo("#s1_text2", .5, {
            y: 0,
            autoAlpha: 1
        }, {
            y: document.getElementById("story1").clientHeight - window.innerHeight,
            autoAlpha: 0
        }), {
            autoAlpha: 1
        }, tween1_5 = TweenMax.fromTo("#btn_scroll", .5, {
            y: 0,
            autoAlpha: 1
        }, {
            y: (document.getElementById("story1").clientHeight / 6) - window.innerHeight,
            autoAlpha: 0
        }), {
            autoAlpha: 1
        },  tween2_1 = new TimelineMax, tween2_1.fromTo("#s2_text h1", .5, {
            autoAlpha: 0
        }, {
            autoAlpha: 1,
            ease: Power4.easeInOut
        }, "group").fromTo("#s2_text div", .5, {
            scale: 0
        }, {
            scale: 1,
            delay: .3,
            ease: Power2.easeInOut
        }, "group").fromTo("#s2_text p", .5, {
            autoAlpha: 0
        }, {
            autoAlpha: 1,
            delay: .9,
            ease: Power2.easeInOut
        }, "group").fromTo("#s2_text h2", .5, {
            autoAlpha: 0
        }, {
            autoAlpha: 1,
            delay: .9,
            ease: Power2.easeInOut
        }, "group"),
                    tween6_1 = new TimelineMax, tween6_1.fromTo("#s6_text", .5, {
            autoAlpha: 1
        }, {

            autoAlpha: 0,
            ease: Power1.easeInOut
        }, "group").fromTo("#s6_text div", .1, {
            scale: 1
        }, {
            scale: 0,
            delay: .3,
            ease: Power1.easeInOut
        }, "group").fromTo("#s6_text p", .1, {
            autoAlpha: 1
        }, {

            autoAlpha: 0,
            delay: .6,
            ease: Power1.easeInOut
        }, "group").fromTo("#s6_text h2", .1, {
            autoAlpha: 1
        }, {

            autoAlpha: 0,
            delay: .6,
            ease: Power1.easeInOut,
        }, "group"),  tween1_4 = new TimelineMax, tween1_4.fromTo("#s1_text", .5, {
            y: 0
        }, {
            y: -130
        }, "grp1").fromTo("#s1_cloud1", .5, {
            x: .05 * window.innerWidth
        }, {
            x: -.05 * window.innerWidth
        }, "grp1").fromTo("#s1_cloud2", .5, {
            x: .02 * window.innerWidth
        }, {
            x: -.02 * window.innerWidth
        }, "grp1").fromTo("#s1_cloud3", .5, {
            x: 50
        }, {
            x: -50
        }, "grp1"), tween7 = new TimelineMax, tween7.fromTo("#s7_text", .5, {
            autoAlpha: 0
        }, {
            autoAlpha: 1,
            ease: Power4.easeInOut
        }).fromTo("#s7_text div", .5, {
            scale: 0
        }, {
            scale: 1,
            ease: Power2.easeInOut
        }).fromTo("#s7_text h4", .5, {
            autoAlpha: 0
        }, {
            autoAlpha: 1,
            ease: Power2.easeInOut
        }).fromTo("#s7_text p", .5, {
            autoAlpha: 0
        }, {
            autoAlpha: 1,
            ease: Power2.easeInOut
        }),
        this.createScene("story1_1", 150, document.getElementById("story1").clientHeight-window.innerHeight, tween1_1, "story1"),
        this.createScene("story1_2", document.getElementById("story1").clientHeight/4, document.getElementById("story1").clientHeight-1.25*window.innerHeight, tween1_2, "story1"),
        this.createScene("story1_3", document.getElementById("story1").clientHeight/1.5, 2*document.getElementById("s1_text2").clientHeight, tween1_3, "story1"),
        this.createScene("story1_4", document.getElementById("story1").clientHeight / 2, document.getElementById("story1").clientHeight - 1.25 * window.innerHeight, tween1_4, "story1"),
        this.createScene("story1_5", 150, document.getElementById("story1").clientHeight - window.innerHeight, tween1_5, "story1"),
        this.createScene("story2_1", -1 * (document.getElementById("story2").clientHeight / 4), 0, tween2_1, "story2"),
        this.createScene("story6_1",-4 * (document.getElementById("story6").clientHeight - 1.25*window.innerHeight), 0, tween6_1, "story6"), 
        this.createScene("story7", -1 * (document.getElementById("story7").clientHeight / 2), 0, tween7, "story7"),
        this.updateBind()
    },
    createScene: function(e, t, s, o, n) {
        var e = new ScrollMagic.Scene({
            triggerElement: "#" + n,
            triggerHook: "onLeave",
            offset: t,
            duration: s,
            reverse: !0
        }).setTween(o).addTo(this.controller);
        e.indicator = n, e.ch = document.getElementById(n).clientHeight, e.id = document.getElementById(n), e.index = i, this.scenes.push(e)
    },
    updateFixedValues: function() {
       
                for(
                  this.scenes[1].duration(document.getElementById("story1").clientHeight-1.25*window.innerHeight),
                    this.scenes[2].duration(2*document.getElementById("s1_text2").clientHeight),
                    this.scenes[3].offset(-1 * (document.getElementById("story1").clientHeight )),
                    this.scenes[4].offset(-1 * (document.getElementById("story6").clientHeight-1.25*window.innerHeight)),
                    this.scenes[4].duration(document.getElementById("s1_text2").clientHeight),
                    this.scenes[5].offset(-0.5* (document.getElementById("story6").clientHeight )),
                     this.scenes[6].offset(-2 * (document.getElementById("story6").clientHeight-1.25*window.innerHeight)),
                      this.scenes[7].offset(-1 * (document.getElementById("story7").clientHeight )), i = 0; i < this.scenes.length; i++) this.scenes[i].refresh(), this.scenes[i].update(!0)
                 this.updateBind();
    }
}, castncrewView = function(e) {
    this.dispatcher = void 0 !== e ? e : new Dispatcher, this.device = Detectizr.device.type, this.controller = new ScrollMagic.Controller, this.label, this.split = !0, this.sections = [], this.scenes = [], this.bodyPos = 0
}, castncrewView.prototype = {
    constructor: castncrewView,
    init: function() {
        this.bindEvents()
    },
    bindEvents: function() {
        this.completeEvent = this.dispatcher.addEventlistener("AM_COMPLETE_G", this.populate.bind(this))
    },
    populate: function() {
        if ("desktop" === this.device || "tablet" === this.device)
            for ($("#castncrew-header").html('<div class="cover"><img src="' +  '" class="cover" /></div>'), i = 0; i < data.castncrew.list.length; i++)
                    $("#castncrew-list").append('<li id="cnc_' + data.castncrew.list[i].label + '"><div class="cover cnc_cover"><img src="' + 
                    app.preloader.getAsset(data.castncrew.list[i].desktopImage).src + '" class="cover" /></div><div class="cnc_text_container"><div class="cnc_text"><h1 class="cnc_actor">' + 
                    data.castncrew.list[i].name  + 
                    '<div class="cnc_quote"><div><div class="divider"></div><div class="btn_scroll"><div class="btn_scroll_outer"><div class="btn_scroll_middle"><div class="btn_scroll_inner"></div></div></div><h1 class="btn_scroll_text"><p>is</p></h1></div><div class="divider"></div></div></div>' +
                   '</h1><h1 class="cnc_character">' + 
                    data.castncrew.list[i].role + '</h1>' + '</div></div></li>');
        
        else if ("mobile" === this.device)
            

        $("#cnc_close").mouseenter(function() {
            TweenMax.set($(this).find(".close-outer"), {
                transformOrigin: "50% 50%"
            }), TweenMax.set($(this).find(".close-inner"), {
                transformOrigin: "50% 50%"
            }), TweenMax.set($(this).find(".close-img"), {
                transformOrigin: "50% 50%"
            }), TweenMax.to($(this).find(".close-outer"), .25, {
                scale: 1.2,
                ease: Power3.easeOut
            }), TweenMax.to($(this).find(".close-inner"), .25, {
                scale: 1.15,
                border: "1px solid rgba(255, 254, 237, 0.75)",
                ease: Power3.easeOut
            }), TweenMax.to($(this).find(".close-img"), .4, {
                rotation: 90,
                ease: Power3.easeOut
            })
        }).mouseleave(function() {
            TweenMax.to($(this).find(".close-outer"), .25, {
                scale: 1,
                ease: Power3.easeOut
            }), TweenMax.to($(this).find(".close-inner"), .25, {
                scale: 1,
                border: "1px solid rgba(255, 254, 237, 0.2)",
                ease: Power3.easeOut
            }), TweenMax.to($(this).find(".close-img"), .4, {
                rotation: 0,
                ease: Power3.easeOut
            })
        }), $(".cnc_btn").click(this.show), $("#cnc_close").click(this.hide), $(".btn_scroll").mouseenter(function() {
            TweenMax.to($(this).parents("li").find(".cnc_cover"), .55, {
                autoAlpha: .5,
                ease: Power3.easeOut
            }), TweenMax.to($(this).find(".btn_scroll_outer"), .35, {
                scale: 1.1,
                delay: .05,
                ease: Power2.easeInOut
            }), TweenMax.to($(this).find(".btn_scroll_middle"), .25, {
                scale: 1.05,
                autoAlpha: .9,
                ease: Power2.easeInOut
            }), TweenMax.to($(this).find(".btn_scroll_inner"), .25, {
                scale: 1.1,
                ease: Power2.easeInOut
            })
        }).mouseleave(function() {
            TweenMax.to($(this).parents("li").find(".cnc_cover"), .55, {
                autoAlpha: 1,
                ease: Power3.easeOut
            }), TweenMax.to($(this).find(".btn_scroll_outer"), .5, {
                scale: 1,
                ease: Power2.easeInOut
            }), TweenMax.to($(this).find(".btn_scroll_middle"), .35, {
                scale: 1,
                autoAlpha: .75,
                delay: .1,
                ease: Power2.easeInOut
            }), TweenMax.to($(this).find("#btn_scroll_inner"), .35, {
                scale: 1,
                delay: .15,
                ease: Power2.easeInOut
            })
        }), this.createScene("cnc_tomcruise", 2), this.createScene("cnc_domhallgleeson", 1), this.createScene("cnc_sarahwright", 1), this.createScene("cnc_pabloescobar", 1), this.createScene("cnc_jorgeochoa", 1)
    },
    createScene: function(e, t) {
       
    },
    show: function() {
    

 
    },
    hide: function() {

    }
}, galleryView = function(e) {
    this.dispatcher = void 0 !== e ? e : new Dispatcher, this.device = Detectizr.device.type
}, galleryView.prototype = {
    constructor: galleryView,
    init: function() {
        this.bindEvents()
    },
    populate: function() {
      
    },
    bindEvents: function() {
        this.completeEvent = this.dispatcher.addEventlistener("AM_COMPLETE_G", this.populate.bind(this))
    }
}, videosView = function(e) {
    this.dispatcher = void 0 !== e ? e : new Dispatcher, this.device = Detectizr.device.type
}, videosView.prototype = {
    constructor: videosView,
    init: function() {
        this.bindEvents()
    },
    populate: function() {
        if ("mobile" == this.device)
            for ($("#videos_bg img").attr("src", "img/videos_mobile_bg.jpg"), i = 0; i < data.videos.list.length; i++) data.videos.list[i].show && $("#videos-list").append('<li class="video_active"><div class="video_border"></div><div class="video_label"><h1>' + data.videos.list[i].name + '</h1></div><img class="video_btn_out" src="img/arrow_trailer_out.svg" /><div class="video_btn_over"><img class="video_arrow" src="img/arrow_trailer_over.svg" /></div><img class="video_poster" src="' + data.videos.list[i].poster + '" /></li>');
        else
            for (i = 0; i < data.videos.list.length; i++) data.videos.list[i].show ? $("#videos-list").append('<li class="video_active"><div class="video_border"></div><div class="video_label"><h1>' + data.videos.list[i].name + '</h1></div><img class="video_btn_out" src="img/arrow_trailer_out.svg" /><div class="video_btn_over"><img class="video_arrow" src="img/arrow_trailer_over.svg" /></div><video class="video_video" loop muted poster="' + data.videos.list[i].poster + '"><source src="' + data.videos.list[i].video + '" type="video/mp4"></video></li>') : $("#videos-list").append('<li class="video_hidden"><div></div></li>');
        this.attachEventListeners()
    },
    bindEvents: function() {
        this.completeEvent = this.dispatcher.addEventlistener("AM_COMPLETE_G", this.populate.bind(this))
    },
    attachEventListeners: function() {
        $("#videos-list li").mouseenter(function(e) {
            $(this).hasClass("video_hidden") === !1 && $(this).find(".video_video").get(0).play(), TweenMax.set($(this).find(".video_btn_over"), {
                transformOrign: "50% 50%"
            }), TweenMax.to($(this).find(".video_border"), .25, {
                "border-width": "8px",
                ease: Power4.easeOut
            }), TweenMax.to($(this).find(".video_btn_over"), .15, {
                scale: 1,
                ease: Power4.easeOut
            }), TweenMax.to($(this).find(".video_btn_over img"), .15, {
                x: 34,
                delay: .15,
                ease: Power4.easeOut
            })
        }).mouseleave(function() {
            $(this).hasClass("video_hidden") === !1 && $(this).find(".video_video").get(0).pause(), TweenMax.to($(this).find(".video_border"), .25, {
                "border-width": "5px",
                ease: Power4.easeOut
            }), TweenMax.to($(this).find(".video_btn_over img"), .15, {
                x: 0,
                ease: Power4.easeOut
            }), TweenMax.to($(this).find(".video_btn_over"), .15, {
                scale: 0,
                delay: .15,
                ease: Power4.easeOut
            })
        }), $("#videos-list li.video_active").click(function() {
            var e = Array.prototype.slice.call(document.getElementById("videos-list").children),
                t = e.indexOf(this);
            switch (t) {
                case 0:
                    console.log(0), app.dispatcher.dispatch("CUE_PLAYLIST_INDEX", 0);
                    break;
                case 1:
                    console.log(1), app.dispatcher.dispatch("CUE_PLAYLIST_INDEX", 1);
                    break;
               
            }
            app.dispatcher.dispatch("SHOW_TRAILER")
        }),

        $("#videos-list-safari li").mouseenter(function(e) {
            $(this).hasClass("video_hidden") === !1 && $(this).find(".video_video").get(0).play(), TweenMax.set($(this).find(".video_btn_over"), {
                transformOrign: "50% 50%"
            }), TweenMax.to($(this).find(".video_border"), .25, {
                "border-width": "8px",
                ease: Power4.easeOut
            }), TweenMax.to($(this).find(".video_btn_over"), .15, {
                scale: 1,
                ease: Power4.easeOut
            }), TweenMax.to($(this).find(".video_btn_over img"), .15, {
                x: 34,
                delay: .15,
                ease: Power4.easeOut
            })
        }).mouseleave(function() {
            $(this).hasClass("video_hidden") === !1 && $(this).find(".video_video").get(0).pause(), TweenMax.to($(this).find(".video_border"), .25, {
                "border-width": "5px",
                ease: Power4.easeOut
            }), TweenMax.to($(this).find(".video_btn_over img"), .15, {
                x: 0,
                ease: Power4.easeOut
            }), TweenMax.to($(this).find(".video_btn_over"), .15, {
                scale: 0,
                delay: .15,
                ease: Power4.easeOut
            })
        }), $("#videos-list-safari li.video_active").click(function() {
            var e = Array.prototype.slice.call(document.getElementById("videos-list-safari").children),
                t = e.indexOf(this);
            switch (t) {
                case 0:
                    console.log(0), app.dispatcher.dispatch("CUE_PLAYLIST_INDEX", 0);
                    break;
                case 1:
                    console.log(1), app.dispatcher.dispatch("CUE_PLAYLIST_INDEX", 1);
                    break;
               
            }
            app.dispatcher.dispatch("SHOW_TRAILER")
        })
    }
}, ticketsView = function(e) {
    this.dispatcher = void 0 !== e ? e : new Dispatcher, this.device = Detectizr.device.type
}, ticketsView.prototype = {
    constructor: ticketsView,
    init: function() {
        this.bindEvents()
    },
    populate: function() {
      
    },
    bindEvents: function() {
        this.completeEvent = this.dispatcher.addEventlistener("AM_COMPLETE_G", this.populate.bind(this))
    }
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJ2aWV3cy5taW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaG9tZVZpZXcgPSBmdW5jdGlvbihlLCB0KSB7XG5cbiAgICB0aGlzLmNvbnRhaW5lciA9IGUsIHRoaXMuZGlzcGF0Y2hlciA9IHZvaWQgMCAhPT0gdCA/IHQgOiBuZXcgRGlzcGF0Y2hlciwgdGhpcy5kZXZpY2UgPSBEZXRlY3RpenIuZGV2aWNlLnR5cGUsIHRoaXMuc2VjdGlvbnMgPSBbXCJob21lXCIsIFwic3RvcnlcIiwgXCJjYXN0bmNyZXdcIiwgXCJnYWxsZXJ5XCIsIFwidmlkZW9zXCIsIFwidGlja2V0c1wiXVxufSwgaG9tZVZpZXcucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiBob21lVmlldyxcbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaGVyLmRpc3BhdGNoKFwiQU5BTFlUSUNTXCIsIHtcbiAgICAgICAgICAgIGhpdFR5cGU6IFwicGFnZXZpZXdcIixcbiAgICAgICAgICAgIHBhZ2U6IFwid3d3Lm15bGlua1wiXG4gICAgICAgIH0pLCB0aGlzLmRpc3BhdGNoZXIuZGlzcGF0Y2goXCJBTkFMWVRJQ1NcIiwge1xuICAgICAgICAgICAgaGl0VHlwZTogXCJldmVudFwiLFxuICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogXCJWaWRlb3NcIixcbiAgICAgICAgICAgIGV2ZW50QWN0aW9uOiBcInBsYXlcIixcbiAgICAgICAgICAgIGV2ZW50TGFiZWw6IFwiRmFsbCBDYW1wYWlnblwiXG4gICAgICAgIH0pLCB0aGlzLmFkZFlvdXR1YmVWaWRlbygpLCBcbiAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3BsYXNoX3RyYWlsZXJcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGUgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpZGVvcy1saXN0XCIpLmNoaWxkcmVuKSxcbiAgICAgICAgICAgICAgICB0ID0gZS5pbmRleE9mKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygwKSwgYXBwLmRpc3BhdGNoZXIuZGlzcGF0Y2goXCJDVUVfUExBWUxJU1RfSU5ERVhcIiwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGFwcC5kaXNwYXRjaGVyLmRpc3BhdGNoKFwiU0hPV19UUkFJTEVSXCIpXG4gICAgICAgIH0pLFxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwbGFzaF90cmFpbGVyMlwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlkZW9zLWxpc3RcIikuY2hpbGRyZW4pLFxuICAgICAgICAgICAgICAgIHQgPSBlLmluZGV4T2YodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKDApLCBhcHAuZGlzcGF0Y2hlci5kaXNwYXRjaChcIkNVRV9QTEFZTElTVF9JTkRFWFwiLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgYXBwLmRpc3BhdGNoZXIuZGlzcGF0Y2goXCJTSE9XX1RSQUlMRVJcIilcbiAgICAgICAgfSksXG4gICAgICAgICQoXCIjdmlkZW9zLWxpc3QtbW9iaWxlIGxpLnZpZGVvX2FjdGl2ZVwiKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb3MtbGlzdC1tb2JpbGVcIikuY2hpbGRyZW4pLFxuICAgICAgICAgICAgICAgIHQgPSBlLmluZGV4T2YodGhpcyk7XG4gICAgICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKDApLCBhcHAuZGlzcGF0Y2hlci5kaXNwYXRjaChcIkNVRV9QTEFZTElTVF9JTkRFWFwiLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygxKSwgYXBwLmRpc3BhdGNoZXIuZGlzcGF0Y2goXCJDVUVfUExBWUxJU1RfSU5ERVhcIiwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcHAuZGlzcGF0Y2hlci5kaXNwYXRjaChcIlNIT1dfVFJBSUxFUlwiKVxuICAgICAgICB9KSxcbiAgICAgICAgIFwibW9iaWxlXCIgIT0gRGV0ZWN0aXpyLmRldmljZS50eXBlID8gdGhpcy5pbml0UHJlbG9hZCgpIDogKHRoaXMuaW5pdFByZWxvYWRNb2JpbGUoKSwgJChcIiNzcGxhc2hcIikuc2hvdygpLCAkKFwiYm9keVwiKS5yZW1vdmVDbGFzcyhcIm5vc2Nyb2xsXCIpLCB3aW5kb3cubG9jYXRpb24uaGFzaD1cImhvbWUtbW9iaWxlXCIpLFxuICAgICAgICBcImRlc2t0b3BcIiAhPT0gYXBwLmRldmljZSAmJiBcInNhZmFyaVwiID09IGFwcC5icm93c2VyICYmIHRoaXMub25JT1NkZXZpY2UoYXBwLmRldmljZSlcbiAgICB9LFxuICAgIG9uU3BsYXNoSGlkZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgYXBwLm9uU2Nyb2xsLCAhMSksICQoXCIjc3BsYXNoXCIpLmhpZGUoKSwgIHRoaXMuaW5pdFByZWxvYWQoKSwgJChcImJvZHlcIikucmVtb3ZlQ2xhc3MoXCJub3Njcm9sbFwiKVxuICAgIH0sXG4gICAgb25Mb2FkQ29tcGxldGU6IGZ1bmN0aW9uKCkge1xuICAgICAgIHRoaXMucG9wdWxhdGUoKSwgd2luZG93LnNjcm9sbFRvKDAsIDApXG4gICAgfSxcbiAgICBvbkludHJvQ29tcGxldGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBhcHAucHJlbG9hZGVyLnN0YXJ0TG9hZCgpXG4gICAgfSxcblxuXG4gICAgcHJldmVudFNjcm9sbDogZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCksIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICB9LFxuICAgIHBvcHVsYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGRhdGEuaG9tZS50b3V0Lmxlbmd0aDsgaSsrKSAkKFwiI3RvdXRzXCIpLmFwcGVuZCgnPGxpIGNsYXNzPVwidG91dFwiIGlkPVwidG91dCcgKyAoaSArIDEpICsgJ1wiPjxhIGhyZWY9XCInICsgZGF0YS5ob21lLnRvdXRbaV0ubGluayArICdcIiB0YXJnZXQ9XCJfYmxhbmtcIj4gPGRpdiBjbGFzcz1cInRvdXRfYm9yZGVyXCI+PC9kaXY+IDxpbWcgc3JjPVwiJyArIGRhdGEuaG9tZS50b3V0W2ldLmltZyArICdcIiAvPiAgPGRpdiBjbGFzcz1cInRvdXRfaW5uZXJcIj48aDE+JyArIGRhdGEuaG9tZS50b3V0W2ldLmxhYmVsICsgXCI8L2gxPjwvZGl2PjwvYT48L2xpPlwiKTtcblxuICAgICAgICBUd2Vlbk1heC5kZWxheWVkQ2FsbCgxLCB0aGlzLmhvbWVBbmltYXRlLmJpbmQodGhpcykpLCB0aGlzLmJpbmRFdmVudHMoKVxuICAgIH0sXG4gICAgaG9tZUFuaW1hdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvdXRfdmlkZW9cIikucGxheSgpO1xuICAgICAgICB2YXIgZSA9IG5ldyBUaW1lbGluZU1heDtcbiAgICAgICAgZS5zZXQoJChcIiNidG5fc2Nyb2xsX291dGVyXCIpLCB7XG4gICAgICAgICAgICB0cmFuc2Zvcm1PcmlnbjogXCI1MCUgNTAlXCJcbiAgICAgICAgfSkuc2V0KCQoXCIjYnRuX3Njcm9sbF9taWRkbGVcIiksIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybU9yaWduOiBcIjUwJSA1MCVcIlxuICAgICAgICB9KS5zZXQoJChcIiNidG5fc2Nyb2xsX2lubmVyXCIpLCB7XG4gICAgICAgICAgICB0cmFuc2Zvcm1PcmlnbjogXCI1MCUgNTAlXCJcbiAgICAgICAgfSkuZnJvbVRvKCQoXCIjYnRuX3Njcm9sbF9vdXRlclwiKSwgLjUsIHtcbiAgICAgICAgICAgIHNjYWxlOiAwXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgICAgZWFzZTogQmFjay5lYXNlT3V0LmNvbmZpZygyKVxuICAgICAgICB9LCBcImdycFwiKS5mcm9tVG8oJChcIiNidG5fc2Nyb2xsX21pZGRsZVwiKSwgLjM1LCB7XG4gICAgICAgICAgICBzY2FsZTogMFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICAgIGRlbGF5OiAuMSxcbiAgICAgICAgICAgIGVhc2U6IEJhY2suZWFzZU91dC5jb25maWcoMilcbiAgICAgICAgfSwgXCJncnBcIikuZnJvbVRvKCQoXCIjYnRuX3Njcm9sbF9pbm5lclwiKSwgLjI1LCB7XG4gICAgICAgICAgICBzY2FsZTogMFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICAgIGRlbGF5OiAuMyxcbiAgICAgICAgICAgIGVhc2U6IENpcmMuZWFzZU91dFxuICAgICAgICB9LCBcImdycFwiKS5mcm9tVG8oJChcIiNidG5fc2Nyb2xsX3RleHRcIiksIC4yNSwge1xuICAgICAgICAgICAgeTogMjAsXG4gICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHk6IDEwLFxuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIGRlbGF5OiAuNSxcbiAgICAgICAgICAgIGVhc2U6IFBvd2VyMi5lYXNlT3V0LFxuICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAkKFwiI2J0bl9zY3JvbGxcIikubW91c2VlbnRlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgVHdlZW5NYXguZnJvbVRvKCQoXCIjYnRuX3Njcm9sbF90ZXh0XCIpLCAuNSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgeTogMTBcbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgeTogNSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2U6IENpcmMuZWFzZUluT3V0XG4gICAgICAgICAgICAgICAgICAgIH0pLCBUd2Vlbk1heC50bygkKFwiI2J0bl9zY3JvbGxfZGl2aWRlclwiKSwgLjI1LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGlwOiBcInJlY3QoMHB4LCAxMHB4LCAxcHgsIDBweClcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5OiAuMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2U6IENpcmMuZWFzZUluT3V0XG4gICAgICAgICAgICAgICAgICAgIH0pLCBUd2Vlbk1heC50bygkKFwiI2J0bl9zY3JvbGxfb3V0ZXJcIiksIC4zNSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IDEuMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5OiAuMDUsXG4gICAgICAgICAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjIuZWFzZUluT3V0XG4gICAgICAgICAgICAgICAgICAgIH0pLCBUd2Vlbk1heC50bygkKFwiI2J0bl9zY3JvbGxfbWlkZGxlXCIpLCAuMjUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiAxLjA1LFxuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogLjksXG4gICAgICAgICAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjIuZWFzZUluT3V0XG4gICAgICAgICAgICAgICAgICAgIH0pLCBUd2Vlbk1heC50bygkKFwiI2J0bl9zY3JvbGxfaW5uZXJcIiksIC4yNSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IDEuMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMi5lYXNlSW5PdXRcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KS5tb3VzZWxlYXZlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBUd2Vlbk1heC50bygkKFwiI2J0bl9zY3JvbGxfZGl2aWRlclwiKSwgLjI1LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGlwOiBcInJlY3QoMHB4LCA1cHgsIDFweCwgNXB4KVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZWFzZTogQ2lyYy5lYXNlSW5PdXRcbiAgICAgICAgICAgICAgICAgICAgfSksIFR3ZWVuTWF4LmZyb21UbygkKFwiI2J0bl9zY3JvbGxfdGV4dFwiKSwgLjI1LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB5OiA1XG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IDEwLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXk6IC4xLFxuICAgICAgICAgICAgICAgICAgICAgICAgZWFzZTogQ2lyYy5lYXNlSW5PdXRcbiAgICAgICAgICAgICAgICAgICAgfSksIFR3ZWVuTWF4LnRvKCQoXCIjYnRuX3Njcm9sbF9vdXRlclwiKSwgLjUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgZWFzZTogUG93ZXIyLmVhc2VJbk91dFxuICAgICAgICAgICAgICAgICAgICB9KSwgVHdlZW5NYXgudG8oJChcIiNidG5fc2Nyb2xsX21pZGRsZVwiKSwgLjM1LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IC43NSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5OiAuMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMi5lYXNlSW5PdXRcbiAgICAgICAgICAgICAgICAgICAgfSksIFR3ZWVuTWF4LnRvKCQoXCIjYnRuX3Njcm9sbF9pbm5lclwiKSwgLjM1LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5OiAuMTUsXG4gICAgICAgICAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjIuZWFzZUluT3V0XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSksIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnRuX3Njcm9sbFwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSlcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICB9LCBcImdycFwiKTtcbiAgICAgICAgdmFyIHQgPSBuZXcgVGltZWxpbmVNYXgoe1xuICAgICAgICAgICAgZGVsYXk6IDIsXG4gICAgICAgICAgICByZXBlYXQ6IC0xXG4gICAgICAgIH0pO1xuICAgICAgICB0LnN0YWdnZXJGcm9tVG8oJChcIiNidG5fc2Nyb2xsX2Fycm93cyBpbWdcIiksIC4xNSwge1xuICAgICAgICAgICAgeTogLTMsXG4gICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgZWFzZTogUG93ZXIzLmVhc2VPdXRcbiAgICAgICAgfSwgLjA1KS5zdGFnZ2VyRnJvbVRvKCQoXCIjYnRuX3Njcm9sbF9hcnJvd3MgaW1nXCIpLCAuMTUsIHtcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHk6IDMsXG4gICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgZGVsYXk6IDEuMCxcbiAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgIH0sIC4wNSk7XG4gICAgICAgIHZhciBzID0gbmV3IFRpbWVsaW5lTWF4KHtcbiAgICAgICAgICAgIHJlcGVhdDogLTFcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgIH0sXG5cbiAgXG4gICAgaW5pdFByZWxvYWQ6IGZ1bmN0aW9uKCkge1xuXG4gICAgIFxuICAgICAgICBhcHAucHJlbG9hZGVyID0gbmV3IEFzc2V0TWFuYWdlcihzZXR0aW5ncy5pbml0aWFsTWFuaWZlc3QsIGFwcC5kaXNwYXRjaGVyKSwgdGhpcy5kaXNwYXRjaGVyLmFkZEV2ZW50bGlzdGVuZXIoXCJBTV9DT01QTEVURV9HXCIsIHRoaXMub25Mb2FkQ29tcGxldGUuYmluZCh0aGlzKSksIHRoaXMuZGlzcGF0Y2hlci5hZGRFdmVudGxpc3RlbmVyKFwiSU5UUk9fRE9ORV9FVkVOVFwiLCB0aGlzLm9uSW50cm9Db21wbGV0ZS5iaW5kKHRoaXMpKSwgdGhpcy5wcmVsb2FkVmlldyA9IG5ldyBQcmVsb2FkVmlldyhhcHAuZGlzcGF0Y2hlciksIHRoaXMucHJlbG9hZFZpZXcuaW50cm8oKVxuICAgIH0sXG4gICAgaW5pdFByZWxvYWRNb2JpbGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICBhcHAucHJlbG9hZGVyID0gbmV3IEFzc2V0TWFuYWdlcihzZXR0aW5nc21vYmlsZS5pbml0aWFsTWFuaWZlc3QsIGFwcC5kaXNwYXRjaGVyKSwgdGhpcy5kaXNwYXRjaGVyLmFkZEV2ZW50bGlzdGVuZXIoXCJBTV9DT01QTEVURV9HXCIsIHRoaXMub25Mb2FkQ29tcGxldGUuYmluZCh0aGlzKSksIHRoaXMuZGlzcGF0Y2hlci5hZGRFdmVudGxpc3RlbmVyKFwiSU5UUk9fRE9ORV9FVkVOVFwiLCB0aGlzLm9uSW50cm9Db21wbGV0ZS5iaW5kKHRoaXMpKSwgdGhpcy5wcmVsb2FkVmlldyA9IG5ldyBQcmVsb2FkVmlldyhhcHAuZGlzcGF0Y2hlciksIHRoaXMucHJlbG9hZFZpZXcuaW50cm8oKVxuICAgIH0sXG4gICAgYmluZEV2ZW50czogZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnNlY3Rpb25zLmxlbmd0aDsgaSsrKSBUd2Vlbk1heC5zZXQoJChcIiNuYXYtXCIgKyB0aGlzLnNlY3Rpb25zW2ldICsgXCIgLm5hdi1tYXJnaW4tdG9wXCIpLCB7XG4gICAgICAgICAgICBjbGlwOiBcInJlY3QoMHB4LCAwcHgsIDFweCwgMHB4KVwiXG4gICAgICAgIH0pLCBUd2Vlbk1heC5zZXQoJChcIiNuYXYtXCIgKyB0aGlzLnNlY3Rpb25zW2ldICsgXCIgLm5hdi1tYXJnaW4tYm90dG9tXCIpLCB7XG4gICAgICAgICAgICBjbGlwOiBcInJlY3QoMHB4LCAwcHgsIDFweCwgXCIgKyAkKFwiI25hdi1cIiArIHRoaXMuc2VjdGlvbnNbaV0pLndpZHRoKCkgKyBcInB4KVwiXG4gICAgICAgIH0pO1xuICAgICAgICAkKFwiLm5hdmJhci1tYWluIGxpXCIpLm1vdXNlZW50ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBUd2Vlbk1heC50bygkKHRoaXMpLmZpbmQoXCIubmF2LW1hcmdpbi10b3BcIiksIC4zNSwge1xuICAgICAgICAgICAgICAgIGNsaXA6IFwicmVjdCgwcHgsIFwiICsgKCh0aGlzLm9mZnNldFdpZHRoIC0gNDApIC8gMiArIDUpICsgXCJweCwgMXB4LCAwcHgpXCIsXG4gICAgICAgICAgICAgICAgZWFzZTogQ2lyYy5lYXNlSW5cbiAgICAgICAgICAgIH0pLCBUd2Vlbk1heC50bygkKHRoaXMpLmZpbmQoXCIubmF2LW1hcmdpbi10b3BcIiksIC4yNSwge1xuICAgICAgICAgICAgICAgIGNsaXA6IFwicmVjdCgwcHgsIFwiICsgKCh0aGlzLm9mZnNldFdpZHRoIC0gNDApIC8gMiArIDUpICsgXCJweCwgMXB4LCBcIiArICgodGhpcy5vZmZzZXRXaWR0aCAtIDQwKSAvIDIgLSA1KSArIFwicHgpXCIsXG4gICAgICAgICAgICAgICAgZGVsYXk6IC4zNSxcbiAgICAgICAgICAgICAgICBlYXNlOiBDaXJjLmVhc2VPdXRcbiAgICAgICAgICAgIH0pLCBUd2Vlbk1heC50bygkKHRoaXMpLmZpbmQoXCIubmF2LW1hcmdpbi1ib3R0b21cIiksIC4zNSwge1xuICAgICAgICAgICAgICAgIGNsaXA6IFwicmVjdCgwcHgsIFwiICsgKHRoaXMub2Zmc2V0V2lkdGggLSA0MCkgKyBcInB4LCAxcHgsIFwiICsgKCh0aGlzLm9mZnNldFdpZHRoIC0gNDApIC8gMiAtIDUpICsgXCJweClcIixcbiAgICAgICAgICAgICAgICBlYXNlOiBDaXJjLmVhc2VJblxuICAgICAgICAgICAgfSksIFR3ZWVuTWF4LnRvKCQodGhpcykuZmluZChcIi5uYXYtbWFyZ2luLWJvdHRvbVwiKSwgLjI1LCB7XG4gICAgICAgICAgICAgICAgY2xpcDogXCJyZWN0KDBweCwgXCIgKyAoKHRoaXMub2Zmc2V0V2lkdGggLSA0MCkgLyAyICsgNSkgKyBcInB4LCAxcHgsIFwiICsgKCh0aGlzLm9mZnNldFdpZHRoIC0gNDApIC8gMiAtIDUpICsgXCJweClcIixcbiAgICAgICAgICAgICAgICBkZWxheTogLjM1LFxuICAgICAgICAgICAgICAgIGVhc2U6IENpcmMuZWFzZU91dFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSkubW91c2VsZWF2ZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIFR3ZWVuTWF4LnRvKCQodGhpcykuZmluZChcIi5uYXYtbWFyZ2luLXRvcFwiKSwgLjM1LCB7XG4gICAgICAgICAgICAgICAgY2xpcDogXCJyZWN0KDBweCwgXCIgKyAodGhpcy5vZmZzZXRXaWR0aCAtIDQwKSArIFwicHgsIDFweCwgXCIgKyAoKHRoaXMub2Zmc2V0V2lkdGggLSA0MCkgLyAyIC0gNSkgKyBcInB4KVwiLFxuICAgICAgICAgICAgICAgIGVhc2U6IENpcmMuZWFzZUluXG4gICAgICAgICAgICB9KSwgVHdlZW5NYXgudG8oJCh0aGlzKS5maW5kKFwiLm5hdi1tYXJnaW4tdG9wXCIpLCAuMjUsIHtcbiAgICAgICAgICAgICAgICBjbGlwOiBcInJlY3QoMHB4LCBcIiArICh0aGlzLm9mZnNldFdpZHRoIC0gNDApICsgXCJweCwgMXB4LCBcIiArICh0aGlzLm9mZnNldFdpZHRoIC0gNDApICsgXCJweClcIixcbiAgICAgICAgICAgICAgICBkZWxheTogLjM1LFxuICAgICAgICAgICAgICAgIGVhc2U6IENpcmMuZWFzZU91dFxuICAgICAgICAgICAgfSksIFR3ZWVuTWF4LnNldCgkKHRoaXMpLmZpbmQoXCIubmF2LW1hcmdpbi10b3BcIiksIHtcbiAgICAgICAgICAgICAgICBjbGlwOiBcInJlY3QoMHB4LCAwcHgsIDFweCwgMHB4KVwiLFxuICAgICAgICAgICAgICAgIGRlbGF5OiAuNlxuICAgICAgICAgICAgfSksIFR3ZWVuTWF4LnRvKCQodGhpcykuZmluZChcIi5uYXYtbWFyZ2luLWJvdHRvbVwiKSwgLjM1LCB7XG4gICAgICAgICAgICAgICAgY2xpcDogXCJyZWN0KDBweCwgXCIgKyAoKHRoaXMub2Zmc2V0V2lkdGggLSA0MCkgLyAyICsgNSkgKyBcInB4LCAxcHgsIDBweClcIixcbiAgICAgICAgICAgICAgICBlYXNlOiBDaXJjLmVhc2VJblxuICAgICAgICAgICAgfSksIFR3ZWVuTWF4LnRvKCQodGhpcykuZmluZChcIi5uYXYtbWFyZ2luLWJvdHRvbVwiKSwgLjI1LCB7XG4gICAgICAgICAgICAgICAgY2xpcDogXCJyZWN0KDBweCwgMHB4LCAxcHgsIDBweClcIixcbiAgICAgICAgICAgICAgICBkZWxheTogLjM1LFxuICAgICAgICAgICAgICAgIGVhc2U6IENpcmMuZWFzZU91dFxuICAgICAgICAgICAgfSksIFR3ZWVuTWF4LnNldCgkKHRoaXMpLmZpbmQoXCIubmF2LW1hcmdpbi1ib3R0b21cIiksIHtcbiAgICAgICAgICAgICAgICBjbGlwOiBcInJlY3QoMHB4LCAwcHgsIDFweCwgXCIgKyAodGhpcy5vZmZzZXRXaWR0aCAtIDQwKSArIFwicHgpXCIsXG4gICAgICAgICAgICAgICAgZGVsYXk6IC42XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KSwgICQoXCIjdG91dF90cmFpbGVyXCIpLm1vdXNlZW50ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBUd2Vlbk1heC5zZXQoJChcIiN0b3V0X3RyYWlsZXJfYnRuX292ZXJcIiksIHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1PcmlnbjogXCI1MCUgNTAlXCJcbiAgICAgICAgICAgIH0pLCBUd2Vlbk1heC50bygkKHRoaXMpLmZpbmQoXCIudG91dF9ib3JkZXJcIiksIC4yNSwge1xuICAgICAgICAgICAgICAgIFwiYm9yZGVyLXdpZHRoXCI6IFwiNHB4XCIsXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXI0LmVhc2VPdXRcbiAgICAgICAgICAgIH0pLCBUd2Vlbk1heC50bygkKHRoaXMpLmZpbmQoXCIjdG91dF90cmFpbGVyX2J0bl9vdmVyXCIpLCAuMTUsIHtcbiAgICAgICAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjQuZWFzZU91dFxuICAgICAgICAgICAgfSksIFR3ZWVuTWF4LnRvKCQodGhpcykuZmluZChcIiN0b3V0X3RyYWlsZXJfYnRuX292ZXIgaW1nXCIpLCAuMTUsIHtcbiAgICAgICAgICAgICAgICB4OiAzNCxcbiAgICAgICAgICAgICAgICBkZWxheTogLjE1LFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyNC5lYXNlT3V0XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KS5tb3VzZWxlYXZlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgVHdlZW5NYXgudG8oJCh0aGlzKS5maW5kKFwiLnRvdXRfYm9yZGVyXCIpLCAuMjUsIHtcbiAgICAgICAgICAgICAgICBcImJvcmRlci13aWR0aFwiOiBcIjJweFwiLFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyNC5lYXNlT3V0XG4gICAgICAgICAgICB9KSwgVHdlZW5NYXgudG8oJCh0aGlzKS5maW5kKFwiI3RvdXRfdHJhaWxlcl9idG5fb3ZlciBpbWdcIiksIC4xNSwge1xuICAgICAgICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXI0LmVhc2VPdXRcbiAgICAgICAgICAgIH0pLCBUd2Vlbk1heC50bygkKHRoaXMpLmZpbmQoXCIjdG91dF90cmFpbGVyX2J0bl9vdmVyXCIpLCAuMTUsIHtcbiAgICAgICAgICAgICAgICBzY2FsZTogMCxcbiAgICAgICAgICAgICAgICBkZWxheTogLjE1LFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyNC5lYXNlT3V0XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KSwgJChcIi50b3V0XCIpLm1vdXNlZW50ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBUd2Vlbk1heC50bygkKHRoaXMpLmZpbmQoXCIudG91dF9ib3JkZXJcIiksIC4yNSwge1xuICAgICAgICAgICAgICAgIFwiYm9yZGVyLXdpZHRoXCI6IFwiNHB4XCIsXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXI0LmVhc2VPdXRcbiAgICAgICAgICAgIH0pLCBUd2Vlbk1heC5mcm9tVG8oJCh0aGlzKS5maW5kKFwiaDFcIiksIC4yLCB7XG4gICAgICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgeTogNixcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgICAgICB9KSwgVHdlZW5NYXguZnJvbVRvKCQodGhpcykuZmluZChcImgxXCIpLCAuMiwge1xuICAgICAgICAgICAgICAgIHk6IC02LFxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICAgICAgZGVsYXk6IC4yLFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KS5tb3VzZWxlYXZlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgVHdlZW5NYXgudG8oJCh0aGlzKS5maW5kKFwiLnRvdXRfYm9yZGVyXCIpLCAuMjUsIHtcbiAgICAgICAgICAgICAgICBcImJvcmRlci13aWR0aFwiOiBcIjJweFwiLFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyNC5lYXNlT3V0XG4gICAgICAgICAgICB9KSwgVHdlZW5NYXguZnJvbVRvKCQodGhpcykuZmluZChcImgxXCIpLCAuMiwge1xuICAgICAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHk6IC02LFxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIzLmVhc2VPdXRcbiAgICAgICAgICAgIH0pLCBUd2Vlbk1heC5mcm9tVG8oJCh0aGlzKS5maW5kKFwiaDFcIiksIC4yLCB7XG4gICAgICAgICAgICAgICAgeTogNixcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgIGRlbGF5OiAuMixcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjMuZWFzZU91dFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9LFxuICAgXG4gICAgYWRkWW91dHViZVZpZGVvOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGUgPSB7XG4gICAgICAgICAgICAgICAgcGxheUJ0bjogXCJ5dC1wbGF5dG9nZ2xlXCIsXG4gICAgICAgICAgICAgICAgc2NydWJiZXI6IFwieXQtcHJvZ3Jlc3MtaG9sZGVyXCIsXG4gICAgICAgICAgICAgICAgc291bmRCdG46IFwieXQtc291bmR0b2dnbGVcIixcbiAgICAgICAgICAgICAgICBwcmV2QnRuOiBcInl0LXByZXZpb3VzXCIsXG4gICAgICAgICAgICAgICAgbmV4dEJ0bjogXCJ5dC1uZXh0XCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0ID0ge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lcklEOiBcInRyYWlsZXJfb3ZlcmxheVwiLFxuICAgICAgICAgICAgICAgIGlkOiBcIlBMdXFfcmdDekVQX05YNjFNVGJHM2V1VTZMXzlTc2NJb3BcIiwgXG4gICAgICAgICAgICAgICAgY2xvc2VCdG46IFwieXQtY2xvc2VcIixcbiAgICAgICAgICAgICAgICBsaXN0OiAhMCxcbiAgICAgICAgICAgICAgICBpbmRleDogMCxcbiAgICAgICAgICAgICAgICBzaG93aW5mbzogMCxcbiAgICAgICAgICAgICAgICBhdXRvcGxheTogMCxcbiAgICAgICAgICAgICAgICBjb250cm9sczogMCxcbiAgICAgICAgICAgICAgICBsb29wOiAxLFxuICAgICAgICAgICAgICAgIGN1c3RvbUNvbnRyb2xzOiAhMCxcbiAgICAgICAgICAgICAgICBjdXN0b21CYWNrZ3JvdW5kOiAhMCxcbiAgICAgICAgICAgICAgICBkaXNwYXRjaGVyOiBhcHAuZGlzcGF0Y2hlcixcbiAgICAgICAgICAgICAgICBjdXN0b21CdXR0b25zOiBlXG4gICAgICAgICAgICB9O1xuICAgICAgICB0aGlzLnl0ID0gbmV3IFRyYWlsZXIodCwgYXBwLmRpc3BhdGNoZXIpLCB0aGlzLnl0LmFkZCgpLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5hdl90cmFpbGVyXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIFwiZGVza3RvcFwiICE9PSB0aGlzLmRldmljZSAmJiAkKFwiLm5hdmJhci10b2dnbGVcIikuY2xpY2soKSwgYXBwLmRpc3BhdGNoZXIuZGlzcGF0Y2goXCJTSE9XX1RSQUlMRVJcIilcbiAgICAgICAgfS5iaW5kKHRoaXMpKSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b3V0X3RyYWlsZXJcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGUgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpZGVvcy1saXN0XCIpLmNoaWxkcmVuKSxcbiAgICAgICAgICAgICAgICB0ID0gZS5pbmRleE9mKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygwKSwgYXBwLmRpc3BhdGNoZXIuZGlzcGF0Y2goXCJDVUVfUExBWUxJU1RfSU5ERVhcIiwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGFwcC5kaXNwYXRjaGVyLmRpc3BhdGNoKFwiU0hPV19UUkFJTEVSXCIpXG4gICAgICAgIH0pXG4gICAgfVxufSwgUHJlbG9hZFZpZXcgPSBmdW5jdGlvbihlKSB7XG5cbiAgICB0aGlzLnZoID0gLTEgKiB3aW5kb3cuaW5uZXJIZWlnaHQsIHRoaXMudmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJlbG9hZGVyXCIpLCB0aGlzLmNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByZWxvYWRlci1jb250ZW50XCIpLCB0aGlzLmRpc3BhdGNoZXIgPSB2b2lkIDAgIT09IGUgPyBlIDogbmV3IERpc3BhdGNoZXIsIHRoaXMuZGV2aWNlID0gRGV0ZWN0aXpyLmRldmljZS50eXBlLCB0aGlzLnRsID0gbmV3IFRpbWVsaW5lTWF4KHtcbiAgICAgICAgZGVsYXk6IC41XG4gICAgfSksIHRoaXMuc3BsaXQgPSBuZXcgU3BsaXRUZXh0KFwiI3ByZWxvYWRlci10ZXh0XCIsIHtcbiAgICAgICAgdHlwZTogXCJjaGFyc1wiXG4gICAgfSksIHRoaXMuaW5pdCgpXG59LCBQcmVsb2FkVmlldy5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IFByZWxvYWRWaWV3LFxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmJpbmRFdmVudHMoKSwgdGhpcy5pbnRybygpLCBjaGFycyA9IHRoaXMuc3BsaXQuY2hhcnMsICQoJyNwcmVsb2FkZXInKS5hZGRDbGFzcygnYW5pbWF0aW5nJykgLCB0aGlzLnRsLnNldCgkKFwiI3ByZWxvYWRlci1pbmRpY2F0b3JcIiksIHtcbiAgICAgICAgICAgIGNsaXA6IFwicmVjdCgwcHgsIFwiICsgJChcIiNwcmVsb2FkZXItaW5kaWNhdG9yXCIpLndpZHRoKCkgKiAyICsgXCJweCwgMnB4LCBcIiArICQoXCIjcHJlbG9hZGVyLWluZGljYXRvclwiKS53aWR0aCgpICogMiArIFwicHgpXCJcbiAgICAgICAgfSkuc2V0KCQoXCIjcHJlbG9hZGVyLWNvbnRlbnQgaDFcIiksIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgfSkudG8oJChcIiNwcmVsb2FkZXItaW5kaWNhdG9yXCIpLCAuNSwge1xuICAgICAgICAgICAgY2xpcDogXCJyZWN0KDBweCwgXCIgKyAkKFwiI3ByZWxvYWRlci1pbmRpY2F0b3JcIikud2lkdGgoKSArIFwicHgsIDJweCwgMHB4KVwiLFxuICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VJbk91dFxuICAgICAgICB9KS5zZXQoJChcIiNwcmVsb2FkZXItaW5kaWNhdG9yLWJnXCIpLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgIH0pLmZyb21UbygkKFwiI3ByZWxvYWRlci10dC0xXCIpLCAwLjksIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICB5OiA4MFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgIH0sIFwiZ3JwMVwiKS5mcm9tVG8oJChcIiNwcmVsb2FkZXItdHQtMlwiKSwgMi4wLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgeTogODBcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICBkZWxheTogLjEsXG4gICAgICAgICAgICBlYXNlOiBQb3dlcjMuZWFzZU91dFxuICAgICAgICB9LCBcImdycDFcIikuZnJvbVRvKCQoXCIjcHJlbG9hZGVyLXR0LTNcIiksIDAuNywge1xuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIHk6IDIwXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgZGVsYXk6IC4yLFxuICAgICAgICAgICAgZWFzZTogUG93ZXIzLmVhc2VPdXRcbiAgICAgICAgfSwgXCJncnAxXCIpLmZyb21UbygkKFwiI3ByZWxvYWRlci10dC00XCIpLCAxLjcsIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICB5OiA0MFxuICAgICAgICB9LHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgZGVsYXk6IC4yLFxuICAgICAgICAgICAgZWFzZTogUG93ZXIzLmVhc2VPdXRcbiAgICAgICAgfSwgXCJncnAxXCIpLmZyb21UbygkKFwiI3ByZWxvYWRlci10dC01XCIpLCAxLjIsIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICB5OiA1MFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIGRlbGF5OiAuMixcbiAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgIH0sIFwiZ3JwMVwiKS5mcm9tVG8oJChcIiNwcmVsb2FkZXItdHQtNlwiKSwgMC44LCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgeTogNjBcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICBkZWxheTogLjIsXG4gICAgICAgICAgICBlYXNlOiBQb3dlcjMuZWFzZU91dFxuICAgICAgICB9LCBcImdycDFcIikuZnJvbVRvKCQoXCIjcHJlbG9hZGVyLXR0LTdcIiksIDIuNSwge1xuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIHk6IDcwXG4gICAgICAgIH0sIFxuICAgICAgICB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIGRlbGF5OiAuMixcbiAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgIH0sIFwiZ3JwMVwiKS5mcm9tVG8oJChcIiNwcmVsb2FkZXItdHQtOFwiKSwgMC45LCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgeTogODBcbiAgICAgICAgfSwgIFxuICAgICAgICAge1xuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICBkZWxheTogLjIsXG4gICAgICAgICAgICBlYXNlOiBQb3dlcjMuZWFzZU91dFxuICAgICAgICB9LCBcImdycDFcIikuZnJvbVRvKCQoXCIjcHJlbG9hZGVyLXR0LTlcIiksIDAuNSwge1xuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIHk6IDkwXG4gICAgICAgIH0sXG4gICAgICAgICB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIGRlbGF5OiAuMixcbiAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgIH0sIFwiZ3JwMVwiKS5mcm9tVG8oJChcIiNwcmVsb2FkZXItdHQtMTBcIiksIDEuNywge1xuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIHk6IDYwXG4gICAgICAgIH0sXG4gICAgICAgICB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIGRlbGF5OiAuMixcbiAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgIH0sIFwiZ3JwMVwiKS5mcm9tVG8oJChcIiNwcmVsb2FkZXItdHQtMTFcIiksIDEuMSwge1xuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIHk6IDgwXG4gICAgICAgIH0sXG4gICAgICAgICB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIGRlbGF5OiAuMixcbiAgICAgICAgICAgIGVhc2U6IFBvd2VyNC5lYXNlT3V0XG4gICAgICAgIH0sIFwiZ3JwMVwiKS5mcm9tVG8oJChcIiNwcmVsb2FkZXItdHQtMTJcIiksIDEuMSwge1xuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIHk6IDgwXG4gICAgICAgIH0sXG4gICAgICAgICB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIGRlbGF5OiAuMixcbiAgICAgICAgICAgIGVhc2U6IFBvd2VyNC5lYXNlT3V0XG4gICAgICAgIH0sIFwiZ3JwMVwiKS5mcm9tVG8oJChcIiNwcmVsb2FkZXItdHQtMTNcIiksIDIuMCwge1xuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIHk6IDgwXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgZGVsYXk6IDEuMDYsXG4gICAgICAgICAgICBlYXNlOiBQb3dlcjMuZWFzZU91dFxuICAgICAgICB9LCBcImdycDFcIikuZnJvbVRvKCQoXCIjcHJlbG9hZGVyLXR0LTE0XCIpLCAwLjcsIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICB5OiAyMFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIGRlbGF5OiAxLjA3LFxuICAgICAgICAgICAgZWFzZTogUG93ZXIzLmVhc2VPdXRcbiAgICAgICAgfSwgXCJncnAxXCIpLmZyb21UbygkKFwiI3ByZWxvYWRlci10dC0xNFwiKSwgMS43LCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgeTogNDBcbiAgICAgICAgfSx7XG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIGRlbGF5OiAxLjA3LFxuICAgICAgICAgICAgZWFzZTogUG93ZXIzLmVhc2VPdXRcbiAgICAgICAgfSwgXCJncnAxXCIpLmZyb21UbygkKFwiI3ByZWxvYWRlci10dC0xNVwiKSwgMS4yLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgeTogNTBcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICBkZWxheTogMS4wNyxcbiAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgIH0sIFwiZ3JwMVwiKS5mcm9tVG8oJChcIiNwcmVsb2FkZXItdHQtMTZcIiksIDAuOCwge1xuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIHk6IDYwXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgZGVsYXk6IDEuMDcsXG4gICAgICAgICAgICBlYXNlOiBQb3dlcjMuZWFzZU91dFxuICAgICAgICB9LCBcImdycDFcIikuZnJvbVRvKCQoXCIjcHJlbG9hZGVyLXR0LTE3XCIpLCAxLjUsIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICB5OiA3MFxuICAgICAgICB9LCBcbiAgICAgICAge1xuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICBkZWxheTogMS4wNyxcbiAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgIH0sIFwiZ3JwMVwiKS5mcm9tVG8oJChcIiNwcmVsb2FkZXItdHQtMThcIiksIDAuOSwge1xuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIHk6IDgwXG4gICAgICAgIH0sICBcbiAgICAgICAgIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgZGVsYXk6IDEuMDcsXG4gICAgICAgICAgICBlYXNlOiBQb3dlcjMuZWFzZU91dFxuICAgICAgICB9LCBcImdycDFcIikuZnJvbVRvKCQoXCIjcHJlbG9hZGVyLXR0LTE5XCIpLCAwLjUsIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICB5OiA5MFxuICAgICAgICB9LFxuICAgICAgICAge1xuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICBkZWxheTogMS4wNyxcbiAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgIH0sIFwiZ3JwMVwiKS5mcm9tVG8oJChcIiNwcmVsb2FkZXItdHQtMjBcIiksIDEuNywge1xuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIHk6IDYwXG4gICAgICAgIH0sXG4gICAgICAgICB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIGRlbGF5OiAxLjA3LFxuICAgICAgICAgICAgZWFzZTogUG93ZXIzLmVhc2VPdXRcbiAgICAgICAgfSwgXCJncnAxXCIpLmZyb21UbygkKFwiI3ByZWxvYWRlci10dC0yMVwiKSwgMS4xLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgeTogODBcbiAgICAgICAgfSxcbiAgICAgICAgIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgZGVsYXk6IDEuMDcsXG4gICAgICAgICAgICBlYXNlOiBQb3dlcjQuZWFzZU91dFxuICAgICAgICB9LCBcImdycDFcIikuZnJvbVRvKCQoXCIjcHJlbG9hZGVyLXR0LTIyXCIpLCAyLjAsIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICB5OiA4MFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIGRlbGF5OiAxLjA2LFxuICAgICAgICAgICAgZWFzZTogUG93ZXIzLmVhc2VPdXRcbiAgICAgICAgfSwgXCJncnAxXCIpLmZyb21UbygkKFwiI3ByZWxvYWRlci10dC0yM1wiKSwgMC43LCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgeTogMjBcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICBkZWxheTogMS4wNyxcbiAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgIH0sIFwiZ3JwMVwiKS5mcm9tVG8oJChcIiNwcmVsb2FkZXItdHQtMjRcIiksIDEuNywge1xuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIHk6IDQwXG4gICAgICAgIH0se1xuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICBkZWxheTogMS4wNyxcbiAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgIH0sIFwiZ3JwMVwiKS5mcm9tVG8oJChcIiNwcmVsb2FkZXItdHQtMjVcIiksIDEuMiwge1xuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIHk6IDUwXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgZGVsYXk6IDEuMixcbiAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgIH0sIFwiZ3JwMVwiKS5mcm9tVG8oJChcIiNwcmVsb2FkZXItdHQtMjZcIiksIDAuOCwge1xuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIHk6IDYwXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgZGVsYXk6IDEuMixcbiAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgIH0sIFwiZ3JwMVwiKS5mcm9tVG8oJChcIiNwcmVsb2FkZXItdHQtMjdcIiksIDIuNSwge1xuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIHk6IDcwXG4gICAgICAgIH0sIFxuICAgICAgICB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIGRlbGF5OiAxLjIsXG4gICAgICAgICAgICBlYXNlOiBQb3dlcjMuZWFzZU91dFxuICAgICAgICB9LCBcImdycDFcIikuZnJvbVRvKCQoXCIjcHJlbG9hZGVyLXR0LTI4XCIpLCAwLjksIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICB5OiA4MFxuICAgICAgICB9LCAgXG4gICAgICAgICB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIGRlbGF5OiAxLjIsXG4gICAgICAgICAgICBlYXNlOiBQb3dlcjMuZWFzZU91dFxuICAgICAgICB9LCBcImdycDFcIikuZnJvbVRvKCQoXCIjcHJlbG9hZGVyLXR0LTI5XCIpLCAwLjUsIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICB5OiA5MFxuICAgICAgICB9LFxuICAgICAgICAge1xuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICBkZWxheTogMS4yLFxuICAgICAgICAgICAgZWFzZTogUG93ZXIzLmVhc2VPdXRcbiAgICAgICAgfSwgXCJncnAxXCIpLmZyb21UbygkKFwiI3ByZWxvYWRlci10dC0zMFwiKSwgMS43LCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgeTogNjBcbiAgICAgICAgfSxcbiAgICAgICAgIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgZGVsYXk6IDEuMixcbiAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgIH0sIFwiZ3JwMVwiKS5mcm9tVG8oJChcIiNwcmVsb2FkZXItdHQtMzFcIiksIDEuMSwge1xuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIHk6IDgwXG4gICAgICAgIH0sXG4gICAgICAgICB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIGRlbGF5OiAxLjIsXG4gICAgICAgICAgICBlYXNlOiBQb3dlcjQuZWFzZU91dFxuICAgICAgICB9LCBcImdycDFcIikuZnJvbVRvKCQoXCIjcHJlbG9hZGVyLXR0LTMyXCIpLCAxLjEsIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICB5OiA4MFxuICAgICAgICB9LFxuICAgICAgICAge1xuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICBkZWxheTogMS4yLFxuICAgICAgICAgICAgZWFzZTogUG93ZXI0LmVhc2VPdXRcbiAgICAgICAgfSwgXCJncnAxXCIpLmZyb21UbygkKFwiI3ByZWxvYWRlci10dC0zM1wiKSwgMS4xLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgeTogODBcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICBkZWxheTogMS4xLFxuICAgICAgICAgICAgZWFzZTogUG93ZXIzLmVhc2VPdXRcbiAgICAgICAgfSwgXCJncnAxXCIpLmZyb21UbygkKFwiI3ByZWxvYWRlci10dC0zNFwiKSwgMi41LCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgeTogMjBcbiAgICAgICAgfSwgIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgZGVsYXk6IDEuNixcbiAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0LFxuICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaGVyLmRpc3BhdGNoKFwiSU5UUk9fRE9ORV9FVkVOVFwiKVxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgIH0sIFwiZ3JwMVwiKS5zdGFnZ2VyRnJvbVRvKGNoYXJzLCAuNzUsIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICB5OiAtMTBcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICBkZWxheTogLjIsXG4gICAgICAgICAgICBlYXNlOiBQb3dlcjMuZWFzZU91dFxuICAgICAgICB9LCAuMDUsIFwiZ3JwMVwiKS50bygkKFwiI3ByZWxvYWRlci1pbmRpY2F0b3JcIiksIC41LCB7XG4gICAgICAgICAgICBjbGlwOiBcInJlY3QoMHB4LCBcIiArICQoXCIjcHJlbG9hZGVyLWluZGljYXRvclwiKS53aWR0aCgpICogLTIwMCArIFwicHgsIDJweCwgXCIgKyAkKFwiI3ByZWxvYWRlci1pbmRpY2F0b3JcIikud2lkdGgoKSAqIC0yMDAgKyBcInB4KVwiLFxuICAgICAgICAgICAgZGVsYXk6IC4yLFxuICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VJbk91dFxuICAgICAgICB9LCBcImdycDFcIilcbiAgICB9LFxuICAgIHVwZGF0ZVByb2dyZXNzOiBmdW5jdGlvbihlLCB0KSB7XG4gICAgICAgIGlmIChNYXRoLmZsb29yKHQpID4gcGFyc2VJbnQoJCgnI3ByZWxvYWRlci1sb2FkaW5nLXRleHQnKS50ZXh0KCksIDEwKSkge1xuICAgICAgICAgICAgJCgnI3ByZWxvYWRlci1sb2FkaW5nLXRleHQnKS50ZXh0KE1hdGguZmxvb3IodCkpO1xuICAgICAgICB9XG4gICAgICAgIFR3ZWVuTWF4LnRvKCQoXCIjcHJlbG9hZGVyLWluZGljYXRvclwiKSwgLjI1LCB7XG4gICAgICAgICAgICBjbGlwOiBcInJlY3QoMjAwcHgsIFwiICsgKHQgLyAtMTAwICogJChcIiNwcmVsb2FkZXItaW5kaWNhdG9yXCIpLndpZHRoKCkgKiAtMjAwICsgJChcIiNwcmVsb2FkZXItaW5kaWNhdG9yXCIpLndpZHRoKCkgKiAtMjAwKSArIFwicHgsIDJweCwgXCIgKyAoJChcIiNwcmVsb2FkZXItaW5kaWNhdG9yXCIpLndpZHRoKCkgKiAtMjAwICsgdCAvIDEwMCAqICQoXCIjcHJlbG9hZGVyLWluZGljYXRvclwiKS53aWR0aCgpICogMjAwKSArIFwicHgpXCJcbiAgICAgICAgfSlcbiAgICB9LFxuICAgIG9uTG9hZGVkOiBmdW5jdGlvbihlLCB0KSB7XG4gICAgICAgYXBwLmJyb3dzZXJDaGVjaygpLCB0aGlzLm91dHJvKCksIHRoaXMuZGlzcGF0Y2hlci5yZW1vdmVFdmVudGxpc3RlbmVyKHRoaXMucHJvZ3Jlc3NFdmVudCksIHRoaXMuZGlzcGF0Y2hlci5yZW1vdmVFdmVudGxpc3RlbmVyKHRoaXMuY29tcGxldGVFdmVudCksXG4gICAgICAgICAgIGltYWdlQW5pbWF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGhlYWRsaW5lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRyaWdnZXItaGVhZGxpbmUnKTtcbiAgICAgICAgICAgICAgICB2YXIgaGVhZGxpbmUxID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRyaWdnZXItaGVhZGxpbmUxJyk7XG4gICAgICAgICAgICAgICAgdmFyIGhlYWRsaW5lMiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50cmlnZ2VyLWhlYWRsaW5lMicpO1xuICAgICAgICAgICAgICAgIHZhciBoZWFkbGluZTMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHJpZ2dlci1oZWFkbGluZTMnKTtcbiAgICAgICAgICAgICAgICB2YXIgaGVhZGxpbmU0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRyaWdnZXItaGVhZGxpbmU0Jyk7XG4gICAgICAgICAgICAgICAgdmFyIGhlYWRsaW5lNSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50cmlnZ2VyLWhlYWRsaW5lNScpO1xuICAgICAgICAgICAgICAgIHZhciBoZWFkbGluZTYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHJpZ2dlci1oZWFkbGluZTYnKTtcbiAgICAgICAgICAgICAgICB2YXIgaGVhZGxpbmU3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRyaWdnZXItaGVhZGxpbmU3Jyk7XG4gICAgICAgICAgICAgICAgaWYgKCQoJyNob21lX3NlYycpLmNzcygndG9wJykgPD0gJzBweCcpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRsaW5lLmNsYXNzTGlzdC5yZW1vdmUoJ3RyaWdnZXItaGVhZGxpbmUtLWhpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGxpbmUxLmNsYXNzTGlzdC5yZW1vdmUoJ3RyaWdnZXItaGVhZGxpbmUxLS1oaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRsaW5lMi5jbGFzc0xpc3QucmVtb3ZlKCd0cmlnZ2VyLWhlYWRsaW5lMi0taGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkbGluZTMuY2xhc3NMaXN0LnJlbW92ZSgndHJpZ2dlci1oZWFkbGluZTMtLWhpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGxpbmU0LmNsYXNzTGlzdC5yZW1vdmUoJ3RyaWdnZXItaGVhZGxpbmU0LS1oaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRsaW5lNS5jbGFzc0xpc3QucmVtb3ZlKCd0cmlnZ2VyLWhlYWRsaW5lNS0taGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkbGluZTYuY2xhc3NMaXN0LnJlbW92ZSgndHJpZ2dlci1oZWFkbGluZTYtLWhpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGxpbmU3LmNsYXNzTGlzdC5yZW1vdmUoJ3RyaWdnZXItaGVhZGxpbmU3LS1oaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwMClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGxpbmU0LmNsYXNzTGlzdC5yZW1vdmUoJ3RyaWdnZXItaGVhZGxpbmU0LS1oaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGxpbmU1LmNsYXNzTGlzdC5yZW1vdmUoJ3RyaWdnZXItaGVhZGxpbmU1LS1oaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGxpbmU2LmNsYXNzTGlzdC5yZW1vdmUoJ3RyaWdnZXItaGVhZGxpbmU2LS1oaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGxpbmU3LmNsYXNzTGlzdC5yZW1vdmUoJ3RyaWdnZXItaGVhZGxpbmU3LS1oaWRkZW4nKTtcbiAgICAgICAgICAgICAgICB9LCAxMDAwKTsgICAgXG4gICAgICAgICAgICB9LFxuICAgICAgICBpbWFnZUFuaW1hdGlvbigpOyBcblxuICAgICAgICBicm93c2VyQ2hlY2tGaXJlRm94PWZ1bmN0aW9uKCkge1xuICAgICAgICBzd2l0Y2ggKGFwcC5icm93c2VyKSB7XG4gICAgICAgICAgICBjYXNlIFwiZmlyZWZveFwiOlxuICAgICAgICAgICAgICAgJChcIiNzMV9mZ192aWRlb1wiKS5hdHRyKFwic3JjXCIsIFwiaW1nL3ZpZGVvc19tb2JpbGVfYmcuanBnXCIpO1xuICAgICAgICAgICAgICAgICQoXCIjczFfZmdfdmlkZW9cIikuYXR0cihcInR5cGVcIiwgXCJpbWcvanBnXCIpO1xuICAgICAgICAgICAgICAgICAkKFwiI3MxX2ZnXCIpLmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgY2FzZSBcInNhZmFyaVwiOlxuICAgICAgICAgICAgICAgJChcIiNzMV9mZ192aWRlb1wiKS5hdHRyKFwic3JjXCIsIFwiaW1nL3ZpZGVvc19tb2JpbGVfYmcuanBnXCIpO1xuICAgICAgICAgICAgICAgICQoXCIjczFfZmdfdmlkZW9cIikuYXR0cihcInR5cGVcIiwgXCJpbWcvanBnXCIpO1xuICAgICAgICAgICAgICAgICAkKFwiI3MxX2ZnXCIpLmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcbiAgICAgICAgICAgICAgICAkKFwiI3N0b3J5X3RleHQxXCIpLnJlbW92ZUNsYXNzKCd0cmlnZ2VyLWhlYWRsaW5lLS1oaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICQoXCIjc3RvcnlfdGV4dDJcIikucmVtb3ZlQ2xhc3MoJ3RyaWdnZXItaGVhZGxpbmUxLS1oaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICQoXCIjc3RvcnlfdGV4dDNcIikucmVtb3ZlQ2xhc3MoJ3RyaWdnZXItaGVhZGxpbmUyLS1oaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgJChcIiNzdG9yeV90ZXh0NFwiKS5yZW1vdmVDbGFzcygndHJpZ2dlci1oZWFkbGluZTMtLWhpZGRlbicpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAkKFwiI3VwZ3JhZGVcIikuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIilcbiAgICAgICAgfVxuICAgICB9LCBicm93c2VyQ2hlY2tGaXJlRm94KCk7XG5cbiAgICB9LFxuXG4gICAgb25JbnRyb0NvbXBsZXRlOiBmdW5jdGlvbihlKSB7XG4gICAgICAgIFR3ZWVuTWF4LnNldCh0aGlzLnZpZXcsIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgfSlcbiAgICB9LFxuICAgIG9uT3V0cm9Db21wbGV0ZTogZnVuY3Rpb24oZSkge1xuICAgICAgICBUd2Vlbk1heC5zZXQodGhpcy52aWV3LCB7XG4gICAgICAgICAgICBkaXNwbGF5OiBcIm5vbmVcIlxuICAgICAgICB9KSwgdGhpcy5kaXNwYXRjaGVyLmRpc3BhdGNoKFwiT1VUUk9fRE9ORV9FVkVOVFwiKVxuICAgIH0sXG4gICAgYmluZEV2ZW50czogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3NFdmVudCA9IHRoaXMuZGlzcGF0Y2hlci5hZGRFdmVudGxpc3RlbmVyKFwiQU1fUFJPR1JFU1NfR1wiLCB0aGlzLnVwZGF0ZVByb2dyZXNzLmJpbmQodGhpcykpLCB0aGlzLmNvbXBsZXRlRXZlbnQgPSB0aGlzLmRpc3BhdGNoZXIuYWRkRXZlbnRsaXN0ZW5lcihcIkFNX0NPTVBMRVRFX0dcIiwgdGhpcy5vbkxvYWRlZC5iaW5kKHRoaXMpKVxuICAgIH0sXG4gICAgaW50cm86IGZ1bmN0aW9uKCkge1xuICAgICAgICBUd2Vlbk1heC5mcm9tVG8odGhpcy52aWV3LCAxLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiB0aGlzLm9uSW50cm9Db21wbGV0ZS5iaW5kKHRoaXMpXG4gICAgICAgIH0pOyBcbiAgICAgICAgdmFyIGNvdW50ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmIChwYXJzZUludCgkKCcjcHJlbG9hZGVyLWxvYWRpbmctdGV4dCcpLnRleHQoKSwgMTApIDwgMTAwKSB7XG4gICAgICAgICAgICAgICAgJCgnI3ByZWxvYWRlci1sb2FkaW5nLXRleHQnKS50ZXh0KChwYXJzZUludCgkKCcjcHJlbG9hZGVyLWxvYWRpbmctdGV4dCcpLnRleHQoKSwgMTApKzEpKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGNvdW50LCAxMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvdW50KCk7IFxuICAgIH0sXG4gICAgb3V0cm86IGZ1bmN0aW9uKCkge1xuICAgICAgICBUd2Vlbk1heC5mcm9tVG8odGhpcy52aWV3LCAuNzUsIHtcbiAgICAgICAgICAgIHk6IDBcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgeTogdGhpcy52aCxcbiAgICAgICAgICAgIGRlbGF5OiAuNzUsXG4gICAgICAgICAgICBlYXNlOiBQb3dlcjQuZWFzZU91dCxcbiAgICAgICAgICAgIG9uQ29tcGxldGU6IHRoaXMub25PdXRyb0NvbXBsZXRlLmJpbmQodGhpcylcbiAgICAgICAgfSksIFR3ZWVuTWF4LmZyb21UbygkKFwiI2RpbW1lclwiKSwgLjc1LCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICBkZWxheTogLjUsXG4gICAgICAgICAgICBlYXNlOiBQb3dlcjQuZWFzZUluLFxuICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJChcIiNkaW1tZXJcIikuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgXCJ6LWluZGV4XCI6IDksXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IFwiMFwiXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICB9KVxuICAgIH1cbn0sIHNjcm9sbFZpZXcgPSBmdW5jdGlvbihlKSB7XG4gIFxuICAgIHRoaXMuZGlzcGF0Y2hlciA9IHZvaWQgMCAhPT0gZSA/IGUgOiBuZXcgRGlzcGF0Y2hlciwgdGhpcy5kZXZpY2UgPSBEZXRlY3RpenIuZGV2aWNlLnR5cGUsIHRoaXMuY29udHJvbGxlciA9IG5ldyBTY3JvbGxNYWdpYy5Db250cm9sbGVyLCB0aGlzLnNlY3Rpb25zID0gW1wiaG9tZV9zZWNcIiwgXCJzdG9yeV9zZWNcIiwgXCJjYXN0bmNyZXdfc2VjXCIsIFwiZ2FsbGVyeV9zZWNcIiwgXCJ2aWRlb3Nfc2VjXCIsIFwidGlja2V0c19zZWNcIl0sIHRoaXMuc2VjdGlvbk5hbWVzID0gW1wiaG9tZVwiLCBcInN0b3J5XCIsIFwiY2FzdG5jcmV3XCIsIFwiZ2FsbGVyeVwiLCBcInZpZGVvc1wiLCBcInRpY2tldHNcIl0sIHRoaXMuY3VyU2VjdGlvbiA9IDAsIHRoaXMuc2Nyb2xsSGVpZ2h0ID0gMCwgdGhpcy5zY3JvbGxPZmZzZXQgPSAwLCB0aGlzLnNjZW5lcyA9IFtdLCB0aGlzLm5hdlNjZW5lcyA9IFtdLCB0aGlzLmNsaWVudEhlaWdodCwgdGhpcy5zY3JvbGxUbywgdGhpcy5zY3JvbGxQb3Ncbn0sIHNjcm9sbFZpZXcucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiBzY3JvbGxWaWV3LFxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5kaXNwYXRjaGVyLmRpc3BhdGNoKFwiU0NST0xMX0lOSVRcIiksIHRoaXMuYmluZEV2ZW50cygpLCB0aGlzLnNldGJvZHlIZWlnaHQoKSwgXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZU5hdlNjZW5lKFwibmF2YmFyXCIsIHRoaXMuc2Nyb2xsSGVpZ2h0IC0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5zZWN0aW9uc1swXSkuY2xpZW50SGVpZ2h0LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnNlY3Rpb25zWzBdKS5jbGllbnRIZWlnaHQsIFwibmF2YmFyXCIsIFwiLm5hdmJhclwiLCBcIm5hdi1kYXJrZW5cIiksXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZU5hdlNjZW5lKFwiZm9vdGVyXCIsIHRoaXMuc2Nyb2xsSGVpZ2h0IC0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5zZWN0aW9uc1swXSkuY2xpZW50SGVpZ2h0LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnNlY3Rpb25zWzBdKS5jbGllbnRIZWlnaHQsIFwiZm9vdGVyXCIsIFwiLmZvb3RlclwiLCBcIm5hdi1kYXJrZW5cIiksIFwiZGVza3RvcFwiID09IHRoaXMuZGV2aWNlKVxuICAgICAgICAgICAgdGhpcy5jcmVhdGVTY2VuZShcImhvbWVfc2VjU2Nyb2xsXCIsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaG9tZV9zZWNcIikuY2xpZW50SGVpZ2h0LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImhvbWVfc2VjXCIpLmNsaWVudEhlaWdodCwgdGhpcy5nZXRPZmZzZXQoMCksIHRoaXMuc2VjdGlvbnNbMF0sIFwiI25hdi1cIiArIHRoaXMuc2VjdGlvbk5hbWVzWzBdLCBcImFjdGl2ZVwiLCAwKSwgXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVNjZW5lKFwic3Rvcnlfc2VjU2Nyb2xsXCIsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Rvcnlfc2VjXCIpLmNsaWVudEhlaWdodCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdG9yeV9zZWNcIikuY2xpZW50SGVpZ2h0LCB0aGlzLmdldE9mZnNldCgxKSwgdGhpcy5zZWN0aW9uc1sxXSwgXCIjbmF2LVwiICsgdGhpcy5zZWN0aW9uTmFtZXNbMV0sIFwiYWN0aXZlXCIsIDEpLFxuICAgICAgICAgICAgdGhpcy5jcmVhdGVTY2VuZShcImNhc3RuY3Jld19zZWNTY3JvbGxcIiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYXN0bmNyZXdfc2VjXCIpLmNsaWVudEhlaWdodCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYXN0bmNyZXdfc2VjXCIpLmNsaWVudEhlaWdodCwgdGhpcy5nZXRPZmZzZXQoMiksIHRoaXMuc2VjdGlvbnNbMl0sIFwiI25hdi1cIiArIHRoaXMuc2VjdGlvbk5hbWVzWzJdLCBcImFjdGl2ZVwiLCAyKSxcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlU2NlbmUoXCJnYWxsZXJ5X3NlY1Njcm9sbFwiLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdhbGxlcnlfc2VjXCIpLmNsaWVudEhlaWdodCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnYWxsZXJ5X3NlY1wiKS5jbGllbnRIZWlnaHQsIHRoaXMuZ2V0T2Zmc2V0KDMpLCB0aGlzLnNlY3Rpb25zWzNdLCBcIiNuYXYtXCIgKyB0aGlzLnNlY3Rpb25OYW1lc1szXSwgXCJhY3RpdmVcIiwgMyksIFxuICAgICAgICAgICAgdGhpcy5jcmVhdGVTY2VuZShcInZpZGVvc19zZWNTY3JvbGxcIiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb3Nfc2VjXCIpLmNsaWVudEhlaWdodCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb3Nfc2VjXCIpLmNsaWVudEhlaWdodCwgdGhpcy5nZXRPZmZzZXQoNCksIHRoaXMuc2VjdGlvbnNbNF0sIFwiI25hdi1cIiArIHRoaXMuc2VjdGlvbk5hbWVzWzRdLCBcImFjdGl2ZVwiLCA0KSxcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlU2NlbmUoXCJ0aWNrZXRzX3NlY1Njcm9sbFwiLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRpY2tldHNfc2VjXCIpLmNsaWVudEhlaWdodCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aWNrZXRzX3NlY1wiKS5jbGllbnRIZWlnaHQsIHRoaXMuZ2V0T2Zmc2V0KDUpLCB0aGlzLnNlY3Rpb25zWzVdLCBcIiNuYXYtXCIgKyB0aGlzLnNlY3Rpb25OYW1lc1s1XSwgXCJhY3RpdmVcIiwgNSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnNlY3Rpb25zLmxlbmd0aDsgaSsrKSB0aGlzLmNyZWF0ZU1vYmlsZVNjZW5lKHRoaXMuc2VjdGlvbnNbaV0gKyBcIlNjcm9sbFwiLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnNlY3Rpb25zW2ldKS5jbGllbnRIZWlnaHQsIHRoaXMuZ2V0T2Zmc2V0KGkpLCB0aGlzLnNlY3Rpb25zW2ldLCBcIiNuYXYtXCIgKyB0aGlzLnNlY3Rpb25OYW1lc1tpXSwgXCJhY3RpdmVcIiwgaSlcbiAgICB9LFxuICAgIGJpbmRFdmVudHM6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmhhc2hFdmVudCA9IHRoaXMuZGlzcGF0Y2hlci5hZGRFdmVudGxpc3RlbmVyKFwiSEFTSF9FVkVOVFwiLCB0aGlzLm9uSGFzaEV2ZW50LmJpbmQodGhpcykpLCBcImRlc2t0b3BcIiA9PSB0aGlzLmRldmljZSAmJiAkKHdpbmRvdykucmVzaXplKHRoaXMucmVzaXplLmJpbmQodGhpcykpLCAkKFwiLm5hdmJhci1tYWluIGxpXCIpLmNsaWNrKHRoaXMubmF2aWdhdGVPbkNsaWNrLmJpbmQodGhpcykpLCAkKFwiLm5hdmJhci10b2dnbGVcIikuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKFwib3BlblwiKTtcblxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5oYXNoRXZlbnQgPSB0aGlzLmRpc3BhdGNoZXIuYWRkRXZlbnRsaXN0ZW5lcihcIkhBU0hfRVZFTlRcIiwgdGhpcy5vbkhhc2hFdmVudC5iaW5kKHRoaXMpKSwgXCJkZXNrdG9wXCIgPT0gdGhpcy5kZXZpY2UgJiYgJCh3aW5kb3cpLnJlc2l6ZSh0aGlzLnJlc2l6ZS5iaW5kKHRoaXMpKSwgJChcIi5uYXZiYXItcmlnaHQgbGlcIikuY2xpY2sodGhpcy5uYXZpZ2F0ZU9uQ2xpY2suYmluZCh0aGlzKSksICQoXCIubmF2YmFyLXRvZ2dsZVwiKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoXCJvcGVuXCIpXG4gICAgICAgIH0pO1xuICAgICQoXCIjc3Rvcnktd3JhcHBlclwiKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgVHdlZW5NYXgudG8oJChcImJvZHlcIiksIDEsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogd2luZG93LmlubmVySGVpZ2h0ICogNC42OFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyNC5lYXNlSW5PdXQsXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSlcbiAgICB9LFxuICAgIG9uSGFzaEV2ZW50OiBmdW5jdGlvbihlLCB0KSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsVG8gPSB0LCB0aGlzLm5hdmlnYXRlVG8odGhpcy5zY3JvbGxUbylcbiAgICB9LFxuICAgIHNldGJvZHlIZWlnaHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IgKHRoaXMuc2Nyb2xsSGVpZ2h0ID0gMCwgaSA9IDA7IGkgPCB0aGlzLnNlY3Rpb25zLmxlbmd0aDsgaSsrKSB0aGlzLnNjcm9sbEhlaWdodCA9IHRoaXMuc2Nyb2xsSGVpZ2h0ICsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5zZWN0aW9uc1tpXSkuY2xpZW50SGVpZ2h0O1xuICAgICAgICAkKFwiYm9keVwiKS5jc3MoXCJoZWlnaHRcIiwgdGhpcy5zY3JvbGxIZWlnaHQgKyBcInB4XCIpXG4gICAgfSxcbiAgICBjcmVhdGVTY2VuZTogZnVuY3Rpb24oZSwgdCwgcywgbywgbiwgYSwgciwgYykge1xuICAgICAgICB2YXIgZCA9IG5ldyBUaW1lbGluZU1heDtcbiAgICAgICAgXCJzdG9yeV9zZWNTY3JvbGxcIiA9PT0gZSA/IGQudG8oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobiksIDEsIHtcbiAgICAgICAgICAgIHk6IC0xICogcyArIFwicHhcIixcbiAgICAgICAgICAgIG9uVXBkYXRlOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hlci5kaXNwYXRjaChcIlNUT1JZX1NDUk9MTF9FVkVOVFwiLCBwYXJzZUludChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0b3J5X3NlY1wiKS5zdHlsZS55KSlcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSxcbiAgICAgICAgICAgIHJvdGF0aW9uOjAuMDAxLFxuICAgICAgICAgICAgZm9yY2UzRDogdHJ1ZSxcbiAgICAgICAgICAgIGF1dG9Sb3VuZDogITEsXG4gICAgICAgICAgICBlYXNlOiBMaW5lYXIuZWFzZU5vbmUsXG5cbiAgICAgICAgICAgXG4gICAgICAgIH0pIDogZC50byhkb2N1bWVudC5nZXRFbGVtZW50QnlJZChuKSwgMSwge1xuICAgICAgICAgICAgeTogLTEgKiBzICsgXCJweFwiLFxuICAgICAgICAgICAgcm90YXRpb246MC4wMDEsXG4gICAgICAgICAgICBmb3JjZTNEOiB0cnVlLFxuICAgICAgICAgICAgYXV0b1JvdW5kOiAhMSxcbiAgICAgICAgICAgIGVhc2U6IExpbmVhci5lYXNlTm9uZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBlID0gbmV3IFNjcm9sbE1hZ2ljLlNjZW5lKHtcbiAgICAgICAgICAgIHRyaWdnZXJFbGVtZW50OiBcImJvZHlcIixcbiAgICAgICAgICAgIHRyaWdnZXJIb29rOiBcIm9uTGVhdmVcIixcbiAgICAgICAgICAgIGR1cmF0aW9uOiB0LFxuICAgICAgICAgICAgb2Zmc2V0OiBvLFxuICAgICAgICBcblxuICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgIH0pLnNldFR3ZWVuKGQpLnNldENsYXNzVG9nZ2xlKGEsIHIpLm9uKFwibGVhdmVcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgXCJGT1JXQVJEXCIgPT09IGUudGFyZ2V0LmNvbnRyb2xsZXIoKS5pbmZvKFwic2Nyb2xsRGlyZWN0aW9uXCIpID8gKHRoaXMuY3VyU2VjdGlvbisrLCB0aGlzLmN1clNlY3Rpb24gPiA2ICYmICh0aGlzLmN1clNlY3Rpb24gPSA2KSwgd2luZG93LmxvY2F0aW9uLmhhc2ggPSB0aGlzLnNlY3Rpb25OYW1lc1t0aGlzLmN1clNlY3Rpb25dKSA6ICh0aGlzLmN1clNlY3Rpb24tLSwgdGhpcy5jdXJTZWN0aW9uIDwgMCAmJiAodGhpcy5jdXJTZWN0aW9uID0gMCksIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gdGhpcy5zZWN0aW9uTmFtZXNbdGhpcy5jdXJTZWN0aW9uXSlcbiAgICAgICAgfS5iaW5kKHRoaXMpKS5hZGRUbyh0aGlzLmNvbnRyb2xsZXIpO1xuICAgICAgICBlLmluZGljYXRvciA9IG4sIGUuY2ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChuKS5jbGllbnRIZWlnaHQsIGUuaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChuKSwgZS5pbmRleCA9IGksIHRoaXMuc2NlbmVzLnB1c2goZSlcbiAgICB9LFxuICAgIGNyZWF0ZU1vYmlsZVNjZW5lOiBmdW5jdGlvbihlLCB0LCBpLCBzLCBvLCBuLCBhKSB7XG4gICAgICAgIG5ldyBTY3JvbGxNYWdpYy5TY2VuZSh7XG4gICAgICAgICAgICB0cmlnZ2VyRWxlbWVudDogXCJib2R5XCIsXG4gICAgICAgICAgICB0cmlnZ2VySG9vazogXCJvbkxlYXZlXCIsXG4gICAgICAgICAgICBkdXJhdGlvbjogdCxcbiAgICAgICAgICAgIG9mZnNldDogaSxcbiAgICAgICAgICAgIHJldmVyc2U6ICEwXG4gICAgICAgIH0pLnNldENsYXNzVG9nZ2xlKG8sIG4pLm9uKFwibGVhdmVcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgXCJGT1JXQVJEXCIgPT09IGUudGFyZ2V0LmNvbnRyb2xsZXIoKS5pbmZvKFwic2Nyb2xsRGlyZWN0aW9uXCIpID8gdGhpcy5jdXJTZWN0aW9uKysgOiB0aGlzLmN1clNlY3Rpb24tLVxuICAgICAgICB9LmJpbmQodGhpcykpLmFkZFRvKHRoaXMuY29udHJvbGxlcilcbiAgICB9LFxuICAgIGNyZWF0ZU5hdlNjZW5lOiBmdW5jdGlvbihlLCB0LCBzLCBvLCBuLCBhKSB7XG4gICAgICAgIHZhciBlID0gbmV3IFNjcm9sbE1hZ2ljLlNjZW5lKHtcbiAgICAgICAgICAgIHRyaWdnZXJFbGVtZW50OiBcIiNob21lX3NlY1wiLFxuICAgICAgICAgICAgdHJpZ2dlckhvb2s6IFwib25MZWF2ZVwiLFxuICAgICAgICAgICAgZHVyYXRpb246IHQsXG4gICAgICAgICAgICBvZmZzZXQ6IHMqMC41LFxuICAgICAgICAgICAgcmV2ZXJzZTogITBcbiAgICAgICAgfSkuc2V0Q2xhc3NUb2dnbGUobiwgYSkub24oXCJsZWF2ZVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAkKFwiLm5hdmJhclwiKS5hZGRDbGFzcyhcIm5hdi1saWdodGVuXCIpLCAkKFwiI2Zvb3RlclwiKS5hZGRDbGFzcyhcIm5hdi1saWdodGVuXCIpLCBcImRlc2t0b3BcIiA9PSB0aGlzLmRldmljZSAmJiBUd2Vlbk1heC5mcm9tVG8oJChcIi5uYXZiYXItYnJhbmRcIiksIC41LCB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgICAgICB4OiAwXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgICAgICB4OiAtMjUsXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIzLmVhc2VPdXRcbiAgICAgICAgICAgIH0pLFR3ZWVuTWF4LmZyb21UbygkKFwiI25hdi1vdmVybGF5XCIpLCAwLCB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgICAgICB9KVxuICAgICAgICB9LmJpbmQodGhpcykpLm9uKFwiZW50ZXJcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgJChcIi5uYXZiYXJcIikucmVtb3ZlQ2xhc3MoXCJuYXYtbGlnaHRlblwiKSwgJChcIiNmb290ZXJcIikucmVtb3ZlQ2xhc3MoXCJuYXYtbGlnaHRlblwiKSwgXCJkZXNrdG9wXCIgPT0gdGhpcy5kZXZpY2UgJiYgVHdlZW5NYXguZnJvbVRvKCQoXCIubmF2YmFyLWJyYW5kXCIpLCAuNSwge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICAgICAgeDogLTI1XG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgICAgICBkZWxheTogLjUsXG4gICAgICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjMuZWFzZU91dFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBUd2Vlbk1heC5mcm9tVG8oJChcIiNuYXYtb3ZlcmxheVwiKSwgMCwge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgIFxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjMuZWFzZU91dFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfS5iaW5kKHRoaXMpKS5hZGRUbyh0aGlzLmNvbnRyb2xsZXIpO1xuICAgICAgICBlLmluZGljYXRvciA9IG8sIGUuY2ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvKS5jbGllbnRIZWlnaHQsIGUuaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvKSwgZS5pbmRleCA9IGksIHRoaXMubmF2U2NlbmVzLnB1c2goZSlcbiAgICB9LFxuICAgIG5hdmlnYXRlT25DbGljazogZnVuY3Rpb24oZSkge1xuICAgICAgICBcImRlc2t0b3BcIiAhPT0gdGhpcy5kZXZpY2UgJiYgJChcIi5uYXZiYXItdG9nZ2xlXCIpLmNsaWNrKCksIHRoaXMuc2Nyb2xsVG8gPSAkKGUuY3VycmVudFRhcmdldCkuYXR0cihcImlkXCIpLCB0aGlzLnNjcm9sbFRvID0gdGhpcy5zZWN0aW9uTmFtZXMuaW5kZXhPZih0aGlzLnNjcm9sbFRvLnN1YnN0cmluZyg0KSksIHRoaXMubmF2aWdhdGVUbyh0aGlzLnNjcm9sbFRvKVxuICAgICAgICAgICBcbiAgICB9LFxuICAgIG5hdmlnYXRlVG86IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZm9yICh0aGlzLnNjcm9sbFBvcyA9IDAsIGkgPSAwOyBpIDwgdGhpcy5zY3JvbGxUbzsgaSsrKSB0aGlzLnNjcm9sbFBvcyA9IHRoaXMuc2Nyb2xsUG9zICsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5zZWN0aW9uc1tpXSkuY2xpZW50SGVpZ2h0O1xuICAgICAgICBcIm1vYmlsZVwiICE9PSBhcHAuZGV2aWNlICYmICh3aW5kb3cubG9jYXRpb24uaGFzaCA9IHRoaXMuc2VjdGlvbk5hbWVzW2ldKSwgXCJkZXNrdG9wXCIgPT0gdGhpcy5kZXZpY2UgPyBlIDwgdGhpcy5jdXJTZWN0aW9uID8gKFR3ZWVuTWF4LnNldCgkKFwiI25hdi1sb2NrXCIpLCB7XG4gICAgICAgICAgICBcInotaW5kZXhcIjogXCIxMVwiXG4gICAgICAgIH0pLCBUd2Vlbk1heC5mcm9tVG8oJChcIiNuYXYtbWFza1wiKSwgLjc1LCB7XG4gICAgICAgICAgICBjbGlwOiBcInJlY3QoMHB4LCBcIiArIHdpbmRvdy5pbm5lcldpZHRoICsgXCJweCwgMHB4LCAwcHgpXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgY2xpcDogXCJyZWN0KDBweCwgXCIgKyB3aW5kb3cuaW5uZXJXaWR0aCArIFwicHgsIFwiICsgd2luZG93LmlubmVySGVpZ2h0ICsgXCJweCwgMHB4KVwiLFxuICAgICAgICAgICAgZWFzZTogUG93ZXIzLmVhc2VJbk91dCxcbiAgICAgICAgICAgIG9uQ29tcGxldGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQoXCJib2R5XCIpLnNjcm9sbFRvcCh0aGlzLnNjcm9sbFBvcyksIFR3ZWVuTWF4LmZyb21UbygkKFwiI25hdi1tYXNrXCIpLCAxLCB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMS5lYXNlT3V0LFxuICAgICAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW5NYXguc2V0KCQoXCIjbmF2LW1hc2tcIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGlwOiBcInJlY3QoMHB4LCBcIiArIHdpbmRvdy5pbm5lcldpZHRoICsgXCJweCwgMHB4LCAwcHgpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgICAgICAgICAgICAgfSksIFR3ZWVuTWF4LnNldCgkKFwiI25hdi1sb2NrXCIpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ6LWluZGV4XCI6IFwiMVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICB9KSkgOiBlID4gdGhpcy5jdXJTZWN0aW9uID8gKFR3ZWVuTWF4LnNldCgkKFwiI25hdi1sb2NrXCIpLCB7XG4gICAgICAgICAgICBcInotaW5kZXhcIjogXCIxMVwiXG4gICAgICAgIH0pLCBUd2Vlbk1heC5mcm9tVG8oJChcIiNuYXYtbWFza1wiKSwgLjc1LCB7XG4gICAgICAgICAgICBjbGlwOiBcInJlY3QoXCIgKyB3aW5kb3cuaW5uZXJIZWlnaHQgKyBcInB4LCBcIiArIHdpbmRvdy5pbm5lcldpZHRoICsgXCJweCwgXCIgKyB3aW5kb3cuaW5uZXJIZWlnaHQgKyBcInB4LCAwcHgpXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgY2xpcDogXCJyZWN0KDBweCwgXCIgKyB3aW5kb3cuaW5uZXJXaWR0aCArIFwicHgsIFwiICsgd2luZG93LmlubmVySGVpZ2h0ICsgXCJweCwgMHB4KVwiLFxuICAgICAgICAgICAgZWFzZTogUG93ZXIzLmVhc2VJbk91dCxcbiAgICAgICAgICAgIG9uQ29tcGxldGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQoXCJib2R5XCIpLnNjcm9sbFRvcCh0aGlzLnNjcm9sbFBvcyksIFR3ZWVuTWF4LmZyb21UbygkKFwiI25hdi1tYXNrXCIpLCAxLCB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMS5lYXNlT3V0LFxuICAgICAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuTWF4LnNldCgkKFwiI25hdi1tYXNrXCIpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpcDogXCJyZWN0KDBweCwgXCIgKyB3aW5kb3cuaW5uZXJXaWR0aCArIFwicHgsIDBweCwgMHB4KVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBUd2Vlbk1heC5zZXQoJChcIiNuYXYtbG9ja1wiKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiei1pbmRleFwiOiBcIjFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgfSkpIDogZSA9PT0gdGhpcy5jdXJTZWN0aW9uIDogJChcImJvZHlcIikuc2Nyb2xsVG9wKHRoaXMuc2Nyb2xsUG9zKVxuICAgIH0sXG4gICAgZ2V0VHdlZW46IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgcmV0dXJuIFR3ZWVuTWF4LmZyb21Ubyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlKSwgMSwge1xuICAgICAgICAgICAgeTogXCIwcHhcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB5OiAtMSAqIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGUpLmNsaWVudEhlaWdodCArIFwicHhcIixcbiAgICAgICAgICAgICByb3RhdGlvbjowLjAwMSxcbiAgICAgICAgICAgIGZvcmNlM0Q6IHRydWUsXG4gICAgICAgICAgICBhdXRvUm91bmQ6ICExLFxuICAgICAgICAgICAgZWFzZTogUG93ZXIwLmVhc2VOb25lXG4gICAgICAgIH0pXG4gICAgfSxcbiAgICBnZXRPZmZzZXQ6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIHQgPSAwO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZTsgaSsrKSB0ICs9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuc2VjdGlvbnNbaV0pLmNsaWVudEhlaWdodDtcbiAgICAgICAgcmV0dXJuIHRcbiAgICB9LFxuICAgIHJlc2l6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuc2V0Ym9keUhlaWdodCgpXG4gICAgICAgIGlmICghd2luZG93LnNjcmVlblRvcCAmJiAhd2luZG93LnNjcmVlblkpIHtcbiAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG59XG5cbiAgICB9LFxuICAgIHVwZGF0ZUZpeGVkVmFsdWVzOiBmdW5jdGlvbigpIHtcblxuICAgICAgICB0aGlzLnNjZW5lcy5mb3JFYWNoKGZ1bmN0aW9uKGUsIHQpIHtcbiAgICAgICAgICAgIHZhciBpID0gdGhpcy5nZXRUd2VlbihlLmluZGljYXRvcik7XG4gICAgICAgICAgICBpLnByb2dyZXNzKDApLCBlLnNldFR3ZWVuKGkpLCBlLm9mZnNldCh0aGlzLmdldE9mZnNldChlLmluZGV4KSksIGUuZHVyYXRpb24oZS5pZC5jbGllbnRIZWlnaHQpLCBlLnJlZnJlc2goKSwgZS51cGRhdGUoITApXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAgIHZhciBlID0gbmV3IFRpbWVsaW5lTWF4O1xuICAgICAgICBlLnRvKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Rvcnlfc2VjXCIpLCAxLCB7XG4gICAgICAgICAgICB5OiAtMSAqIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Rvcnlfc2VjXCIpLmNsaWVudEhlaWdodCArIFwicHhcIixcbiAgICAgICAgICAgIG9uVXBkYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoZXIuZGlzcGF0Y2goXCJTVE9SWV9TQ1JPTExfRVZFTlRcIiwgcGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdG9yeV9zZWNcIikuc3R5bGUueSkpXG5cbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSxcbiAgICAgICAgICAgICByb3RhdGlvbjowLjAwMSxcbiAgICAgICAgICAgIGZvcmNlM0Q6IHRydWUsXG4gICAgICAgICAgICBhdXRvUm91bmQ6ICExLFxuICAgICAgICAgICAgZWFzZTogUG93ZXIwLmVhc2VOb25lXG4gICAgICAgIH0pLCB0aGlzLnNjZW5lc1tpXS5zZXRUd2VlbihlKSwgdGhpcy5zY2VuZXNbaV0ucmVmcmVzaCgpLCB0aGlzLnNjZW5lc1tpXS51cGRhdGUoITApLCB0aGlzLm5hdlNjZW5lcy5mb3JFYWNoKGZ1bmN0aW9uKGUsIHQpIHtcbiAgICAgICAgICAgIGUub2Zmc2V0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuc2VjdGlvbnNbMF0pLmNsaWVudEhlaWdodCksIGUuZHVyYXRpb24oJCh3aW5kb3cpLmhlaWdodCgpIC0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5zZWN0aW9uc1swXSkuY2xpZW50SGVpZ2h0KSwgZS5yZWZyZXNoKCksIGUudXBkYXRlKCEwKVxuICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgfVxufSwgZm9vdGVyVmlldyA9IGZ1bmN0aW9uKGUpIHtcbiAgICB0aGlzLmRpc3BhdGNoZXIgPSB2b2lkIDAgIT09IGUgPyBlIDogbmV3IERpc3BhdGNoZXIsIHRoaXMuZGV2aWNlID0gRGV0ZWN0aXpyLmRldmljZS50eXBlXG59LCBmb290ZXJWaWV3LnByb3RvdHlwZSA9IHtcbiAgICBjb25zdHJ1Y3RvcjogZm9vdGVyVmlldyxcbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5iaW5kRXZlbnRzKClcbiAgICB9LFxuICAgIHBvcHVsYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGRhdGEuZm9vdGVyLmJpbGxpbmdCbG9jay5sZW5ndGg7IGkrKykgJChcIi5mb290ZXJfYmlsbGluZ2Jsb2NrX2NvbnRhaW5lclwiKS5hcHBlbmQoJzxpIGNsYXNzPVwiZm9vdGVyX2JpbGxpbmdibG9jayBhbS1pY29uICcgKyBkYXRhLmZvb3Rlci5iaWxsaW5nQmxvY2tbaV0gKyAnXCI+PC9pPicpO1xuICAgICAgICBmb3IgKCQoXCIjZm9vdGVyX2xvZ29zXCIpLmFwcGVuZCgnPHA+JyArIGRhdGEuZm9vdGVyLmZvb3RlclRleHQgKyAnPC9wPicpLCBpID0gMDsgaSA8IGRhdGEuZm9vdGVyLmZvb3RlckxpbmtzLmxlbmd0aDsgaSsrKSBkYXRhLmZvb3Rlci5mb290ZXJMaW5rc1tpXS5oYXNPd25Qcm9wZXJ0eShcImxpbmtcIikgPyAkKFwiI2Zvb3Rlcl9saW5rc1wiKS5hcHBlbmQoJzxsaT48YSBocmVmPVwiJyArIGRhdGEuZm9vdGVyLmZvb3RlckxpbmtzW2ldLmxpbmsgKyAnXCIgdGFyZ2V0PVwiX2JsYW5rXCI+JyArIGRhdGEuZm9vdGVyLmZvb3RlckxpbmtzW2ldLmxhYmVsICsgXCI8L2E+PC9saT5cIikgOiAkKFwiI2Zvb3Rlcl9saW5rc1wiKS5hcHBlbmQoXCI8bGk+XCIgKyBkYXRhLmZvb3Rlci5mb290ZXJMaW5rc1tpXS5sYWJlbCArIFwiPC9saT5cIilcbiAgICB9LFxuICAgIGJpbmRFdmVudHM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKFwiI2J0bl9zb3VuZFwiKS5tb3VzZWVudGVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgVHdlZW5NYXgudG8oJCh0aGlzKS5maW5kKFwiLmJ0bl9mb290ZXJfaW5uZXJcIiksIC4yNSwge1xuICAgICAgICAgICAgICAgIGJvcmRlcjogXCIxcHggc29saWQgcmdiYSgxMTYsIDE0MCwgMTMyLCAxKVwiLFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KS5tb3VzZWxlYXZlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgVHdlZW5NYXgudG8oJCh0aGlzKS5maW5kKFwiLmJ0bl9mb290ZXJfaW5uZXJcIiksIC4yNSwge1xuICAgICAgICAgICAgICAgIGJvcmRlcjogXCIxcHggc29saWQgcmdiYSgxMTYsIDE0MCwgMTMyLCAwLjUpXCIsXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIzLmVhc2VPdXRcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pLCAkKFwiI2J0bl9sZWdhbFwiKS5tb3VzZWVudGVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgVHdlZW5NYXgudG8oJCh0aGlzKS5maW5kKFwiLmJ0bl9mb290ZXJfaW5uZXJcIiksIC4yNSwge1xuICAgICAgICAgICAgICAgIGJvcmRlcjogXCIxcHggc29saWQgcmdiYSgxMTYsIDE0MCwgMTMyLCAxKVwiLFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgICAgICB9KSwgVHdlZW5NYXguZnJvbVRvKCQodGhpcykuZmluZChcInBcIiksIC4yLCB7XG4gICAgICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgeTogNixcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgICAgICB9KSwgVHdlZW5NYXguZnJvbVRvKCQodGhpcykuZmluZChcInBcIiksIC4yLCB7XG4gICAgICAgICAgICAgICAgeTogLTYsXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgICAgICBkZWxheTogLjIsXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIzLmVhc2VPdXRcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pLm1vdXNlbGVhdmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBUd2Vlbk1heC50bygkKHRoaXMpLmZpbmQoXCIuYnRuX2Zvb3Rlcl9pbm5lclwiKSwgLjI1LCB7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiBcIjFweCBzb2xpZCByZ2JhKDExNiwgMTQwLCAxMzIsIDAuNSlcIixcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjMuZWFzZU91dFxuICAgICAgICAgICAgfSksIFR3ZWVuTWF4LmZyb21UbygkKHRoaXMpLmZpbmQoXCJwXCIpLCAuMiwge1xuICAgICAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHk6IC02LFxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIzLmVhc2VPdXRcbiAgICAgICAgICAgIH0pLCBUd2Vlbk1heC5mcm9tVG8oJCh0aGlzKS5maW5kKFwicFwiKSwgLjIsIHtcbiAgICAgICAgICAgICAgICB5OiA2LFxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICAgICAgZGVsYXk6IC4yLFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KSwgJChcIiNmb290ZXJfY2xvc2VcIikubW91c2VlbnRlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIFR3ZWVuTWF4LnNldCgkKHRoaXMpLmZpbmQoXCIuY2xvc2Utb3V0ZXJcIiksIHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46IFwiNTAlIDUwJVwiXG4gICAgICAgICAgICB9KSwgVHdlZW5NYXguc2V0KCQodGhpcykuZmluZChcIi5jbG9zZS1pbm5lclwiKSwge1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybU9yaWdpbjogXCI1MCUgNTAlXCJcbiAgICAgICAgICAgIH0pLCBUd2Vlbk1heC5zZXQoJCh0aGlzKS5maW5kKFwiLmNsb3NlLWltZ1wiKSwge1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybU9yaWdpbjogXCI1MCUgNTAlXCJcbiAgICAgICAgICAgIH0pLCBUd2Vlbk1heC50bygkKHRoaXMpLmZpbmQoXCIuY2xvc2Utb3V0ZXJcIiksIC4yNSwge1xuICAgICAgICAgICAgICAgIHNjYWxlOiAxLjIsXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIzLmVhc2VPdXRcbiAgICAgICAgICAgIH0pLCBUd2Vlbk1heC50bygkKHRoaXMpLmZpbmQoXCIuY2xvc2UtaW5uZXJcIiksIC4yNSwge1xuICAgICAgICAgICAgICAgIHNjYWxlOiAxLjE1LFxuICAgICAgICAgICAgICAgIGJvcmRlcjogXCIxcHggc29saWQgcmdiYSgyNTUsIDI1NCwgMjM3LCAwLjc1KVwiLFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgICAgICB9KSwgVHdlZW5NYXgudG8oJCh0aGlzKS5maW5kKFwiLmNsb3NlLWltZ1wiKSwgLjQsIHtcbiAgICAgICAgICAgICAgICByb3RhdGlvbjogOTAsXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIzLmVhc2VPdXRcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pLm1vdXNlbGVhdmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBUd2Vlbk1heC50bygkKHRoaXMpLmZpbmQoXCIuY2xvc2Utb3V0ZXJcIiksIC4yNSwge1xuICAgICAgICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgICAgICB9KSwgVHdlZW5NYXgudG8oJCh0aGlzKS5maW5kKFwiLmNsb3NlLWlubmVyXCIpLCAuMjUsIHtcbiAgICAgICAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICAgICAgICBib3JkZXI6IFwiMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTQsIDIzNywgMC4yKVwiLFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgICAgICB9KSwgVHdlZW5NYXgudG8oJCh0aGlzKS5maW5kKFwiLmNsb3NlLWltZ1wiKSwgLjQsIHtcbiAgICAgICAgICAgICAgICByb3RhdGlvbjogMCxcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjMuZWFzZU91dFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSksICQoXCIjYnRuX2xlZ2FsXCIpLmNsaWNrKHRoaXMuZm9vdGVyRXhwYW5kLmJpbmQodGhpcykpLCAkKFwiI25hdl9sZWdhbFwiKS5jbGljayh0aGlzLmZvb3RlckV4cGFuZC5iaW5kKHRoaXMpKSwgJChcIiNmb290ZXJfY2xvc2VcIikuY2xpY2sodGhpcy5mb290ZXJDb2xsYXBzZS5iaW5kKHRoaXMpKSwgdGhpcy5jb21wbGV0ZUV2ZW50ID0gdGhpcy5kaXNwYXRjaGVyLmFkZEV2ZW50bGlzdGVuZXIoXCJBTV9DT01QTEVURV9HXCIsIHRoaXMucG9wdWxhdGUuYmluZCh0aGlzKSksICQoXCIjZm9vdGVyLW92ZXJsYXlcIikubW91c2VsZWF2ZSh0aGlzLmZvb3RlckNvbGxhcHNlLmJpbmQodGhpcykpLCAkKFwiI2J0bl9zb3VuZFwiKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoXCIuYmFyXCIpLnRvZ2dsZUNsYXNzKFwiYmFyT25cIilcbiAgICAgICAgfSlcbiAgICB9LFxuICAgIGZvb3RlckV4cGFuZDogZnVuY3Rpb24oZSkge1xuICAgICAgICBcIm1vYmlsZVwiID09IHRoaXMuZGV2aWNlID8gKCQoXCIubmF2YmFyLXRvZ2dsZVwiKS5jbGljaygpLCAkKFwiI2Zvb3Rlci1vdmVybGF5XCIpLmhhc0NsYXNzKFwibW9iaWxlX2Zvb3Rlcl9leHBhbmRlZFwiKSA/IHRoaXMuZm9vdGVyQ29sbGFwc2UoKSA6ICgkKFwiI2Zvb3Rlci1vdmVybGF5XCIpLnJlbW92ZUNsYXNzKFwibW9iaWxlX2Zvb3Rlcl9jb2xsYXBzZWRcIiksICQoXCIjZm9vdGVyLW92ZXJsYXlcIikuYWRkQ2xhc3MoXCJtb2JpbGVfZm9vdGVyX2V4cGFuZGVkXCIpKSkgOiAkKFwiI2Zvb3Rlci1vdmVybGF5XCIpLmhhc0NsYXNzKFwiZm9vdGVyX2V4cGFuZGVkXCIpID8gdGhpcy5mb290ZXJDb2xsYXBzZSgpIDogKCQoXCIjZm9vdGVyLW92ZXJsYXlcIikucmVtb3ZlQ2xhc3MoXCJmb290ZXJfY29sbGFwc2VkXCIpLCAkKFwiI2Zvb3Rlci1vdmVybGF5XCIpLmFkZENsYXNzKFwiZm9vdGVyX2V4cGFuZGVkXCIpKVxuICAgIH0sXG4gICAgZm9vdGVyQ29sbGFwc2U6IGZ1bmN0aW9uKCkge1xuICAgICAgICBcIm1vYmlsZVwiID09IHRoaXMuZGV2aWNlID8gJChcIiNmb290ZXItb3ZlcmxheVwiKS5oYXNDbGFzcyhcIm1vYmlsZV9mb290ZXJfZXhwYW5kZWRcIikgJiYgJChcIiNmb290ZXItb3ZlcmxheVwiKS5yZW1vdmVDbGFzcyhcIm1vYmlsZV9mb290ZXJfZXhwYW5kZWRcIikuYWRkQ2xhc3MoXCJtb2JpbGVfZm9vdGVyX2NvbGxhcHNlZFwiKSA6ICQoXCIjZm9vdGVyLW92ZXJsYXlcIikuaGFzQ2xhc3MoXCJmb290ZXJfZXhwYW5kZWRcIikgJiYgJChcIiNmb290ZXItb3ZlcmxheVwiKS5yZW1vdmVDbGFzcyhcImZvb3Rlcl9leHBhbmRlZFwiKS5hZGRDbGFzcyhcImZvb3Rlcl9jb2xsYXBzZWRcIilcbiAgICB9XG59LCAgc3RvcnlWaWV3ID0gZnVuY3Rpb24oZSkge1xuICAgIHRoaXMuZGlzcGF0Y2hlciA9IHZvaWQgMCAhPT0gZSA/IGUgOiBuZXcgRGlzcGF0Y2hlciwgdGhpcy5kZXZpY2UgPSBEZXRlY3RpenIuZGV2aWNlLnR5cGUsIHRoaXMuY29udHJvbGxlciA9IG5ldyBTY3JvbGxNYWdpYy5Db250cm9sbGVyLCB0aGlzLnNjZW5lcyA9IFtdXG59LCBzdG9yeVZpZXcucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiBzdG9yeVZpZXcsXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuYmluZEV2ZW50cygpXG4gICAgfSxcbiAgICBiaW5kRXZlbnRzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5jb21wbGV0ZUV2ZW50ID0gdGhpcy5kaXNwYXRjaGVyLmFkZEV2ZW50bGlzdGVuZXIoXCJBTV9DT01QTEVURV9HXCIsIHRoaXMucG9wdWxhdGUuYmluZCh0aGlzKSksIHRoaXMuc2Nyb2xsVXBkYXRlID0gdGhpcy5kaXNwYXRjaGVyLmFkZEV2ZW50bGlzdGVuZXIoXCJTVE9SWV9TQ1JPTExfRVZFTlRcIiwgdGhpcy51cGRhdGVCaW5kLmJpbmQodGhpcykpLCBcImRlc2t0b3BcIiA9PSB0aGlzLmRldmljZSAmJiAkKHdpbmRvdykucmVzaXplKHRoaXMudXBkYXRlRml4ZWRWYWx1ZXMuYmluZCh0aGlzKSlcbiAgICB9LFxuICAgIHVwZGF0ZUJpbmQ6IGZ1bmN0aW9uKGUsIHQpIHtcblxuICAgICAgIFxuICAgICBcbiAgICAgICAgXG4gICAgICAgVHdlZW5NYXguc2V0KFwiLnMxX3RleHQxQlwiLCB7XG4gICAgICAgICAgICB5OiBcImNhbGMoIDUwJSArIFwiICsgTWF0aC5hYnModCkgKyBcInB4KVwiXG4gICAgICAgIH0pLCBUd2Vlbk1heC5zZXQoXCIjczVfdGV4dF9hXCIsIHtcbiAgICAgICAgICAgIFwibWFyZ2luLXRvcFwiOiBcImNhbGMoXCIgKyBNYXRoLmFicyh0KSArIFwicHggLSA1MjUlKVwiXG4gICAgICAgIH0pXG4gICAgfSxcbiAgICBwb3B1bGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKFwiI3N0b3J5MVwiKS5jc3MoXCJiYWNrZ3JvdW5kLWltYWdlXCIsIFwidXJsKCdcIiArIGFwcC5wcmVsb2FkZXIuZ2V0QXNzZXQoXCJzdG9yeTFiZ1wiKS5zcmMgKyBcIicpXCIpLFxuICAgICAgICAgICAgJChcIiNzMV9mZ1wiKS5hdHRyKFwic3JjXCIsIGFwcC5wcmVsb2FkZXIuZ2V0QXNzZXQoXCJzdG9yeTFmZ1wiKS5zcmMpLFxuICAgICAgICAgICAgJChcIiNzMV9jbG91ZDFcIikuYXR0cihcInNyY1wiLCBhcHAucHJlbG9hZGVyLmdldEFzc2V0KFwic3RvcnkxY2xvdWQxXCIpLnNyYyksXG4gICAgICAgICAgICAkKFwiI3MxX2Nsb3VkMlwiKS5hdHRyKFwic3JjXCIsIGFwcC5wcmVsb2FkZXIuZ2V0QXNzZXQoXCJzdG9yeTFjbG91ZDJcIikuc3JjKSxcbiAgICAgICAgICAgICQoXCIjczFfY2xvdWQzXCIpLmF0dHIoXCJzcmNcIiwgYXBwLnByZWxvYWRlci5nZXRBc3NldChcInN0b3J5MWNsb3VkM1wiKS5zcmMpLFxuICAgICAgICAgICAgJCgnI3MxX2ZnX3ZpZGVvJylbMF0ucGxheSgpLFxuICAgICAgICAgICAgJChcIiNzdG9yeTZcIikuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLCBcInVybCgnXCIgKyBhcHAucHJlbG9hZGVyLmdldEFzc2V0KFwic3Rvcnk2YmdcIikuc3JjICsgXCInKVwiKSxcbiAgICAgICAgICAgICQoXCIjc3Rvcnk3XCIpLnZpZGUoYXBwLnByZWxvYWRlci5nZXRBc3NldChcInN0b3J5N2JnXCIpLnNyYywge1xuICAgICAgICAgICAgcG9zdGVyVHlwZTogXCJqcGdcIixcbiAgICAgICAgICAgIGF1dG9wbGF5OiAhMCxcbiAgICAgICAgICAgIGxvb3A6ICEwXG4gICAgICAgIH0pLCBcIm1vYmlsZVwiICE9PSB0aGlzLmRldmljZSA/ICggJChcIiNzdG9yeTJcIikudmlkZShhcHAucHJlbG9hZGVyLmdldEFzc2V0KFwic3RvcnkzdmlkXCIpLnNyYywge1xuICAgICAgICAgICAgcG9zdGVyVHlwZTogXCJqcGdcIixcbiAgICAgICAgICAgIGF1dG9wbGF5OiAhMCxcbiAgICAgICAgICAgIGxvb3A6ICEwXG4gICAgICAgIH0pKSA6ICgkKFwiI3N0b3J5MlwiKSksXG4gICAgICAgICBcImRlc2t0b3BcIiA9PSB0aGlzLmRldmljZSA/IHR3ZWVuMV8xPVR3ZWVuTWF4LmZyb21UbyhcIi5zMV90ZXh0MVwiLCAuNSwge1xuICAgICAgICAgICAgb3BhY2l0eTogMSwgeTogMFxuICAgICAgICB9LHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICB5OiA1MCxcbiAgICAgICAgICAgIGVhc2U6IFBvd2VyNC5lYXNlT3V0LFxuICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgVHdlZW5NYXguc2V0KFwiLnMxX3RleHQxXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgKTp0d2VlbjFfMT1Ud2Vlbk1heC5mcm9tVG8oXCIuczFfdGV4dDFcIiwgLjUsIHtcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgIH0se1xuICAgICAgICAgICAgeTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdG9yeTFcIikuY2xpZW50SGVpZ2h0LXdpbmRvdy5pbm5lckhlaWdodCwgb3BhY2l0eTogMFxuICAgICAgICB9XG4gICAgICAgICksIFwiZGVza3RvcFwiID09IHRoaXMuZGV2aWNlID8gdHdlZW4xXzIgPSBUd2Vlbk1heC5mcm9tVG8oXCIuczFfdGV4dDFCXCIsIC41LCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgeTogMzAwLFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBvcGFjaXR5OiA0LFxuICAgICAgICAgICAgeTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJob21lX3NlY1wiKS5jbGllbnRIZWlnaHQtd2luZG93LmlubmVySGVpZ2h0IC8gMS43LFxuICAgICAgICAgICAgZWFzZTogUG93ZXIwLmVhc2VPdXQsXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIFR3ZWVuTWF4LnNldChcIi5zMV90ZXh0MUJcIiwge1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICBUd2Vlbk1heC5zZXQoXCIjYnRuX3Njcm9sbFwiLCB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICAgICAgICAgIHk6IDEwXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkgOiB0d2VlbjFfMiA9IFR3ZWVuTWF4LmZyb21UbyhcIi5zMV90ZXh0MUJcIiwgLjUsIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICB5OiAwXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICB5OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0b3J5MVwiKS5jbGllbnRIZWlnaHQtd2luZG93LmlubmVySGVpZ2h0LFxuICAgICAgICB9KSwgdHdlZW4xXzMgPSBUd2Vlbk1heC5mcm9tVG8oXCIjczFfdGV4dDJcIiwgLjUsIHtcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHk6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RvcnkxXCIpLmNsaWVudEhlaWdodCAtIHdpbmRvdy5pbm5lckhlaWdodCxcbiAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgfSksIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgfSwgdHdlZW4xXzUgPSBUd2Vlbk1heC5mcm9tVG8oXCIjYnRuX3Njcm9sbFwiLCAuNSwge1xuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgeTogKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RvcnkxXCIpLmNsaWVudEhlaWdodCAvIDYpIC0gd2luZG93LmlubmVySGVpZ2h0LFxuICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICB9KSwge1xuICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICB9LCAgdHdlZW4yXzEgPSBuZXcgVGltZWxpbmVNYXgsIHR3ZWVuMl8xLmZyb21UbyhcIiNzMl90ZXh0IGgxXCIsIC41LCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICBlYXNlOiBQb3dlcjQuZWFzZUluT3V0XG4gICAgICAgIH0sIFwiZ3JvdXBcIikuZnJvbVRvKFwiI3MyX3RleHQgZGl2XCIsIC41LCB7XG4gICAgICAgICAgICBzY2FsZTogMFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICAgIGRlbGF5OiAuMyxcbiAgICAgICAgICAgIGVhc2U6IFBvd2VyMi5lYXNlSW5PdXRcbiAgICAgICAgfSwgXCJncm91cFwiKS5mcm9tVG8oXCIjczJfdGV4dCBwXCIsIC41LCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICBkZWxheTogLjksXG4gICAgICAgICAgICBlYXNlOiBQb3dlcjIuZWFzZUluT3V0XG4gICAgICAgIH0sIFwiZ3JvdXBcIikuZnJvbVRvKFwiI3MyX3RleHQgaDJcIiwgLjUsIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIGRlbGF5OiAuOSxcbiAgICAgICAgICAgIGVhc2U6IFBvd2VyMi5lYXNlSW5PdXRcbiAgICAgICAgfSwgXCJncm91cFwiKSxcbiAgICAgICAgICAgICAgICAgICAgdHdlZW42XzEgPSBuZXcgVGltZWxpbmVNYXgsIHR3ZWVuNl8xLmZyb21UbyhcIiNzNl90ZXh0XCIsIC41LCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgIH0sIHtcblxuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIGVhc2U6IFBvd2VyMS5lYXNlSW5PdXRcbiAgICAgICAgfSwgXCJncm91cFwiKS5mcm9tVG8oXCIjczZfdGV4dCBkaXZcIiwgLjEsIHtcbiAgICAgICAgICAgIHNjYWxlOiAxXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHNjYWxlOiAwLFxuICAgICAgICAgICAgZGVsYXk6IC4zLFxuICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VJbk91dFxuICAgICAgICB9LCBcImdyb3VwXCIpLmZyb21UbyhcIiNzNl90ZXh0IHBcIiwgLjEsIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgfSwge1xuXG4gICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgZGVsYXk6IC42LFxuICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VJbk91dFxuICAgICAgICB9LCBcImdyb3VwXCIpLmZyb21UbyhcIiNzNl90ZXh0IGgyXCIsIC4xLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgIH0sIHtcblxuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIGRlbGF5OiAuNixcbiAgICAgICAgICAgIGVhc2U6IFBvd2VyMS5lYXNlSW5PdXQsXG4gICAgICAgIH0sIFwiZ3JvdXBcIiksICB0d2VlbjFfNCA9IG5ldyBUaW1lbGluZU1heCwgdHdlZW4xXzQuZnJvbVRvKFwiI3MxX3RleHRcIiwgLjUsIHtcbiAgICAgICAgICAgIHk6IDBcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgeTogLTEzMFxuICAgICAgICB9LCBcImdycDFcIikuZnJvbVRvKFwiI3MxX2Nsb3VkMVwiLCAuNSwge1xuICAgICAgICAgICAgeDogLjA1ICogd2luZG93LmlubmVyV2lkdGhcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgeDogLS4wNSAqIHdpbmRvdy5pbm5lcldpZHRoXG4gICAgICAgIH0sIFwiZ3JwMVwiKS5mcm9tVG8oXCIjczFfY2xvdWQyXCIsIC41LCB7XG4gICAgICAgICAgICB4OiAuMDIgKiB3aW5kb3cuaW5uZXJXaWR0aFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB4OiAtLjAyICogd2luZG93LmlubmVyV2lkdGhcbiAgICAgICAgfSwgXCJncnAxXCIpLmZyb21UbyhcIiNzMV9jbG91ZDNcIiwgLjUsIHtcbiAgICAgICAgICAgIHg6IDUwXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHg6IC01MFxuICAgICAgICB9LCBcImdycDFcIiksIHR3ZWVuNyA9IG5ldyBUaW1lbGluZU1heCwgdHdlZW43LmZyb21UbyhcIiNzN190ZXh0XCIsIC41LCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICBlYXNlOiBQb3dlcjQuZWFzZUluT3V0XG4gICAgICAgIH0pLmZyb21UbyhcIiNzN190ZXh0IGRpdlwiLCAuNSwge1xuICAgICAgICAgICAgc2NhbGU6IDBcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgICAgICBlYXNlOiBQb3dlcjIuZWFzZUluT3V0XG4gICAgICAgIH0pLmZyb21UbyhcIiNzN190ZXh0IGg0XCIsIC41LCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICBlYXNlOiBQb3dlcjIuZWFzZUluT3V0XG4gICAgICAgIH0pLmZyb21UbyhcIiNzN190ZXh0IHBcIiwgLjUsIHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIGVhc2U6IFBvd2VyMi5lYXNlSW5PdXRcbiAgICAgICAgfSksXG4gICAgICAgIHRoaXMuY3JlYXRlU2NlbmUoXCJzdG9yeTFfMVwiLCAxNTAsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RvcnkxXCIpLmNsaWVudEhlaWdodC13aW5kb3cuaW5uZXJIZWlnaHQsIHR3ZWVuMV8xLCBcInN0b3J5MVwiKSxcbiAgICAgICAgdGhpcy5jcmVhdGVTY2VuZShcInN0b3J5MV8yXCIsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RvcnkxXCIpLmNsaWVudEhlaWdodC80LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0b3J5MVwiKS5jbGllbnRIZWlnaHQtMS4yNSp3aW5kb3cuaW5uZXJIZWlnaHQsIHR3ZWVuMV8yLCBcInN0b3J5MVwiKSxcbiAgICAgICAgdGhpcy5jcmVhdGVTY2VuZShcInN0b3J5MV8zXCIsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RvcnkxXCIpLmNsaWVudEhlaWdodC8xLjUsIDIqZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzMV90ZXh0MlwiKS5jbGllbnRIZWlnaHQsIHR3ZWVuMV8zLCBcInN0b3J5MVwiKSxcbiAgICAgICAgdGhpcy5jcmVhdGVTY2VuZShcInN0b3J5MV80XCIsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RvcnkxXCIpLmNsaWVudEhlaWdodCAvIDIsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RvcnkxXCIpLmNsaWVudEhlaWdodCAtIDEuMjUgKiB3aW5kb3cuaW5uZXJIZWlnaHQsIHR3ZWVuMV80LCBcInN0b3J5MVwiKSxcbiAgICAgICAgdGhpcy5jcmVhdGVTY2VuZShcInN0b3J5MV81XCIsIDE1MCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdG9yeTFcIikuY2xpZW50SGVpZ2h0IC0gd2luZG93LmlubmVySGVpZ2h0LCB0d2VlbjFfNSwgXCJzdG9yeTFcIiksXG4gICAgICAgIHRoaXMuY3JlYXRlU2NlbmUoXCJzdG9yeTJfMVwiLCAtMSAqIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0b3J5MlwiKS5jbGllbnRIZWlnaHQgLyA0KSwgMCwgdHdlZW4yXzEsIFwic3RvcnkyXCIpLFxuICAgICAgICB0aGlzLmNyZWF0ZVNjZW5lKFwic3Rvcnk2XzFcIiwtNCAqIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0b3J5NlwiKS5jbGllbnRIZWlnaHQgLSAxLjI1KndpbmRvdy5pbm5lckhlaWdodCksIDAsIHR3ZWVuNl8xLCBcInN0b3J5NlwiKSwgXG4gICAgICAgIHRoaXMuY3JlYXRlU2NlbmUoXCJzdG9yeTdcIiwgLTEgKiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdG9yeTdcIikuY2xpZW50SGVpZ2h0IC8gMiksIDAsIHR3ZWVuNywgXCJzdG9yeTdcIiksXG4gICAgICAgIHRoaXMudXBkYXRlQmluZCgpXG4gICAgfSxcbiAgICBjcmVhdGVTY2VuZTogZnVuY3Rpb24oZSwgdCwgcywgbywgbikge1xuICAgICAgICB2YXIgZSA9IG5ldyBTY3JvbGxNYWdpYy5TY2VuZSh7XG4gICAgICAgICAgICB0cmlnZ2VyRWxlbWVudDogXCIjXCIgKyBuLFxuICAgICAgICAgICAgdHJpZ2dlckhvb2s6IFwib25MZWF2ZVwiLFxuICAgICAgICAgICAgb2Zmc2V0OiB0LFxuICAgICAgICAgICAgZHVyYXRpb246IHMsXG4gICAgICAgICAgICByZXZlcnNlOiAhMFxuICAgICAgICB9KS5zZXRUd2VlbihvKS5hZGRUbyh0aGlzLmNvbnRyb2xsZXIpO1xuICAgICAgICBlLmluZGljYXRvciA9IG4sIGUuY2ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChuKS5jbGllbnRIZWlnaHQsIGUuaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChuKSwgZS5pbmRleCA9IGksIHRoaXMuc2NlbmVzLnB1c2goZSlcbiAgICB9LFxuICAgIHVwZGF0ZUZpeGVkVmFsdWVzOiBmdW5jdGlvbigpIHtcbiAgICAgICBcbiAgICAgICAgICAgICAgICBmb3IoXG4gICAgICAgICAgICAgICAgICB0aGlzLnNjZW5lc1sxXS5kdXJhdGlvbihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0b3J5MVwiKS5jbGllbnRIZWlnaHQtMS4yNSp3aW5kb3cuaW5uZXJIZWlnaHQpLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjZW5lc1syXS5kdXJhdGlvbigyKmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiczFfdGV4dDJcIikuY2xpZW50SGVpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2VuZXNbM10ub2Zmc2V0KC0xICogKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RvcnkxXCIpLmNsaWVudEhlaWdodCApKSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2VuZXNbNF0ub2Zmc2V0KC0xICogKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Rvcnk2XCIpLmNsaWVudEhlaWdodC0xLjI1KndpbmRvdy5pbm5lckhlaWdodCkpLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjZW5lc1s0XS5kdXJhdGlvbihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInMxX3RleHQyXCIpLmNsaWVudEhlaWdodCksXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmVzWzVdLm9mZnNldCgtMC41KiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdG9yeTZcIikuY2xpZW50SGVpZ2h0ICkpLFxuICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2VuZXNbNl0ub2Zmc2V0KC0yICogKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Rvcnk2XCIpLmNsaWVudEhlaWdodC0xLjI1KndpbmRvdy5pbm5lckhlaWdodCkpLFxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmVzWzddLm9mZnNldCgtMSAqIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0b3J5N1wiKS5jbGllbnRIZWlnaHQgKSksIGkgPSAwOyBpIDwgdGhpcy5zY2VuZXMubGVuZ3RoOyBpKyspIHRoaXMuc2NlbmVzW2ldLnJlZnJlc2goKSwgdGhpcy5zY2VuZXNbaV0udXBkYXRlKCEwKVxuICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJpbmQoKTtcbiAgICB9XG59LCBjYXN0bmNyZXdWaWV3ID0gZnVuY3Rpb24oZSkge1xuICAgIHRoaXMuZGlzcGF0Y2hlciA9IHZvaWQgMCAhPT0gZSA/IGUgOiBuZXcgRGlzcGF0Y2hlciwgdGhpcy5kZXZpY2UgPSBEZXRlY3RpenIuZGV2aWNlLnR5cGUsIHRoaXMuY29udHJvbGxlciA9IG5ldyBTY3JvbGxNYWdpYy5Db250cm9sbGVyLCB0aGlzLmxhYmVsLCB0aGlzLnNwbGl0ID0gITAsIHRoaXMuc2VjdGlvbnMgPSBbXSwgdGhpcy5zY2VuZXMgPSBbXSwgdGhpcy5ib2R5UG9zID0gMFxufSwgY2FzdG5jcmV3Vmlldy5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IGNhc3RuY3Jld1ZpZXcsXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuYmluZEV2ZW50cygpXG4gICAgfSxcbiAgICBiaW5kRXZlbnRzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5jb21wbGV0ZUV2ZW50ID0gdGhpcy5kaXNwYXRjaGVyLmFkZEV2ZW50bGlzdGVuZXIoXCJBTV9DT01QTEVURV9HXCIsIHRoaXMucG9wdWxhdGUuYmluZCh0aGlzKSlcbiAgICB9LFxuICAgIHBvcHVsYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKFwiZGVza3RvcFwiID09PSB0aGlzLmRldmljZSB8fCBcInRhYmxldFwiID09PSB0aGlzLmRldmljZSlcbiAgICAgICAgICAgIGZvciAoJChcIiNjYXN0bmNyZXctaGVhZGVyXCIpLmh0bWwoJzxkaXYgY2xhc3M9XCJjb3ZlclwiPjxpbWcgc3JjPVwiJyArICAnXCIgY2xhc3M9XCJjb3ZlclwiIC8+PC9kaXY+JyksIGkgPSAwOyBpIDwgZGF0YS5jYXN0bmNyZXcubGlzdC5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICAgICAgJChcIiNjYXN0bmNyZXctbGlzdFwiKS5hcHBlbmQoJzxsaSBpZD1cImNuY18nICsgZGF0YS5jYXN0bmNyZXcubGlzdFtpXS5sYWJlbCArICdcIj48ZGl2IGNsYXNzPVwiY292ZXIgY25jX2NvdmVyXCI+PGltZyBzcmM9XCInICsgXG4gICAgICAgICAgICAgICAgICAgIGFwcC5wcmVsb2FkZXIuZ2V0QXNzZXQoZGF0YS5jYXN0bmNyZXcubGlzdFtpXS5kZXNrdG9wSW1hZ2UpLnNyYyArICdcIiBjbGFzcz1cImNvdmVyXCIgLz48L2Rpdj48ZGl2IGNsYXNzPVwiY25jX3RleHRfY29udGFpbmVyXCI+PGRpdiBjbGFzcz1cImNuY190ZXh0XCI+PGgxIGNsYXNzPVwiY25jX2FjdG9yXCI+JyArIFxuICAgICAgICAgICAgICAgICAgICBkYXRhLmNhc3RuY3Jldy5saXN0W2ldLm5hbWUgICsgXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY25jX3F1b3RlXCI+PGRpdj48ZGl2IGNsYXNzPVwiZGl2aWRlclwiPjwvZGl2PjxkaXYgY2xhc3M9XCJidG5fc2Nyb2xsXCI+PGRpdiBjbGFzcz1cImJ0bl9zY3JvbGxfb3V0ZXJcIj48ZGl2IGNsYXNzPVwiYnRuX3Njcm9sbF9taWRkbGVcIj48ZGl2IGNsYXNzPVwiYnRuX3Njcm9sbF9pbm5lclwiPjwvZGl2PjwvZGl2PjwvZGl2PjxoMSBjbGFzcz1cImJ0bl9zY3JvbGxfdGV4dFwiPjxwPmlzPC9wPjwvaDE+PC9kaXY+PGRpdiBjbGFzcz1cImRpdmlkZXJcIj48L2Rpdj48L2Rpdj48L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAgICAnPC9oMT48aDEgY2xhc3M9XCJjbmNfY2hhcmFjdGVyXCI+JyArIFxuICAgICAgICAgICAgICAgICAgICBkYXRhLmNhc3RuY3Jldy5saXN0W2ldLnJvbGUgKyAnPC9oMT4nICsgJzwvZGl2PjwvZGl2PjwvbGk+Jyk7XG4gICAgICAgIFxuICAgICAgICBlbHNlIGlmIChcIm1vYmlsZVwiID09PSB0aGlzLmRldmljZSlcbiAgICAgICAgICAgIFxuXG4gICAgICAgICQoXCIjY25jX2Nsb3NlXCIpLm1vdXNlZW50ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBUd2Vlbk1heC5zZXQoJCh0aGlzKS5maW5kKFwiLmNsb3NlLW91dGVyXCIpLCB7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiBcIjUwJSA1MCVcIlxuICAgICAgICAgICAgfSksIFR3ZWVuTWF4LnNldCgkKHRoaXMpLmZpbmQoXCIuY2xvc2UtaW5uZXJcIiksIHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46IFwiNTAlIDUwJVwiXG4gICAgICAgICAgICB9KSwgVHdlZW5NYXguc2V0KCQodGhpcykuZmluZChcIi5jbG9zZS1pbWdcIiksIHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46IFwiNTAlIDUwJVwiXG4gICAgICAgICAgICB9KSwgVHdlZW5NYXgudG8oJCh0aGlzKS5maW5kKFwiLmNsb3NlLW91dGVyXCIpLCAuMjUsIHtcbiAgICAgICAgICAgICAgICBzY2FsZTogMS4yLFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgICAgICB9KSwgVHdlZW5NYXgudG8oJCh0aGlzKS5maW5kKFwiLmNsb3NlLWlubmVyXCIpLCAuMjUsIHtcbiAgICAgICAgICAgICAgICBzY2FsZTogMS4xNSxcbiAgICAgICAgICAgICAgICBib3JkZXI6IFwiMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTQsIDIzNywgMC43NSlcIixcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjMuZWFzZU91dFxuICAgICAgICAgICAgfSksIFR3ZWVuTWF4LnRvKCQodGhpcykuZmluZChcIi5jbG9zZS1pbWdcIiksIC40LCB7XG4gICAgICAgICAgICAgICAgcm90YXRpb246IDkwLFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMy5lYXNlT3V0XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KS5tb3VzZWxlYXZlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgVHdlZW5NYXgudG8oJCh0aGlzKS5maW5kKFwiLmNsb3NlLW91dGVyXCIpLCAuMjUsIHtcbiAgICAgICAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjMuZWFzZU91dFxuICAgICAgICAgICAgfSksIFR3ZWVuTWF4LnRvKCQodGhpcykuZmluZChcIi5jbG9zZS1pbm5lclwiKSwgLjI1LCB7XG4gICAgICAgICAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgICAgICAgICAgYm9yZGVyOiBcIjFweCBzb2xpZCByZ2JhKDI1NSwgMjU0LCAyMzcsIDAuMilcIixcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjMuZWFzZU91dFxuICAgICAgICAgICAgfSksIFR3ZWVuTWF4LnRvKCQodGhpcykuZmluZChcIi5jbG9zZS1pbWdcIiksIC40LCB7XG4gICAgICAgICAgICAgICAgcm90YXRpb246IDAsXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIzLmVhc2VPdXRcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pLCAkKFwiLmNuY19idG5cIikuY2xpY2sodGhpcy5zaG93KSwgJChcIiNjbmNfY2xvc2VcIikuY2xpY2sodGhpcy5oaWRlKSwgJChcIi5idG5fc2Nyb2xsXCIpLm1vdXNlZW50ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBUd2Vlbk1heC50bygkKHRoaXMpLnBhcmVudHMoXCJsaVwiKS5maW5kKFwiLmNuY19jb3ZlclwiKSwgLjU1LCB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogLjUsXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIzLmVhc2VPdXRcbiAgICAgICAgICAgIH0pLCBUd2Vlbk1heC50bygkKHRoaXMpLmZpbmQoXCIuYnRuX3Njcm9sbF9vdXRlclwiKSwgLjM1LCB7XG4gICAgICAgICAgICAgICAgc2NhbGU6IDEuMSxcbiAgICAgICAgICAgICAgICBkZWxheTogLjA1LFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMi5lYXNlSW5PdXRcbiAgICAgICAgICAgIH0pLCBUd2Vlbk1heC50bygkKHRoaXMpLmZpbmQoXCIuYnRuX3Njcm9sbF9taWRkbGVcIiksIC4yNSwge1xuICAgICAgICAgICAgICAgIHNjYWxlOiAxLjA1LFxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IC45LFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMi5lYXNlSW5PdXRcbiAgICAgICAgICAgIH0pLCBUd2Vlbk1heC50bygkKHRoaXMpLmZpbmQoXCIuYnRuX3Njcm9sbF9pbm5lclwiKSwgLjI1LCB7XG4gICAgICAgICAgICAgICAgc2NhbGU6IDEuMSxcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjIuZWFzZUluT3V0XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KS5tb3VzZWxlYXZlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgVHdlZW5NYXgudG8oJCh0aGlzKS5wYXJlbnRzKFwibGlcIikuZmluZChcIi5jbmNfY292ZXJcIiksIC41NSwge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIzLmVhc2VPdXRcbiAgICAgICAgICAgIH0pLCBUd2Vlbk1heC50bygkKHRoaXMpLmZpbmQoXCIuYnRuX3Njcm9sbF9vdXRlclwiKSwgLjUsIHtcbiAgICAgICAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjIuZWFzZUluT3V0XG4gICAgICAgICAgICB9KSwgVHdlZW5NYXgudG8oJCh0aGlzKS5maW5kKFwiLmJ0bl9zY3JvbGxfbWlkZGxlXCIpLCAuMzUsIHtcbiAgICAgICAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAuNzUsXG4gICAgICAgICAgICAgICAgZGVsYXk6IC4xLFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMi5lYXNlSW5PdXRcbiAgICAgICAgICAgIH0pLCBUd2Vlbk1heC50bygkKHRoaXMpLmZpbmQoXCIjYnRuX3Njcm9sbF9pbm5lclwiKSwgLjM1LCB7XG4gICAgICAgICAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgICAgICAgICAgZGVsYXk6IC4xNSxcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjIuZWFzZUluT3V0XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KSwgdGhpcy5jcmVhdGVTY2VuZShcImNuY190b21jcnVpc2VcIiwgMiksIHRoaXMuY3JlYXRlU2NlbmUoXCJjbmNfZG9taGFsbGdsZWVzb25cIiwgMSksIHRoaXMuY3JlYXRlU2NlbmUoXCJjbmNfc2FyYWh3cmlnaHRcIiwgMSksIHRoaXMuY3JlYXRlU2NlbmUoXCJjbmNfcGFibG9lc2NvYmFyXCIsIDEpLCB0aGlzLmNyZWF0ZVNjZW5lKFwiY25jX2pvcmdlb2Nob2FcIiwgMSlcbiAgICB9LFxuICAgIGNyZWF0ZVNjZW5lOiBmdW5jdGlvbihlLCB0KSB7XG4gICAgICAgXG4gICAgfSxcbiAgICBzaG93OiBmdW5jdGlvbigpIHtcbiAgICBcblxuIFxuICAgIH0sXG4gICAgaGlkZTogZnVuY3Rpb24oKSB7XG5cbiAgICB9XG59LCBnYWxsZXJ5VmlldyA9IGZ1bmN0aW9uKGUpIHtcbiAgICB0aGlzLmRpc3BhdGNoZXIgPSB2b2lkIDAgIT09IGUgPyBlIDogbmV3IERpc3BhdGNoZXIsIHRoaXMuZGV2aWNlID0gRGV0ZWN0aXpyLmRldmljZS50eXBlXG59LCBnYWxsZXJ5Vmlldy5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IGdhbGxlcnlWaWV3LFxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmJpbmRFdmVudHMoKVxuICAgIH0sXG4gICAgcG9wdWxhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgXG4gICAgfSxcbiAgICBiaW5kRXZlbnRzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5jb21wbGV0ZUV2ZW50ID0gdGhpcy5kaXNwYXRjaGVyLmFkZEV2ZW50bGlzdGVuZXIoXCJBTV9DT01QTEVURV9HXCIsIHRoaXMucG9wdWxhdGUuYmluZCh0aGlzKSlcbiAgICB9XG59LCB2aWRlb3NWaWV3ID0gZnVuY3Rpb24oZSkge1xuICAgIHRoaXMuZGlzcGF0Y2hlciA9IHZvaWQgMCAhPT0gZSA/IGUgOiBuZXcgRGlzcGF0Y2hlciwgdGhpcy5kZXZpY2UgPSBEZXRlY3RpenIuZGV2aWNlLnR5cGVcbn0sIHZpZGVvc1ZpZXcucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiB2aWRlb3NWaWV3LFxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmJpbmRFdmVudHMoKVxuICAgIH0sXG4gICAgcG9wdWxhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoXCJtb2JpbGVcIiA9PSB0aGlzLmRldmljZSlcbiAgICAgICAgICAgIGZvciAoJChcIiN2aWRlb3NfYmcgaW1nXCIpLmF0dHIoXCJzcmNcIiwgXCJpbWcvdmlkZW9zX21vYmlsZV9iZy5qcGdcIiksIGkgPSAwOyBpIDwgZGF0YS52aWRlb3MubGlzdC5sZW5ndGg7IGkrKykgZGF0YS52aWRlb3MubGlzdFtpXS5zaG93ICYmICQoXCIjdmlkZW9zLWxpc3RcIikuYXBwZW5kKCc8bGkgY2xhc3M9XCJ2aWRlb19hY3RpdmVcIj48ZGl2IGNsYXNzPVwidmlkZW9fYm9yZGVyXCI+PC9kaXY+PGRpdiBjbGFzcz1cInZpZGVvX2xhYmVsXCI+PGgxPicgKyBkYXRhLnZpZGVvcy5saXN0W2ldLm5hbWUgKyAnPC9oMT48L2Rpdj48aW1nIGNsYXNzPVwidmlkZW9fYnRuX291dFwiIHNyYz1cImltZy9hcnJvd190cmFpbGVyX291dC5zdmdcIiAvPjxkaXYgY2xhc3M9XCJ2aWRlb19idG5fb3ZlclwiPjxpbWcgY2xhc3M9XCJ2aWRlb19hcnJvd1wiIHNyYz1cImltZy9hcnJvd190cmFpbGVyX292ZXIuc3ZnXCIgLz48L2Rpdj48aW1nIGNsYXNzPVwidmlkZW9fcG9zdGVyXCIgc3JjPVwiJyArIGRhdGEudmlkZW9zLmxpc3RbaV0ucG9zdGVyICsgJ1wiIC8+PC9saT4nKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGRhdGEudmlkZW9zLmxpc3QubGVuZ3RoOyBpKyspIGRhdGEudmlkZW9zLmxpc3RbaV0uc2hvdyA/ICQoXCIjdmlkZW9zLWxpc3RcIikuYXBwZW5kKCc8bGkgY2xhc3M9XCJ2aWRlb19hY3RpdmVcIj48ZGl2IGNsYXNzPVwidmlkZW9fYm9yZGVyXCI+PC9kaXY+PGRpdiBjbGFzcz1cInZpZGVvX2xhYmVsXCI+PGgxPicgKyBkYXRhLnZpZGVvcy5saXN0W2ldLm5hbWUgKyAnPC9oMT48L2Rpdj48aW1nIGNsYXNzPVwidmlkZW9fYnRuX291dFwiIHNyYz1cImltZy9hcnJvd190cmFpbGVyX291dC5zdmdcIiAvPjxkaXYgY2xhc3M9XCJ2aWRlb19idG5fb3ZlclwiPjxpbWcgY2xhc3M9XCJ2aWRlb19hcnJvd1wiIHNyYz1cImltZy9hcnJvd190cmFpbGVyX292ZXIuc3ZnXCIgLz48L2Rpdj48dmlkZW8gY2xhc3M9XCJ2aWRlb192aWRlb1wiIGxvb3AgbXV0ZWQgcG9zdGVyPVwiJyArIGRhdGEudmlkZW9zLmxpc3RbaV0ucG9zdGVyICsgJ1wiPjxzb3VyY2Ugc3JjPVwiJyArIGRhdGEudmlkZW9zLmxpc3RbaV0udmlkZW8gKyAnXCIgdHlwZT1cInZpZGVvL21wNFwiPjwvdmlkZW8+PC9saT4nKSA6ICQoXCIjdmlkZW9zLWxpc3RcIikuYXBwZW5kKCc8bGkgY2xhc3M9XCJ2aWRlb19oaWRkZW5cIj48ZGl2PjwvZGl2PjwvbGk+Jyk7XG4gICAgICAgIHRoaXMuYXR0YWNoRXZlbnRMaXN0ZW5lcnMoKVxuICAgIH0sXG4gICAgYmluZEV2ZW50czogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuY29tcGxldGVFdmVudCA9IHRoaXMuZGlzcGF0Y2hlci5hZGRFdmVudGxpc3RlbmVyKFwiQU1fQ09NUExFVEVfR1wiLCB0aGlzLnBvcHVsYXRlLmJpbmQodGhpcykpXG4gICAgfSxcbiAgICBhdHRhY2hFdmVudExpc3RlbmVyczogZnVuY3Rpb24oKSB7XG4gICAgICAgICQoXCIjdmlkZW9zLWxpc3QgbGlcIikubW91c2VlbnRlcihmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmhhc0NsYXNzKFwidmlkZW9faGlkZGVuXCIpID09PSAhMSAmJiAkKHRoaXMpLmZpbmQoXCIudmlkZW9fdmlkZW9cIikuZ2V0KDApLnBsYXkoKSwgVHdlZW5NYXguc2V0KCQodGhpcykuZmluZChcIi52aWRlb19idG5fb3ZlclwiKSwge1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybU9yaWduOiBcIjUwJSA1MCVcIlxuICAgICAgICAgICAgfSksIFR3ZWVuTWF4LnRvKCQodGhpcykuZmluZChcIi52aWRlb19ib3JkZXJcIiksIC4yNSwge1xuICAgICAgICAgICAgICAgIFwiYm9yZGVyLXdpZHRoXCI6IFwiOHB4XCIsXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXI0LmVhc2VPdXRcbiAgICAgICAgICAgIH0pLCBUd2Vlbk1heC50bygkKHRoaXMpLmZpbmQoXCIudmlkZW9fYnRuX292ZXJcIiksIC4xNSwge1xuICAgICAgICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyNC5lYXNlT3V0XG4gICAgICAgICAgICB9KSwgVHdlZW5NYXgudG8oJCh0aGlzKS5maW5kKFwiLnZpZGVvX2J0bl9vdmVyIGltZ1wiKSwgLjE1LCB7XG4gICAgICAgICAgICAgICAgeDogMzQsXG4gICAgICAgICAgICAgICAgZGVsYXk6IC4xNSxcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjQuZWFzZU91dFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSkubW91c2VsZWF2ZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQodGhpcykuaGFzQ2xhc3MoXCJ2aWRlb19oaWRkZW5cIikgPT09ICExICYmICQodGhpcykuZmluZChcIi52aWRlb192aWRlb1wiKS5nZXQoMCkucGF1c2UoKSwgVHdlZW5NYXgudG8oJCh0aGlzKS5maW5kKFwiLnZpZGVvX2JvcmRlclwiKSwgLjI1LCB7XG4gICAgICAgICAgICAgICAgXCJib3JkZXItd2lkdGhcIjogXCI1cHhcIixcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjQuZWFzZU91dFxuICAgICAgICAgICAgfSksIFR3ZWVuTWF4LnRvKCQodGhpcykuZmluZChcIi52aWRlb19idG5fb3ZlciBpbWdcIiksIC4xNSwge1xuICAgICAgICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXI0LmVhc2VPdXRcbiAgICAgICAgICAgIH0pLCBUd2Vlbk1heC50bygkKHRoaXMpLmZpbmQoXCIudmlkZW9fYnRuX292ZXJcIiksIC4xNSwge1xuICAgICAgICAgICAgICAgIHNjYWxlOiAwLFxuICAgICAgICAgICAgICAgIGRlbGF5OiAuMTUsXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXI0LmVhc2VPdXRcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pLCAkKFwiI3ZpZGVvcy1saXN0IGxpLnZpZGVvX2FjdGl2ZVwiKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb3MtbGlzdFwiKS5jaGlsZHJlbiksXG4gICAgICAgICAgICAgICAgdCA9IGUuaW5kZXhPZih0aGlzKTtcbiAgICAgICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coMCksIGFwcC5kaXNwYXRjaGVyLmRpc3BhdGNoKFwiQ1VFX1BMQVlMSVNUX0lOREVYXCIsIDApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKDEpLCBhcHAuZGlzcGF0Y2hlci5kaXNwYXRjaChcIkNVRV9QTEFZTElTVF9JTkRFWFwiLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFwcC5kaXNwYXRjaGVyLmRpc3BhdGNoKFwiU0hPV19UUkFJTEVSXCIpXG4gICAgICAgIH0pXG4gICAgfVxufSwgdGlja2V0c1ZpZXcgPSBmdW5jdGlvbihlKSB7XG4gICAgdGhpcy5kaXNwYXRjaGVyID0gdm9pZCAwICE9PSBlID8gZSA6IG5ldyBEaXNwYXRjaGVyLCB0aGlzLmRldmljZSA9IERldGVjdGl6ci5kZXZpY2UudHlwZVxufSwgdGlja2V0c1ZpZXcucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiB0aWNrZXRzVmlldyxcbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5iaW5kRXZlbnRzKClcbiAgICB9LFxuICAgIHBvcHVsYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgIFxuICAgIH0sXG4gICAgYmluZEV2ZW50czogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuY29tcGxldGVFdmVudCA9IHRoaXMuZGlzcGF0Y2hlci5hZGRFdmVudGxpc3RlbmVyKFwiQU1fQ09NUExFVEVfR1wiLCB0aGlzLnBvcHVsYXRlLmJpbmQodGhpcykpXG4gICAgfVxufTsiXSwiZmlsZSI6InZpZXdzLm1pbi5qcyJ9
